diff --git a/LICENSE b/LICENSE
index b1a98611e..883b98df9 100644
--- a/LICENSE
+++ b/LICENSE
@@ -1,279 +1,278 @@
                                  Apache License
                            Version 2.0, January 2004
                         http://www.apache.org/licenses/
 
    TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
 
    1. Definitions.
 
       "License" shall mean the terms and conditions for use, reproduction,
       and distribution as defined by Sections 1 through 9 of this document.
 
       "Licensor" shall mean the copyright owner or entity authorized by
       the copyright owner that is granting the License.
 
       "Legal Entity" shall mean the union of the acting entity and all
       other entities that control, are controlled by, or are under common
       control with that entity. For the purposes of this definition,
       "control" means (i) the power, direct or indirect, to cause the
       direction or management of such entity, whether by contract or
       otherwise, or (ii) ownership of fifty percent (50%) or more of the
       outstanding shares, or (iii) beneficial ownership of such entity.
 
       "You" (or "Your") shall mean an individual or Legal Entity
       exercising permissions granted by this License.
 
       "Source" form shall mean the preferred form for making modifications,
       including but not limited to software source code, documentation
       source, and configuration files.
 
       "Object" form shall mean any form resulting from mechanical
       transformation or translation of a Source form, including but
       not limited to compiled object code, generated documentation,
       and conversions to other media types.
 
       "Work" shall mean the work of authorship, whether in Source or
       Object form, made available under the License, as indicated by a
       copyright notice that is included in or attached to the work
       (an example is provided in the Appendix below).
 
       "Derivative Works" shall mean any work, whether in Source or Object
       form, that is based on (or derived from) the Work and for which the
       editorial revisions, annotations, elaborations, or other modifications
       represent, as a whole, an original work of authorship. For the purposes
       of this License, Derivative Works shall not include works that remain
       separable from, or merely link (or bind by name) to the interfaces of,
       the Work and Derivative Works thereof.
 
       "Contribution" shall mean any work of authorship, including
       the original version of the Work and any modifications or additions
       to that Work or Derivative Works thereof, that is intentionally
       submitted to Licensor for inclusion in the Work by the copyright owner
       or by an individual or Legal Entity authorized to submit on behalf of
       the copyright owner. For the purposes of this definition, "submitted"
       means any form of electronic, verbal, or written communication sent
       to the Licensor or its representatives, including but not limited to
       communication on electronic mailing lists, source code control systems,
       and issue tracking systems that are managed by, or on behalf of, the
       Licensor for the purpose of discussing and improving the Work, but
       excluding communication that is conspicuously marked or otherwise
       designated in writing by the copyright owner as "Not a Contribution."
 
       "Contributor" shall mean Licensor and any individual or Legal Entity
       on behalf of whom a Contribution has been received by Licensor and
       subsequently incorporated within the Work.
 
    2. Grant of Copyright License. Subject to the terms and conditions of
       this License, each Contributor hereby grants to You a perpetual,
       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
       copyright license to reproduce, prepare Derivative Works of,
       publicly display, publicly perform, sublicense, and distribute the
       Work and such Derivative Works in Source or Object form.
 
    3. Grant of Patent License. Subject to the terms and conditions of
       this License, each Contributor hereby grants to You a perpetual,
       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
       (except as stated in this section) patent license to make, have made,
       use, offer to sell, sell, import, and otherwise transfer the Work,
       where such license applies only to those patent claims licensable
       by such Contributor that are necessarily infringed by their
       Contribution(s) alone or by combination of their Contribution(s)
       with the Work to which such Contribution(s) was submitted. If You
       institute patent litigation against any entity (including a
       cross-claim or counterclaim in a lawsuit) alleging that the Work
       or a Contribution incorporated within the Work constitutes direct
       or contributory patent infringement, then any patent licenses
       granted to You under this License for that Work shall terminate
       as of the date such litigation is filed.
 
    4. Redistribution. You may reproduce and distribute copies of the
       Work or Derivative Works thereof in any medium, with or without
       modifications, and in Source or Object form, provided that You
       meet the following conditions:
 
       (a) You must give any other recipients of the Work or
           Derivative Works a copy of this License; and
 
       (b) You must cause any modified files to carry prominent notices
           stating that You changed the files; and
 
       (c) You must retain, in the Source form of any Derivative Works
           that You distribute, all copyright, patent, trademark, and
           attribution notices from the Source form of the Work,
           excluding those notices that do not pertain to any part of
           the Derivative Works; and
 
       (d) If the Work includes a "NOTICE" text file as part of its
           distribution, then any Derivative Works that You distribute must
           include a readable copy of the attribution notices contained
           within such NOTICE file, excluding those notices that do not
           pertain to any part of the Derivative Works, in at least one
           of the following places: within a NOTICE text file distributed
           as part of the Derivative Works; within the Source form or
           documentation, if provided along with the Derivative Works; or,
           within a display generated by the Derivative Works, if and
           wherever such third-party notices normally appear. The contents
           of the NOTICE file are for informational purposes only and
           do not modify the License. You may add Your own attribution
           notices within Derivative Works that You distribute, alongside
           or as an addendum to the NOTICE text from the Work, provided
           that such additional attribution notices cannot be construed
           as modifying the License.
 
       You may add Your own copyright statement to Your modifications and
       may provide additional or different license terms and conditions
       for use, reproduction, or distribution of Your modifications, or
       for any such Derivative Works as a whole, provided Your use,
       reproduction, and distribution of the Work otherwise complies with
       the conditions stated in this License.
 
    5. Submission of Contributions. Unless You explicitly state otherwise,
       any Contribution intentionally submitted for inclusion in the Work
       by You to the Licensor shall be under the terms and conditions of
       this License, without any additional terms or conditions.
       Notwithstanding the above, nothing herein shall supersede or modify
       the terms of any separate license agreement you may have executed
       with Licensor regarding such Contributions.
 
    6. Trademarks. This License does not grant permission to use the trade
       names, trademarks, service marks, or product names of the Licensor,
       except as required for reasonable and customary use in describing the
       origin of the Work and reproducing the content of the NOTICE file.
 
    7. Disclaimer of Warranty. Unless required by applicable law or
       agreed to in writing, Licensor provides the Work (and each
       Contributor provides its Contributions) on an "AS IS" BASIS,
       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
       implied, including, without limitation, any warranties or conditions
       of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
       PARTICULAR PURPOSE. You are solely responsible for determining the
       appropriateness of using or redistributing the Work and assume any
       risks associated with Your exercise of permissions under this License.
 
    8. Limitation of Liability. In no event and under no legal theory,
       whether in tort (including negligence), contract, or otherwise,
       unless required by applicable law (such as deliberate and grossly
       negligent acts) or agreed to in writing, shall any Contributor be
       liable to You for damages, including any direct, indirect, special,
       incidental, or consequential damages of any character arising as a
       result of this License or out of the use or inability to use the
       Work (including but not limited to damages for loss of goodwill,
       work stoppage, computer failure or malfunction, or any and all
       other commercial damages or losses), even if such Contributor
       has been advised of the possibility of such damages.
 
    9. Accepting Warranty or Additional Liability. While redistributing
       the Work or Derivative Works thereof, You may choose to offer,
       and charge a fee for, acceptance of support, warranty, indemnity,
       or other liability obligations and/or rights consistent with this
       License. However, in accepting such obligations, You may act only
       on Your own behalf and on Your sole responsibility, not on behalf
       of any other Contributor, and only if You agree to indemnify,
       defend, and hold each Contributor harmless for any liability
       incurred by, or claims asserted against, such Contributor by reason
       of your accepting any such warranty or additional liability.
 
    END OF TERMS AND CONDITIONS
 
 ============================ End of Apache License V 2.0 ===================
 
 Source and binary distributions of Apache JMeter contain:
 
 - icons from the Open Icon Library http://openiconlibrary.sourceforge.net/
 For license details, please see the file: licenses/src/openiconlibrary.txt
 
 Additional source files (also included in binary distributions):
 For details, please see the files under: licenses/src
 
 * bootstrap-3.3.4.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/bootstrap
 * bootstrap-social.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/bootstrap-social
 * datatables-1.10.9.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/datatables
 * datatables-plugins.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/datatables-plugins
 * datatables-responsive-1.0.5.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/datatables-responsive
 * flot-0.8.3.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/flot
 * flot-axislabels.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/flot-axislabels
 * flot-tooltip-0.7.1.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/flot.tooltip
 * font-awesome-4.2.0.txt (OFL-1.1 | MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/font-awesome
 * holderjs.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/holderjs
 * jquery-2.1.3.txt (MIT | ./bin/report-template/sbadmin2-1.0.7/bower_components/jquery
 * metisMenu-1.1.3.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/metisMenu
 * mocha-1.17.1.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/mocha
 * morrisjs-0.5.0.txt (Simplified BSD) | ./bin/report-template/sbadmin2-1.0.7/bower_components/morrisjs
 * raphael-2.1.4.txt (MIT) | ./bin/report-template/sbadmin2-1.0.7/bower_components/raphael
 * start-bootstrap-admin2-1.0.7.txt (Apache License V2.0) | ./bin/report-template/sbadmin2-1.0.7 and not in the above folders
 
 Binary distributions additionally contain software included under various licenses,
 see below.
 
 The following software is provided under the Apache License V 2.0 (as above):
 
 - Software produced at the ASF:
 
 * apache-bsf-2.4.0.jar
 * commons-codec-1.10.jar
 * commons-collections-3.2.2.jar
 * commons-dbcp2-2.1.1.jar
-* commons-httpclient-3.1.jar
 * commons-io-2.5.jar
 * commons-jexl2-2.1.1.jar
 * commons-jexl3-3.0.jar
 * commons-lang3-3.5.jar
 * commons-math3-3.6.1.jar
 * commons-net-3.5.jar
 * commons-pool2-2.4.2.jar
 * groovy-all-2.4.8.jar
 * httpasyncclient-4.1.3.jar
 * httpclient-4.5.3.jar
 * httpcore-4.4.6.jar
 * httpcore-nio-4.4.6.jar
 * httpmime-4.5.3.jar
 * jakarta-oro-2.0.8.jar
 * jms-1.1.1.jar
 * log4j-1.2-api-2.7.jar
 * log4j-api-2.7.jar
 * log4j-core-2.7.jar
 * log4j-slf4j-impl-2.7.jar
 * serializer-2.7.2.jar
 * startbootstrap-sb-admin-2-1.0.7
 * tika-core-1.14.jar
 * tika-parsers-1.14.jar
 * xalan-2.7.2.jar
 * xerces-2.11.0.jar
 * xml-apis-1.4.01.jar
 * xmlgraphics-commons-2.1.jar
 
 - Software produced outside the ASF which is available under AL 2.0:
 
 * accessors-smart-1.1.jar
 * caffeine-2.3.5.jar
 * freemarker-2.3.23.jar (AL2.0, see licenses/bin for additional info)
 * json-path-2.2.0.jar
 * json-smart-2.2.1.jar
 * mongo-java-driver-2.11.3.jar
 * ph-commons-8.6.0.jar
 * ph-css-5.0.3.jar
 
 - Software produced outside the ASF which is available under other licenses (not AL 2.0):
 For details, please see the files under: licenses/bin
 
 * asm-5.2.jar (BSD)
 * beanshell-2.0b5.jar (SPL)
 * dnsjava-2.1.8.jar (BSD)
 * hamcrest-core-1.3.jar (BSD)
 * javamail-1.5.0-b01.jar (CDDL Version 1.0)
 * jcharts-0.7.5.jar (?)
 * jcl-over-slf4j-1.7.22.jar (MIT)
 * jsoup-1.10.2.jar (MIT)
 * jodd-core-3.8.1.jar (Simplified BSD)
 * jodd-lagarto-3.8.1.jar (Simplified BSD)
 * jodd-log-3.8.1.jar (Simplified BSD)
 * jodd-props-3.8.1.jar (Simplified BSD)
 * jtidy-r938.jar (?)
 * junit-4.12.jar (BSD)
 * rhino-1.7.7.1.jar (MPL 2.0)
 * rsyntaxtextarea-2.6.0.jar (BSD)
 * slf4j-api-1.7.22.jar (MIT)
 * slf4j-ext-1.7.22.jar (MIT)
 * xmlpull-1.1.3.1.jar (Public Domain)
 * xpp3-1.1.4c.jar (Indiana University Extreme! Lab Software License 1.1.1)
 * xstream-1.4.9.jar (BSD)
diff --git a/bin/httpclient.parameters b/bin/httpclient.parameters
deleted file mode 100644
index e269b9fca..000000000
--- a/bin/httpclient.parameters
+++ /dev/null
@@ -1,45 +0,0 @@
-#   Licensed to the Apache Software Foundation (ASF) under one or more
-#   contributor license agreements.  See the NOTICE file distributed with
-#   this work for additional information regarding copyright ownership.
-#   The ASF licenses this file to You under the Apache License, Version 2.0
-#   (the "License"); you may not use this file except in compliance with
-#   the License.  You may obtain a copy of the License at
-# 
-#       http://www.apache.org/licenses/LICENSE-2.0
-# 
-#   Unless required by applicable law or agreed to in writing, software
-#   distributed under the License is distributed on an "AS IS" BASIS,
-#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-#   See the License for the specific language governing permissions and
-#   limitations under the License.
-
-# Properties file used to define additional default Commons HttpClient parameters
-#
-# See: http://hc.apache.org/httpclient-3.x/preference-api.html
-#
-# This file is enabled by setting the JMeter property: httpclient.parameters.file
-# entries are of the form:
-#
-# property=value (for strings)
-# property$Type=value (for other types)
-#
-# where Type can be:
-# Integer
-# Long
-# Boolean
-# HttpVersion
-# 
-# N.B. Other types are not yet implemented, so not all parameters are supported
-#
-
-# Examples:
-
-#http.protocol.version$HttpVersion=1.0
-
-#http.protocol.element-charset=ISO-8859-1
-
-#http.socket.timeout$Integer=10000
-
-#http.protocol.reject-relative-redirect$Boolean=true
-
-#http.authentication.preemptive$Boolean=true
\ No newline at end of file
diff --git a/bin/jmeter.properties b/bin/jmeter.properties
index 433533de0..f2c6d5c1c 100644
--- a/bin/jmeter.properties
+++ b/bin/jmeter.properties
@@ -1,1240 +1,1222 @@
 ################################################################################
 # Apache JMeter Property file
 ################################################################################
 
 ##   Licensed to the Apache Software Foundation (ASF) under one or more
 ##   contributor license agreements.  See the NOTICE file distributed with
 ##   this work for additional information regarding copyright ownership.
 ##   The ASF licenses this file to You under the Apache License, Version 2.0
 ##   (the "License"); you may not use this file except in compliance with
 ##   the License.  You may obtain a copy of the License at
 ## 
 ##       http://www.apache.org/licenses/LICENSE-2.0
 ## 
 ##   Unless required by applicable law or agreed to in writing, software
 ##   distributed under the License is distributed on an "AS IS" BASIS,
 ##   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ##   See the License for the specific language governing permissions and
 ##   limitations under the License.
 
 ################################################################################
 #
 #                      THIS FILE SHOULD NOT BE MODIFIED
 #
 # This avoids having to re-apply the modifications when upgrading JMeter
 # Instead only user.properties should be modified:
 # 1/ copy the property you want to modify to user.properties from jmeter.properties
 # 2/ Change its value there
 #
 ################################################################################
 
 #Preferred GUI language. Comment out to use the JVM default locale's language.
 #language=en
 
 
 # Additional locale(s) to add to the displayed list.
 # The current default list is: en, fr, de, no, es, tr, ja, zh_CN, zh_TW, pl, pt_BR
 # [see JMeterMenuBar#makeLanguageMenu()]
 # The entries are a comma-separated list of language names
 #locales.add=zu
 
 
 #---------------------------------------------------------------------------
 # XML Parser
 #---------------------------------------------------------------------------
 
 # Path to a Properties file containing Namespace mapping in the form
 # prefix=Namespace
 # Example:
 # ns=http://biz.aol.com/schema/2006-12-18
 #xpath.namespace.config=
 
 #---------------------------------------------------------------------------
 # SSL configuration
 #---------------------------------------------------------------------------
 
 ## SSL System properties are now in system.properties
 
 # JMeter no longer converts javax.xxx property entries in this file into System properties.
 # These must now be defined in the system.properties file or on the command-line.
 # The system.properties file gives more flexibility.
 
 # By default, SSL session contexts are now created per-thread, rather than being shared.
 # The original behaviour can be enabled by setting the JMeter property to true
 #https.sessioncontext.shared=false
 
 # Be aware that https default protocol may vary depending on the version of JVM
 # See https://blogs.oracle.com/java-platform-group/entry/diagnosing_tls_ssl_and_https
 # See https://bz.apache.org/bugzilla/show_bug.cgi?id=58236
 # Default HTTPS protocol level:
 #https.default.protocol=TLS
 # This may need to be changed here (or in user.properties) to:
 #https.default.protocol=SSLv3
 
 # List of protocols to enable. You may have to select only a subset if you find issues with target server.
 # This is needed when server does not support Socket version negotiation, this can lead to:
 # javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
 # java.net.SocketException: Connection reset
 # see https://bz.apache.org/bugzilla/show_bug.cgi?id=54759
 #https.socket.protocols=SSLv2Hello SSLv3 TLSv1
 
 # Control if we allow reuse of cached SSL context between iterations
 # set the value to 'false' to reset the SSL context each iteration
 #https.use.cached.ssl.context=true
 
 # Start and end index to be used with keystores with many entries
 # The default is to use entry 0, i.e. the first
 #https.keyStoreStartIndex=0
 #https.keyStoreEndIndex=0
 
 #---------------------------------------------------------------------------
 # Look and Feel configuration
 #---------------------------------------------------------------------------
 
 #Classname of the Swing default UI
 #
 # The LAF classnames that are available are now displayed as ToolTip text
 # when hovering over the Options/Look and Feel selection list.
 #
 # You can either use a full class name, as shown below,
 # or one of the strings "System" or "CrossPlatform" which means
 #  JMeter will use the corresponding string returned by UIManager.get<name>LookAndFeelClassName()
 
 # LAF can be overridden by os.name (lowercased, spaces replaced by '_')
 # Sample os.name LAF:
 #jmeter.laf.windows_xp=javax.swing.plaf.metal.MetalLookAndFeel
 
 # Failing that, the OS family = os.name, but only up to first space:
 # Sample OS family LAF:
 #jmeter.laf.windows=com.sun.java.swing.plaf.windows.WindowsLookAndFeel
 
 # Mac apparently looks better with the System LAF
 jmeter.laf.mac=System
 
 # Failing that, the JMeter default laf can be defined:
 #jmeter.laf=System
 
 # If none of the above jmeter.laf properties are defined, JMeter uses the CrossPlatform LAF.
 # This is because the CrossPlatform LAF generally looks better than the System LAF.
 # See https://bz.apache.org/bugzilla/show_bug.cgi?id=52026 for details
 # N.B. the laf can be defined in user.properties.
 
 # LoggerPanel display
 # default to false
 #jmeter.loggerpanel.display=false
 
 # Enable LogViewer Panel to receive log event even if closed
 # Enabled since 2.12
 # Note this has some impact on performances, but as GUI mode must
 # not be used for Load Test it is acceptable
 #jmeter.loggerpanel.enable_when_closed=true
 
 # Max lines kept in LoggerPanel, default to 1000 chars
 # 0 means no limit
 #jmeter.loggerpanel.maxlength=1000
 
 # Interval in ms to refresh the log entries in the panel.
 #jmeter.loggerpanel.refresh_period=500
 
 # HiDPI mode (default: false)
 # Activate a 'pseudo'-hidpi mode. Allows to increase size of some UI elements
 # which are not correctly managed by JVM with high resolution screens in Linux or Windows
 #jmeter.hidpi.mode=false
 # To enable pseudo-hidpi mode change to true
 #jmeter.hidpi.mode=true
 # HiDPI scale factor
 #jmeter.hidpi.scale.factor=1.0
 # Suggested value for HiDPI
 #jmeter.hidpi.scale.factor=2.0
 
 # Toolbar display
 # Toolbar icon definitions
 #jmeter.toolbar.icons=org/apache/jmeter/images/toolbar/icons-toolbar.properties
 # Toolbar list
 #jmeter.toolbar=new,open,close,save,save_as_testplan,|,cut,copy,paste,|,expand,collapse,toggle,|,test_start,test_stop,test_shutdown,|,test_start_remote_all,test_stop_remote_all,test_shutdown_remote_all,|,test_clear,test_clear_all,|,search,search_reset,|,function_helper,help
 # Toolbar icons default size: 22x22. Available sizes are: 22x22, 32x32, 48x48
 #jmeter.toolbar.icons.size=22x22
 # Suggested value for HiDPI
 #jmeter.toolbar.icons.size=48x48
 
 # Icon definitions
 # default:
 #jmeter.icons=org/apache/jmeter/images/icon.properties
 # alternate:
 #jmeter.icons=org/apache/jmeter/images/icon_1.properties
 # Historical icon set (deprecated)
 #jmeter.icons=org/apache/jmeter/images/icon_old.properties
 
 # Tree icons default size: 19x19. Available sizes are: 19x19, 24x24, 32x32, 48x48
 # Useful for HiDPI display (see below)
 #jmeter.tree.icons.size=19x19
 # Suggested value for HiDPI screen like 3200x1800:
 #jmeter.tree.icons.size=32x32
 
 #Components to not display in JMeter GUI (GUI class name or static label)
 # These elements are deprecated and will be removed in next version: 
 # MongoDB Script, MongoDB Source Config, Monitor Results
 # BSF Elements
 not_in_menu=org.apache.jmeter.protocol.mongodb.sampler.MongoScriptSampler,org.apache.jmeter.protocol.mongodb.config.MongoSourceElement,\
     org.apache.jmeter.timers.BSFTimer,org.apache.jmeter.modifiers.BSFPreProcessor,org.apache.jmeter.extractor.BSFPostProcessor,org.apache.jmeter.assertions.BSFAssertion,\
     org.apache.jmeter.visualizers.BSFListener,org.apache.jmeter.protocol.java.sampler.BSFSampler,\
     org.apache.jmeter.protocol.http.control.gui.SoapSamplerGui
 
 # Number of items in undo history
 # Feature is disabled by default (0) due to known and not fixed bugs:
 # https://bz.apache.org/bugzilla/show_bug.cgi?id=57043
 # https://bz.apache.org/bugzilla/show_bug.cgi?id=57039
 # https://bz.apache.org/bugzilla/show_bug.cgi?id=57040
 # Set it to a number > 0 (25 can be a good default)
 # The bigger it is, the more it consumes memory
 #undo.history.size=0
 
 # Hotkeys to add JMeter components, will add elements when you press Ctrl+0 .. Ctrl+9 (Command+0 .. Command+9 on Mac)
 gui.quick_0=ThreadGroupGui
 gui.quick_1=HttpTestSampleGui
 gui.quick_2=RegexExtractorGui
 gui.quick_3=AssertionGui
 gui.quick_4=ConstantTimerGui
 gui.quick_5=TestActionGui
 gui.quick_6=JSR223PostProcessor
 gui.quick_7=JSR223PreProcessor
 gui.quick_8=DebugSampler
 gui.quick_9=ViewResultsFullVisualizer
 
 
 #---------------------------------------------------------------------------
 # JMX Backup configuration
 #---------------------------------------------------------------------------
 #Enable auto backups of the .jmx file when a test plan is saved.
 #When enabled, before the .jmx is saved, it will be backed up to the directory pointed
 #by the jmeter.gui.action.save.backup_directory property (see below). Backup file names are built
 #after the jmx file being saved. For example, saving test-plan.jmx will create a test-plan-000012.jmx
 #in the backup directory provided that the last created backup file is test-plan-000011.jmx.
 #Default value is true indicating that auto backups are enabled
 #jmeter.gui.action.save.backup_on_save=true
 
 #Set the backup directory path where JMX backups will be created upon save in the GUI.
 #If not set (what it defaults to) then backup files will be created in
 #a sub-directory of the JMeter base installation. The default directory is ${JMETER_HOME}/backups
 #If set and the directory does not exist, it will be created.
 #jmeter.gui.action.save.backup_directory=
 
 #Set the maximum time (in hours) that backup files should be preserved since the save time.
 #By default no expiration time is set which means we keep backups for ever.
 #jmeter.gui.action.save.keep_backup_max_hours=0
 
 #Set the maximum number of backup files that should be preserved. By default 10 backups will be preserved.
 #Setting this to zero will cause the backups to not being deleted (unless keep_backup_max_hours is set to a non zero value)
 #jmeter.gui.action.save.keep_backup_max_count=10
 
 
 #---------------------------------------------------------------------------
 # Remote hosts and RMI configuration
 #---------------------------------------------------------------------------
 
 # Remote Hosts - comma delimited
 remote_hosts=127.0.0.1
 #remote_hosts=localhost:1099,localhost:2010
 
 # RMI port to be used by the server (must start rmiregistry with same port)
 #server_port=1099
 
 # To change the port to (say) 1234:
 # On the server(s)
 # - set server_port=1234
 # - start rmiregistry with port 1234
 # On Windows this can be done by:
 # SET SERVER_PORT=1234
 # JMETER-SERVER
 #
 # On Unix:
 # SERVER_PORT=1234 jmeter-server
 #
 # On the client:
 # - set remote_hosts=server:1234
 
 # Parameter that controls the RMI port used by the RemoteSampleListenerImpl (The Controler)
 # Default value is 0 which means port is randomly assigned
 # You may need to open Firewall port on the Controller machine
 #client.rmi.localport=0
 
 # When distributed test is starting, there may be several attempts to initialize
 # remote engines. By default, only single try is made. Increase following property
 # to make it retry for additional times
 #client.tries=1
 
 # If there is initialization retries, following property sets delay between attempts
 #client.retries_delay=5000
 
 # When all initialization tries was made, test will fail if some remote engines are failed
 # Set following property to true to ignore failed nodes and proceed with test 
 #client.continue_on_fail=false
 
 # To change the default port (1099) used to access the server:
 #server.rmi.port=1234
 
 # To use a specific port for the JMeter server engine, define
 # the following property before starting the server:
 #server.rmi.localport=4000
 
 # From JMeter 2.3.1, the jmeter server creates the RMI registry as part of the server process.
 # To stop the server creating the RMI registry:
 #server.rmi.create=false
 
 # From JMeter 2.3.1, define the following property to cause JMeter to exit after the first test
 #server.exitaftertest=true
 
 #---------------------------------------------------------------------------
 #         Include Controller
 #---------------------------------------------------------------------------
 
 # Prefix used by IncludeController when building file name
 #includecontroller.prefix=
 
 #---------------------------------------------------------------------------
 # HTTP Java configuration
 #---------------------------------------------------------------------------
 
 # Number of connection retries performed by HTTP Java sampler before giving up
 # 0 means no retry since version 3.0
 #http.java.sampler.retries=0
 
 #---------------------------------------------------------------------------
-# Following properties apply to both Commons and Apache HttpClient
+# Following properties apply to Apache HttpClient
 #---------------------------------------------------------------------------
 
 # set the socket timeout (or use the parameter http.socket.timeout) 
-# for AJP Sampler and HttpClient3 implementation.
-# Note for HttpClient3 implementation it is better to use GUI to set timeout 
-# or use http.socket.timeout in httpclient.parameters
+# for AJP Sampler implementation.
 # Value is in milliseconds
 #httpclient.timeout=0
 # 0 == no timeout
 
 # Set the http version (defaults to 1.1)
 #httpclient.version=1.1 (or use the parameter http.protocol.version)
 
 # Define characters per second > 0 to emulate slow connections
 #httpclient.socket.http.cps=0
 #httpclient.socket.https.cps=0
 
 #Enable loopback protocol
 #httpclient.loopback=true
 
 # Define the local host address to be used for multi-homed hosts
 #httpclient.localaddress=1.2.3.4
 
 #---------------------------------------------------------------------------
 # AuthManager Kerberos configuration
 #---------------------------------------------------------------------------
 
 # AuthManager Kerberos configuration
 # Name of application module used in jaas.conf
 #kerberos_jaas_application=JMeter  
 
 # Should ports be stripped from urls before constructing SPNs
 # for SPNEGO authentication
 #kerberos.spnego.strip_port=true
 
 #---------------------------------------------------------------------------
 # Apache HttpComponents HTTPClient configuration (HTTPClient4)
 #---------------------------------------------------------------------------
 
 # define a properties file for overriding Apache HttpClient parameters
 # Uncomment this line if you put anything in hc.parameters file
 #hc.parameters.file=hc.parameters
 
 # Preemptively send Authorization Header when BASIC auth is used
 #httpclient4.auth.preemptive=true
 
 # Number of retries to attempt (default 0)
 #httpclient4.retrycount=0
 
 # Idle connection timeout (Milliseconds) to apply if the server does not send
 # Keep-Alive headers (default 0)
 # Set this > 0 to compensate for servers that don't send a Keep-Alive header
 # If <= 0, idle timeout will only apply if the server sends a Keep-Alive header
 #httpclient4.idletimeout=0
 
 # Check connections if the elapsed time (Milliseconds) since the last 
 # use of the connection exceed this value
 #httpclient4.validate_after_inactivity=1700
 
 # TTL (in Milliseconds) represents an absolute value. 
 # No matter what, the connection will not be re-used beyond its TTL. 
 #httpclient4.time_to_live=2000
 
 # Max size in bytes of PUT body to retain in result sampler. Bigger results will be clipped.
 #httpclient4.max_body_retain_size=32768
 
 #---------------------------------------------------------------------------
-# Apache HttpComponents Commons HTTPClient configuration (HTTPClient 3.1)
-#                            DEPRECATED
-#---------------------------------------------------------------------------
-
-# define a properties file for overriding Commons HttpClient parameters
-# See: http://hc.apache.org/httpclient-3.x/preference-api.html
-# Uncomment this line if you put anything in httpclient.parameters file
-#httpclient.parameters.file=httpclient.parameters
-
-# Number of retries to attempt (default 0)
-#httpclient3.retrycount=0
-
-#---------------------------------------------------------------------------
 # HTTP Cache Manager configuration
 #---------------------------------------------------------------------------
 #
 # Space or comma separated list of methods that can be cached
 #cacheable_methods=GET
 # N.B. This property is currently a temporary solution for Bug 56162
 
 # Since 2.12, JMeter does not create anymore a Sample Result with 204 response 
 # code for a resource found in cache which is inline with what browser do.
 #cache_manager.cached_resource_mode=RETURN_NO_SAMPLE
 
 # You can choose between 3 modes:
 # RETURN_NO_SAMPLE (default)
 # RETURN_200_CACHE
 # RETURN_CUSTOM_STATUS
 
 # Those mode have the following behaviours:
 # RETURN_NO_SAMPLE : this mode returns no Sample Result, it has no additional configuration
 # RETURN_200_CACHE : this mode will return Sample Result with response code to 200 and response message to "(ex cache)", you can modify response message by setting 
 # RETURN_200_CACHE.message=(ex cache)
 # RETURN_CUSTOM_STATUS : This mode lets you select what response code and message you want to return, if you use this mode you need to set those properties
 # RETURN_CUSTOM_STATUS.code=
 # RETURN_CUSTOM_STATUS.message=
 
 #---------------------------------------------------------------------------
 # Results file configuration
 #---------------------------------------------------------------------------
 
 # This section helps determine how result data will be saved.
 # The commented out values are the defaults.
 
 # legitimate values: xml, csv, db.  Only xml and csv are currently supported.
 #jmeter.save.saveservice.output_format=csv
 
 
 # true when field should be saved; false otherwise
 
 # assertion_results_failure_message only affects CSV output
 #jmeter.save.saveservice.assertion_results_failure_message=true
 #
 # legitimate values: none, first, all
 #jmeter.save.saveservice.assertion_results=none
 #
 #jmeter.save.saveservice.data_type=true
 #jmeter.save.saveservice.label=true
 #jmeter.save.saveservice.response_code=true
 # response_data is not currently supported for CSV output
 #jmeter.save.saveservice.response_data=false
 # Save ResponseData for failed samples
 #jmeter.save.saveservice.response_data.on_error=false
 #jmeter.save.saveservice.response_message=true
 #jmeter.save.saveservice.successful=true
 #jmeter.save.saveservice.thread_name=true
 #jmeter.save.saveservice.time=true
 #jmeter.save.saveservice.subresults=true
 #jmeter.save.saveservice.assertions=true
 #jmeter.save.saveservice.latency=true
+# Only available with HttpClient4
 #jmeter.save.saveservice.connect_time=true
 #jmeter.save.saveservice.samplerData=false
 #jmeter.save.saveservice.responseHeaders=false
 #jmeter.save.saveservice.requestHeaders=false
 #jmeter.save.saveservice.encoding=false
 #jmeter.save.saveservice.bytes=true
 # Only available with HttpClient4
 #jmeter.save.saveservice.sent_bytes=true
 #jmeter.save.saveservice.url=false
 #jmeter.save.saveservice.filename=false
 #jmeter.save.saveservice.hostname=false
 #jmeter.save.saveservice.thread_counts=true
 #jmeter.save.saveservice.sample_count=false
 #jmeter.save.saveservice.idle_time=true
 
 # Timestamp format - this only affects CSV output files
 # legitimate values: none, ms, or a format suitable for SimpleDateFormat
 #jmeter.save.saveservice.timestamp_format=ms
 #jmeter.save.saveservice.timestamp_format=yyyy/MM/dd HH:mm:ss.SSS
 
 # For use with Comma-separated value (CSV) files or other formats
 # where the fields' values are separated by specified delimiters.
 # Default:
 #jmeter.save.saveservice.default_delimiter=,
 # For TAB, since JMeter 2.3 one can use:
 #jmeter.save.saveservice.default_delimiter=\t
 
 # Only applies to CSV format files:
 # Print field names as first line in CSV
 #jmeter.save.saveservice.print_field_names=true
 
 # Optional list of JMeter variable names whose values are to be saved in the result data files.
 # Use commas to separate the names. For example:
 #sample_variables=SESSION_ID,REFERENCE
 # N.B. The current implementation saves the values in XML as attributes,
 # so the names must be valid XML names.
 # Versions of JMeter after 2.3.2 send the variable to all servers
 # to ensure that the correct data is available at the client.
 
 # Optional xml processing instruction for line 2 of the file:
 # Example:
 #jmeter.save.saveservice.xml_pi=<?xml-stylesheet type="text/xsl" href="../extras/jmeter-results-detail-report.xsl"?>
 # Default value:
 #jmeter.save.saveservice.xml_pi=
 
 # Prefix used to identify filenames that are relative to the current base
 #jmeter.save.saveservice.base_prefix=~/
 
 # AutoFlush on each line written in XML or CSV output
 # Setting this to true will result in less test results data loss in case of Crash
 # but with impact on performances, particularly for intensive tests (low or no pauses)
 # Since JMeter 2.10, this is false by default
 #jmeter.save.saveservice.autoflush=false
 
 #---------------------------------------------------------------------------
 # Settings that affect SampleResults
 #---------------------------------------------------------------------------
 
 # Save the start time stamp instead of the end
 # This also affects the timestamp stored in result files
 sampleresult.timestamp.start=true
 
 # Whether to use System.nanoTime() - otherwise only use System.currentTimeMillis()
 #sampleresult.useNanoTime=true
 
 # Use a background thread to calculate the nanoTime offset
 # Set this to <= 0 to disable the background thread
 #sampleresult.nanoThreadSleep=5000
 
 #---------------------------------------------------------------------------
 # Upgrade property
 #---------------------------------------------------------------------------
 
 # File that holds a record of name changes for backward compatibility issues
 upgrade_properties=/bin/upgrade.properties
 
 #---------------------------------------------------------------------------
 # JMeter Test Script recorder configuration
 #
 # N.B. The element was originally called the Proxy recorder, which is why the
 # properties have the prefix "proxy".
 #---------------------------------------------------------------------------
 
 # If the recorder detects a gap of at least 5s (default) between HTTP requests,
 # it assumes that the user has clicked a new URL
 #proxy.pause=5000
 
 # Add numeric prefix to Sampler names (default true)
 #proxy.number.requests=true
 
 # List of URL patterns that will be added to URL Patterns to exclude
 # Separate multiple lines with ;
 #proxy.excludes.suggested=.*\\.(bmp|css|js|gif|ico|jpe?g|png|swf|woff|woff2)
 
 # Change the default HTTP Sampler (currently HttpClient4)
 # Java:
 #jmeter.httpsampler=HTTPSampler
 #or
 #jmeter.httpsampler=Java
 #
-# Apache HTTPClient:
-#jmeter.httpsampler=HTTPSampler2
-#or
-#jmeter.httpsampler=HttpClient3.1
-#
 # HttpClient4.x
 #jmeter.httpsampler=HttpClient4
 
 # By default JMeter tries to be more lenient with RFC2616 redirects and allows
 # relative paths.
 # If you want to test strict conformance, set this value to true
 # When the property is true, JMeter follows http://tools.ietf.org/html/rfc3986#section-5.2
 #jmeter.httpclient.strict_rfc2616=false
 
 # Default content-type include filter to use
 #proxy.content_type_include=text/html|text/plain|text/xml
 # Default content-type exclude filter to use
 #proxy.content_type_exclude=image/.*|text/css|application/.*
 
 # Default headers to remove from Header Manager elements
 # (Cookie and Authorization are always removed)
 #proxy.headers.remove=If-Modified-Since,If-None-Match,Host
 
 # Binary content-type handling
 # These content-types will be handled by saving the request in a file:
 #proxy.binary.types=application/x-amf,application/x-java-serialized-object
 # The files will be saved in this directory:
 #proxy.binary.directory=user.dir
 # The files will be created with this file filesuffix:
 #proxy.binary.filesuffix=.binary
 
 #---------------------------------------------------------------------------
 # Test Script Recorder certificate configuration
 #---------------------------------------------------------------------------
 
 #proxy.cert.directory=<JMeter bin directory>
 #proxy.cert.file=proxyserver.jks
 #proxy.cert.type=JKS
 #proxy.cert.keystorepass=password
 #proxy.cert.keypassword=password
 #proxy.cert.factory=SunX509
 # define this property if you wish to use your own keystore
 #proxy.cert.alias=<none>
 # The default validity for certificates created by JMeter
 #proxy.cert.validity=7
 # Use dynamic key generation (if supported by JMeter/JVM)
 # If false, will revert to using a single key with no certificate
 #proxy.cert.dynamic_keys=true
 
 #---------------------------------------------------------------------------
 # Test Script Recorder miscellaneous configuration
 #---------------------------------------------------------------------------
 
 # Whether to attempt disabling of samples that resulted from redirects
 # where the generated samples use auto-redirection
 #proxy.redirect.disabling=true
 
 # SSL configuration
 #proxy.ssl.protocol=TLS
 
 #---------------------------------------------------------------------------
 # JMeter Proxy configuration
 #---------------------------------------------------------------------------
 # use command-line flags for user-name and password
 #http.proxyDomain=NTLM domain, if required by HTTPClient sampler
 
 #---------------------------------------------------------------------------
 # HTTPSampleResponse Parser configuration
 #---------------------------------------------------------------------------
 
 # Space-separated list of parser groups
 HTTPResponse.parsers=htmlParser wmlParser cssParser
 # for each parser, there should be a parser.types and a parser.className property
 
 # CSS Parser based on ph-css
 cssParser.className=org.apache.jmeter.protocol.http.parser.CssParser
 cssParser.types=text/css
 
 # CSS parser LRU cache size
 # This cache stores the URLs found in a CSS to avoid continuously parsing the CSS
 # By default the cache size is 400
 # It can be disabled by setting its value to 0
 #css.parser.cache.size=400
 
 # Let the CSS Parser ingore all css errors
 #css.parser.ignore_all_css_errors=true
 
 #---------------------------------------------------------------------------
 # HTML Parser configuration
 #---------------------------------------------------------------------------
 
 # Define the HTML parser to be used.
 # Default parser:
 # This new parser (since 2.10) should perform better than all others
 # see https://bz.apache.org/bugzilla/show_bug.cgi?id=55632
 # Do not comment this property
 htmlParser.className=org.apache.jmeter.protocol.http.parser.LagartoBasedHtmlParser
 
 # Other parsers:
 # Default parser before 2.10
 #htmlParser.className=org.apache.jmeter.protocol.http.parser.JTidyHTMLParser
 # Note that Regexp extractor may detect references that have been commented out.
 # In many cases it will work OK, but you should be aware that it may generate 
 # additional references.
 #htmlParser.className=org.apache.jmeter.protocol.http.parser.RegexpHTMLParser
 # This parser is based on JSoup, it should be the most accurate but less performant
 # than LagartoBasedHtmlParser
 #htmlParser.className=org.apache.jmeter.protocol.http.parser.JsoupBasedHtmlParser
 
 #Used by HTTPSamplerBase to associate htmlParser with content types below 
 htmlParser.types=text/html application/xhtml+xml application/xml text/xml
 
 #---------------------------------------------------------------------------
 # WML Parser configuration
 #---------------------------------------------------------------------------
 
 wmlParser.className=org.apache.jmeter.protocol.http.parser.RegexpHTMLParser
 
 #Used by HTTPSamplerBase to associate wmlParser with content types below 
 wmlParser.types=text/vnd.wap.wml 
 
 #---------------------------------------------------------------------------
 # Remote batching configuration
 #---------------------------------------------------------------------------
 # How is Sample sender implementations configured:
 # - true (default) means client configuration will be used
 # - false means server configuration will be used
 #sample_sender_client_configured=true
 
 # By default when Stripping modes are used JMeter since 3.1 will strip 
 # response even for SampleResults in error.
 # If you want to revert to previous behaviour (no stripping of Responses in error) 
 # set this property to false
 #sample_sender_strip_also_on_error=true
 
 # Remote batching support
 # Since JMeter 2.9, default is MODE_STRIPPED_BATCH, which returns samples in
 # batch mode (every 100 samples or every minute by default)
 # Note also that MODE_STRIPPED_BATCH strips response data from SampleResult, so if you need it change to
 # another mode
 # Hold retains samples until end of test (may need lots of memory)
 # Batch returns samples in batches
 # Statistical returns sample summary statistics
 # hold_samples was originally defined as a separate property,
 # but can now also be defined using mode=Hold
 # mode can also be the class name of an implementation of org.apache.jmeter.samplers.SampleSender
 #mode=Standard
 #mode=Batch
 #mode=Hold
 #mode=Statistical
 #Set to true to key statistical samples on threadName rather than threadGroup
 #key_on_threadname=false
 #mode=Stripped
 #mode=StrippedBatch
 #mode=org.example.load.MySampleSender
 #
 #num_sample_threshold=100
 # Value is in milliseconds
 #time_threshold=60000
 #
 # Asynchronous sender; uses a queue and background worker process to return the samples
 #mode=Asynch
 # default queue size
 #asynch.batch.queue.size=100
 # Same as Asynch but strips response data from SampleResult
 #mode=StrippedAsynch
 #
 # DiskStore: as for Hold mode, but serialises the samples to disk, rather than saving in memory
 #mode=DiskStore
 # Same as DiskStore but strips response data from SampleResult
 #mode=StrippedDiskStore
 # Note: the mode is currently resolved on the client; 
 # other properties (e.g. time_threshold) are resolved on the server.
 
 # To set the Monitor Health Visualiser buffer size, enter the desired value
 # monitor.buffer.size=800
 
 #---------------------------------------------------------------------------
 # JDBC Request configuration
 #---------------------------------------------------------------------------
 
 # String used to indicate a null value
 #jdbcsampler.nullmarker=]NULL[
 #
 # Max size of BLOBs and CLOBs to store in JDBC sampler. Result will be cut off
 #jdbcsampler.max_retain_result_size=65536
 
 #---------------------------------------------------------------------------
 # OS Process Sampler configuration
 #---------------------------------------------------------------------------
 # Polling to see if process has finished its work, used when a timeout is configured on sampler
 #os_sampler.poll_for_timeout=100
 
 #---------------------------------------------------------------------------
 # TCP Sampler configuration
 #---------------------------------------------------------------------------
 
 # The default handler class
 #tcp.handler=TCPClientImpl
 #
 # eolByte = byte value for end of line
 # set this to a value outside the range -128 to +127 to skip eol checking
 #tcp.eolByte=1000
 #
 # TCP Charset, used by org.apache.jmeter.protocol.tcp.sampler.TCPClientImpl
 # default to Platform defaults charset as returned by Charset.defaultCharset().name()
 #tcp.charset=
 #
 # status.prefix and suffix = strings that enclose the status response code
 #tcp.status.prefix=Status=
 #tcp.status.suffix=.
 #
 # status.properties = property file to convert codes to messages
 #tcp.status.properties=mytestfiles/tcpstatus.properties
 
 # The length prefix used by LengthPrefixedBinaryTCPClientImpl implementation
 # defaults to 2 bytes.
 #tcp.binarylength.prefix.length=2
 
 #---------------------------------------------------------------------------
 # Summariser - Generate Summary Results - configuration (mainly applies to non-GUI mode)
 #---------------------------------------------------------------------------
 #
 # Comment the following property to disable the default non-GUI summariser
 # [or change the value to rename it]
 # (applies to non-GUI mode only)
 summariser.name=summary
 #
 # interval between summaries (in seconds) default 30 seconds
 #summariser.interval=30
 #
 # Write messages to log file
 #summariser.log=true
 #
 # Write messages to System.out
 #summariser.out=true
 
 # Ignore SampleResults generated by TransactionControllers
 # defaults to true 
 #summariser.ignore_transaction_controller_sample_result=true
 
 
 #---------------------------------------------------------------------------
 # Aggregate Report and Aggregate Graph - configuration
 #---------------------------------------------------------------------------
 #
 # Percentiles to display in reports
 # Can be float value between 0 and 100
 # First percentile to display, defaults to 90%
 #aggregate_rpt_pct1=90
 # Second percentile to display, defaults to 95%
 #aggregate_rpt_pct2=95
 # Second percentile to display, defaults to 99%
 #aggregate_rpt_pct3=99
 
 #---------------------------------------------------------------------------
 # BackendListener - configuration
 #---------------------------------------------------------------------------
 #
 # Backend metrics window mode (fixed=fixed-size window, timed=time boxed) 
 #backend_metrics_window_mode=fixed
 # Backend metrics sliding window size for Percentiles, Min, Max
 #backend_metrics_window=100
 
 # Backend metrics sliding window size for Percentiles, Min, Max 
 # when backend_metrics_window_mode is timed
 # Setting this value too high can lead to OOM 
 #backend_metrics_large_window=5000
 
 ########################
 # Graphite Backend
 ########################
 # Send interval in second 
 # Defaults to 1 second
 #backend_graphite.send_interval=1
 
 ########################
 # Influx Backend
 ########################
 
 # Send interval in second 
 # Defaults to 5 seconds
 #backend_influxdb.send_interval=5
 #Influxdb timeouts
 #backend_influxdb.connection_timeout=1000
 #backend_influxdb.socket_timeout=3000
 #backend_influxdb.connection_request_timeout=100
 
 #---------------------------------------------------------------------------
 # BeanShell configuration
 #---------------------------------------------------------------------------
 
 # BeanShell Server properties
 #
 # Define the port number as non-zero to start the http server on that port
 #beanshell.server.port=9000
 # The telnet server will be started on the next port
 
 #
 # Define the server initialisation file
 beanshell.server.file=../extras/startup.bsh
 
 #
 # Define a file to be processed at startup
 # This is processed using its own interpreter.
 #beanshell.init.file=
 
 #
 # Define the intialisation files for BeanShell Sampler, Function and other BeanShell elements
 # N.B. Beanshell test elements do not share interpreters.
 #      Each element in each thread has its own interpreter.
 #      This is retained between samples.
 #beanshell.sampler.init=BeanShellSampler.bshrc
 #beanshell.function.init=BeanShellFunction.bshrc
 #beanshell.assertion.init=BeanShellAssertion.bshrc
 #beanshell.listener.init=etc
 #beanshell.postprocessor.init=etc
 #beanshell.preprocessor.init=etc
 #beanshell.timer.init=etc
 
 # The file BeanShellListeners.bshrc contains sample definitions
 # of Test and Thread Listeners.
 
 #---------------------------------------------------------------------------
 # Groovy function
 #---------------------------------------------------------------------------
 
 #Path to Groovy file containing utility functions to make available to __groovy function
 #groovy.utilities=
 
 # Example 
 #groovy.utilities=bin/utility.groovy
 
 #---------------------------------------------------------------------------
 # MailerModel configuration
 #---------------------------------------------------------------------------
 
 # Number of successful samples before a message is sent
 #mailer.successlimit=2
 #
 # Number of failed samples before a message is sent
 #mailer.failurelimit=2
 
 #---------------------------------------------------------------------------
 # CSVRead configuration
 #---------------------------------------------------------------------------
 
 # CSVRead delimiter setting (default ",")
 # Make sure that there are no trailing spaces or tabs after the delimiter
 # characters, or these will be included in the list of valid delimiters
 #csvread.delimiter=,
 #csvread.delimiter=;
 #csvread.delimiter=!
 #csvread.delimiter=~
 # The following line has a tab after the =
 #csvread.delimiter=	
 
 #---------------------------------------------------------------------------
 # __time() function configuration
 #
 # The properties below can be used to redefine the default formats
 #---------------------------------------------------------------------------
 #time.YMD=yyyyMMdd
 #time.HMS=HHmmss
 #time.YMDHMS=yyyyMMdd-HHmmss
 #time.USER1=
 #time.USER2=
 
 #---------------------------------------------------------------------------
 # CSV DataSet configuration
 #---------------------------------------------------------------------------
 
 # String to return at EOF (if recycle not used)
 #csvdataset.eofstring=<EOF>
 
 #---------------------------------------------------------------------------
 # LDAP Sampler configuration
 #---------------------------------------------------------------------------
 # Maximum number of search results returned by a search that will be sorted
 # to guarantee a stable ordering (if more results then this limit are returned
 # then no sorting is done). Set to 0 to turn off all sorting, in which case
 # "Equals" response assertions will be very likely to fail against search results.
 #
 #ldapsampler.max_sorted_results=1000
  
 # Number of characters to log for each of three sections (starting matching section, diff section,
 #   ending matching section where not all sections will appear for all diffs) diff display when an Equals
 #   assertion fails. So a value of 100 means a maximum of 300 characters of diff text will be displayed
 #   (+ a number of extra characters like "..." and "[[["/"]]]" which are used to decorate it).
 #assertion.equals_section_diff_len=100
 # test written out to log to signify start/end of diff delta
 #assertion.equals_diff_delta_start=[[[
 #assertion.equals_diff_delta_end=]]]
 
 #---------------------------------------------------------------------------
 # Miscellaneous configuration
 #---------------------------------------------------------------------------
 
 # If defined, then start the mirror server on the port
 #mirror.server.port=8081
 
 # ORO PatternCacheLRU size
 #oro.patterncache.size=1000
 
 #TestBeanGui
 #
 #propertyEditorSearchPath=null
 
 # Turn expert mode on/off: expert mode will show expert-mode beans and properties
 #jmeter.expertMode=true
 
 # Max size of bytes stored in memory per SampleResult
 # Ensure you don't exceed max capacity of a Java Array and remember 
 # that the higher it is, the higher JMeter will consume heap
 # Defaults to 10MB
 #httpsampler.max_bytes_to_store_per_request=10485760
 
 # Max size of buffer in bytes used when reading responses
 # Defaults to 64k
 #httpsampler.max_buffer_size=66560
 
 # Maximum redirects to follow in a single sequence (default 20)
 #httpsampler.max_redirects=20
 # Maximum frame/iframe nesting depth (default 5)
 #httpsampler.max_frame_depth=5
 
 # Revert to BUG 51939 behaviour (no separate container for embedded resources) by setting the following false:
 #httpsampler.separate.container=true
 
 # If embedded resources download fails due to missing resources or other reasons, if this property is true
 # Parent sample will not be marked as failed 
 #httpsampler.ignore_failed_embedded_resources=false
 
 #keep alive time for the parallel download threads (in seconds)
 #httpsampler.parallel_download_thread_keepalive_inseconds=60
 
 # Don't keep the embedded resources response data : just keep the size and the md5
 # default to false
 #httpsampler.embedded_resources_use_md5=false
 
 # List of extra HTTP methods that should be available in select box
 #httpsampler.user_defined_methods=VERSION-CONTROL,REPORT,CHECKOUT,CHECKIN,UNCHECKOUT,MKWORKSPACE,UPDATE,LABEL,MERGE,BASELINE-CONTROL,MKACTIVITY
 
 # The encoding to be used if none is provided (default ISO-8859-1)
 #sampleresult.default.encoding=ISO-8859-1
 
 # Network response size calculation method
 # Use real size: number of bytes for response body return by webserver
 # (i.e. the network bytes received for response)
 # if set to false, the (uncompressed) response data size will used (default before 2.5)
 # Include headers: add the headers size in real size
 #sampleresult.getbytes.body_real_size=true
 #sampleresult.getbytes.headers_size=true
 
 # CookieManager behaviour - should cookies with null/empty values be deleted?
 # Default is true. Use false to revert to original behaviour
 #CookieManager.delete_null_cookies=true
 
 # CookieManager behaviour - should variable cookies be allowed?
 # Default is true. Use false to revert to original behaviour
 #CookieManager.allow_variable_cookies=true
 
 # CookieManager behaviour - should Cookies be stored as variables?
 # Default is false
 #CookieManager.save.cookies=false
 
 # CookieManager behaviour - prefix to add to cookie name before storing it as a variable
 # Default is COOKIE_; to remove the prefix, define it as one or more spaces
 #CookieManager.name.prefix=
  
 # CookieManager behaviour - check received cookies are valid before storing them?
 # Default is true. Use false to revert to previous behaviour
 #CookieManager.check.cookies=true
 
 # Netscape HTTP Cookie file
 cookies=cookies
 
 # Ability to switch to Nashorn as default Javascript Engine used by IfController and __javaScript function
 # JMeter works as following:
 # - JDK >= 8 and javascript.use_rhino=false or not set : Nashorn
 # - JDK >= 8 and javascript.use_rhino=true: Rhino
 # If you want to use Rhino on JDK8, set this property to true
 #javascript.use_rhino=false
 
 # Number of milliseconds to wait for a thread to stop
 #jmeterengine.threadstop.wait=5000
 
 #Whether to invoke System.exit(0) in server exit code after stopping RMI
 #jmeterengine.remote.system.exit=false
 
 # Whether to call System.exit(1) on failure to stop threads in non-GUI mode.
 # This only takes effect if the test was explicitly requested to stop.
 # If this is disabled, it may be necessary to kill the JVM externally
 #jmeterengine.stopfail.system.exit=true
 
 # Whether to force call System.exit(0) at end of test in non-GUI mode, even if
 # there were no failures and the test was not explicitly asked to stop.
 # Without this, the JVM may never exit if there are other threads spawned by
 # the test which never exit.
 #jmeterengine.force.system.exit=false
 
 # How long to pause (in ms) in the daemon thread before reporting that the JVM has failed to exit.
 # If the value is <= 0, the JMeter does not start the daemon thread 
 #jmeter.exit.check.pause=2000
 
 # If running non-GUI, then JMeter listens on the following port for a shutdown message.
 # To disable, set the port to 1000 or less.
 #jmeterengine.nongui.port=4445
 #
 # If the initial port is busy, keep trying until this port is reached
 # (to disable searching, set the value less than or equal to the .port property)
 #jmeterengine.nongui.maxport=4455
 
 # How often to check for shutdown during ramp-up (milliseconds)
 #jmeterthread.rampup.granularity=1000
 
 #Should JMeter expand the tree when loading a test plan?
 # default value is false since JMeter 2.7
 #onload.expandtree=false
 
 #JSyntaxTextArea configuration
 #jsyntaxtextarea.wrapstyleword=true
 #jsyntaxtextarea.linewrap=true
 #jsyntaxtextarea.codefolding=true
 # Set 0 to disable undo feature in JSyntaxTextArea
 #jsyntaxtextarea.maxundos=50
 # Change the font on the (JSyntax) Text Areas. (Useful for HiDPI screens)
 #jsyntaxtextarea.font.family=Hack
 #jsyntaxtextarea.font.size=14
 
 # Set this to false to disable the use of JSyntaxTextArea for the Console Logger panel 
 #loggerpanel.usejsyntaxtext=true
 
 # Maximum size of HTML page that can be displayed; default=10 mbytes
 # Set to 0 to disable the size check and display the whole response
 #view.results.tree.max_size=10485760
 
 # Order of Renderers in View Results Tree
 # Note full class names should be used for non jmeter core renderers
 # For JMeter core renderers, class names start with . and are automatically
 # prefixed with org.apache.jmeter.visualizers
 view.results.tree.renderers_order=.RenderAsText,.RenderAsRegexp,.RenderAsCssJQuery,.RenderAsXPath,org.apache.jmeter.extractor.json.render.RenderAsJsonRenderer,.RenderAsHTML,.RenderAsHTMLFormatted,.RenderAsHTMLWithEmbedded,.RenderAsDocument,.RenderAsJSON,.RenderAsXML
 
 # Period after which the results tree should be refreshed
 #view.results.tree.update_period=500
 
 # Maximum number of results in the results tree
 # Set to 0 to store all results (might consume a lot of memory)
 #view.results.tree.max_results=500
 
 # Maximum size of Document that can be parsed by Tika engine; defaut=10 * 1024 * 1024 (10MB)
 # Set to 0 to disable the size check
 #document.max_size=0
 
 #JMS options
 # Enable the following property to stop JMS Point-to-Point Sampler from using
 # the properties java.naming.security.[principal|credentials] when creating the queue connection
 #JMSSampler.useSecurity.properties=false
 
 # Set the following value to true in order to skip the delete confirmation dialogue
 #confirm.delete.skip=false
 
 # Used by JSR223 elements
 # Size of compiled scripts cache
 #jsr223.compiled_scripts_cache_size=100
 
 #---------------------------------------------------------------------------
 # Classpath configuration
 #---------------------------------------------------------------------------
 
 # List of directories (separated by ;) to search for additional JMeter plugin classes,
 # for example new GUI elements and samplers.
 # Any jar file in such a directory will be automatically included,
 # jar files in sub directories are ignored.
 # The given value is in addition to any jars found in the lib/ext directory.
 # Do not use this for utility or plugin dependency jars.
 #search_paths=/app1/lib;/app2/lib
 
 # List of directories that JMeter will search for utility and plugin dependency classes.
 # Use your platform path separator to separate multiple paths.
 # Any jar file in such a directory will be automatically included,
 # jar files in sub directories are ignored.
 # The given value is in addition to any jars found in the lib directory.
 # All entries will be added to the class path of the system class loader
 # and also to the path of the JMeter internal loader.
 # Paths with spaces may cause problems for the JVM
 #user.classpath=../classes;../lib
 
 # List of directories (separated by ;) that JMeter will search for utility
 # and plugin dependency classes.
 # Any jar file in such a directory will be automatically included,
 # jar files in sub directories are ignored.
 # The given value is in addition to any jars found in the lib directory
 # or given by the user.classpath property.
 # All entries will be added to the path of the JMeter internal loader only.
 # For plugin dependencies this property should be used instead of user.classpath.
 #plugin_dependency_paths=../dependencies/lib;../app1/;../app2/
 
 # Classpath finder
 # ================
 # The classpath finder currently needs to load every single JMeter class to find
 # the classes it needs.
 # For non-GUI mode, it's only necessary to scan for Function classes, but all classes
 # are still loaded.
 # All current Function classes include ".function." in their name,
 # and none include ".gui." in the name, so the number of unwanted classes loaded can be
 # reduced by checking for these. However, if a valid function class name does not match
 # these restrictions, it will not be loaded. If problems are encountered, then comment
 # or change the following properties:
 classfinder.functions.contain=.functions.
 classfinder.functions.notContain=.gui.
 
 
 #---------------------------------------------------------------------------
 # Additional property files to load
 #---------------------------------------------------------------------------
 
 # Should JMeter automatically load additional JMeter properties?
 # File name to look for (comment to disable)
 user.properties=user.properties
 
 # Should JMeter automatically load additional system properties?
 # File name to look for (comment to disable)
 system.properties=system.properties
 
 # Comma separated list of files that contain reference to templates and their description
 # Path must be relative to JMeter root folder
 #template.files=/bin/templates/templates.xml
 
 
 #---------------------------------------------------------------------------
 # Thread Group Validation feature
 #---------------------------------------------------------------------------
 
 # Validation is the name of the feature used to rapidly validate a Thread Group runs fine
 # Default implementation is org.apache.jmeter.gui.action.validation.TreeClonerForValidation
 # It runs validation without timers, with 1 thread, 1 iteration and Startup Delay set to 0
 # You can implement your own policy that must extend org.apache.jmeter.engine.TreeCloner
 # JMeter will instantiate it and use it to create the Tree used to run validation on Thread Group
 #testplan_validation.tree_cloner_class=org.apache.jmeter.validation.ComponentTreeClonerForValidation
 
 # Number of threads to use to validate a Thread Group
 #testplan_validation.nb_threads_per_thread_group=1
 
 # Ignore BackendListener when validating the thread group of plan
 #testplan_validation.ignore_backends=true
 
 # Ignore timers when validating the thread group of plan
 #testplan_validation.ignore_timers=true
 
 # Number of iterations to use to validate a Thread Group
 #testplan_validation.number_iterations=1
 
 # Force throuput controllers that work in percentage mode to be a 100%
 # Disabled by default
 #testplan_validation.tpc_force_100_pct=false
 
 #---------------------------------------------------------------------------
 # Think Time configuration
 #---------------------------------------------------------------------------
 
 #
 # Apply a factor on computed pauses by the following Timers:
 # - Gaussian Random Timer
 # - Uniform Random Timer
 # - Poisson Random Timer
 #
 #timer.factor=1.0f
 
 # Default implementation that create the Timer structure to add to Test Plan
 # Implementation of interface org.apache.jmeter.gui.action.thinktime.ThinkTimeCreator
 #think_time_creator.impl=org.apache.jmeter.thinktime.DefaultThinkTimeCreator
 
 # Default Timer GUI class added to Test Plan by DefaultThinkTimeCreator
 #think_time_creator.default_timer_implementation=org.apache.jmeter.timers.gui.UniformRandomTimerGui
 
 # Default constant pause of Timer 
 #think_time_creator.default_constant_pause=1000
 
 # Default range pause of Timer
 #think_time_creator.default_range=100
 
 
 # Change this parameter if you want to override the APDEX satisfaction threshold.
 jmeter.reportgenerator.apdex_satisfied_threshold=500
 
 # Change this parameter if you want to override the APDEX tolerance threshold.
 jmeter.reportgenerator.apdex_tolerated_threshold=1500
 
 #---------------------------------------------------------------------------
 # Naming Policy configuration
 #---------------------------------------------------------------------------
 
 # Prefix used when naming elements
 #naming_policy.prefix=
 # Suffix used when naming elements
 #naming_policy.suffix=
 
 # Implementation of interface org.apache.jmeter.gui.action.TreeNodeNamingPolicy
 #naming_policy.impl=org.apache.jmeter.gui.action.impl.DefaultTreeNodeNamingPolicy
+	
\ No newline at end of file
diff --git a/bin/saveservice.properties b/bin/saveservice.properties
index 7b4b0100a..762d92096 100644
--- a/bin/saveservice.properties
+++ b/bin/saveservice.properties
@@ -1,408 +1,412 @@
 #---------------------------------------------------------
 #         SAVESERVICE PROPERTIES - JMETER INTERNAL USE ONLY
 #---------------------------------------------------------
 
 ##   Licensed to the Apache Software Foundation (ASF) under one or more
 ##   contributor license agreements.  See the NOTICE file distributed with
 ##   this work for additional information regarding copyright ownership.
 ##   The ASF licenses this file to You under the Apache License, Version 2.0
 ##   (the "License"); you may not use this file except in compliance with
 ##   the License.  You may obtain a copy of the License at
 ## 
 ##       http://www.apache.org/licenses/LICENSE-2.0
 ## 
 ##   Unless required by applicable law or agreed to in writing, software
 ##   distributed under the License is distributed on an "AS IS" BASIS,
 ##   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ##   See the License for the specific language governing permissions and
 ##   limitations under the License.
 
 # This file is used to define how XStream (de-)serializes classnames
 # in JMX test plan files.
 
 #      FOR JMETER INTERNAL USE ONLY
 
 #---------------------------------------------------------
 
 # N.B. To ensure backward compatibility, please do NOT change or delete any entries
 
 # New entries can be added as necessary.
 #
 # Note that keys starting with an underscore are special,
 # and are not used as aliases.
 #
 # Please keep the entries in alphabetical order within the sections
 # to reduce the likelihood of duplicates
 #
 # version number of this file is now computed by a sha1 sum, so no need for
 # an explicit _file_version property anymore.
 #
 # For this sha1 sum we ignore every newline character. It can be computed
 # by the following command:
 #
 # cat bin/saveservice.properties | perl -ne 'chomp; print' | sha1sum
 #
 # Be aware, that every change in this file will change the sha1 sum!
 #
 # Conversion version (for JMX output files)
 # Must be updated if the file has been changed since the previous release
 # Format is:
 # Save service version=JMeter version at which change occured
 # 1.7 = 2.1.1
 # 1.8 = 2.1.2
 # (Some version updates were missed here...)
 # 2.0 = 2.3.1
 # 2.1 = 2.3.2
 # (Some version updates were missed here...)
 # 2.2 = 2.6
 # 2.3 = 2.7
 # 2.4 = 2.9
 # 2.5 = 2.10
 # 2.6 = 2.11
 # 2.7 = 2.12
 # 2.8 = 2.13
 # 2.9 = 2.14
 # 3.1 = 3.1
 # 3.2 = 3.2
 _version=3.2
 #
 #
 # Character set encoding used to read and write JMeter XML files and CSV results
 #
 _file_encoding=UTF-8
 #
 #---------------------------------------------------------
 #
 # The following properties are used to create aliases
 # [Must all start with capital letter]
 #
 AccessLogSampler=org.apache.jmeter.protocol.http.sampler.AccessLogSampler
 AjpSampler=org.apache.jmeter.protocol.http.sampler.AjpSampler
 AjpSamplerGui=org.apache.jmeter.protocol.http.control.gui.AjpSamplerGui
 AnchorModifier=org.apache.jmeter.protocol.http.modifier.AnchorModifier
 AnchorModifierGui=org.apache.jmeter.protocol.http.modifier.gui.AnchorModifierGui
 Argument=org.apache.jmeter.config.Argument
 Arguments=org.apache.jmeter.config.Arguments
 ArgumentsPanel=org.apache.jmeter.config.gui.ArgumentsPanel
 AssertionGui=org.apache.jmeter.assertions.gui.AssertionGui
 AssertionVisualizer=org.apache.jmeter.visualizers.AssertionVisualizer
 AuthManager=org.apache.jmeter.protocol.http.control.AuthManager
 Authorization=org.apache.jmeter.protocol.http.control.Authorization
 AuthPanel=org.apache.jmeter.protocol.http.gui.AuthPanel
 BackendListener=org.apache.jmeter.visualizers.backend.BackendListener
 BackendListenerGui=org.apache.jmeter.visualizers.backend.BackendListenerGui
 BeanShellAssertion=org.apache.jmeter.assertions.BeanShellAssertion
 BeanShellAssertionGui=org.apache.jmeter.assertions.gui.BeanShellAssertionGui
 BeanShellListener=org.apache.jmeter.visualizers.BeanShellListener
 BeanShellPostProcessor=org.apache.jmeter.extractor.BeanShellPostProcessor
 BeanShellPreProcessor=org.apache.jmeter.modifiers.BeanShellPreProcessor
 BeanShellSampler=org.apache.jmeter.protocol.java.sampler.BeanShellSampler
 BeanShellSamplerGui=org.apache.jmeter.protocol.java.control.gui.BeanShellSamplerGui
 BeanShellTimer=org.apache.jmeter.timers.BeanShellTimer
 BSFAssertion=org.apache.jmeter.assertions.BSFAssertion
 BSFListener=org.apache.jmeter.visualizers.BSFListener
 BSFPreProcessor=org.apache.jmeter.modifiers.BSFPreProcessor
 BSFPostProcessor=org.apache.jmeter.extractor.BSFPostProcessor
 BSFSampler=org.apache.jmeter.protocol.java.sampler.BSFSampler
 BSFSamplerGui=org.apache.jmeter.protocol.java.control.gui.BSFSamplerGui
 BSFTimer=org.apache.jmeter.timers.BSFTimer
 CacheManager=org.apache.jmeter.protocol.http.control.CacheManager
 CacheManagerGui=org.apache.jmeter.protocol.http.gui.CacheManagerGui
 CompareAssertion=org.apache.jmeter.assertions.CompareAssertion
 ComparisonVisualizer=org.apache.jmeter.visualizers.ComparisonVisualizer
 ConfigTestElement=org.apache.jmeter.config.ConfigTestElement
 ConstantThroughputTimer=org.apache.jmeter.timers.ConstantThroughputTimer
 ConstantTimer=org.apache.jmeter.timers.ConstantTimer
 ConstantTimerGui=org.apache.jmeter.timers.gui.ConstantTimerGui
 Cookie=org.apache.jmeter.protocol.http.control.Cookie
 CookieManager=org.apache.jmeter.protocol.http.control.CookieManager
 CookiePanel=org.apache.jmeter.protocol.http.gui.CookiePanel
 CounterConfig=org.apache.jmeter.modifiers.CounterConfig
 CriticalSectionController=org.apache.jmeter.control.CriticalSectionController
 CriticalSectionControllerGui=org.apache.jmeter.control.gui.CriticalSectionControllerGui
 CounterConfigGui=org.apache.jmeter.modifiers.gui.CounterConfigGui
 CSVDataSet=org.apache.jmeter.config.CSVDataSet
 DebugPostProcessor=org.apache.jmeter.extractor.DebugPostProcessor
 DebugSampler=org.apache.jmeter.sampler.DebugSampler
 # removed in 3.1, class was deleted in r1763837
 DistributionGraphVisualizer=org.apache.jmeter.visualizers.DistributionGraphVisualizer
 DNSCacheManager=org.apache.jmeter.protocol.http.control.DNSCacheManager
 DNSCachePanel=org.apache.jmeter.protocol.http.gui.DNSCachePanel
 DurationAssertion=org.apache.jmeter.assertions.DurationAssertion
 DurationAssertionGui=org.apache.jmeter.assertions.gui.DurationAssertionGui
 # Should really have been defined as floatProp to agree with other properties
 # No point changing this now
 FloatProperty=org.apache.jmeter.testelement.property.FloatProperty
 ForeachController=org.apache.jmeter.control.ForeachController
 ForeachControlPanel=org.apache.jmeter.control.gui.ForeachControlPanel
 FtpConfigGui=org.apache.jmeter.protocol.ftp.config.gui.FtpConfigGui
 FTPSampler=org.apache.jmeter.protocol.ftp.sampler.FTPSampler
 FtpTestSamplerGui=org.apache.jmeter.protocol.ftp.control.gui.FtpTestSamplerGui
 GaussianRandomTimer=org.apache.jmeter.timers.GaussianRandomTimer
 GaussianRandomTimerGui=org.apache.jmeter.timers.gui.GaussianRandomTimerGui
 GenericController=org.apache.jmeter.control.GenericController
 GraphAccumVisualizer=org.apache.jmeter.visualizers.GraphAccumVisualizer
 GraphVisualizer=org.apache.jmeter.visualizers.GraphVisualizer
 Header=org.apache.jmeter.protocol.http.control.Header
 HeaderManager=org.apache.jmeter.protocol.http.control.HeaderManager
 HeaderPanel=org.apache.jmeter.protocol.http.gui.HeaderPanel
 HTMLAssertion=org.apache.jmeter.assertions.HTMLAssertion
 HTMLAssertionGui=org.apache.jmeter.assertions.gui.HTMLAssertionGui
 HTTPArgument=org.apache.jmeter.protocol.http.util.HTTPArgument
 HTTPArgumentsPanel=org.apache.jmeter.protocol.http.gui.HTTPArgumentsPanel
 HTTPFileArg=org.apache.jmeter.protocol.http.util.HTTPFileArg
 HTTPFileArgs=org.apache.jmeter.protocol.http.util.HTTPFileArgs
 HttpDefaultsGui=org.apache.jmeter.protocol.http.config.gui.HttpDefaultsGui
 HtmlExtractor=org.apache.jmeter.extractor.HtmlExtractor
 HtmlExtractorGui=org.apache.jmeter.extractor.gui.HtmlExtractorGui
 # removed in r1039684, probably not released. Not present in r322831 or since.
 #HttpGenericSampler=org.apache.jmeter.protocol.http.sampler.HttpGenericSampler
 # removed in r1039684, probably not released. Not present in r322831 or since.
 #HttpGenericSamplerGui=org.apache.jmeter.protocol.http.control.gui.HttpGenericSamplerGui
 HttpMirrorControl=org.apache.jmeter.protocol.http.control.HttpMirrorControl
 HttpMirrorControlGui=org.apache.jmeter.protocol.http.control.gui.HttpMirrorControlGui
 # r397955 - removed test class. Keep as commented entry for info only.
 #HTTPNullSampler=org.apache.jmeter.protocol.http.sampler.HTTPNullSampler
 # Merge previous 2 HTTP samplers into one
 HTTPSampler_=org.apache.jmeter.protocol.http.sampler.HTTPSampler
 HTTPSampler2_=org.apache.jmeter.protocol.http.sampler.HTTPSampler2
 HTTPSamplerProxy,HTTPSampler,HTTPSampler2=org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy
 # Merge GUIs
 HttpTestSampleGui,HttpTestSampleGui2=org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui
 #HttpTestSampleGui2=org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui2
 IfController=org.apache.jmeter.control.IfController
 IfControllerPanel=org.apache.jmeter.control.gui.IfControllerPanel
 IncludeController=org.apache.jmeter.control.IncludeController
 IncludeControllerGui=org.apache.jmeter.control.gui.IncludeControllerGui
 InterleaveControl=org.apache.jmeter.control.InterleaveControl
 InterleaveControlGui=org.apache.jmeter.control.gui.InterleaveControlGui
 JavaConfig=org.apache.jmeter.protocol.java.config.JavaConfig
 JavaConfigGui=org.apache.jmeter.protocol.java.config.gui.JavaConfigGui
 JavaSampler=org.apache.jmeter.protocol.java.sampler.JavaSampler
 JavaTest=org.apache.jmeter.protocol.java.test.JavaTest
 JavaTestSamplerGui=org.apache.jmeter.protocol.java.control.gui.JavaTestSamplerGui
 JDBCDataSource=org.apache.jmeter.protocol.jdbc.config.DataSourceElement
 JDBCPostProcessor=org.apache.jmeter.protocol.jdbc.processor.JDBCPostProcessor
 JDBCPreProcessor=org.apache.jmeter.protocol.jdbc.processor.JDBCPreProcessor
 JDBCSampler=org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler
 # Renamed to JMSSamplerGui; keep original entry for backwards compatibility
 JMSConfigGui=org.apache.jmeter.protocol.jms.control.gui.JMSConfigGui
 JMSProperties=org.apache.jmeter.protocol.jms.sampler.JMSProperties
 JMSProperty=org.apache.jmeter.protocol.jms.sampler.JMSProperty
 JMSPublisherGui=org.apache.jmeter.protocol.jms.control.gui.JMSPublisherGui
 JMSSampler=org.apache.jmeter.protocol.jms.sampler.JMSSampler
 JMSSamplerGui=org.apache.jmeter.protocol.jms.control.gui.JMSSamplerGui
 JMSSubscriberGui=org.apache.jmeter.protocol.jms.control.gui.JMSSubscriberGui
 JSONPostProcessor=org.apache.jmeter.extractor.json.jsonpath.JSONPostProcessor
 JSONPostProcessorGui=org.apache.jmeter.extractor.json.jsonpath.gui.JSONPostProcessorGui
 # Removed in r545311 as Jndi no longer present; keep for compat.
 JndiDefaultsGui=org.apache.jmeter.protocol.jms.control.gui.JndiDefaultsGui
 JSR223Assertion=org.apache.jmeter.assertions.JSR223Assertion
 JSR223Listener=org.apache.jmeter.visualizers.JSR223Listener
 JSR223PostProcessor=org.apache.jmeter.extractor.JSR223PostProcessor
 JSR223PreProcessor=org.apache.jmeter.modifiers.JSR223PreProcessor
 JSR223Sampler=org.apache.jmeter.protocol.java.sampler.JSR223Sampler
 JSR223Timer=org.apache.jmeter.timers.JSR223Timer
 JUnitSampler=org.apache.jmeter.protocol.java.sampler.JUnitSampler
 JUnitTestSamplerGui=org.apache.jmeter.protocol.java.control.gui.JUnitTestSamplerGui
 KeystoreConfig=org.apache.jmeter.config.KeystoreConfig
 LDAPArgument=org.apache.jmeter.protocol.ldap.config.gui.LDAPArgument
 LDAPArguments=org.apache.jmeter.protocol.ldap.config.gui.LDAPArguments
 LDAPArgumentsPanel=org.apache.jmeter.protocol.ldap.config.gui.LDAPArgumentsPanel
 LdapConfigGui=org.apache.jmeter.protocol.ldap.config.gui.LdapConfigGui
 LdapExtConfigGui=org.apache.jmeter.protocol.ldap.config.gui.LdapExtConfigGui
 LDAPExtSampler=org.apache.jmeter.protocol.ldap.sampler.LDAPExtSampler
 LdapExtTestSamplerGui=org.apache.jmeter.protocol.ldap.control.gui.LdapExtTestSamplerGui
 LDAPSampler=org.apache.jmeter.protocol.ldap.sampler.LDAPSampler
 LdapTestSamplerGui=org.apache.jmeter.protocol.ldap.control.gui.LdapTestSamplerGui
 LogicControllerGui=org.apache.jmeter.control.gui.LogicControllerGui
 LoginConfig=org.apache.jmeter.config.LoginConfig
 LoginConfigGui=org.apache.jmeter.config.gui.LoginConfigGui
 LoopController=org.apache.jmeter.control.LoopController
 LoopControlPanel=org.apache.jmeter.control.gui.LoopControlPanel
 MailerModel=org.apache.jmeter.reporters.MailerModel
 MailerResultCollector=org.apache.jmeter.reporters.MailerResultCollector
 MailerVisualizer=org.apache.jmeter.visualizers.MailerVisualizer
 MailReaderSampler=org.apache.jmeter.protocol.mail.sampler.MailReaderSampler
 MailReaderSamplerGui=org.apache.jmeter.protocol.mail.sampler.gui.MailReaderSamplerGui
 MD5HexAssertion=org.apache.jmeter.assertions.MD5HexAssertion
 MD5HexAssertionGUI=org.apache.jmeter.assertions.gui.MD5HexAssertionGUI
 ModuleController=org.apache.jmeter.control.ModuleController
 ModuleControllerGui=org.apache.jmeter.control.gui.ModuleControllerGui
 MongoScriptSampler=org.apache.jmeter.protocol.mongodb.sampler.MongoScriptSampler
 MongoSourceElement=org.apache.jmeter.protocol.mongodb.config.MongoSourceElement
 
 # removed in 3.2, class was deleted in r
 MonitorHealthVisualizer=org.apache.jmeter.visualizers.MonitorHealthVisualizer
 
 NamePanel=org.apache.jmeter.gui.NamePanel
 ObsoleteGui=org.apache.jmeter.config.gui.ObsoleteGui
 OnceOnlyController=org.apache.jmeter.control.OnceOnlyController
 OnceOnlyControllerGui=org.apache.jmeter.control.gui.OnceOnlyControllerGui
 # removed in 3.0, class was deleted in r1722962
 ParamMask=org.apache.jmeter.protocol.http.modifier.ParamMask
 # removed in 3.0, class was deleted in r1722757
 ParamModifier=org.apache.jmeter.protocol.http.modifier.ParamModifier
 # removed in 3.0, class was deleted in r1722757
 ParamModifierGui=org.apache.jmeter.protocol.http.modifier.gui.ParamModifierGui
 PoissonRandomTimer=org.apache.jmeter.timers.PoissonRandomTimer
 PoissonRandomTimerGui=org.apache.jmeter.timers.gui.PoissonRandomTimerGui
 PropertyControlGui=org.apache.jmeter.visualizers.PropertyControlGui
 ProxyControl=org.apache.jmeter.protocol.http.proxy.ProxyControl
 ProxyControlGui=org.apache.jmeter.protocol.http.proxy.gui.ProxyControlGui
 PublisherSampler=org.apache.jmeter.protocol.jms.sampler.PublisherSampler
 RandomControlGui=org.apache.jmeter.control.gui.RandomControlGui
 RandomController=org.apache.jmeter.control.RandomController
 RandomOrderController=org.apache.jmeter.control.RandomOrderController
 RandomOrderControllerGui=org.apache.jmeter.control.gui.RandomOrderControllerGui
 RandomVariableConfig=org.apache.jmeter.config.RandomVariableConfig
 RecordController=org.apache.jmeter.protocol.http.control.gui.RecordController
 RecordingController=org.apache.jmeter.protocol.http.control.RecordingController
 # removed in r1039684, class was deleted in r580452
 ReflectionThreadGroup=org.apache.jmeter.threads.ReflectionThreadGroup
 RegexExtractor=org.apache.jmeter.extractor.RegexExtractor
 RegexExtractorGui=org.apache.jmeter.extractor.gui.RegexExtractorGui
 RegExUserParameters=org.apache.jmeter.protocol.http.modifier.RegExUserParameters
 RegExUserParametersGui=org.apache.jmeter.protocol.http.modifier.gui.RegExUserParametersGui
 RemoteListenerWrapper=org.apache.jmeter.samplers.RemoteListenerWrapper
 RemoteSampleListenerWrapper=org.apache.jmeter.samplers.RemoteSampleListenerWrapper
 RemoteTestListenerWrapper=org.apache.jmeter.samplers.RemoteTestListenerWrapper
 RemoteThreadsListenerWrapper=org.apache.jmeter.threads.RemoteThreadsListenerWrapper
 ResponseAssertion=org.apache.jmeter.assertions.ResponseAssertion
 RespTimeGraphVisualizer=org.apache.jmeter.visualizers.RespTimeGraphVisualizer
 ResultAction=org.apache.jmeter.reporters.ResultAction
 ResultActionGui=org.apache.jmeter.reporters.gui.ResultActionGui
 ResultCollector=org.apache.jmeter.reporters.ResultCollector
 ResultSaver=org.apache.jmeter.reporters.ResultSaver
 ResultSaverGui=org.apache.jmeter.reporters.gui.ResultSaverGui
 RunTime=org.apache.jmeter.control.RunTime
 RunTimeGui=org.apache.jmeter.control.gui.RunTimeGui
 SampleSaveConfiguration=org.apache.jmeter.samplers.SampleSaveConfiguration
 SampleTimeout=org.apache.jmeter.modifiers.SampleTimeout
 SampleTimeoutGui=org.apache.jmeter.modifiers.gui.SampleTimeoutGui
 SimpleConfigGui=org.apache.jmeter.config.gui.SimpleConfigGui
 SimpleDataWriter=org.apache.jmeter.visualizers.SimpleDataWriter
 SizeAssertion=org.apache.jmeter.assertions.SizeAssertion
 SizeAssertionGui=org.apache.jmeter.assertions.gui.SizeAssertionGui
 SMIMEAssertion=org.apache.jmeter.assertions.SMIMEAssertionTestElement
 SMIMEAssertionGui=org.apache.jmeter.assertions.gui.SMIMEAssertionGui
 SmtpSampler=org.apache.jmeter.protocol.smtp.sampler.SmtpSampler
 SmtpSamplerGui=org.apache.jmeter.protocol.smtp.sampler.gui.SmtpSamplerGui
+
+# removed in 3.2, class was deleted in r
 SoapSampler=org.apache.jmeter.protocol.http.sampler.SoapSampler
+# removed in 3.2, class was deleted in r
 SoapSamplerGui=org.apache.jmeter.protocol.http.control.gui.SoapSamplerGui
+
 # removed in 3.1, class was deleted in r1763837
 SplineVisualizer=org.apache.jmeter.visualizers.SplineVisualizer
 # Originally deleted in r397955 as class is obsolete; needed for compat.
 SqlConfigGui=org.apache.jmeter.protocol.jdbc.config.gui.SqlConfigGui
 StaticHost=org.apache.jmeter.protocol.http.control.StaticHost
 StatGraphVisualizer=org.apache.jmeter.visualizers.StatGraphVisualizer
 StatVisualizer=org.apache.jmeter.visualizers.StatVisualizer
 SubscriberSampler=org.apache.jmeter.protocol.jms.sampler.SubscriberSampler
 SubstitutionElement=org.apache.jmeter.assertions.SubstitutionElement
 Summariser=org.apache.jmeter.reporters.Summariser
 SummariserGui=org.apache.jmeter.reporters.gui.SummariserGui
 SummaryReport=org.apache.jmeter.visualizers.SummaryReport
 SwitchController=org.apache.jmeter.control.SwitchController
 SwitchControllerGui=org.apache.jmeter.control.gui.SwitchControllerGui
 SyncTimer=org.apache.jmeter.timers.SyncTimer
 SystemSampler=org.apache.jmeter.protocol.system.SystemSampler
 SystemSamplerGui=org.apache.jmeter.protocol.system.gui.SystemSamplerGui
 TableVisualizer=org.apache.jmeter.visualizers.TableVisualizer
 TCPConfigGui=org.apache.jmeter.protocol.tcp.config.gui.TCPConfigGui
 TCPSampler=org.apache.jmeter.protocol.tcp.sampler.TCPSampler
 TCPSamplerGui=org.apache.jmeter.protocol.tcp.control.gui.TCPSamplerGui
 TestAction=org.apache.jmeter.sampler.TestAction
 TestActionGui=org.apache.jmeter.sampler.gui.TestActionGui
 TestBeanGUI=org.apache.jmeter.testbeans.gui.TestBeanGUI
 TestFragmentController=org.apache.jmeter.control.TestFragmentController
 TestFragmentControllerGui=org.apache.jmeter.control.gui.TestFragmentControllerGui
 TestPlan=org.apache.jmeter.testelement.TestPlan
 TestPlanGui=org.apache.jmeter.control.gui.TestPlanGui
 ThreadGroup=org.apache.jmeter.threads.ThreadGroup
 ThreadGroupGui=org.apache.jmeter.threads.gui.ThreadGroupGui
 PostThreadGroup=org.apache.jmeter.threads.PostThreadGroup
 PostThreadGroupGui=org.apache.jmeter.threads.gui.PostThreadGroupGui
 SetupThreadGroup=org.apache.jmeter.threads.SetupThreadGroup
 SetupThreadGroupGui=org.apache.jmeter.threads.gui.SetupThreadGroupGui
 ThroughputController=org.apache.jmeter.control.ThroughputController
 ThroughputControllerGui=org.apache.jmeter.control.gui.ThroughputControllerGui
 TransactionController=org.apache.jmeter.control.TransactionController
 TransactionControllerGui=org.apache.jmeter.control.gui.TransactionControllerGui
 TransactionSampler=org.apache.jmeter.control.TransactionSampler
 UniformRandomTimer=org.apache.jmeter.timers.UniformRandomTimer
 UniformRandomTimerGui=org.apache.jmeter.timers.gui.UniformRandomTimerGui
 URLRewritingModifier=org.apache.jmeter.protocol.http.modifier.URLRewritingModifier
 URLRewritingModifierGui=org.apache.jmeter.protocol.http.modifier.gui.URLRewritingModifierGui
 UserParameterModifier=org.apache.jmeter.protocol.http.modifier.UserParameterModifier
 UserParameterModifierGui=org.apache.jmeter.protocol.http.modifier.gui.UserParameterModifierGui
 UserParameters=org.apache.jmeter.modifiers.UserParameters
 UserParametersGui=org.apache.jmeter.modifiers.gui.UserParametersGui
 ViewResultsFullVisualizer=org.apache.jmeter.visualizers.ViewResultsFullVisualizer
 # removed in 3.0, class was deleted in r1722757
 WebServiceSampler=org.apache.jmeter.protocol.http.sampler.WebServiceSampler
 # removed in 3.0, class was deleted in r1722757
 WebServiceSamplerGui=org.apache.jmeter.protocol.http.control.gui.WebServiceSamplerGui
 WhileController=org.apache.jmeter.control.WhileController
 WhileControllerGui=org.apache.jmeter.control.gui.WhileControllerGui
 WorkBench=org.apache.jmeter.testelement.WorkBench
 WorkBenchGui=org.apache.jmeter.control.gui.WorkBenchGui
 XMLAssertion=org.apache.jmeter.assertions.XMLAssertion
 XMLAssertionGui=org.apache.jmeter.assertions.gui.XMLAssertionGui
 XMLSchemaAssertion=org.apache.jmeter.assertions.XMLSchemaAssertion
 XMLSchemaAssertionGUI=org.apache.jmeter.assertions.gui.XMLSchemaAssertionGUI
 XPathAssertion=org.apache.jmeter.assertions.XPathAssertion
 XPathAssertionGui=org.apache.jmeter.assertions.gui.XPathAssertionGui
 XPathExtractor=org.apache.jmeter.extractor.XPathExtractor
 XPathExtractorGui=org.apache.jmeter.extractor.gui.XPathExtractorGui
 #
 # Properties - all start with lower case letter and end with Prop
 #
 boolProp=org.apache.jmeter.testelement.property.BooleanProperty
 collectionProp=org.apache.jmeter.testelement.property.CollectionProperty
 doubleProp=org.apache.jmeter.testelement.property.DoubleProperty
 elementProp=org.apache.jmeter.testelement.property.TestElementProperty
 # see above - already defined as FloatProperty
 #floatProp=org.apache.jmeter.testelement.property.FloatProperty
 intProp=org.apache.jmeter.testelement.property.IntegerProperty
 longProp=org.apache.jmeter.testelement.property.LongProperty
 mapProp=org.apache.jmeter.testelement.property.MapProperty
 objProp=org.apache.jmeter.testelement.property.ObjectProperty
 stringProp=org.apache.jmeter.testelement.property.StringProperty
 #
 # Other - must start with a lower case letter (and not end with Prop)
 # (otherwise they could clash with the initial set of aliases)
 #
 hashTree=org.apache.jorphan.collections.ListedHashTree
 jmeterTestPlan=org.apache.jmeter.save.ScriptWrapper
 sample=org.apache.jmeter.samplers.SampleResult
 httpSample=org.apache.jmeter.protocol.http.sampler.HTTPSampleResult
 statSample=org.apache.jmeter.samplers.StatisticalSampleResult
 testResults=org.apache.jmeter.save.TestResultWrapper
 assertionResult=org.apache.jmeter.assertions.AssertionResult
 
 # removed in 3.2, class was deleted in r
 monitorStats=org.apache.jmeter.visualizers.MonitorStats
 sampleEvent=org.apache.jmeter.samplers.SampleEvent
 #
 # Converters to register.  Must start line with '_'
 # If the converter is a collection of subitems, set equal to "collection"
 # If the converter needs to know the class mappings but is not a collection of 
 #      subitems, set it equal to "mapping"
 _org.apache.jmeter.protocol.http.sampler.HTTPSamplerBaseConverter=collection
 _org.apache.jmeter.protocol.http.util.HTTPResultConverter=collection
 _org.apache.jmeter.save.converters.BooleanPropertyConverter=
 _org.apache.jmeter.save.converters.IntegerPropertyConverter=
 _org.apache.jmeter.save.converters.LongPropertyConverter=
 _org.apache.jmeter.save.converters.MultiPropertyConverter=collection
 _org.apache.jmeter.save.converters.SampleEventConverter=
 _org.apache.jmeter.save.converters.SampleResultConverter=collection
 _org.apache.jmeter.save.converters.SampleSaveConfigurationConverter=collection
 _org.apache.jmeter.save.converters.StringPropertyConverter=
 _org.apache.jmeter.save.converters.HashTreeConverter=collection
 _org.apache.jmeter.save.converters.TestElementConverter=collection
 _org.apache.jmeter.save.converters.TestElementPropertyConverter=collection
 _org.apache.jmeter.save.converters.TestResultWrapperConverter=collection
 _org.apache.jmeter.save.ScriptWrapperConverter=mapping
 #
 #	Remember to update the _version entry
 #
diff --git a/bin/upgrade.properties b/bin/upgrade.properties
index 7ce7baf32..78fdf5da3 100644
--- a/bin/upgrade.properties
+++ b/bin/upgrade.properties
@@ -1,118 +1,123 @@
 # Class, property and value upgrade equivalences.
 
 ##   Licensed to the Apache Software Foundation (ASF) under one or more
 ##   contributor license agreements.  See the NOTICE file distributed with
 ##   this work for additional information regarding copyright ownership.
 ##   The ASF licenses this file to You under the Apache License, Version 2.0
 ##   (the "License"); you may not use this file except in compliance with
 ##   the License.  You may obtain a copy of the License at
 ## 
 ##       http://www.apache.org/licenses/LICENSE-2.0
 ## 
 ##   Unless required by applicable law or agreed to in writing, software
 ##   distributed under the License is distributed on an "AS IS" BASIS,
 ##   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ##   See the License for the specific language governing permissions and
 ##   limitations under the License.
 
 #
 # Format is as follows --
 # for renamed test element & GUI classes:
 # 		old.class.Name=new.class.Name
 # 		old.class.Name|guiClassName=new.class.Name
 #		(e.g. for ConfigTestElement)
 #
 # for renamed / deleted properties:
 #		class.Name/Old.propertyName=newPropertyName
 #		if newPropertyName is omitted, then property is deleted
 #
 # for renamed values:
 #		old.class.Name.old.propertyName/oldValue=newValue
 #
 
 org.apache.jmeter.protocol.http.config.gui.UrlConfigGui=org.apache.jmeter.protocol.http.config.gui.HttpDefaultsGui
 org.apache.jmeter.assertions.Assertion=org.apache.jmeter.assertions.ResponseAssertion
 org.apache.jmeter.protocol.http.sampler.HTTPSamplerFull=org.apache.jmeter.protocol.http.sampler.HTTPSampler
 org.apache.jmeter.control.gui.RecordController=org.apache.jmeter.protocol.http.control.gui.RecordController
 
 org.apache.jmeter.timers.gui.ConstantThroughputTimerGui=org.apache.jmeter.testbeans.gui.TestBeanGUI
 org.apache.jmeter.timers.ConstantThroughputTimer/ConstantThroughputTimer.throughput=throughput
 
 org.apache.jmeter.protocol.jdbc.control.gui.JdbcTestSampleGui=org.apache.jmeter.testbeans.gui.TestBeanGUI
 org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler/JDBCSampler.query=query
 #org.apache.jmeter.protocol.jdbc.sampler.JDBCSampler.JDBCSampler.dataSource/NULL=
 
 # Convert DBconfig
 org.apache.jmeter.protocol.jdbc.config.gui.DbConfigGui=org.apache.jmeter.testbeans.gui.TestBeanGUI
 org.apache.jmeter.config.ConfigTestElement|org.apache.jmeter.protocol.jdbc.config.gui.DbConfigGui=org.apache.jmeter.protocol.jdbc.config.DataSourceElement
 org.apache.jmeter.protocol.jdbc.config.DataSourceElement/JDBCSampler.url=dbUrl
 org.apache.jmeter.protocol.jdbc.config.DataSourceElement/JDBCSampler.driver=driver
 org.apache.jmeter.protocol.jdbc.config.DataSourceElement/JDBCSampler.query=query
 org.apache.jmeter.protocol.jdbc.config.DataSourceElement/ConfigTestElement.username=username
 org.apache.jmeter.protocol.jdbc.config.DataSourceElement/ConfigTestElement.password=password
 
 # Convert PoolConfig
 org.apache.jmeter.protocol.jdbc.config.gui.PoolConfigGui=org.apache.jmeter.testbeans.gui.TestBeanGUI
 org.apache.jmeter.config.ConfigTestElement|org.apache.jmeter.protocol.jdbc.config.gui.PoolConfigGui=org.apache.jmeter.protocol.jdbc.config.DataSourceElement
 org.apache.jmeter.protocol.jdbc.config.DataSourceElement/JDBCSampler.connections=
 org.apache.jmeter.protocol.jdbc.config.DataSourceElement/JDBCSampler.connPoolClass=
 org.apache.jmeter.protocol.jdbc.config.DataSourceElement/JDBCSampler.maxuse=poolMax
 
 # SQL Config
 org.apache.jmeter.config.ConfigTestElement/JDBCSampler.query=query
 org.apache.jmeter.protocol.http.control.Header/TestElement.name=Header.name
 
 # Upgrade AccessLogSampler
 org.apache.jmeter.protocol.http.control.gui.AccessLogSamplerGui=org.apache.jmeter.testbeans.gui.TestBeanGUI
 org.apache.jmeter.protocol.http.sampler.AccessLogSampler/AccessLogSampler.log_file=logFile
 org.apache.jmeter.protocol.http.sampler.AccessLogSampler/HTTPSampler.port=portString
 #Is the following used now?
 #org.apache.jmeter.protocol.http.sampler.AccessLogSampler/AccessLogSampler.generator_class_name=
 #Looks to be a new field
 #filterClassName
 org.apache.jmeter.protocol.http.sampler.AccessLogSampler/HTTPSampler.domain=domain
 org.apache.jmeter.protocol.http.sampler.AccessLogSampler/AccessLogSampler.parser_class_name=parserClassName
 org.apache.jmeter.protocol.http.sampler.AccessLogSampler/HTTPSampler.image_parser=imageParsing
 
 # Renamed class
 org.apache.jmeter.protocol.jms.control.gui.JMSConfigGui=org.apache.jmeter.protocol.jms.control.gui.JMSSamplerGui
 
 # These classes have been deleted; there's no defined replacement
 org.apache.jmeter.protocol.jdbc.config.gui.SqlConfigGui=org.apache.jmeter.config.gui.ObsoleteGui
 org.apache.jmeter.protocol.jms.control.gui.JndiDefaultsGui=org.apache.jmeter.config.gui.ObsoleteGui
 # Should probably map to something other than ObsoleteGui...
 org.apache.jmeter.threads.ReflectionThreadGroup=org.apache.jmeter.config.gui.ObsoleteGui
 
 # Convert BSFSamplerGui
 org.apache.jmeter.protocol.java.control.gui.BSFSamplerGui=org.apache.jmeter.testbeans.gui.TestBeanGUI
 org.apache.jmeter.protocol.java.sampler.BSFSampler/BSFSampler.filename=filename
 org.apache.jmeter.protocol.java.sampler.BSFSampler/BSFSampler.language=scriptLanguage
 org.apache.jmeter.protocol.java.sampler.BSFSampler/BSFSampler.parameters=parameters
 org.apache.jmeter.protocol.java.sampler.BSFSampler/BSFSampler.query=script
 
 # Obsolete Http user Parameters modifier test element
 # Note: ConfigTestElement is the test element associated with ObsoleteGui
 org.apache.jmeter.protocol.http.modifier.UserParameterModifier=org.apache.jmeter.config.ConfigTestElement
 org.apache.jmeter.protocol.http.modifier.gui.UserParameterModifierGui=org.apache.jmeter.config.gui.ObsoleteGui
 
 # Obsolete Graph Full Results listener
 org.apache.jmeter.visualizers.GraphAccumVisualizer=org.apache.jmeter.config.gui.ObsoleteGui
 # removed in 3.0, class was deleted in r1722757
 org.apache.jmeter.protocol.http.sampler.WebServiceSampler=org.apache.jmeter.config.ConfigTestElement
 # removed in 3.0, class was deleted in r1722757
 org.apache.jmeter.protocol.http.control.gui.WebServiceSamplerGui=org.apache.jmeter.config.gui.ObsoleteGui
 # removed in 3.0, class was deleted in r1722757
 org.apache.jmeter.protocol.http.modifier.ParamModifier=org.apache.jmeter.config.ConfigTestElement
 # removed in 3.0, class was deleted in r1722962
 org.apache.jmeter.protocol.http.modifier.ParamMask=org.apache.jmeter.config.ConfigTestElement
 # removed in 3.0, class was deleted in r1722757
 org.apache.jmeter.protocol.http.modifier.gui.ParamModifierGui=org.apache.jmeter.config.gui.ObsoleteGui
 
 # removed in 3.1, class was deleted in r
 org.apache.jmeter.visualizers.SplineVisualizer=org.apache.jmeter.config.gui.ObsoleteGui
 # removed in 3.1 class was deleted in r
 org.apache.jmeter.visualizers.DistributionGraphVisualizer=org.apache.jmeter.config.gui.ObsoleteGui
 
 # removed in 3.2 class was deleted in r
 org.apache.jmeter.visualizers.MonitorStats=org.apache.jmeter.config.ConfigTestElement
-org.apache.jmeter.visualizers.MonitorHealthVisualizer=org.apache.jmeter.config.gui.ObsoleteGui
\ No newline at end of file
+org.apache.jmeter.visualizers.MonitorHealthVisualizer=org.apache.jmeter.config.gui.ObsoleteGui
+
+# removed in 3.2 class was deleted in r
+org.apache.jmeter.protocol.http.sampler.HTTPSampler2=org.apache.jmeter.config.ConfigTestElement
+org.apache.jmeter.protocol.http.sampler.SoapSampler=org.apache.jmeter.config.ConfigTestElement
+org.apache.jmeter.protocol.http.control.gui.SoapSamplerGui=org.apache.jmeter.config.gui.ObsoleteGui
\ No newline at end of file
diff --git a/build.properties b/build.properties
index b59f201bb..48bed4774 100644
--- a/build.properties
+++ b/build.properties
@@ -1,427 +1,422 @@
 #   Licensed to the Apache Software Foundation (ASF) under one or more
 #   contributor license agreements.  See the NOTICE file distributed with
 #   this work for additional information regarding copyright ownership.
 #   The ASF licenses this file to You under the Apache License, Version 2.0
 #   (the "License"); you may not use this file except in compliance with
 #   the License.  You may obtain a copy of the License at
 # 
 #       http://www.apache.org/licenses/LICENSE-2.0
 # 
 #   Unless required by applicable law or agreed to in writing, software
 #   distributed under the License is distributed on an "AS IS" BASIS,
 #   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 #   See the License for the specific language governing permissions and
 #   limitations under the License.
 
 #  **** External jars (not built as part of JMeter) and needed for build/release ****
 
 # N.B.
 #    When updating this file, please also update the versions in
 #    - res/maven/ApacheJMeter_parent.pom
 #    - eclipse.classpath
 #    - licenses/ - file name and contents
 #    - xdocs/changes.xml
 #
 #    Also, please update the lib/ directory ignore list
 #    [Please don't use wild-card versions, because that makes it harder to detect obsolete jars]
 
 # property name conventions:
 #
 # xxx.jar - name of the jar as used in JMeter
 #
 # The following properties are used to download the jars if necessary.
 #
 # xxx.loc - example location where the jar or zip can be found (omit trailing /)
 # xxx.md5 - MD5 hash of the jar (used to check downloads)
 #
 # xxx.zip - name of zip file (if the jar is not available as an independent download)
 # xxx.ent - the jar entry name in Zip file
 
 # Note that all the jars (apart from velocity and the Geronimo API jars)
 # are contained in the JMeter binary release.
 
 maven2.repo                 = https://repo1.maven.org/maven2
 
 accessors-smart.version     = 1.1
 accessors-smart.jar         = accessors-smart-${accessors-smart.version}.jar
 accessors-smart.loc         = ${maven2.repo}/net/minidev/accessors-smart/${accessors-smart.version}
 accessors-smart.md5         = b75cda0d7dadff9e6c20f4e7f3c3bc82
 
 apache-bsf.version          = 2.4.0
 apache-bsf.jar              = bsf-${apache-bsf.version}.jar
 apache-bsf.loc              = ${maven2.repo}/bsf/bsf/${apache-bsf.version}
 apache-bsf.md5              = 16e82d858c648962fb5c959f21959039
 
 asm.version                 = 5.2
 asm.jar                     = asm-${asm.version}.jar
 asm.loc                     = ${maven2.repo}/org/ow2/asm/asm/${asm.version}
 asm.md5                     = 8bb8efe7c0f8488c4a2d6297066632aa
 
 beanshell.version           = 2.0b5
 beanshell.jar               = bsh-${beanshell.version}.jar
 beanshell.loc               = ${maven2.repo}/org/beanshell/bsh/${beanshell.version}
 beanshell.md5               = 02F72336919D06A8491E82346E10B4D5
 
 # Bouncy Castle jars (compile and test only - not distributed)
 # Currently only needed for SMIMEAssertion
 # N.B. hashes should be obtained from the page: http://www.bouncycastle.org/checksums.html
 bcmail.version              = 1.49
 bcmail.jar                  = bcmail-jdk15on-${bcmail.version}.jar
 bcmail.loc                  = ${maven2.repo}/org/bouncycastle/bcmail-jdk15on/${bcmail.version}
 bcmail.md5                  = 25686fe5c9fc984ee7c63b8e1a3f6509
 
 bcprov.version              = 1.49
 bcprov.jar                  = bcprov-jdk15on-${bcprov.version}.jar
 bcprov.loc                  = ${maven2.repo}/org/bouncycastle/bcprov-jdk15on/${bcprov.version}
 bcprov.md5                  = 20f367d41a546f2c844314da5d97ea12
 
 bcpkix.version              = 1.49
 bcpkix.jar                  = bcpkix-jdk15on-${bcprov.version}.jar
 bcpkix.loc                  = ${maven2.repo}/org/bouncycastle/bcpkix-jdk15on/${bcprov.version}
 bcpkix.md5                  = cb025ef84fb991e14fdf62f6bef7be53
 
 caffeine.version            = 2.3.5
 caffeine.jar                = caffeine-${caffeine.version}.jar
 caffeine.loc                = ${maven2.repo}/com/github/ben-manes/caffeine/caffeine/${caffeine.version}
 caffeine.md5                = 5ff5404cc94337fd6976a06ed6f1f023
 
 commons-codec.version       = 1.10
 commons-codec.jar           = commons-codec-${commons-codec.version}.jar
 commons-codec.loc           = ${maven2.repo}/commons-codec/commons-codec/${commons-codec.version}
 commons-codec.md5           = 353cf6a2bdba09595ccfa073b78c7fcb
 
 commons-collections.version = 3.2.2
 commons-collections.jar     = commons-collections-${commons-collections.version}.jar
 commons-collections.loc     = ${maven2.repo}/commons-collections/commons-collections/${commons-collections.version}
 commons-collections.md5     = f54a8510f834a1a57166970bfc982e94
 
 commons-dbcp2.version       = 2.1.1
 commons-dbcp2.jar           = commons-dbcp2-${commons-dbcp2.version}.jar
 commons-dbcp2.loc           = ${maven2.repo}/org/apache/commons/commons-dbcp2/${commons-dbcp2.version}
 commons-dbcp2.md5           = 298897b1e785b933b0522351871cf7ae
 
-commons-httpclient.version  = 3.1
-commons-httpclient.jar      = commons-httpclient-${commons-httpclient.version}.jar
-commons-httpclient.loc      = ${maven2.repo}/commons-httpclient/commons-httpclient/${commons-httpclient.version}
-commons-httpclient.md5      = 8AD8C9229EF2D59AB9F59F7050E846A5
-
 commons-io.version          = 2.5
 commons-io.jar              = commons-io-${commons-io.version}.jar
 commons-io.loc              = ${maven2.repo}/commons-io/commons-io/${commons-io.version}
 commons-io.md5              = e2d74794fba570ec2115fb9d5b05dc9b
 
 commons-jexl2.version       = 2.1.1
 commons-jexl2.jar           = commons-jexl-${commons-jexl2.version}.jar
 commons-jexl2.loc           = ${maven2.repo}/org/apache/commons/commons-jexl/${commons-jexl2.version}
 commons-jexl2.md5           = 4ad8f5c161dd3a50e190334555675db9
 
 commons-jexl3.version       = 3.0
 commons-jexl3.jar           = commons-jexl3-${commons-jexl3.version}.jar
 commons-jexl3.loc           = ${maven2.repo}/org/apache/commons/commons-jexl3/${commons-jexl3.version}
 commons-jexl3.md5           = 81041b5b058a2ccff0046386bc7e23f8
 
 commons-lang3.version       = 3.5
 commons-lang3.jar           = commons-lang3-${commons-lang3.version}.jar
 commons-lang3.loc           = ${maven2.repo}/org/apache/commons/commons-lang3/${commons-lang3.version}
 commons-lang3.md5           = 780b5a8b72eebe6d0dbff1c11b5658fa
 
 commons-math3.version         = 3.6.1
 commons-math3.jar             = commons-math3-${commons-math3.version}.jar
 commons-math3.loc             = ${maven2.repo}/org/apache/commons/commons-math3/${commons-math3.version}
 commons-math3.md5             = 5b730d97e4e6368069de1983937c508e
 
 commons-net.version         = 3.5
 commons-net.jar             = commons-net-${commons-net.version}.jar
 commons-net.loc             = ${maven2.repo}/commons-net/commons-net/${commons-net.version}
 commons-net.md5             = 67cdd14323977fa71a21d9603b3d59b6
 
 commons-pool2.version         = 2.4.2
 commons-pool2.jar             = commons-pool2-${commons-pool2.version}.jar
 commons-pool2.loc             = ${maven2.repo}/org/apache/commons/commons-pool2/${commons-pool2.version}
 commons-pool2.md5             = 62727a85e2e1bf6a756f5571d19cc71c
 
 # dnsjava for DNSCacheManager (http://www.dnsjava.org/ BSD license)
 dnsjava.version             = 2.1.8
 dnsjava.jar                 = dnsjava-${dnsjava.version}.jar
 dnsjava.loc                 = ${maven2.repo}/dnsjava/dnsjava/${dnsjava.version}
 dnsjava.md5                 = 540f330717bca9d29c8762cf6daca443
 
 # Freemarker
 freemarker.version          = 2.3.23
 freemarker.loc               = ${maven2.repo}/org/freemarker/freemarker/${freemarker.version}
 freemarker.jar               = freemarker-${freemarker.version}.jar
 freemarker.md5               = cbb1cec300ca98eea3c855cf395d4951
 
 # Groovy
 groovy-all.version        = 2.4.8
 groovy-all.loc            = ${maven2.repo}/org/codehaus/groovy/groovy-all/${groovy-all.version}
 groovy-all.jar            = groovy-all-${groovy-all.version}.jar
 groovy-all.md5            = f44ff68e2acdd334ab93c6f326192817
 
 # hamcrest-core
 hamcrest-core.version        = 1.3
 hamcrest-core.loc            = ${maven2.repo}/org/hamcrest/hamcrest-core/${hamcrest-core.version}
 hamcrest-core.jar            = hamcrest-core-${hamcrest-core.version}.jar
 hamcrest-core.md5            = 6393363b47ddcbba82321110c3e07519
 
 # Apache HttpASyncClient 4.x
 httpasyncclient.version          = 4.1.3
 httpasyncclient.jar              = httpasyncclient-${httpasyncclient.version}.jar
 httpasyncclient.loc              = ${maven2.repo}/org/apache/httpcomponents/httpasyncclient/${httpasyncclient.version}
 httpasyncclient.md5              = 73d4a443918f4f7124339d2161e2ae54
 
 # Apache HttpClient 4.x
 httpclient.version          = 4.5.3
 #
 httpclient.jar              = httpclient-${httpclient.version}.jar
 httpclient.loc              = ${maven2.repo}/org/apache/httpcomponents/httpclient/${httpclient.version}
 httpclient.md5              = 1965ebb7aca0f9f8faaed3870d8cf689
 
 # Required for HttpClient
 httpmime.version            = 4.5.3
 httpmime.jar                = httpmime-${httpmime.version}.jar
 httpmime.loc                = ${maven2.repo}/org/apache/httpcomponents/httpmime/${httpmime.version}
 httpmime.md5                = a00b6287cab2ad554ae3cbdbe983dc88
 
 # Required for HttpClient
 httpcore.version            = 4.4.6
 httpcore.jar                = httpcore-${httpcore.version}.jar
 httpcore.loc                = ${maven2.repo}/org/apache/httpcomponents/httpcore/${httpcore.version}
 httpcore.md5                = a9fbd503e0802507efeeaffb56bbdf52
 
 # Required for HttpASyncClient 
 httpcore-nio.version            = 4.4.6
 httpcore-nio.jar                = httpcore-nio-${httpcore-nio.version}.jar
 httpcore-nio.loc                = ${maven2.repo}/org/apache/httpcomponents/httpcore-nio/${httpcore-nio.version}
 httpcore-nio.md5                = c65be15da5261ff6c18b4160b8256963
 
 jakarta-oro.version         = 2.0.8
 jakarta-oro.jar             = oro-${jakarta-oro.version}.jar
 jakarta-oro.loc             = ${maven2.repo}/oro/oro/${jakarta-oro.version}
 jakarta-oro.md5             = 42E940D5D2D822F4DC04C65053E630AB
 
 jcharts.version             = 0.7.5
 jcharts.jar                 = jcharts-${jcharts.version}.jar
 jcharts.loc                 = ${maven2.repo}/jcharts/jcharts/${jcharts.version}
 jcharts.md5                 = 13927D8077C991E7EBCD8CB284746A7A
 
 rhino.version               = 1.7.7.1
 rhino.jar                   = rhino-${rhino.version}.jar
 rhino.loc                   = ${maven2.repo}/org/mozilla/rhino/${rhino.version}
 rhino.md5                   = 5fc9c6b622cf1f669d00a3792db717e7
 
 jodd-core.version           = 3.8.1
 jodd-core.jar               = jodd-core-${jodd-core.version}.jar
 jodd-core.loc               = ${maven2.repo}/org/jodd/jodd-core/${jodd-core.version}
 jodd-core.md5               = 985682ac6be87f5dd58923b3c77bea2f
 
 jodd-lagarto.version        = 3.8.1
 jodd-lagarto.jar            = jodd-lagarto-${jodd-lagarto.version}.jar
 jodd-lagarto.loc            = ${maven2.repo}/org/jodd/jodd-lagarto/${jodd-lagarto.version}
 jodd-lagarto.md5            = ab32982d8d4e8402fbe01c963d79762b
 
 jodd-log.version            = 3.8.1
 jodd-log.jar                = jodd-log-${jodd-log.version}.jar
 jodd-log.loc                = ${maven2.repo}/org/jodd/jodd-log/${jodd-log.version}
 jodd-log.md5                = 7bad75519ef2e89d3458de0afc7fc0d0
 
 jodd-props.version          = 3.8.1
 jodd-props.jar              = jodd-props-${jodd-props.version}.jar
 jodd-props.loc              = ${maven2.repo}/org/jodd/jodd-props/${jodd-props.version}
 jodd-props.md5              = 7ac3442c0f25b6e016a5bf4b53121cf5
 
 json-path.version           = 2.2.0
 json-path.jar               = json-path-${json-path.version}.jar
 json-path.loc               = ${maven2.repo}/com/jayway/jsonpath/json-path/${json-path.version}
 json-path.md5               = 98ec1b51b19c21a32845ba3498df6629
 
 json-smart.version          = 2.2.1
 json-smart.jar              = json-smart-${json-smart.version}.jar
 json-smart.loc              = ${maven2.repo}/net/minidev/json-smart/${json-smart.version}
 json-smart.md5              = 4c82c537eb0ba92adad494283711cc11
 
 jsoup.version               = 1.10.2
 jsoup.jar                   = jsoup-${jsoup.version}.jar
 jsoup.loc                   = ${maven2.repo}/org/jsoup/jsoup/${jsoup.version}
 jsoup.md5                   = 36145fee38e79b81035787f1be296a52
 
 junit.version               = 4.12
 junit.jar                   = junit-${junit.version}.jar
 junit.loc                   = ${maven2.repo}/junit/junit/${junit.version}
 junit.md5                   = 5b38c40c97fbd0adee29f91e60405584
 
 mongo-java-driver.version   = 2.11.3
 mongo-java-driver.jar       = mongo-java-driver-${mongo-java-driver.version}.jar
 mongo-java-driver.loc       = ${maven2.repo}/org/mongodb/mongo-java-driver/${mongo-java-driver.version}
 mongo-java-driver.md5       = 90647a53231eb75715fda30759ff4ff7
 
 ph-css.version              = 5.0.3
 ph-css.jar                  = ph-css-${ph-css.version}.jar
 ph-css.loc                  = ${maven2.repo}/com/helger/ph-css/${ph-css.version}
 ph-css.md5                  = 11ebde5fd6c81b6a2bef3fd5bdaec738
 
 ph-commons.version          = 8.6.0
 ph-commons.jar              = ph-commons-${ph-commons.version}.jar
 ph-commons.loc              = ${maven2.repo}/com/helger/ph-commons/${ph-commons.version}
 ph-commons.md5              = 98910b76472deaf3b0ddc24aee63329d
 
 rsyntaxtextarea.version     = 2.6.0
 rsyntaxtextarea.jar         = rsyntaxtextarea-${rsyntaxtextarea.version}.jar
 rsyntaxtextarea.loc         = ${maven2.repo}/com/fifesoft/rsyntaxtextarea/${rsyntaxtextarea.version}
 rsyntaxtextarea.md5         = 49721d8817b4ef338df6f0087be5a015
 
 slf4j-api.version           = 1.7.22
 slf4j-api.jar               = slf4j-api-${slf4j-api.version}.jar
 slf4j-api.loc               = ${maven2.repo}/org/slf4j/slf4j-api/${slf4j-api.version}
 slf4j-api.md5               = 897d990eb5463fd5288092524c105769
 
 slf4j-ext.version           = 1.7.22
 slf4j-ext.jar               = slf4j-ext-${slf4j-ext.version}.jar
 slf4j-ext.loc               = ${maven2.repo}/org/slf4j/slf4j-ext/${slf4j-ext.version}
 slf4j-ext.md5               = 678bd7971ad51b53d147eced7a42bb64
 
 jcl-over-slf4j.version      = 1.7.22
 jcl-over-slf4j.jar          = jcl-over-slf4j-${jcl-over-slf4j.version}.jar
 jcl-over-slf4j.loc          = ${maven2.repo}/org/slf4j/jcl-over-slf4j/${jcl-over-slf4j.version}
 jcl-over-slf4j.md5          = 87f0c69f2d86475c9dc8cfbde270fa4e
 
 log4j-api.version           = 2.7
 log4j-api.jar               = log4j-api-${log4j-api.version}.jar
 log4j-api.loc               = ${maven2.repo}/org/apache/logging/log4j/log4j-api/${log4j-api.version}
 log4j-api.md5               = 8c6059adc8248076dfbfec5b875ead3d
 
 log4j-core.version          = 2.7
 log4j-core.jar              = log4j-core-${log4j-core.version}.jar
 log4j-core.loc              = ${maven2.repo}/org/apache/logging/log4j/log4j-core/${log4j-core.version}
 log4j-core.md5              = 2b63e0e5063fdaccf669a1e26384f3fd
 
 log4j-1.2-api.version       = 2.7
 log4j-1.2-api.jar           = log4j-1.2-api-${log4j-1.2-api.version}.jar
 log4j-1.2-api.loc           = ${maven2.repo}/org/apache/logging/log4j/log4j-1.2-api/${log4j-1.2-api.version}
 log4j-1.2-api.md5           = fb4cfd8dd851f0811be4cde61112d8ed
 
 log4j-slf4j-impl.version    = 2.7
 log4j-slf4j-impl.jar        = log4j-slf4j-impl-${log4j-slf4j-impl.version}.jar
 log4j-slf4j-impl.loc        = ${maven2.repo}/org/apache/logging/log4j/log4j-slf4j-impl/${log4j-slf4j-impl.version}
 log4j-slf4j-impl.md5        = caf39fb2a3a8e1ca14ec89e4abaf2b79
 
 sonarqube-ant-task.version  = 2.5
 sonarqube-ant-task.jar      = sonarqube-ant-task-${sonarqube-ant-task.version}.jar
 sonarqube-ant-task.loc      = ${maven2.repo}/org/sonarsource/scanner/ant/sonarqube-ant-task/${sonarqube-ant-task.version}
 sonarqube-ant-task.md5      = 0458ef676194411fcccad3bdec8b22c9
 
 jtidy.version               = r938
 jtidy.jar                   = jtidy-${jtidy.version}.jar
 jtidy.loc                   = ${maven2.repo}/net/sf/jtidy/jtidy/${jtidy.version}
 jtidy.md5                   = 6A9121561B8F98C0A8FB9B6E57F50E6B
 
 # Apache Tika to extract text from various documents
 tika-core.version           = 1.14
 tika-core.jar               = tika-core-${tika-core.version}.jar
 tika-core.loc               = ${maven2.repo}/org/apache/tika/tika-core/${tika-core.version}
 tika-core.md5               = d86a1e930da97345b4130c03e8193f58
 
 tika-parsers.version        = 1.14
 tika-parsers.jar            = tika-parsers-${tika-parsers.version}.jar
 tika-parsers.loc            = ${maven2.repo}/org/apache/tika/tika-parsers/${tika-parsers.version}
 tika-parsers.md5            = d7e4fe3f91a3fead81a8d29253d7aa71
 
 # XStream can be found at: http://x-stream.github.io
 xstream.version             = 1.4.9
 xstream.jar                 = xstream-${xstream.version}.jar
 xstream.loc                 = ${maven2.repo}/com/thoughtworks/xstream/xstream/${xstream.version}
 xstream.md5                 = 17f5ef61f6225a86ac39fc3dab45d755
 
 # XMLPull is required by XStream 1.4.x
 xmlpull.version             = 1.1.3.1
 xmlpull.jar                 = xmlpull-${xmlpull.version}.jar
 xmlpull.loc                 = ${maven2.repo}/xmlpull/xmlpull/${xmlpull.version}
 xmlpull.md5                 = cc57dacc720eca721a50e78934b822d2
 
 xpp3.version                = 1.1.4c
 xpp3.jar                    = xpp3_min-${xpp3.version}.jar
 xpp3.loc                    = ${maven2.repo}/xpp3/xpp3_min/${xpp3.version}
 xpp3.md5                    = DCD95BCB84B09897B2B66D4684C040DA
 
 # Xalan can be found at: http://xml.apache.org/xalan-j/
 xalan.version               = 2.7.2
 xalan.jar                   = xalan-${xalan.version}.jar
 xalan.loc                   = ${maven2.repo}/xalan/xalan/${xalan.version}
 xalan.md5                   = 6aa6607802502c8016b676f25f8e4873
 
 serializer.version          = 2.7.2
 serializer.jar              = serializer-${serializer.version}.jar
 serializer.loc              = ${maven2.repo}/xalan/serializer/${serializer.version}
 serializer.md5              = e8325763fd4235f174ab7b72ed815db1
 
 # Xerces can be found at: http://xerces.apache.org/xerces2-j/
 xerces.version              = 2.11.0
 xerces.jar                  = xercesImpl-${xerces.version}.jar
 xerces.loc                  = ${maven2.repo}/xerces/xercesImpl/${xerces.version}
 # Checksum from binary release and Maven differ, but contents of jar are identical (apart from EOLs in text files)
 #xerces.md5                  = DA09B75B562CA9A8E9A535D2148BE8E4
 xerces.md5                  = 43584adc1f895628055bad0aa98a1007
 
 xml-apis.version            = 1.4.01
 xml-apis.jar                = xml-apis-${xml-apis.version}.jar
 xml-apis.loc                = ${maven2.repo}/xml-apis/xml-apis/${xml-apis.version}
 xml-apis.md5                = 7eaad6fea5925cca6c36ee8b3e02ac9d
 
 # Codecs were previously provided by Batik
 xmlgraphics-commons.version = 2.1
 xmlgraphics-commons.jar     = xmlgraphics-commons-${xmlgraphics-commons.version}.jar
 xmlgraphics-commons.loc     = ${maven2.repo}/org/apache/xmlgraphics/xmlgraphics-commons/${xmlgraphics-commons.version}
 xmlgraphics-commons.md5     = ed394303ec89fd0604c98208f96a2c2f
 
 # JavaMail jars (N.B. these are available under CDDL)
 javamail.version            = 1.5.0-b01
 javamail.jar                = mail-${javamail.version}.jar
 javamail.loc                = ${maven2.repo}/javax/mail/mail/${javamail.version}
 javamail.md5                = 7b56e34995f7f1cb55d7806b935f90a4
 
 # Geronimo JMS jar
 jms.version                 = 1.1.1
 jms.jar                     = geronimo-jms_1.1_spec-${jms.version}.jar
 jms.loc                     = ${maven2.repo}/org/apache/geronimo/specs/geronimo-jms_1.1_spec/${jms.version}
 jms.md5                     = d80ce71285696d36c1add1989b94f084
 
 # The following jars are only needed for source distributions
 # They are used for building the documentation
 velocity.version            = 1.7
 velocity.jar                = velocity-${velocity.version}.jar
 velocity.loc                = ${maven2.repo}/org/apache/velocity/velocity/${velocity.version}
 velocity.md5                = 3692dd72f8367cb35fb6280dc2916725
 
 # required by Velocity
 commons-lang.version        = 2.6
 commons-lang.jar            = commons-lang-${commons-lang.version}.jar
 commons-lang.loc            = ${maven2.repo}/commons-lang/commons-lang/${commons-lang.version}
 commons-lang.md5            = 4d5c1693079575b362edf41500630bbd
 
 # required by anakia
 jdom.version                = 1.1.3
 jdom.jar                    = jdom-${jdom.version}.jar
 jdom.loc                    = ${maven2.repo}/org/jdom/jdom/${jdom.version}
 jdom.md5                    = 140bfed13341fe2039eee0f26a16d705
 
 # Optional for use by checkstyle
 checkstyle-all.version       = 6.13
 checkstyle-all.jar           = checkstyle-${checkstyle-all.version}-all.jar
 checkstyle-all.loc           = http://downloads.sourceforge.net/checkstyle/checkstyle/${checkstyle-all.version}/checkstyle-${checkstyle-all.version}-all.jar?ts=${EPOCHSECONDS}&use_mirror=autoselect
 checkstyle-all.md5           = ac6e1e81d09bcaf4c0c22181e9bda1d9
 
 # Optional for use by rat
 rat.version                  = 0.12
 rat.jar                      = apache-rat-${rat.version}.jar
 rat.loc                      = ${maven2.repo}/org/apache/rat/apache-rat/${rat.version}
 rat.md5                      = f4cc7b4de337e9f250a949467c5e1b42
 
 rat-tasks.jar                = apache-rat-tasks-${rat.version}.jar
 rat-tasks.loc                = ${maven2.repo}/org/apache/rat/apache-rat-tasks/${rat.version}
 rat-tasks.md5                = 96b699581b4475ed5756a0c24af745e8
 
 # Optional for use by JaCoCo
 jacocoant.version            = 0.7.8
 jacocoant.jar                = org.jacoco.ant-${jacocoant.version}-nodeps.jar
 jacocoant.loc                = ${maven2.repo}/org/jacoco/org.jacoco.ant/${jacocoant.version}
 jacocoant.md5                = e308c0fad91f19e1f485efc15c4395e6
diff --git a/build.xml b/build.xml
index 5b9ef59d7..9d6a66a00 100644
--- a/build.xml
+++ b/build.xml
@@ -1,1467 +1,1465 @@
 <?xml version="1.0"?>
 <!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at
 
        http://www.apache.org/licenses/LICENSE-2.0
 
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
 -->
 <project name="JMeter" default="install" basedir="."
     xmlns:rat="antlib:org.apache.rat.anttasks"
     xmlns:jacoco="antlib:org.jacoco.ant"
     xmlns="antlib:org.apache.tools.ant" >
   <description>
 
   N.B. To build JMeter from a release you need both the binary and source archives,
   and these must be unpacked into the same directory structure.
 
   To download additional jars needed for building the code and documentation:
 
       ant download_jars
 
 
     To build JMeter from source:
       ant [install]
 
     To rebuild:
       ant clean install
 
     To update documentation
       ant docs-site [-Ddocs.force=true]
       ant docs-printable [-Ddocs.force=true]
     To build API documentation (Javadoc)
       ant docs-api
     To build all the docs
       ant docs-all [-Ddocs.force=true]
 
     To build all and package up the files for distribution
       ant distribution -Djmeter.version=vvvv [-Dsvn.revision=nnnnn]
 
     Add -Ddisable-svnCheck=true to disable svn check, if you build from src archive or offline
     Add -Ddisable-check-versions=true to disable matching current svn revision and JMeterVersion.java,
       if you want build your own custom JMeter package.
 
     To create a nightly build (separate bin/src/lib jars):
       ant nightly [-Dsvn.revision=nnnnn]
 
     To create tar and tgz of the web-site documentation (docs and api)
       ant site [ -Djmeter.version=vvvv ]
 
 
     For more info:
       ant -projecthelp
 
     To diagnose usage of deprecated APIs:
       ant -Ddeprecation=on clean compile
   </description>
 
   <!--
 
   Note
   ====
   As with most other Apache projects, Gump (http://gump.apache.org/) is used to
   perform automated builds and tests on JMeter.
 
   Gump uses its project/jmeter.xml file to determine which target to use.
   The current setting is: <ant target="dist">
 
   Any changes to the dependency list for dist may affect Gump.
 
   Now the dist target depends on "assume-libs-present", so if additional libraries are added to that,
   the Gump project file for JMeter must also be updated.
 
   Jars that are not required by the dist target do not need to be added to the Gump project file.
 
   -->
 
   <!-- Minimal version of Apache Ant requiere by this Ant script -->
   <property name="ant.version.required" value="1.8.2" />
 
   <!-- Are we running under Gump? -->
   <property name="gump.run" value="false"/>
 
   <!-- The version of this file -->
   <property name="version.build" value="$Revision$"/>
 
   <script language="javascript">
     project.setProperty('EPOCHSECONDS', new Date().getTime());
   </script>
 
   <property file="build-local.properties"/> <!-- allow local overrides -->
 
   <!-- Remove .gitignore from the Ant's default excludes -->
   <!-- to allow to have the .gitignore in the source archive -->
   <defaultexcludes remove="**/.gitignore"/>
 
    <!-- Findbugs task and target -->
    <!--
    Findbugs is licensed under the Lesser GNU Public License
    HomePage: http://www.cs.umd.edu/~pugh/java/bugs/
 
    To use the findbugs target, download and install the findbugs binary distribution
    Set the value of findbugs.homedir according to where you installed findbugs, for example:
    ant findbugs -Dfindbugs.homedir=/etc/findbugs -Dfindbugs.level=medium
   [The defaults are /findbugs and medium]
    -->
   <property name="findbugs.homedir" value="/findbugs" />
   <property name="findbugs.level" value="medium" />
   <property name="findbugs.xsldir" value="${findbugs.homedir}/src/xsl" />
   <property name="findbugs.xslname" value="fancy" />
   <property name="findbugs.outName" value="reports/jmeter-fb" />
   <property name="skip.batchtest" value="false" />
   <property name="skip.bug52310" value="false" />
   <property name="skip.test_https" value="true" />
 
   <target name="findbugs" description="Run the stand-alone Findbugs detector">
     <echoproperties prefix="findbugs"/>
     <mkdir dir="reports"/>
     <taskdef name="findbugs"
         classpath="${findbugs.homedir}/lib/findbugs-ant.jar"
         classname="edu.umd.cs.findbugs.anttask.FindBugsTask"/>
     <findbugs home="${findbugs.homedir}"
               output="xml:withMessages"
               reportlevel="${findbugs.level}"
               excludeFilter="fb-excludes.xml"
               jvmargs="-Xms512m -Xmx512m"
               omitVisitors="InefficientStringBuffering"
               outputFile="${findbugs.outName}.xml" >
       <sourcePath path="${src.core}" />
       <sourcePath path="${src.http}" />
       <sourcePath path="${src.ftp}" />
       <sourcePath path="${src.java}" />
       <sourcePath path="${src.junit}" />
       <sourcePath path="${src.jdbc}" />
       <sourcePath path="${src.ldap}" />
       <sourcePath path="${src.mail}" />
       <sourcePath path="${src.components}" />
       <sourcePath path="${src.functions}" />
       <class location="${lib.dir}/jorphan.jar" />
       <class location="${dest.jar}/ApacheJMeter_components.jar"/>
       <class location="${dest.jar}/ApacheJMeter_components.jar"/>
       <class location="${dest.jar}/ApacheJMeter_core.jar"/>
       <class location="${dest.jar}/ApacheJMeter_ftp.jar"/>
       <class location="${dest.jar}/ApacheJMeter_functions.jar"/>
       <class location="${dest.jar}/ApacheJMeter_http.jar"/>
       <class location="${dest.jar}/ApacheJMeter_java.jar"/>
       <class location="${dest.jar}/ApacheJMeter_jdbc.jar"/>
       <class location="${dest.jar}/ApacheJMeter_jms.jar"/>
       <class location="${dest.jar}/ApacheJMeter_junit.jar"/>
       <class location="${dest.jar}/ApacheJMeter_ldap.jar"/>
       <class location="${dest.jar}/ApacheJMeter_mail.jar"/>
       <class location="${dest.jar}/ApacheJMeter_native.jar"/>
       <class location="${dest.jar}/ApacheJMeter_mongodb.jar"/>
       <class location="${dest.jar}/ApacheJMeter_tcp.jar"/>
       <class location="${dest.jar.jmeter}/ApacheJMeter.jar" />
       <sourcePath path="${src.jorphan}" />
       <sourcePath path="${src.tcp}" />
       <sourcePath path="${src.jms}" />
       <sourcePath path="${src.native}" />
       <sourcePath path="${src.mongodb}" />
 
       <auxClasspath>
         <fileset dir="${lib.dir}">
           <include name="*.jar"/>
         </fileset>
       </auxClasspath>
 
       <auxClasspath>
         <fileset dir="${lib.opt}">
           <include name="*.jar"/>
         </fileset>
       </auxClasspath>
 
       <auxClasspath>
         <fileset dir="${lib.api}">
           <include name="*.jar"/>
         </fileset>
       </auxClasspath>
 
     </findbugs>
     <antcall target="findbugs-style"/>
     <antcall target="findbugs-xsl"/>
   </target>
 
   <!-- Convert findbugs XML output to CSV -->
   <target name="findbugs-style">
     <xslt style="fb-csv.xsl"
        force="true"
        in="${findbugs.outName}.xml"
        out="${findbugs.outName}.csv">
     </xslt>
   </target>
 
   <!-- Convert findbugs XML output to HTML -->
   <target name="findbugs-xsl">
     <xslt style="${findbugs.xsldir}/${findbugs.xslname}.xsl"
        force="true"
        in="${findbugs.outName}.xml"
        out="${findbugs.outName}_${findbugs.xslname}.html">
     </xslt>
   </target>
 
   <!-- Where the Sources live -->
   <property name="src.dir" value="src"/>
   <property name="src.core" value="src/core"/>
   <property name="src.http" value="src/protocol/http"/>
   <property name="src.ftp" value="src/protocol/ftp"/>
   <property name="src.test" value="test/src"/>
   <property name="src.jdbc" value="src/protocol/jdbc"/>
   <property name="src.java" value="src/protocol/java"/>
   <property name="src.junit" value="src/junit"/>
   <property name="src.components" value="src/components"/>
   <property name="src.functions" value="src/functions"/>
   <property name="src.jorphan" value="src/jorphan"/>
   <property name="src.ldap" value="src/protocol/ldap"/>
   <property name="src.tcp" value="src/protocol/tcp"/>
   <property name="src.examples" value="src/examples"/>
   <property name="src.mail" value="src/protocol/mail"/>
   <property name="src.jms" value="src/protocol/jms"/>
   <property name="src.native" value="src/protocol/native"/>
   <property name="src.mongodb" value="src/protocol/mongodb"/>
 
   <!-- Where the documentation sources live -->
   <property name="src.docs" value="xdocs"/>
   <property name="src.css" value="xdocs/css"/>
   <property name="src.images" value="xdocs/images"/>
   <property name="src.demos" value="xdocs/demos"/>
 
   <!-- Javadoc sources -->
   <path id="srcpaths">
     <pathelement location="${src.core}"/>
     <pathelement location="${src.components}"/>
     <pathelement location="${src.functions}"/>
     <pathelement location="${src.http}"/>
     <pathelement location="${src.ftp}"/>
     <pathelement location="${src.jdbc}"/>
     <pathelement location="${src.java}"/>
     <pathelement location="${src.junit}"/>
     <pathelement location="${src.jorphan}"/>
     <pathelement location="${src.ldap}"/>
     <pathelement location="${src.tcp}"/>
     <pathelement location="${src.examples}"/>
     <pathelement location="${src.mail}"/>
     <pathelement location="${src.jms}"/>
     <pathelement location="${src.native}"/>
     <pathelement location="${src.mongodb}"/>
   </path>
 
   <!-- Temporary build directories: where the .class live -->
   <property name="build.dir" value="build"/>
   <property name="build.core" value="build/core"/>
   <property name="build.http" value="build/protocol/http"/>
   <property name="build.ftp" value="build/protocol/ftp"/>
   <property name="build.jdbc" value="build/protocol/jdbc"/>
   <property name="build.java" value="build/protocol/java"/>
   <property name="build.junit" value="build/junit"/>
   <property name="build.components" value="build/components"/>
   <property name="build.functions" value="build/functions"/>
   <property name="build.jorphan" value="build/jorphan"/>
   <property name="build.ldap" value="build/protocol/ldap"/>
   <property name="build.mail" value="build/protocol/mail"/>
   <property name="build.tcp" value="build/protocol/tcp"/>
   <property name="build.examples" value="build/examples"/>
   <property name="build.jms" value="build/protocol/jms"/>
   <property name="build.native" value="build/protocol/native"/>
   <property name="build.mongodb" value="build/protocol/mongodb"/>
   <property name="build.test" value="build/test"/>
   <property name="build.res" value="build/res"/>
   <property name="build.test-res" value="test/resources"/>
 
   <!-- Path prefix to allow Anakia to find stylesheets if running under Eclipse -->
   <!--
   Anakia looks for stylesheets relative to the java launch directory.
   Use the External Tools properties page to define the variable
   as the relative path to the directory where this build file is found.
   For example:
                eclipse.anakia=workspace/jmeter
 
   An alternative is to define it as a command-line argument on the Main page;
   this allows one to use a macro name, so is more portable.
   For example:
                -Declipse.anakia=workspace/${project_name}
   WARNING: you must ensure that you have selected a file or directory in
   the Navigator pane before attempting to run the build, or Eclipse will
   complain that it cannot resolve the variable name, and it can mark the
   launch configuration as having failed.
   -->
   <property name="eclipse.anakia" value="."/>
 
   <!-- Where the build result .jars will be placed -->
   <property name="dest.jar" value="lib/ext"/>
   <property name="dest.jar.jmeter" value="bin"/>
 
   <!-- Where the API documentation lives -->
   <property name="dest.docs.api" value="docs/api"/>
 
   <!-- Where the doc results live -->
   <property name="dest.docs" value="docs"/>
   <property name="dest.printable_docs" value="printable_docs"/>
 
   <!-- Whether to force docs to be rebuilt -->
   <property name="docs.force" value="false"/>
 
   <!-- Default is for Anakia to only rebuild if the target file is older than the source -->
   <condition property="anakia.lastModifiedCheck" value="true" else="false">
     <!-- docs.force uses the opposite sense to the anakia check -->
     <isfalse value="${docs.force}"/>
   </condition>
 
   <!-- Directory where jars needed for creating documentation live -->
   <property name="lib.doc" value="lib/doc"/>
 
   <!-- Directory where these 3rd party libraries live -->
   <property name="lib.dir" value="lib"/>
 
   <!-- Directory where API spec libraries live -->
   <property name="lib.api" value="lib/api"/>
 
   <!-- Directory where Optional 3rd party libraries live -->
   <property name="lib.opt" value="lib/opt"/>
 
   <!-- Directory where Jacoco libraries live -->
   <!-- I'm to lazy to fix this now, so I tag along with rat & checkstyle,
     which already live there. But: none of these should apear on the classpath
     of Jmeter, neither runtime, nor compiletime. These are only required on the
     Ant classpath, so judging from comments elsewhere, this is the wrong place.
   -->
   <property name="lib.coverage" location="lib/opt"/>
 
   <!-- Other stuff -->
   <property name="extras.dir" value="extras"/>
 
   <!-- Some resources to add to jars -->
   <property name="res.dir" value="res"/>
 
   <!-- Where the distribution packages will be created -->
   <property name="dist.dir" value="dist"/>
 
   <!-- Where the Maven artifacts will be created -->
   <property name="maven.dir" value="${dist.dir}/maven"/>
 
   <!-- Where the Maven template poms are located -->
   <property name="maven.poms" value="res/maven"/>
 
   <!-- Compilation parameters -->
   <property name="optimize" value="on"/>
   <property name="deprecation" value="off"/>
   <property name="target.java.version" value="1.8"/>
   <property name="src.java.version" value="1.8"/>
   <property name="encoding" value="UTF-8"/>
   <!-- Set test encoding to the same default, but allow override -->
   <property name="test.encoding" value="${encoding}"/>
   <!-- Set javadoc encoding to the same default, but allow override -->
   <property name="javadoc.encoding" value="${encoding}"/>
   <property name="includeAntRuntime" value="false"/>
 
   <!-- 3rd party libraries to be included in the binary distribution -->
   <property file="build.properties"/> <!-- defines the library version numbers -->
 
   <property name="resources.meta-inf"      value="${build.res}/META-INF"/>
 
   <patternset id="external.jars.notices">
     <include name="LICENSE"/>
     <include name="NOTICE"/>
     <include name="README.md"/>
   </patternset>
 
   <!-- Jars for binary release -->
   <patternset id="external.jars">
     <include name="${lib.dir}/${accessors-smart.jar}"/>
     <include name="${lib.dir}/${apache-bsf.jar}"/>
     <include name="${lib.dir}/${asm.jar}"/>
     <include name="${lib.dir}/${beanshell.jar}"/>
     <include name="${lib.dir}/${caffeine.jar}"/>
     <include name="${lib.dir}/${commons-codec.jar}"/>
     <include name="${lib.dir}/${commons-collections.jar}"/>
     <include name="${lib.dir}/${commons-dbcp2.jar}"/>
-    <include name="${lib.dir}/${commons-httpclient.jar}"/>
     <include name="${lib.dir}/${commons-io.jar}"/>
     <include name="${lib.dir}/${commons-jexl2.jar}"/>
     <include name="${lib.dir}/${commons-jexl3.jar}"/>
     <include name="${lib.dir}/${commons-lang3.jar}"/>
     <include name="${lib.dir}/${commons-math3.jar}"/>
     <include name="${lib.dir}/${commons-net.jar}"/>
     <include name="${lib.dir}/${commons-pool2.jar}"/>
     <include name="${lib.dir}/${dnsjava.jar}"/>
     <include name="${lib.dir}/${freemarker.jar}"/>
     <include name="${lib.dir}/${groovy-all.jar}"/>
     <include name="${lib.dir}/${hamcrest-core.jar}"/>
     <include name="${lib.dir}/${httpclient.jar}"/>
     <include name="${lib.dir}/${httpasyncclient.jar}"/>
     <include name="${lib.dir}/${httpcore.jar}"/>
     <include name="${lib.dir}/${httpcore-nio.jar}"/>
     <include name="${lib.dir}/${httpmime.jar}"/>
     <include name="${lib.dir}/${jakarta-oro.jar}"/>
     <include name="${lib.dir}/${javamail.jar}"/>
     <include name="${lib.dir}/${jcharts.jar}"/>
     <include name="${lib.dir}/${jcl-over-slf4j.jar}"/>
     <include name="${lib.dir}/${jms.jar}"/>
     <include name="${lib.dir}/${rhino.jar}"/>
     <include name="${lib.dir}/${jodd-core.jar}"/>
     <include name="${lib.dir}/${jodd-lagarto.jar}"/>
     <include name="${lib.dir}/${jodd-log.jar}"/>
     <include name="${lib.dir}/${jodd-props.jar}"/>
     <include name="${lib.dir}/${json-path.jar}"/>
     <include name="${lib.dir}/${json-smart.jar}"/>
     <include name="${lib.dir}/${jsoup.jar}"/>
     <include name="${lib.dir}/${junit.jar}"/>
     <include name="${lib.dir}/${log4j-1.2-api.jar}"/>
     <include name="${lib.dir}/${log4j-core.jar}"/>
     <include name="${lib.dir}/${log4j-slf4j-impl.jar}"/>
     <include name="${lib.dir}/${mongo-java-driver.jar}"/>
     <include name="${lib.dir}/${ph-css.jar}"/>
     <include name="${lib.dir}/${ph-commons.jar}"/>
     <include name="${lib.dir}/${rsyntaxtextarea.jar}"/>
     <include name="${lib.dir}/${serializer.jar}"/>
     <include name="${lib.dir}/${slf4j-api.jar}"/>
     <include name="${lib.dir}/${slf4j-ext.jar}"/>
     <include name="${lib.dir}/${log4j-api.jar}"/>
     <include name="${lib.dir}/${jtidy.jar}"/>
     <include name="${lib.dir}/${tika-core.jar}"/>
     <include name="${lib.dir}/${tika-parsers.jar}"/>
     <include name="${lib.dir}/${xalan.jar}"/>
     <include name="${lib.dir}/${xerces.jar}"/>
     <include name="${lib.dir}/${xml-apis.jar}"/>
     <include name="${lib.dir}/${xmlgraphics-commons.jar}"/>
     <include name="${lib.dir}/${xmlpull.jar}"/>
     <include name="${lib.dir}/${xpp3.jar}"/>
     <include name="${lib.dir}/${xstream.jar}"/>
   </patternset>
 
   <!--
   Optional jars, not included in distribution.
   Any such jars need to be downloaded separately.
   These can be put into ${lib.dir} or ${lib.opt}
   - both of these are included in the build classpath
 
   Any jars put into ${lib.dir} will be included in
   the classpath used by JMeter to load classes.
   Jars in ${lib.opt} are NOT normally included by JMeter.
 
   Placing an optional jar in ${lib.opt} means that it
   will be included in the build classpath, but it will
   not be included in the runtime classpath. This is intended
   for testing JMeter without the optional Jar file(s).
   -->
 
   <!-- Build classpath (includes the optional jar directory) -->
   <path id="classpath">
     <!-- Externally produced jars -->
     <pathelement location="${lib.dir}/${accessors-smart.jar}"/>
     <pathelement location="${lib.dir}/${apache-bsf.jar}"/>
     <pathelement location="${lib.dir}/${asm.jar}"/>
     <pathelement location="${lib.dir}/${beanshell.jar}"/>
     <pathelement location="${lib.dir}/${caffeine.jar}"/>
     <pathelement location="${lib.dir}/${commons-codec.jar}"/>
     <pathelement location="${lib.dir}/${commons-collections.jar}"/>
     <pathelement location="${lib.dir}/${commons-dbcp2.jar}"/>
-    <pathelement location="${lib.dir}/${commons-httpclient.jar}"/>
     <pathelement location="${lib.dir}/${commons-io.jar}"/>
     <pathelement location="${lib.dir}/${commons-jexl2.jar}"/>
     <pathelement location="${lib.dir}/${commons-jexl3.jar}"/>
     <pathelement location="${lib.dir}/${commons-lang3.jar}"/>
     <pathelement location="${lib.dir}/${commons-math3.jar}"/>
     <pathelement location="${lib.dir}/${commons-net.jar}"/>
     <pathelement location="${lib.dir}/${commons-pool2.jar}"/>
     <pathelement location="${lib.dir}/${dnsjava.jar}"/>
     <pathelement location="${lib.dir}/${freemarker.jar}"/>
     <pathelement location="${lib.dir}/${groovy-all.jar}"/>
     <pathelement location="${lib.dir}/${hamcrest-core.jar}"/>
     <pathelement location="${lib.dir}/${httpclient.jar}"/>
     <pathelement location="${lib.dir}/${httpasyncclient.jar}"/>
     <pathelement location="${lib.dir}/${httpcore.jar}"/>
     <pathelement location="${lib.dir}/${httpcore-nio.jar}"/>
     <pathelement location="${lib.dir}/${httpmime.jar}"/>
     <pathelement location="${lib.dir}/${jakarta-oro.jar}"/>
     <pathelement location="${lib.dir}/${javamail.jar}"/>
     <pathelement location="${lib.dir}/${jcharts.jar}"/>
     <pathelement location="${lib.dir}/${jms.jar}"/>
     <pathelement location="${lib.dir}/${rhino.jar}"/>
     <pathelement location="${lib.dir}/${jodd-core.jar}"/>
     <pathelement location="${lib.dir}/${jodd-lagarto.jar}"/>
     <pathelement location="${lib.dir}/${jodd-log.jar}"/>
     <pathelement location="${lib.dir}/${jodd-props.jar}"/>
     <pathelement location="${lib.dir}/${json-path.jar}"/>
     <pathelement location="${lib.dir}/${json-smart.jar}"/>
     <pathelement location="${lib.dir}/${jsoup.jar}"/>
     <pathelement location="${lib.dir}/${junit.jar}"/>
     <pathelement location="${lib.dir}/${log4j-1.2-api.jar}"/>
     <pathelement location="${lib.dir}/${log4j-core.jar}"/>
     <pathelement location="${lib.dir}/${log4j-slf4j-impl.jar}"/>
     <pathelement location="${lib.dir}/${mongo-java-driver.jar}"/>
     <pathelement location="${lib.dir}/${ph-css.jar}"/>
     <pathelement location="${lib.dir}/${ph-commons.jar}"/>
     <pathelement location="${lib.dir}/${rsyntaxtextarea.jar}"/>
     <pathelement location="${lib.dir}/${serializer.jar}"/>
     <pathelement location="${lib.dir}/${slf4j-api.jar}"/>
     <pathelement location="${lib.dir}/${slf4j-ext.jar}"/>
     <pathelement location="${lib.dir}/${jtidy.jar}"/>
     <pathelement location="${lib.dir}/${tika-core.jar}"/>
     <pathelement location="${lib.dir}/${tika-parsers.jar}"/>
     <pathelement location="${lib.dir}/${xalan.jar}"/>
     <pathelement location="${lib.dir}/${xerces.jar}"/>
     <pathelement location="${lib.dir}/${xml-apis.jar}"/>
     <pathelement location="${lib.dir}/${xmlgraphics-commons.jar}"/>
     <pathelement location="${lib.dir}/${xmlpull.jar}"/>
     <pathelement location="${lib.dir}/${xpp3.jar}"/>
     <pathelement location="${lib.dir}/${xstream.jar}"/>
     <!-- Generated jars -->
     <fileset dir="${lib.dir}" includes="jorphan.jar"/>
     <!-- API-only jars-->
     <fileset dir="${lib.api}" includes="*.jar"/>
     <!-- Optional jars -->
     <fileset dir="${lib.opt}" includes="*.jar"/>
   </path>
 
   <!-- Logging classpath -->
   <path id="logging.classpath">
     <pathelement location="${lib.dir}/${jcl-over-slf4j.jar}"/>
     <pathelement location="${lib.dir}/${log4j-api.jar}"/>
     <pathelement location="${lib.dir}/${log4j-core.jar}"/>
     <pathelement location="${lib.dir}/${log4j-1.2-api.jar}"/>
     <pathelement location="${lib.dir}/${log4j-slf4j-impl.jar}"/>
   </path>
 
   <!-- Anakia classpath -->
   <path id="anakia.classpath">
     <pathelement location="${lib.doc}/${velocity.jar}"/>
     <pathelement location="${lib.doc}/${jdom.jar}"/>
     <pathelement location="${lib.dir}/${commons-collections.jar}"/>
     <pathelement location="${lib.doc}/${commons-lang.jar}"/>
   </path>
 
   <!-- Version info filter set -->
   <tstamp>
     <format property="year" pattern="yyyy" locale="en"/>
   </tstamp>
 
   <filterset id="year.filters">
     <filter token="YEAR" value="${year}"/>
   </filterset>
 
 
   <target name="init-version">
     <tstamp/>
     <!--
       JMeter version
       This is overridden for formal releases.
     -->
     <property name="jmeter.version" value="3.2-SNAPSHOT"/>
     <!-- Remember to change "docversion" below if necessary -->
     <condition property="implementation.version"
           value="${jmeter.version} r${svn.revision}" else="${jmeter.version}.${DSTAMP}">
       <isset property="svn.revision"/>
     </condition>
     <property name="display.version" value="${implementation.version}"/>
     <echo level="info">jmeter.version = ${jmeter.version}</echo>
     <echo level="info">display.version = ${display.version}</echo>
     <echo level="info">implementation.version = ${implementation.version}</echo>
     <filterset id="version.filters">
       <filter token="VERSION" value="${display.version}"/>
     </filterset>
   </target>
 
   <!-- Get version from SVN status -->
   <target name="init-svnVersion" depends="svnCheck">
     <fail message="Could not get SVN revision" unless="svn.revision"/>
     <property name="jmeter.version" value="r${svn.revision}"/>
     <!-- Copy the value to avoid duplication of revision in Manifests -->
     <property name="implementation.version" value="${jmeter.version}"/>
     <property name="display.version" value="${jmeter.version}"/>
     <echo level="info">svn.revision = ${svn.revision}</echo>
     <echo level="info">jmeter.version = ${jmeter.version}</echo>
     <echo level="info">display.version = ${display.version}</echo>
     <echo level="info">implementation.version = ${implementation.version}</echo>
   </target>
 
   <target name="ant-version" depends="_check_ant-version">
     <echo level="info">ant.version = ${ant.version}</echo>
   </target>
 
   <target name="_check_ant-version">
     <antversion property="version.running" />
     <fail message="FATAL ERROR:  The running Ant version, ${version.running}, is too old for this task.">
       <condition>
         <not>
           <antversion atleast="${ant.version.required}" />
         </not>
       </condition>
     </fail>
   </target>
 
   <target name="init-docs" depends="report-anakia-missing">
     <echo level="info">eclipse.anakia = ${eclipse.anakia}</echo>
   </target>
 
   <!--
     - Check for anakia task
   -->
   <target name="check-anakia">
     <available classpathref="anakia.classpath" classname="org.apache.velocity.anakia.AnakiaTask" property="AnakiaTask.present"/>
     <!-- Check for Velocity version 1.5 -->
     <available classpathref="anakia.classpath" classname="org.apache.velocity.io.UnicodeInputStream" property="velocity.version.15"/>
     <antcall target="report-old-velocity"></antcall>
   </target>
 
   <target name="report-anakia-missing" depends="check-anakia" unless="AnakiaTask.present">
     <echo>
       AnakiaTask is not present, documentation will not be generated.
     </echo>
   </target>
 
   <target name="report-old-velocity" unless="velocity.version.15" if="AnakiaTask.present">
     <echo>
       Velocity version appears to be older than 1.5: the documentation may be generated with incorrect line endings.
     </echo>
   </target>
 
   <target name="compile-core" depends="compile-jorphan" description="Compile JMeter core classes.">
     <mkdir dir="${build.core}"/>
     <javac srcdir="${src.core}" destdir="${build.core}" optimize="${optimize}" source="${src.java.version}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${lib.dir}/${log4j-core.jar}"/>
         <path refid="classpath"/>
         <path refid="logging.classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-components" depends="compile-jorphan,compile-core" description="Compile generic (protocol-independent) components.">
     <mkdir dir="${build.components}"/>
     <javac srcdir="${src.components}" destdir="${build.components}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-functions" depends="compile-jorphan,compile-core" description="Compile functions.">
     <mkdir dir="${build.functions}"/>
     <javac srcdir="${src.functions}" destdir="${build.functions}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-http" depends="compile-jorphan,compile-core,compile-components" description="Compile components specific to HTTP sampling.">
     <mkdir dir="${build.http}"/>
     <!-- Directory needs to exist, or jar will fail -->
     <javac srcdir="${src.http}" destdir="${build.http}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <pathelement location="${build.components}"/>
         <path refid="classpath"/>
         <pathelement location="${lib.dir}/${jcl-over-slf4j.jar}"/>
         <pathelement location="${lib.dir}/${log4j-api.jar}"/>
         <pathelement location="${lib.dir}/${log4j-core.jar}"/>
       </classpath>
     </javac>
   </target>
 
   <!-- Tests need main classes -->
   <target name="compile-tests" depends="compile" description="Compile test components">
     <mkdir dir="${build.test}"/>
     <javac srcdir="${src.test}" destdir="${build.test}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <pathelement location="${build.components}"/>
         <pathelement location="${build.http}"/>
         <pathelement location="${build.ftp}"/>
         <pathelement location="${build.functions}"/>
         <pathelement location="${build.java}"/>
         <pathelement location="${build.jdbc}"/>
         <pathelement location="${build.ldap}"/>
         <pathelement location="${build.mail}"/>
         <pathelement location="${build.tcp}"/>
         <!-- Also include compiled jars to allow running tests without rebuilding source -->
         <fileset dir="${dest.jar}" includes="*.jar"/>
         <path refid="classpath"/>
         <path refid="logging.classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-ftp" depends="compile-jorphan,compile-core" description="Compile components specific to FTP sampling.">
     <mkdir dir="${build.ftp}"/>
     <javac srcdir="${src.ftp}" destdir="${build.ftp}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-jdbc" depends="compile-jorphan,compile-core" description="Compile components specific to JDBC sampling.">
     <mkdir dir="${build.jdbc}"/>
     <javac srcdir="${src.jdbc}" destdir="${build.jdbc}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-ldap" depends="compile-jorphan,compile-core"
     description="Compile components specific to LDAP sampling.">
     <mkdir dir="${build.ldap}"/>
     <javac srcdir="${src.ldap}" destdir="${build.ldap}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="create-mail-dir">
     <mkdir dir="${build.mail}"/>
   </target>
 
   <target name="compile-mail" depends="compile-jorphan,compile-core,create-mail-dir"
     description="Compile components specific to IMAP and POP3 sampling.">
     <javac srcdir="${src.mail}" destdir="${build.mail}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-java" depends="compile-jorphan,compile-core" description="Compile components specific to Java sampling.">
     <mkdir dir="${build.java}"/>
     <javac srcdir="${src.java}" destdir="${build.java}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-junit" depends="compile-jorphan,compile-core" description="Compile components specific to JUnit sampling.">
     <mkdir dir="${build.junit}"/>
     <javac srcdir="${src.junit}" destdir="${build.junit}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-tcp" depends="compile-jorphan,compile-core" description="Compile components specific to TCP sampling.">
     <mkdir dir="${build.tcp}"/>
     <javac srcdir="${src.tcp}" destdir="${build.tcp}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-protocols" depends="compile-http,compile-ftp,compile-jdbc,compile-java,compile-ldap,compile-mail,compile-tcp" description="Compile all protocol-specific components."/>
 
   <target name="compile-examples" depends="compile-jorphan,compile-core" description="Compile example components.">
     <mkdir dir="${build.examples}"/>
     <javac srcdir="${src.examples}" destdir="${build.examples}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-jorphan" depends="init-version" description="Compile JOrphan utility classes.">
     <mkdir dir="${build.jorphan}"/>
     <javac srcdir="${src.jorphan}" destdir="${build.jorphan}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-jms" depends="compile-jorphan,compile-core,compile-components"
         description="Compile components specific to JMS sampling.">
     <mkdir dir="${build.jms}"/>
     <javac srcdir="${src.jms}" destdir="${build.jms}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-native" depends="compile-jorphan,compile-core,compile-components"
         description="Compile components specific to Native sampling.">
     <mkdir dir="${build.native}"/>
     <javac srcdir="${src.native}" destdir="${build.native}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile-mongodb" depends="compile-jorphan,compile-core,compile-components"
         description="Compile components specific to MongoDB sampling.">
     <mkdir dir="${build.mongodb}"/>
     <javac srcdir="${src.mongodb}" destdir="${build.mongodb}" source="${src.java.version}" optimize="${optimize}" debug="on" target="${target.java.version}"
            includeAntRuntime="${includeAntRuntime}" deprecation="${deprecation}" encoding="${encoding}">
       <include name="**/*.java"/>
       <classpath>
         <pathelement location="${build.jorphan}"/>
         <pathelement location="${build.core}"/>
         <path refid="classpath"/>
       </classpath>
     </javac>
   </target>
 
   <target name="compile"
   depends="_message_3rdParty,compile-core,compile-components,compile-functions,compile-protocols,compile-junit,compile-jms,compile-native, compile-mongodb"
   description="Compile everything."/>
 
   <target name="run_gui" depends="package" description="Run the JMeter GUI off the jar files">
     <condition property="jacoco_params" value="${jacocoagent}" else="-Djacoco_dummy=">
       <isset property="jacocoagent"/>
     </condition>
     <java classname="org.apache.jmeter.NewDriver" fork="true">
       <classpath>
         <pathelement location="${dest.jar.jmeter}/ApacheJMeter.jar"/>
       </classpath>
       <jvmarg value="${jacoco_params}run_gui:java(server)"/>
       <sysproperty key="jmeter.home" value="${basedir}"/>
     </java>
   </target>
 
   <target name="package" depends="compile, prepare-resources, package-only"
      description="Compile everything and create the jars"/>
 
   <target name="package-and-check" depends="clean, download_jars, package, checkstyle, rat"
      description="Compile, create jars and apply checkstyle before commiting code"/>
 
   <target name="prepare-resources"
      description="Prepare some resources files, update date">
     <mkdir dir="${build.res}" />
     <mkdir dir="${resources.meta-inf}" />
     <copy todir="${resources.meta-inf}" overwrite="yes" filtering="yes"
         encoding="${encoding}">
       <filterset refid="year.filters"/>
       <filterset refid="version.filters" />
       <fileset dir="${res.dir}/META-INF" >
         <include name="*.license" />
         <include name="*.notice" />
         <include name="jmeter_as_ascii_art.txt" />
       </fileset>
     </copy>
     <fixcrlf encoding="${encoding}" srcdir="${resources.meta-inf}" eol="crlf" includes="*.license *.notice"/>
   </target>
 
 <!--
 N.B. Eclipse (and perhaps other Java IDEs) copies all files to the build directory, unless
 told otherwise. This means that there might be copies of property and image files in the
 build directory. To avoid including the files twice in the jar file, we include only .class
 files in the list of files to be processed from the build tree.
 
 Eclipse has been fixed so that it no longer shows files in the build tree in the Open Resource dialogue,
 so having duplicates in the build tree no longer causes confusion.
 
 Note: if built from Eclipse, the build directory will include resources and images,
 and Eclipse will thus be able to run JMeter from the default path.
 
 If built using Ant, the build tree will not contain any resources, and thus Eclipse will not be able to
 run JMeter unless all the JMeter jars are added.
 
 -->
   <target name="package-only" description="Package already-compiled classes (shortcut for IDE users)">
     <manifest file="${build.dir}/MANIFEST_BIN.MF">
       <attribute name="Built-By" value="${user.name}"/>
       <attribute name="Extension-Name" value=" JMeter"/>
       <attribute name="Specification-Title" value=" Apache JMeter"/>
       <attribute name="Specification-Vendor" value=" Apache Software Foundation"/>
       <attribute name="Implementation-Vendor" value=" Apache Software Foundation"/>
       <attribute name="Implementation-Vendor-Id" value=" org.apache"/>
       <attribute name="Implementation-Version" value="${implementation.version}"/>
       <attribute name="X-Compile-Source-JDK" value="${src.java.version}"/>
       <attribute name="X-Compile-Target-JDK" value="${target.java.version}"/>
     </manifest>
 
     <manifest file="${build.dir}/MANIFEST_SRC.MF">
       <attribute name="Built-By" value="${user.name}"/>
       <attribute name="Extension-Name" value=" JMeter"/>
       <attribute name="Specification-Title" value=" Apache JMeter"/>
       <attribute name="Specification-Vendor" value=" Apache Software Foundation"/>
       <attribute name="Implementation-Vendor" value=" Apache Software Foundation"/>
       <attribute name="Implementation-Vendor-Id" value=" org.apache"/>
       <attribute name="Implementation-Version" value="${implementation.version}"/>
    </manifest>
 
     <mkdir dir="${dest.jar}"/>
 
     <!-- perhaps ought to include a basic jmeter.properties file in one of the jars,
     given that JMeterUtils looks for it if it cannot find the external one
     - otherwise, change utils to ignore it -->
 
     <!-- JMeter launch jar -->
     <jar jarfile="${dest.jar.jmeter}/ApacheJMeter.jar"
         includes="**/NewDriver*,**/DynamicClassLoader*,**/ShutdownClient.class"
         basedir="${build.core}"
         manifest="${build.dir}/MANIFEST_BIN.MF">
       <manifest>
         <attribute name="Main-Class" value="org.apache.jmeter.NewDriver"/>
       </manifest>
       <zipfileset file="${resources.meta-inf}/default.notice"
           fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
           fullpath="META-INF/LICENSE" />
       <zipfileset file="${resources.meta-inf}/jmeter_as_ascii_art.txt"
           fullpath="org/apache/jmeter/jmeter_as_ascii_art.txt" />
     </jar>
 
     <!-- core -->
     <jar jarfile="${dest.jar}/ApacheJMeter_core.jar"
         manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <!-- add license details for images -->
       <zipfileset file="licenses/src/openiconlibrary.txt"
         fullpath="META-INF/LICENSE-openiconlibrary.txt" />
       <!-- Only include class files from build tree - see above -->
       <fileset dir="${build.core}" includes="**/*.class"
         excludes="**/BeanShellClient*.class,**/NewDriver*,**/DynamicClassLoader*"/>
       <fileset dir="${src.core}" includes="org/apache/jmeter/images/**"
         excludes="**/*.properties,org/apache/jmeter/images/toolbar/icons-custom/**"/>
       <fileset dir="${src.core}" includes="**/*.properties">
         <exclude name="*eucJP*"/>
       </fileset>
       <!-- This file is used by the jmeter -h option -->
       <fileset dir="${src.core}" includes="org/apache/jmeter/help.txt"/>
     </jar>
 
     <!-- components -->
     <jar jarfile="${dest.jar}/ApacheJMeter_components.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.components}" includes="**/*.class" />
       <fileset dir="${src.components}" includes="**/*.properties" />
     </jar>
 
     <!-- functions -->
     <jar jarfile="${dest.jar}/ApacheJMeter_functions.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.functions}" includes="**/*.class" />
       <fileset dir="${src.functions}" includes="**/*.properties" />
     </jar>
 
     <!-- http -->
     <jar jarfile="${dest.jar}/ApacheJMeter_http.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.http}" includes="**/*.class"/>
       <fileset dir="${src.http}" includes="**/*.properties" />
     </jar>
 
     <!-- ftp -->
     <jar jarfile="${dest.jar}/ApacheJMeter_ftp.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.ftp}" includes="**/*.class" />
       <fileset dir="${src.ftp}" includes="**/*.properties" />
     </jar>
 
     <!-- jdbc -->
     <jar jarfile="${dest.jar}/ApacheJMeter_jdbc.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.jdbc}" includes="**/*.class" />
       <fileset dir="${src.jdbc}" includes="**/*.properties" />
     </jar>
 
     <!-- java -->
     <jar jarfile="${dest.jar}/ApacheJMeter_java.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.java}" includes="**/*.class" />
       <fileset dir="${src.java}" includes="**/*.properties" />
     </jar>
 
     <!-- BeanShell Client -->
     <jar jarfile="${lib.dir}/bshclient.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <manifest>
          <attribute name="Main-Class" value="org.apache.jmeter.util.BeanShellClient"/>
       </manifest>
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.core}" includes="**/BeanShellClient*.class" />
     </jar>
 
     <!-- junit -->
     <jar jarfile="${dest.jar}/ApacheJMeter_junit.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.junit}" includes="org/**/*.class" />
       <fileset dir="${src.junit}" includes="**/*.properties" />
     </jar>
 
     <!-- Build junit/test.jar sample -->
     <jar jarfile="${lib.dir}/junit/test.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.junit}" excludes="org/**/*" />
       <fileset dir="${src.junit}"   excludes="org/**/*" />
     </jar>
 
     <!-- ldap -->
     <jar jarfile="${dest.jar}/ApacheJMeter_ldap.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.ldap}" includes="**/*.class" />
       <fileset dir="${src.ldap}" includes="**/*.properties" />
     </jar>
 
     <!-- mail -->
     <jar jarfile="${dest.jar}/ApacheJMeter_mail.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.mail}" includes="**/*.class"  />
       <fileset dir="${src.mail}" includes="**/*.properties" />
       <fileset dir="${src.mail}" includes="**/*.providers" />
     </jar>
 
     <!-- tcp -->
     <jar jarfile="${dest.jar}/ApacheJMeter_tcp.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.tcp}" includes="**/*.class" />
       <fileset dir="${src.tcp}" includes="**/*.properties" />
     </jar>
 
     <!-- jms -->
     <!-- Ensure that build dir exists, even if JMS has not been built -->
     <mkdir dir="${build.jms}"/>
     <jar jarfile="${dest.jar}/ApacheJMeter_jms.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.jms}" includes="**/*.class" />
       <fileset dir="${src.jms}" includes="**/*.properties" />
     </jar>
 
     <!-- native -->
     <!-- Ensure that build dir exists, even if Native has not been built -->
     <mkdir dir="${build.native}"/>
     <jar jarfile="${dest.jar}/ApacheJMeter_native.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.native}" includes="**/*.class" />
       <fileset dir="${src.native}" includes="**/*.properties" />
     </jar>
 
     <!-- mongodb -->
     <!-- Ensure that build dir exists, even if MongoDB has not been built -->
     <mkdir dir="${build.mongodb}"/>
     <jar jarfile="${dest.jar}/ApacheJMeter_mongodb.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.mongodb}" includes="**/*.class" />
       <fileset dir="${src.mongodb}" includes="**/*.properties" />
     </jar>
 
     <jar jarfile="${lib.dir}/jorphan.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
           fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
           fullpath="META-INF/LICENSE" />
       <fileset dir="${build.jorphan}" includes="**/*.class"/>
       <fileset dir="${src.jorphan}" includes="**/*.properties"/>
     </jar>
   </target>
 
   <!-- Check the Ant version -->
   <available property="Ant-1.8.0-or-later" classname="org.apache.tools.ant.taskdefs.Local"/>
   <fail message="This build requires Ant 1.8.0 or later" unless="Ant-1.8.0-or-later"/>
 
   <!-- Check that the 3rd party libraries are present -->
   <target name="_check_3rdparty">
     <condition property="3rdparty.present">
       <and>
         <!-- No need to check all jars; just check a few -->
         <available classpathref="classpath" classname="org.apache.bsf.BSFEngine"/>
         <available classpathref="classpath" classname="com.thoughtworks.xstream.XStream"/>
       </and>
     </condition>
   </target>
 
   <target name="_message_3rdParty" depends="_check_3rdparty" unless="3rdparty.present">
     <echo>Cannot find all the required 3rd party libraries.</echo>
     <echo>If building from a release, you can get most of them from the binary archive.</echo>
     <echo>Use "ant download_jars" to download any missing jars.</echo>
     <fail message="Cannot find required classes"/>
   </target>
 
   <target name="setup-eclipse-project" description="Setup eclipse project to contribute to JMeter">
     <echo>Creating eclipse project</echo>
     <copy overwrite="false" file="eclipse.project" tofile=".project" />
     <copy overwrite="false" file="eclipse.classpath" tofile=".classpath"/>
     <input message="Next step will download dependencies for JMeter, do you agree with the download ?" addproperty="do.download" validargs="y,n"/>
     <condition property="do.abort">
       <equals arg1="n" arg2="${do.download}"/>
     </condition>
     <fail message="You didn't agree to download dependencies, ensure you call Ant target 'download_jars when importing project" if="do.abort"/>
     <echo>Downloading dependencies</echo>
     <antcall target="download_jars" />
     <echo>Project has been successfully created, you can now import it in Eclipse using Right click > Import > Existing projects into Workspace</echo>
   </target>
 
   <target name="install" depends="package,docs-printable" description="Install JMeter. (Compiles code and creates jars)">
     <fixcrlf encoding="${encoding}" srcdir="." eol="lf" includes="bin/*.sh bin/jmeter bin/jmeter-server bin/mirror-server"/>
     <chmod perm="+x" dir="." includes="${dist.executables}"/>
   </target>
 
   <target name="install-examples" depends="compile-examples" description="Build and installs the example components.">
     <jar jarfile="${dest.jar}/ApacheJMeter_examples.jar" manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
         fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
         fullpath="META-INF/LICENSE" />
       <fileset dir="${build.examples}" includes="**/*.class" />
       <fileset dir="${src.examples}" includes="**/*.properties" />
     </jar>
   </target>
 
   <!-- lists of files needed for a binary distribution (excluding library files) -->
   <!-- Source files also needed at runtime -->
   <patternset id="dist.common.native">
     <include name="${dest.jar.jmeter}/BeanShell*.bshrc"/>
     <include name="${dest.jar.jmeter}/jaas.conf"/>
     <include name="${dest.jar.jmeter}/krb5.conf"/>
     <include name="${dest.jar.jmeter}/hc.parameters"/>
     <include name="${dest.jar.jmeter}/jmeter.properties"/>
     <include name="${dest.jar.jmeter}/log4j2.xml"/>
     <include name="${dest.jar.jmeter}/reportgenerator.properties"/>
     <include name="${dest.jar.jmeter}/upgrade.properties"/>
     <include name="${dest.jar.jmeter}/saveservice.properties"/>
     <include name="${dest.jar.jmeter}/users.dtd"/>
     <include name="${dest.jar.jmeter}/users.xml"/>
     <!-- Sample override properties files -->
     <include name="${dest.jar.jmeter}/httpclient.parameters"/>
     <include name="${dest.jar.jmeter}/system.properties"/>
     <include name="${dest.jar.jmeter}/user.properties"/>
     <!-- Exclude any files that might be present from testing the release -->
     <exclude name="${dest.jar.jmeter}/*.log"/>
     <include name="${dest.jar.jmeter}/examples/**"/>
     <include name="${dest.jar.jmeter}/templates/*.dtd"/>
     <!-- report-templates files which need to have native eol -->
     <include name="${dest.jar.jmeter}/report-template/README.TXT"/>
     <include name="${dest.jar.jmeter}/report-template/**/*.fmkr"/>
     <include name="${dest.jar.jmeter}/report-template/content/**/*.css"/>
     <include name="${dest.jar.jmeter}/report-template/content/**/*.js"/>
     <!-- JMX files are in the non-native section -->
     <exclude name="${dest.jar.jmeter}/examples/*.jmx"/>
     <include name="${extras.dir}/**"/>
     <!-- Binary file types -->
     <exclude name="${extras.dir}/*.jar"/>
     <exclude name="${extras.dir}/*.jpg"/>
     <exclude name="${extras.dir}/*.png"/>
     <!-- File types that need to retain their EOL setting -->
     <exclude name="${extras.dir}/*.jmx"/>
     <exclude name="${extras.dir}/*.cmd"/>
     <exclude name="${extras.dir}/*.sh"/>
   </patternset>
 
   <patternset id="dist.binaries.native">
     <include name="LICENSE"/>
     <include name="licenses/**"/>
     <include name="NOTICE"/>
     <include name="README.md"/>
     <patternset refid="dist.common.native"/>
     <!-- Help documentation -->
     <include name="${dest.printable_docs}/**"/>
     <!-- Binary file types -->
     <exclude name="${dest.printable_docs}/**/*.pdf"/>
     <exclude name="${dest.printable_docs}/**/*.jmx"/>
     <!-- We also need the shared CSS for the printable docs -->
     <include name="${dest.docs}/css/**"/>
   </patternset>
 
   <!-- Source files also needed at runtime -->
   <patternset id="dist.common.non.native">
     <include name="${dest.jar.jmeter}/heapdump.*"/>
     <include name="${dest.jar.jmeter}/jmeter*"/>
     <exclude name="${dest.jar.jmeter}/jmeter.properties"/>
     <exclude name="${dest.jar.jmeter}/reportgenerator.properties"/>
     <include name="${dest.jar.jmeter}/mirror-server*"/>
     <include name="${dest.jar.jmeter}/shutdown.*"/>
     <include name="${dest.jar.jmeter}/stoptest.*"/>
     <!-- Fake SSL cert for JMeter proxy recorder in https -->
     <include name="${dest.jar.jmeter}/proxyserver.jks"/>
     <!-- Exclude any files that might be present from testing the release -->
     <exclude name="${dest.jar.jmeter}/*.log"/>
     <!-- report-template files non native -->
     <include name="${dest.jar.jmeter}/report-template/content/pages/*.png"/>
     <include name="${dest.jar.jmeter}/report-template/sbadmin2*/**"/>
     <include name="${dest.jar.jmeter}/templates/*.jmx"/>
     <include name="${dest.jar.jmeter}/templates/*.xml"/>
     <include name="${dest.jar.jmeter}/examples/*.jmx"/>
     <include name="${extras.dir}/*.jar"/>
     <include name="${extras.dir}/*.jpg"/>
     <include name="${extras.dir}/*.png"/>
     <!-- File types that need to retain their EOL setting -->
     <include name="${extras.dir}/*.jmx"/>
     <include name="${extras.dir}/*.cmd"/>
     <include name="${extras.dir}/*.sh"/>
   </patternset>
 
   <patternset id="dist.binaries.non.native">
     <patternset refid="dist.common.non.native"/>
     <include name="${dest.jar}/"/>
     <include name="${lib.dir}/bshclient.jar"/>
     <include name="${lib.dir}/jorphan.jar"/>
     <include name="${lib.dir}/junit/test.jar"/>
     <include name="${dest.jar.jmeter}/ApacheJMeter.jar"/>
     <!-- Help documentation, binary files -->
     <include name="${dest.printable_docs}/**/*.pdf"/>
     <include name="${dest.printable_docs}/**/*.jmx"/>
     <!-- We also need the shared images for the printable docs -->
     <include name="${dest.docs}/images/**"/>
   </patternset>
 
   <!--
       List of Unix executable files in the binary distribution
       These need special handling to create the correct file mode
   -->
   <property name="dist.executables"
     value="${dest.jar.jmeter}/jmeter ${dest.jar.jmeter}/jmeter-server ${dest.jar.jmeter}/mirror-server ${dest.jar.jmeter}/*.sh ${extras.dir}/*.sh"/>
 
   <!-- List of files in source distribution that are eol=native -->
   <!--
   N.B. dist.sources[.non].native sets exclude source files present in dist.binaries[.non].native
   so that the nightly build src archive does not duplicate stuff in the binary archive
   (This may change, as the overlap does not waste much space)
   -->
   <patternset id="dist.sources.native">
     <include name="LICENSE"/>
     <!-- Include all the licenses; they are needed to build the distribution -->
     <include name="licenses/**"/>
     <include name="NOTICE"/>
     <include name="README.md"/>
     <include name="${src.dir}/**"/>
     <exclude name="**/messages.metaprops"/>
     <!-- Exclude binary types -->
     <exclude name="**/*.gif"/>
     <exclude name="**/*.jpg"/>
     <exclude name="**/*.png"/>
     <include name="${src.docs}/**"/>
     <!-- Include some resources -->
     <include name="${res.dir}/**"/>
     <!-- Exclude binary types (and JMX/JTL, which are not OS-dependent) -->
     <exclude name="${src.docs}/images/**"/>
     <exclude name="${src.docs}/**/*.jmx"/>
     <exclude name="${src.docs}/**/*.odt"/>
     <exclude name="${src.docs}/**/*.pdf"/>
     <exclude name="${src.docs}/**/*.sxi"/>
     <exclude name="${src.docs}/**/*.sxw"/>
     <include name="${src.test}/**"/>
     <include name="build.xml"/>
     <include name="build.properties"/>
     <include name="${dest.jar.jmeter}/testfiles/**"/>
     <exclude name="${dest.jar.jmeter}/testfiles/*.jmx"/>
     <exclude name="${dest.jar.jmeter}/testfiles/*.jtl"/>
     <!-- These are generated with EOL=LF -->
     <exclude name="${dest.jar.jmeter}/testfiles/*.xml"/>
     <!-- Ignore unit test output -->
     <exclude name="${dest.jar.jmeter}/testfiles/*.out"/>
     <exclude name="${dest.jar.jmeter}/testfiles/Sample_*.png"/>
     <include name="eclipse.classpath"/>
     <include name="eclipse.project"/>
     <include name="eclipse.md"/>
     <include name=".gitignore"/>
     <include name=".travis.yml"/>
     <include name="checkstyle.xml"/>
     <include name="checkstyle-suppressions.xml"/>
     <include name="rat-excludes.txt"/>
     <include name="${build.test-res}/**"/>
     <include name="${lib.dir}/aareadme.txt"/>
     <include name="${lib.dir}/**/readme.txt"/>
     <include name="fb-*.x*"/>
     <!-- Make sure that the lib/opt directory is included in the archives -->
     <include name="${lib.opt}/README.txt"/>
   </patternset>
 
   <!-- Non-native items -->
   <patternset id="dist.sources.non.native">
     <include name="${src.dir}/**/*.gif"/>
     <include name="${src.dir}/**/*.jpg"/>
     <include name="${src.dir}/**/*.png"/>
     <include name="${src.docs}/images/**"/>
     <include name="${src.docs}/**/*.jmx"/>
     <include name="${src.docs}/**/*.odt"/>
     <include name="${src.docs}/**/*.pdf"/>
     <include name="${src.docs}/**/*.sxi"/>
     <include name="${src.docs}/**/*.sxw"/>
     <include name="${dest.jar.jmeter}/testfiles/*.jmx"/>
     <include name="${dest.jar.jmeter}/testfiles/*.jtl"/>
     <!-- These are generated with EOL=LF -->
     <include name="${dest.jar.jmeter}/testfiles/*.xml"/>
     <!-- Include the image files used in parsing / embedded download tests -->
     <include name="${dest.jar.jmeter}/testfiles/**/*.gif"/>
     <include name="${dest.jar.jmeter}/testfiles/**/*.jpg"/>
     <include name="${dest.jar.jmeter}/testfiles/**/*.png"/>
   </patternset>
 
     <!-- Convert eol:native source files to appropriate format if required -->
     <target name="_filter" unless="native.${eoltype}">
       <property name="workdir" value="${dist.dir}/${eoltype}"/>
       <echo level="info">Converting work files to eol=${eoltype} in ${workdir}</echo>
       <mkdir dir="${workdir}"/>
       <copy includeemptydirs="false" todir="${workdir}" encoding="${encoding}">
         <fileset dir=".">
           <patternset refid="${fileset}"/>
         </fileset>
         <filterchain>
           <fixcrlf encoding="${encoding}" fixlast="false" eol="${eoltype}" srcdir="${workdir}"/>
         </filterchain>
       </copy>
     </target>
 
     <!-- Files to be included in full source download -->
     <patternset id="dist_src_files_native">
       <patternset refid="dist.sources.native"/>
       <patternset refid="dist.common.native"/>
     </patternset>
 
     <patternset id="dist_src_files_non_native">
       <patternset refid="dist.sources.non.native"/>
       <patternset refid="dist.common.non.native"/>
     </patternset>
 
     <!-- Files to be included in full binary download -->
     <patternset id="dist_bin_files_native">
       <patternset refid="dist.binaries.native"/>
       <patternset refid="external.jars.notices"/>
       <!-- We don't need the site docs, but we do want Javadoc (e.g. for BeanShell) -->
       <include name="${dest.docs.api}/**"/>
       <exclude name="${dest.docs.api}/resources/**"/>
     </patternset>
 
     <patternset id="dist_bin_files_non_native">
       <patternset refid="dist.binaries.non.native"/>
       <patternset refid="external.jars"/>
       <include name="${dest.docs.api}/resources/**"/>
     </patternset>
 
     <!-- NOTE: the site documents are not included in either archive -->
 
     <!-- Invoke with -Djmeter.version=m.n -Duser.name=xyz@apache.org [-Dsvn.revision=nnnnn] [-Ddisplay.version=xxxx]
     Creates clean build and all documentation
     Creates runtime and source distributions and site documentation
     -->
     <target name="distribution"
         depends="ant-version,svnCheck,check-versions,clean,install,docs-printable,docs-api,test,_distribution"
         description="Build JMeter for end-user distribution"/>
 
     <target name="check-versions" unless="disable-check-versions">
       <fail message="jmeter.version must be defined" unless="jmeter.version"/>
       <fail message="svn.revision must be defined" unless="svn.revision"/>
       <local         name="version.match"/>
       <condition property="version.match">
         <resourcecontains resource="${src.core}/org/apache/jmeter/util/JMeterVersion.java"
                 substring='VERSION = "${jmeter.version}";'/>
       </condition>
       <fail message="jmeter.version (${jmeter.version}) must be same as JMeterVersion.VERSION" unless="version.match"/>
     </target>
 
     <!--
     <target
         name="nightly"
         depends="init-svnVersion,package,docs-printable,pack-nightly"
         description="Build JMeter for nightly dir (package docs-printable pack-nightly)"/>
     -->
    <target
         name="nightly-setup"
@@ -2023,1475 +2021,1476 @@ run JMeter unless all the JMeter jars are added.
     <antcall target="_pack-libraries"/>
     <antcall target="_pack-source"/>
     -->
   </target>
 
   <!-- Used by project jmeter-test -->
   <target name="gump-test"
       depends="_gump_properties,compile-tests,_test"
       description="Test JMeter in Gump">
     <!-- Show the log file
     <concat>
       <filelist dir="bin" files="jmeter-test.log" />
     </concat>
      -->
   </target>
 
   <target name="_gump_properties">
     <echo level="info">
  Gump properties for this run
   jmeter.version      = ${jmeter.version}
   gump.run            = ${gump.run}
   date.projectfile    = ${date.projectfile}
   version.projectfile = ${version.projectfile}
  Build file:
   version.build       = ${version.build}
  Java properties:
   target.java.version = ${target.java.version}
   src.java.version    = ${src.java.version}
   optimize            = ${optimize}
   deprecation         = ${deprecation}
   encoding            = ${encoding}
     </echo>
     <echoproperties prefix="ant"/>
     <echoproperties prefix="gump"/>
     <echoproperties prefix="os"/>
     <echoproperties prefix="java"/>
 
   </target>
 
   <target name="pack-src" depends="init-version">
     <property name="dist.name" value="apache-jmeter-${jmeter.version}"/>
     <antcall target="_pack-source"/>
   </target>
 
   <target name="pack-dist" depends="init-version">
     <property name="dist.name" value="apache-jmeter-${jmeter.version}"/>
     <antcall target="_pack-binaries"/>
     <antcall target="_pack-libraries"/>
     <antcall target="_pack-javadoc"/>
     <antcall target="_pack-source"/>
   </target>
 
   <!-- As pack-dist but without javadoc -->
   <target name="pack-nightly" depends="init-version">
     <property name="dist.name" value="apache-jmeter-${jmeter.version}"/>
     <antcall target="_pack-binaries"/>
     <antcall target="_pack-libraries"/>
     <antcall target="_pack-source"/>
   </target>
 
   <target name="_pack-binaries">
     <property name="pack.name" value="${dist.name}_bin"/>
     <mkdir dir="${dist.dir}"/>
     <tar destfile="${dist.dir}/${pack.name}.tar" longfile="gnu">
       <tarfileset dir="." prefix="${dist.name}" excludes="${dist.executables}" defaultexcludes="yes">
         <patternset refid="dist.binaries.native"/>
       </tarfileset>
       <tarfileset dir="." prefix="${dist.name}" excludes="${dist.executables}" defaultexcludes="yes">
         <patternset refid="dist.binaries.non.native"/>
       </tarfileset>
       <tarfileset mode="755" includes="${dist.executables}" dir="." prefix="${dist.name}" defaultexcludes="yes"/>
     </tar>
     <gzip destfile="${dist.dir}/${pack.name}.tgz" src="${dist.dir}/${pack.name}.tar" />
     <!-- no longer needed -->
     <delete file="${dist.dir}/${pack.name}.tar"/>
     <zip  destfile="${dist.dir}/${pack.name}.zip">
       <zipfileset dir="." prefix="${dist.name}" defaultexcludes="yes">
         <patternset refid="dist.binaries.native"/>
       </zipfileset>
       <zipfileset dir="." prefix="${dist.name}" defaultexcludes="yes">
         <patternset refid="dist.binaries.non.native"/>
       </zipfileset>
     </zip>
   </target>
 
   <target name="_pack-libraries">
     <property name="pack.name" value="${dist.name}_lib"/>
     <mkdir dir="${dist.dir}"/>
     <tar destfile="${dist.dir}/${pack.name}.tar" longfile="gnu">
       <tarfileset dir="." prefix="${dist.name}" defaultexcludes="yes">
         <patternset refid="external.jars.notices"/>
       </tarfileset>
       <tarfileset dir="." prefix="${dist.name}" defaultexcludes="yes">
         <patternset refid="external.jars"/>
       </tarfileset>
     </tar>
     <gzip destfile="${dist.dir}/${pack.name}.tgz" src="${dist.dir}/${pack.name}.tar" />
     <!-- no longer needed -->
     <delete file="${dist.dir}/${pack.name}.tar"/>
     <zip  destfile="${dist.dir}/${pack.name}.zip">
       <zipfileset dir="." prefix="${dist.name}" defaultexcludes="yes">
         <patternset refid="external.jars.notices"/>
       </zipfileset>
       <zipfileset dir="." prefix="${dist.name}" defaultexcludes="yes">
         <patternset refid="external.jars"/>
       </zipfileset>
     </zip>
   </target>
 
   <target name="_pack-javadoc">
     <property name="pack.name" value="${dist.name}_api"/>
     <mkdir dir="${dist.dir}"/>
     <tar destfile="${dist.dir}/${pack.name}.tar" longfile="gnu">
       <tarfileset includes="${dest.docs.api}" dir="." prefix="${dist.name}" defaultexcludes="yes"/>
     </tar>
     <gzip destfile="${dist.dir}/${pack.name}.tgz" src="${dist.dir}/${pack.name}.tar" />
     <!-- no longer needed -->
     <delete file="${dist.dir}/${pack.name}.tar"/>
     <zip  destfile="${dist.dir}/${pack.name}.zip">
        <zipfileset includes="${dest.docs.api}" dir="." prefix="${dist.name}" defaultexcludes="yes"/>
     </zip>
   </target>
 
   <target name="_pack-source">
     <property name="pack.name" value="${dist.name}_src"/>
     <mkdir dir="${dist.dir}"/>
     <tar destfile="${dist.dir}/${pack.name}.tar" longfile="gnu">
       <tarfileset dir="." prefix="${dist.name}" defaultexcludes="yes">
         <patternset refid="dist.sources.native"/>
       </tarfileset>
       <tarfileset dir="." prefix="${dist.name}" defaultexcludes="yes">
         <patternset refid="dist.sources.non.native"/>
       </tarfileset>
     </tar>
     <gzip destfile="${dist.dir}/${pack.name}.tgz" src="${dist.dir}/${pack.name}.tar" />
     <!-- no longer needed -->
     <delete file="${dist.dir}/${pack.name}.tar"/>
     <zip  destfile="${dist.dir}/${pack.name}.zip">
       <zipfileset dir="." prefix="${dist.name}" defaultexcludes="yes">
         <patternset refid="dist.sources.native"/>
       </zipfileset>
       <zipfileset dir="." prefix="${dist.name}" defaultexcludes="yes">
         <patternset refid="dist.sources.non.native"/>
       </zipfileset>
     </zip>
   </target>
 
   <!-- Create a zip of all resource files for translators -->
   <target name="pack-resources">
     <mkdir dir="${dist.dir}"/>
     <zip  destfile="${dist.dir}/resources.zip">
       <zipfileset dir="." defaultexcludes="yes">
         <patternset excludes="${src.dir}/examples/**" />
         <patternset includes="${src.dir}/**/*Resources.properties" />
         <patternset includes="${src.dir}/**/messages.properties" />
         <patternset includes="${src.dir}/**/i18nedit.properties" />
       </zipfileset>
     </zip>
   </target>
 
 <!--
     Utility target to create MD5 checksums in standard format (with *filename)
     Usage:
     <antcall target="_hash">
         <param name="path" value="archive.jar|zip|gz"/>
     </antcall>
 -->
 
   <target name="_hash" unless="hash.skip">
     <echo message="Creating MD5 for ${path}"/>
     <basename property="_base" file="${path}"/>
     <checksum algorithm="MD5" file="${path}" property="md5"/>
     <echo message="${md5} *${_base}" file="${path}.md5"/>
     <echo message="Creating SHA for ${path}"/>
     <checksum algorithm="SHA" file="${path}" property="sha"/>
     <echo message="${sha} *${_base}" file="${path}.sha"/>
   </target>
 
   <!--
   Clean-docs and clean-apidocs can be used to empty the docs or docs/api directories.
   This should be done before regenerating the documents for a release so that any obsolete files are detected.
   -->
   <target name="clean-docs">
     <delete>
       <fileset dir="${dest.docs}" excludes=".svn/** api/**"/>
     </delete>
   </target>
 
   <!-- Use this before running docs-print to ensure image files are synchronised -->
   <target name="clean-docs-images">
     <delete failonerror="false">
       <fileset dir="${dest.docs}/images" excludes=".svn/**"/>
     </delete>
   </target>
 
   <target name="clean-apidocs">
     <delete failonerror="false">
       <fileset dir="${dest.docs.api}" excludes=".svn/**" />
     </delete>
   </target>
 
   <target name="clean" description="Clean up to force a build from source.">
     <!-- Unfortunately Ant reports failure if a directory does not exist -->
     <delete quiet="false" failonerror="false">
       <fileset dir="${dest.jar.jmeter}" includes="ApacheJMeter.jar"/>
       <fileset dir="${lib.dir}" includes="jorphan.jar"/>
       <fileset dir="${lib.dir}" includes="bshclient.jar"/>
       <fileset dir="${dest.jar}" includes="*.jar"/>
       <fileset dir="${build.dir}"/>
       <fileset dir="${dest.printable_docs}"/>
       <fileset dir="${dist.dir}"/>
     </delete>
   </target>
 
   <target name="clean-dist" description="Clean up dist directory.">
     <delete quiet="true">
       <fileset dir="${dist.dir}"/>
     </delete>
   </target>
 
   <target name="docs-api" description="Generate the API documentation.">
     <available property="jdk1.8+" classname="java.util.function.Consumer"/>
     <fail unless="jdk1.8+"
           message="Must use Java 8 or later for creating the Javadocs"/>
     <tstamp>
       <!-- Used to ensure end-year is up to date -->
       <format property="THISYEAR" pattern="yyyy"/>
     </tstamp>
 
     <!-- JMeter Javadoc version (own variable is used so can be overriden independently) -->
     <property name="docversion" value="${jmeter.version}"/>
 
     <mkdir dir="${dest.docs.api}"/>
     <delete quiet="true">
       <fileset dir="${dest.docs.api}" includes="**/*.html"/>
     </delete>
     <echo level="info">Updating overview to ${docversion}</echo>
     <replaceregexp match="version [^\s]+"
                  encoding="${encoding}"
                  replace="version ${docversion}"
                  flags="g" byline="true">
       <fileset dir="${src.docs}" includes="overview.html" />
     </replaceregexp>
     <javadoc
       sourcepathref="srcpaths"
       overview="${src.docs}/overview.html"
       additionalparam="-breakiterator -notimestamp"
       destdir="${dest.docs.api}"
       encoding="${javadoc.encoding}"
       verbose="false"
       protected="yes"
       version="yes"
       doctitle="Apache JMeter API"
       windowtitle="Apache JMeter API"
       header="&lt;b&gt;Apache JMeter&lt;/b&gt;"
       bottom="Copyright &amp;#xA9; 1998-${THISYEAR} Apache Software Foundation. All Rights Reserved."
       packagenames="org.apache.jmeter.*,org.apache.jorphan.*"
       excludepackagenames="org.apache.jorphan.timer">
       <classpath>
         <path refid="classpath"/>
         <path refid="logging.classpath"/>
       </classpath>
       <link href="http://docs.oracle.com/javase/8/docs/api/"/>
     </javadoc>
     <!-- No need for Javadoc patch (CVE-2013-1571) now we are using Java 8 minimum -->
   </target>
 
   <!--
     Run Doccheck: See http://java.sun.com/j2se/javadoc/doccheck/docs/DocCheck.html
     and http://java.sun.com/j2se/javadoc/doccheck/
     Download the doclet, and put the jar in lib/opt.
     Output is in reports/ directory
   -->
   <target name="docs-check">
     <javadoc sourcepathref="srcpaths"
              destdir="reports"
              docletpath="${lib.opt}/doccheck.jar"
              packagenames="org.apache.jmeter.*,org.apache.jorphan.*"
              excludepackagenames="org.apache.jmeter.util.keystore,org.apache.jorphan.timer">
       <classpath refid="classpath"/>
       <doclet name="com.sun.tools.doclets.doccheck.DocCheck">
         <!--
             -execDepth: 1=org.* 2=org.apache.* 3+=org.apache.jmeter.*
             -evident does not seem to work
          -->
         <param name="-execDepth" value="3"/>
         <param name="-evident" value="4"/>
       </doclet>
     </javadoc>
   </target>
 
   <target name="docs-site" depends="init-docs" description="Generate browsable HTML documentation in web-site format.">
     <mkdir dir="${dest.docs}" />
     <!-- The extending pages are rather out of date (and not linked from elsewhere) -->
     <xslt style="xdocs/stylesheets/website-style.xsl" basedir="${src.docs}" destdir="${dest.docs}"
       force="${docs.force}" excludes="extending.xml" includes="*.xml">
       <param name="relative-path" expression="." />
       <param name="subdir" expression="" />
       <param name="year" expression="${year}" />
     </xslt>
     <xslt style="xdocs/stylesheets/website-style.xsl" basedir="${src.docs}/usermanual" destdir="${dest.docs}/usermanual"
       force="${docs.force}" includes="*.xml">
       <param name="relative-path" expression=".." />
       <param name="subdir" expression="usermanual" />
       <param name="year" expression="${year}" />
     </xslt>
     <xslt style="xdocs/stylesheets/website-style.xsl" basedir="${src.docs}/localising" destdir="${dest.docs}/localising"
       force="${docs.force}" includes="*.xml">
       <param name="relative-path" expression=".." />
       <param name="subdir" expression="usermanual" />
       <param name="year" expression="${year}" />
     </xslt>
     <copy todir="${dest.docs}/images" overwrite="${docs.force}">
       <fileset dir="${src.images}" />
     </copy>
     <copy todir="${dest.docs}/css" overwrite="${docs.force}">
       <fileset dir="${src.css}"/>
     </copy>
     <!--
     Note: it's vital that the Javadoc files are excluded from any fixes applied here.
     Any fixes to Javadoc files need to be done in the docs-api target only.
     Otherwise the output from the build will depend on which is done first.
     -->
     <echo level="info">Fixing EOL</echo>
     <fixcrlf encoding="utf-8" srcdir="${dest.docs}/" includes="**/*.html" excludes="api/**" fixlast="false"/>
     <echo level="info">Removing unnecessary &lt;/br> tags</echo>
     <replace encoding="utf-8" dir="${dest.docs}/" includes="**/*.html" excludes="api/**" token="&lt;/br>" value=""/>
     <copy todir="${dest.docs}/demos">
       <fileset dir="${src.demos}"/>
     </copy>
     <copy todir="${dest.docs}/usermanual">
       <fileset file="${src.docs}/usermanual/*.pdf"/>
     </copy>
     <copy todir="${dest.docs}/extending">
       <fileset file="${src.docs}/extending/jmeter_tutorial.pdf"/>
     </copy>
     <copy todir="${dest.docs}/">
       <fileset file="${src.docs}/download_jmeter.cgi"/>
     </copy>
   </target>
 
   <target name="docs-printable" depends="init-docs" if="AnakiaTask.present" description="Generate printable HTML documentation.">
     <taskdef name="anakia" classpathref="anakia.classpath" classname="org.apache.velocity.anakia.AnakiaTask"/>
     <!-- The extending pages are rather out of date (and not linked from elsewhere) -->
     <anakia basedir="${src.docs}" destdir="${dest.printable_docs}/" extension=".html" style="${eclipse.anakia}/xdocs/stylesheets/site_printable.vsl" projectFile="./stylesheets/printable_project.xml"
         excludes="**/stylesheets/** extending.xml extending/*.xml"
         includes="**/*.xml" lastModifiedCheck="${anakia.lastModifiedCheck}" velocityPropertiesFile="${src.docs}/velocity.properties"/>
     <echo level="info">Fixing EOL</echo>
     <fixcrlf encoding="utf-8" srcdir="${dest.printable_docs}/" includes="**/*.html" fixlast="false"/>
     <echo level="info">Removing unnecessary &lt;/br> tags</echo>
     <replace encoding="utf-8" dir="${dest.printable_docs}/" includes="**/*.html" token="&lt;/br>" value=""/>
     <!--
     Share images with non-printable version
     Means printable version won't work on web-site
     -->
     <echo level="info">Copying files</echo>
     <copy todir="${dest.docs}/css">
       <fileset dir="${src.css}"/>
     </copy>
     <copy todir="${dest.docs}/images">
       <fileset dir="${src.images}" />
     </copy>
     <copy todir="${dest.printable_docs}/demos">
       <fileset dir="${src.demos}"/>
     </copy>
     <copy todir="${dest.printable_docs}/usermanual">
         <fileset file="${src.docs}/usermanual/*.pdf"/>
     </copy>
     <copy todir="${dest.printable_docs}/extending">
       <fileset file="${src.docs}/extending/jmeter_tutorial.pdf"/>
     </copy>
   </target>
 
   <target name="test" depends="compile-tests,_test,_allbatchtests"
     description="Run tests (use -Djava.awt.headless=true on systems without graphic displays)"/>
 
   <target name="test-both" depends="test-headless,test-headed"/>
 
   <target name="test-headless" depends="compile-tests">
     <antcall target="_test">
       <param name="test.headless" value="true"/>
     </antcall>
   </target>
 
   <target name="test-headed" depends="compile-tests">
     <antcall target="_test">
       <param name="test.headless" value="false"/>
     </antcall>
   </target>
 
   <target name="batchtestserver" description="Run the batch test using client-server mode">
     <property name="batchtestserver.out" location="${basedir}/bin"/>
     <property name="batchtestserver.log" value="BatchTestServer.log"/>
     <condition property="rmi_hostname_option" value="-Ddummy=true">
       <not><isset property="rmi_force_localhost"/></not>
     </condition>
     <condition property="rmi_hostname_option" value="-Djava.rmi.server.hostname=localhost">
       <isset property="rmi_force_localhost"/>
     </condition>
     <condition property="jacoco_params" value="${jacocoagent}" else="-Djacoco_dummy=">
       <isset property="jacocoagent"/>
     </condition>
     <tstamp>
       <!-- Use variable port to help avoid clashes on CI servers -->
       <format property="rmi_port" pattern="2SSS"/>
     </tstamp>
     <parallel>
       <daemons>
         <java taskname="server" classname="org.apache.jmeter.NewDriver" fork="yes" dir="${batchtestserver.out}">
           <classpath>
             <fileset dir="${dest.jar.jmeter}" includes="*.jar"/>
             <fileset dir="${dest.jar}" includes="*.jar"/>
             <path refid="classpath"/>
             <path refid="logging.classpath"/>
           </classpath>
           <jvmarg value="${jacoco_params}batchtest:daemon:java(server)"/>
           <sysproperty key="java.awt.headless" value="true"/>
           <!-- Bug 59723 -->
           <!-- quieten the logging; this has to be done first -->
           <arg value="-ptestfiles/jmeter-batch.properties"/>
           <!-- pick up default properties -->
           <arg value="-qjmeter.properties"/>
           <!-- reset the logging and other parameters -->
           <arg value="-qtestfiles/jmeter-batch.properties"/>
           <arg value="-i"/>
           <arg value="testfiles/log4j2-batch.xml"/>
           <arg value="-j"/>
           <arg value="${batchtestserver.out}/${batchtestserver.log}"/>
           <arg value="-Dserver_port=${rmi_port}"/>
           <arg value="-s"/>
           <arg value="-Jserver.exitaftertest=true"/>
           <arg value="${rmi_hostname_option}"/>
         </java>
       </daemons>
       <sequential>
         <sleep seconds="1"/>
         <antcall target="batchtest">
           <param name="remote" value="-Rlocalhost:${rmi_port}"/>
           <param name="taskname" value="client"/>
           <!-- Default the test name so we can override with a parameter -->
         </antcall>
       </sequential>
     </parallel>
     <!-- Show the log file -->
     <concat>
       <filelist dir="${batchtestserver.out}" files="${batchtestserver.log}" />
     </concat>
 
     <local         name="BatchTestLocalServer.len"/>
     <condition property="BatchTestLocalServer.len">
       <length file="${batchtestserver.out}/${batchtestserver.log}" when="equal" length="0" />
     </condition>
     <fail unless="BatchTestLocalServer.len">
         Error detected in server log file. See above.
     </fail>
 
     <delete>
       <fileset dir="${batchtestserver.out}">
         <include name="${batchtestserver.log}"/>
       </fileset>
      </delete>
   </target>
 
   <target name="batchtest" description="Run the batch test and compare output files" unless="${skip.batchtest}">
 
     <!-- will be overwritten by antcall paramaters -->
     <property name="taskname" value="jmeter"/>
     <property name="remote" value="-X"/>
     <property name="batchtest.inp" location="${basedir}/bin/testfiles"/>
     <property name="batchtest.out" location="${basedir}/bin"/>
     <property name="batchtest.name" value="BatchTestLocal"/>
     <!--
          Allow variable to be set on the command line
          Cannot omit value because that causes a warning message
      -->
     <property name="batchtest.variable" value="dummy"/>
     <property name="batchtest.value" value="dummy"/>
 
     <!-- Fix the EOL in case the file was derived from the "wrong" archive type -->
     <fixcrlf encoding="${encoding}" srcdir="${batchtest.inp}" includes="${batchtest.name}.csv"/>
 
     <echo level="info" message="Starting ${batchtest.name} using ${remote}"/>
 
     <macrodef name="deleteworkfiles">
       <sequential>
         <delete>
           <fileset dir="${batchtest.out}">
             <include name="${batchtest.name}.csv"/>
             <include name="${batchtest.name}.xml"/>
             <include name="${batchtest.name}.log"/>
             <include name="${batchtest.name}.jtl"/>
             <!-- Allow for optional error files -->
             <include name="${batchtest.name}.err"/>
           </fileset>
         </delete>
       </sequential>
     </macrodef>
 
     <macrodef name="checkfile">
       <attribute name="type" default=""/>
       <attribute name="file"/>
       <sequential>
         <local name="found"/>
         <!--echo>Looking for @{file}</echo-->
         <available property="found" file="@{file}"/>
         <fail message="Cannot find @{type} file @{file}" unless="found"/>
       </sequential>
     </macrodef>
 
     <checkfile type="input" file="${batchtest.inp}${file.separator}${batchtest.name}.csv"/>
     <checkfile type="input" file="${batchtest.inp}${file.separator}${batchtest.name}.xml"/>
 
     <deleteworkfiles/>
 
     <condition property="jacoco_params" value="${jacocoagent}" else="-Djacoco_dummy=">
       <isset property="jacocoagent"/>
     </condition>
 
     <java taskname="${taskname}" classname="org.apache.jmeter.NewDriver" fork="yes" dir="${basedir}/bin">
       <classpath>
         <fileset dir="${dest.jar.jmeter}" includes="*.jar"/>
         <fileset dir="${dest.jar}" includes="*.jar"/>
         <path refid="classpath"/>
         <path refid="logging.classpath"/>
       </classpath>
       <jvmarg value="${jacoco_params}batchtest:java(${taskname})"/>
       <!-- Detect if non-GUI runs OK headless by forcing it to try using non-headless mode -->
       <sysproperty key="user.language" value="en"/>
       <sysproperty key="user.region" value="US"/>
       <sysproperty key="java.awt.headless" value="false"/>
       <!-- Bug 59723 -->
       <!-- quieten the logging; this has to be done first -->
       <arg value="-ptestfiles/jmeter-batch.properties"/>
       <!-- pick up default properties -->
       <arg value="-qjmeter.properties"/>
       <!-- reset the logging and other parameters -->
       <arg value="-qtestfiles/jmeter-batch.properties"/>
       <arg value="-n"/>
       <arg value="-ttestfiles/${batchtest.name}.jmx"/>
       <arg value="-i"/>
       <arg value="testfiles/log4j2-batch.xml"/>
       <arg value="-j"/>
       <arg value="${batchtest.name}.log"/>
       <arg value="-l"/>
       <arg value="${batchtest.name}.jtl"/>
       <arg value="${remote}"/>
       <!-- Check properties can be passed to local/remote tests -->
       <arg value="-Jmodule=Module"/>
       <arg value="-Gmodule=Module"/>
       <!-- Check property can be used for filenames in local/remote tests (no need to defined as -G) -->
       <arg value="-JCSVFILE=${batchtest.name}.csv"/>
       <arg value="-J${batchtest.variable}=${batchtest.value}"/>
     </java>
 
     <!-- Show the log file -->
     <concat>
       <filelist dir="${batchtest.out}" files="${batchtest.name}.log" />
     </concat>
 
     <checkfile type="output" file="${batchtest.out}${file.separator}${batchtest.name}.csv"/>
     <checkfile type="output" file="${batchtest.out}${file.separator}${batchtest.name}.xml"/>
     <checkfile type="output" file="${batchtest.out}${file.separator}${batchtest.name}.jtl"/>
 
     <local         name="BatchTestLocal.csv.OK"/>
     <local         name="file1.csv"/>
     <local         name="file2.csv"/>
 
     <loadfile property="file1.csv" srcFile="${batchtest.inp}/${batchtest.name}.csv"/>
     <loadfile property="file2.csv" srcFile="${batchtest.out}/${batchtest.name}.csv"/>
     <condition property="BatchTestLocal.csv.OK">
       <filesmatch file1="${batchtest.inp}/${batchtest.name}.csv" file2="${batchtest.out}/${batchtest.name}.csv"/>
     </condition>
     <fail unless="BatchTestLocal.csv.OK">
         CSV Files are not identical.
         ${batchtest.inp}${file.separator}${batchtest.name}.csv
         ${file1.csv}
         ${batchtest.out}${file.separator}${batchtest.name}.csv
         ${file2.csv}
     </fail>
 
     <local         name="BatchTestLocal.xml.OK"/>
     <local         name="file1.xml"/>
     <local         name="file2.xml"/>
     <loadfile property="file1.xml" srcFile="${batchtest.inp}/${batchtest.name}.xml"/>
     <loadfile property="file2.xml" srcFile="${batchtest.out}/${batchtest.name}.xml"/>
     <condition property="BatchTestLocal.xml.OK">
      <filesmatch file1="${batchtest.inp}/${batchtest.name}.xml" file2="${batchtest.out}/${batchtest.name}.xml"/>
     </condition>
     <fail unless="BatchTestLocal.xml.OK">
         XML Files are not identical.
         ${batchtest.inp}${file.separator}${batchtest.name}.xml
         ${file1.xml}
         ${batchtest.out}${file.separator}${batchtest.name}.xml
         ${file2.xml}
     </fail>
 
     <echo level="info">${batchtest.name} output files compared OK</echo>
 
     <local         name="BatchTestLocal.len"/>
     <condition property="BatchTestLocal.len">
       <length file="${batchtest.out}/${batchtest.name}.log" when="equal" length="0" />
     </condition>
     <fail unless="BatchTestLocal.len">
         Error detected in log file. See above.
     </fail>
 
     <deleteworkfiles/>
 
   </target>
 
   <!-- Additional test scripts -->
   <target name="batch_scripts">
     <antcall target="batchtest">
       <param name="batchtest.name" value="HTMLParserTestFile_2"/>
     </antcall>
   <!-- Disable Test which seems wrong -->
   <!--
     <antcall target="batchtest">
       Using the same module controller name in command line mode causes NPE
       <param name="batchtest.name" value="Bug47165"/>
     </antcall>
   -->
 
     <antcall target="batchtest">
       <!-- variable in IPSource failed HTTP request if "Concurrent Pool Size" is enabled -->
       <!-- N.B. requires access to jmeter.apache.org -->
       <param name="batchtest.name" value="Bug52310"/>
       <param name="skip.batchtest" value="${skip.bug52310}" />
     </antcall>
     <antcall target="batchtest">
       <!-- Option Start Next Loop in Thread Group does not mark parent Transaction Sampler in error when an error occurs -->
       <param name="batchtest.name" value="Bug52968"/>
     </antcall>
 
     <antcall target="batchtest">
       <!-- IncludeController : NullPointerException loading script in non-GUI mode if Includers use same element name -->
       <param name="batchtest.name" value="Bug50898"/>
     </antcall>
 
     <antcall target="batchtest">
       <!-- Foreach works incorrectly with indexes on subsequent iterations -->
       <param name="batchtest.name" value="Bug56243"/>
     </antcall>
 
     <antcall target="batchtest">
       <!-- ArrayIndexOutOfBoundsException if "sample_variable" is set in client but not server -->
       <!-- This is unaffected by the bug; it just checks the script works OK in local mode -->
       <param name="batchtest.name" value="Bug54685"/>
       <param name="batchtest.variable" value="sample_variables"/>
       <param name="batchtest.value" value="REFERENCE,JSESSIONID"/>
     </antcall>
 
     <antcall target="batchtest">
       <!--   StackOverflowError with ModuleController in Non-GUI mode if its name is the same as the target node -->
       <param name="batchtest.name" value="Bug55375"/>
     </antcall>
 
     <antcall target="batchtestserver">
       <!-- ArrayIndexOutOfBoundsException if "sample_variable" is set in client but not server -->
       <!-- This is the actual test -->
       <param name="batchtest.name" value="Bug54685"/>
       <param name="batchtest.variable" value="sample_variables"/>
       <param name="batchtest.value" value="REFERENCE,JSESSIONID"/>
     </antcall>
 
     <antcall target="batchtest">
       <param name="batchtest.name" value="Bug56811"/>
     </antcall>
 
     <antcall target="batchtest">
       <param name="batchtest.name" value="TEST_HTTPS"/>
       <param name="skip.batchtest" value="${skip.test_https}" />
     </antcall>
 
     <antcall target="batchtest">
       <param name="batchtest.name" value="Bug60607"/>
     </antcall>
 
     <antcall target="batchtest">
       <param name="batchtest.name" value="SlowCharsFeature"/>
     </antcall>
 
     <antcall target="batchtest">
       <param name="batchtest.name" value="Http4ImplPreemptiveBasicAuth"/>
     </antcall>
   </target>
 
   <!-- Run all batch tests; used by test target -->
   <target name="_allbatchtests" depends="batchtest,batchtestserver,batch_scripts">
   </target>
 
    <!-- Generic test target, not intended to be called directly -->
    <target name="_test" depends="package">
    <!--
    The property java.awt.headless is not automatically passed on,
    because the tests are run in a separate JVM from the build.
 
    It is assumed that Gump sets java.awt.headless if required.
 
    Set test.headless from the java.awt property, if that
    is defined, otherwise it us set to "".
    N.B. if test.headless is already set, it will not be changed
    This allows the property to be over-ridden by test-headless etc.
    -->
     <condition property="test.headless" value="${java.awt.headless}">
       <isset property="java.awt.headless"/>
     </condition>
      <!-- make sure test.headless is set to something -->
      <condition property="test.headless" value="">
       <not><isset property="java.awt.headless"/></not>
      </condition>
 
    <!-- set build.test.gump to build.test if not already set -->
     <condition property="build.test.gump" value="${build.test}">
       <not><isset property="build.test.gump"/></not>
     </condition>
     <echo level="info">
    gump.run = ${gump.run}
    java.awt.headless = ${java.awt.headless}
    test.headless = ${test.headless}
    user.dir = ${user.dir}
    basedir = ${basedir}
    test dir = ${build.test}
    test dir gump = ${build.test.gump}
    testsaveservice.saveout = ${testsaveservice.saveout}
    test.encoding = ${test.encoding}
     </echo>
     <delete quiet="true">
       <fileset dir="${basedir}/bin/testfiles" includes="*.jmx.out"/>
     </delete>
     <condition property="jacoco_params" value="${jacocoagent}" else="-Djacoco_dummy=">
       <isset property="jacocoagent"/>
     </condition>
     <!-- fork="yes" is required or dir attribute is ignored -->
     <java classname="org.apache.jorphan.test.AllTests" fork="yes" failonerror="true" dir="${basedir}/bin">
       <classpath>
         <fileset dir="${dest.jar.jmeter}" includes="ApacheJMeter.jar"/>
         <fileset dir="${dest.jar}" includes="*.jar"/>
         <pathelement location="${build.test}"/>
         <pathelement location="${build.test-res}"/>
         <path refid="classpath"/>
         <path refid="logging.classpath"/>
       </classpath>
       <jvmarg value="-server"/>
       <jvmarg value="${jacoco_params}_test:java"/>
       <jvmarg value="-Dfile.encoding=${test.encoding}"/>
       <sysproperty key="java.awt.headless" value="${test.headless}"/>
       <sysproperty key="testsaveservice.saveout" value="${testsaveservice.saveout}" />
       <sysproperty key="gump.run" value="${gump.run}" />
       <sysproperty key="log4j.configurationFile" value="${basedir}/bin/log4j2.xml" />
       <arg value="${build.test}"/>
       <arg value="${basedir}/bin/jmeter.properties"/>
       <arg value="org.apache.jmeter.util.JMeterUtils"/>
     </java>
   </target>
 
   <!--
     In order to run JUnit, both junit.jar and optional.jar need to be on the Ant classpath
     optional.jar is normally found in ANT_HOME/lib
   -->
   <target name="junit"  depends="compile-tests"
     description="Run individual JUnit test (-Dtest.case=org.apache.jorphan.test.AllTests) (-Dtest.format=plain) (-Dtest.showoutput=true)">
     <mkdir dir="reports"/>
     <property name="test.format" value="plain"/>
     <property name="test.case" value="org.apache.jorphan.test.AllTests"/>
     <property name="test.showoutput" value="false"/>
     <condition property="jacoco_params" value="${jacocoagent}" else="-Djacoco_dummy=">
       <isset property="jacocoagent"/>
     </condition>
     <junit fork="true"
            dir="${basedir}/bin"
            showoutput="${test.showoutput}"
            printsummary="on">
       <formatter type="${test.format}" usefile="yes"/>
       <formatter type="xml"/>
       <jvmarg value="${jacoco_params}run_gui:junit"/>
       <jvmarg value="-Dfile.encoding=${test.encoding}"/>
       <!-- Allow headless to be passed in -->
       <jvmarg value="-Djava.awt.headless=${java.awt.headless}"/>
       <classpath>
         <fileset dir="${dest.jar}" includes="*.jar"/>
         <pathelement location="${build.test}"/>
         <path refid="classpath"/>
         <path refid="logging.classpath"/>
       </classpath>
       <test name="${test.case}" todir="reports"/>
     </junit>
   </target>
 
   <target name="complete-junit"  depends="compile-tests"
     description="Run individual JUnit test (-Dtest.case=org.apache.jorphan.test.AllTests) (-Dtest.format=plain) (-Dtest.showoutput=true)"
     xmlns:jacoco="antlib:org.jacoco.ant">
   <mkdir dir="reports"/>
   <property name="test.format" value="plain"/>
   <property name="test.case" value="org.apache.jorphan.test.AllTests"/>
   <property name="test.showoutput" value="false"/>
   <taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
     <classpath refid="sonar.classpath" />
   </taskdef>
   <jacoco:coverage destfile="reports/jacoco.exec">
   <junit fork="true"
       dir="${basedir}/bin"
       showoutput="${test.showoutput}"
       printsummary="on">
     <formatter type="${test.format}" usefile="yes"/>
     <formatter type="xml"/>
     <jvmarg value="-Dfile.encoding=${test.encoding}"/>
     <!-- Allow headless to be passed in -->
     <jvmarg value="-Djava.awt.headless=${java.awt.headless}"/>
     <classpath>
       <fileset dir="${dest.jar}" includes="*.jar"/>
       <pathelement location="${build.test}"/>
       <pathelement location="${build.test-res}"/>
       <path refid="classpath"/>
       <path refid="logging.classpath"/>
     </classpath>
     <batchtest todir="reports" skipNonTests="true">
         <fileset dir="${src.test}">
             <include name="**/*Test*.java" />
             <exclude name="**/AllTests.java" />
         </fileset>
     </batchtest>
   </junit>
   </jacoco:coverage>
   </target>
 
   <!-- Utility target to collate reports -->
   <target name="junitreport">
     <mkdir dir="reports"/>
     <junitreport todir="reports">
       <fileset dir="reports">
         <include name="TEST-*.xml"/>
       </fileset>
       <report format="frames" todir="reports"/>
     </junitreport>
   </target>
 
   <target name="generator_jar" depends="compile-tests" description="Create the test tree generator jar">
     <jar jarfile="${dest.jar}/ApacheJMeter_generator.jar"
          manifest="${build.dir}/MANIFEST_BIN.MF">
       <zipfileset file="${resources.meta-inf}/default.notice"
          fullpath="META-INF/NOTICE" />
       <zipfileset file="${resources.meta-inf}/default.license"
          fullpath="META-INF/LICENSE" />
       <fileset dir="${build.test}" includes="**/GenerateTreeGui*.class"/>
     </jar>
   </target>
 
   <target name="svnCheck" description="Use SVN to get the current revision" unless="disable-svnCheck">
     <exec executable="svn" logerror="true" outputproperty="svn.exec.result" failonerror="true" failifexecutionfails="true">
       <arg line="info"/>
     </exec>
     <loadresource property="svn.revision">
       <string value="${svn.exec.result}"/>
       <filterchain>
         <linecontains>
           <contains value="Last Changed Rev: "/>
         </linecontains>
         <tokenfilter>
             <!-- Remove all but the revision number -->
             <replaceregex pattern=".*: " replace=""/>
         </tokenfilter>
         <striplinebreaks/>
       </filterchain>
     </loadresource>
     <echo level="info" message="svn.revision=${svn.revision}"/>
   </target>
 
   <!-- Macro is needed to be able to perform indirect evaluation of property names -->
   <macrodef name="process_jarfile">
     <attribute name="jarname"/>
     <attribute name="dest.dir" default="${lib.dir}"/>
     <sequential>
       <!-- Call all possible targets; these are only executed if the appropriate property is set -->
       <antcall target="_check_exists">
         <param name="file" value="@{dest.dir}/${@{jarname}.jar}"/>
         <param name="loc" value="${@{jarname}.loc}"/>
         <param name="jar" value="${@{jarname}.jar}"/>
         <param name="path" value="@{dest.dir}"/>
         <param name="md5"  value="${@{jarname}.md5}"/>
         <param name="_checkMD5" value="true"/>
       </antcall>
       <antcall target="_check_jarfile">
         <param name="loc" value="${@{jarname}.loc}"/>
         <param name="jar" value="${@{jarname}.jar}"/>
         <param name="path" value="@{dest.dir}"/>
         <param name="md5"  value="${@{jarname}.md5}"/>
         <param name="_checkMD5" value="true"/>
         <param name="zip" value="${@{jarname}.zip}"/>
         <param name="ent" value="${@{jarname}.ent}"/>
         <param name="zipprop" value="@{jarname}.zip"/>
       </antcall>
     </sequential>
   </macrodef>
 
   <!-- Check if jarfile exists, and set properties for calling zip or jar download -->
   <target name="_check_jarfile" if="_get_file">
     <!-- Check if file exists -->
     <fail message="Error in build file or calling sequence" if="file.exists"/>
     <echo level="info">Checking ${jar}</echo>
     <available file="${path}/${jar}" property="file.exists"/>
     <condition property="_get_zipfile">
       <isset property="${zipprop}"/>
     </condition>
     <condition property="_get_jarfile">
       <not>
         <isset property="${zipprop}"/>
       </not>
     </condition>
     <!-- Delete all but the desired version of the file -->
     <loadresource property="wildCard">
       <propertyresource name="jar"/>
       <filterchain>
         <tokenfilter>
           <filetokenizer/>
           <!-- Replace version with a wildcard. e.g, foo-1.2.3.jar or foo-1.2.3.RELEASE.jar to foo-*.jar -->
           <replaceregex pattern="-(\d+\.){2,}([A-Za-z]+\.)?(jar|zip)" replace="-*\2"/>
         </tokenfilter>
       </filterchain>
     </loadresource>
     <echo level="info" message="Deleting ${wildCard} (excluding ${jar})"/>
     <delete verbose="true">
       <!-- Unfortunately commons-jexl jars don't have unique prefixes -->
       <fileset dir="${path}" includes="${wildCard}" excludes="${jar} commons-jexl-*"/>
     </delete>
     <!-- Emulate conditional execution; targets use if/unless to suppress execution -->
     <antcall target="_get_jarfile"/>
     <antcall target="_get_zipfile"/>
   </target>
 
   <!-- Get a zip file and unpack it -->
   <target name="_get_zipfile" if="_get_zipfile" unless="file.exists">
     <get src="${loc}/${zip}"
          dest="${build.dir}/${zip}"
          usetimestamp="true" ignoreerrors="false"/>
     <unzip dest="${build.dir}" src="${build.dir}/${zip}">
       <patternset>
         <include name="**/${ent}"/>
       </patternset>
       <!-- This requires Ant 1.7.0 or later -->
       <mapper type="flatten"/>
     </unzip>
     <antcall target="_checkMD5">
       <param name="file" value="${ent}"/>
       <param name="path" value="${build.dir}"/>
       <param name="md5"  value="${md5}"/>
     </antcall>
     <move preservelastmodified="true" overwrite="true"
           file="${build.dir}/${ent}" tofile="${path}/${jar}" verbose="true"/>
   </target>
 
   <!-- Download a jar file and check its hash; if correct, move to correct directory -->
   <target name="_get_jarfile" if="_get_jarfile" unless="file.exists">
     <echo message="Fetching: ${path}/${jar}" level="info"/>
     <get src="${loc}/${jar}"
          dest="${build.dir}/${jar}"
          usetimestamp="false" ignoreerrors="false"/>
     <antcall target="_checkMD5">
       <param name="file" value="${jar}"/>
       <param name="path" value="${build.dir}"/>
       <param name="md5"  value="${md5}"/>
     </antcall>
     <move preservelastmodified="true" overwrite="true"
           file="${build.dir}/${jar}" tofile="${path}/${jar}" verbose="true"/>
   </target>
 
   <!-- Ant subroutine, required to localise MD5OK property -->
   <target name="_checkMD5" if="_checkMD5">
     <!--
     @param path - location of file
     @param file - file name
     -->
     <checksum algorithm="MD5" file="${path}/${file}" property="MD5"/>
     <condition property="MD5OK">
       <equals arg1="${MD5}" arg2="${md5}" casesensitive="false"/>
     </condition>
     <fail unless="MD5OK">Bad Checksum: for ${file}
         expected ${md5}
         actual   ${MD5}</fail>
     <echo level="info" message="Checksum OK: ${file}"/>
   </target>
 
   <!--
     Generic target to process all external jars.
     The "process_jarfile" macro resolves the properties that begin with the jarname
     and calls all the possible targets. The targets use "if" and "unless" to provide
     conditional execution (it would be a lot easier if antcall supported if/unless).
   -->
   <target name="_process_all_jars">
     <process_jarfile jarname="accessors-smart"/>
     <process_jarfile jarname="apache-bsf"/>
     <process_jarfile jarname="asm"/>
     <process_jarfile jarname="bcmail" dest.dir="${lib.api}"/>
     <process_jarfile jarname="bcprov" dest.dir="${lib.api}"/>
     <process_jarfile jarname="bcpkix" dest.dir="${lib.api}"/>
     <process_jarfile jarname="beanshell"/>
     <process_jarfile jarname="caffeine"/>
     <process_jarfile jarname="commons-codec"/>
     <process_jarfile jarname="commons-collections"/>
     <process_jarfile jarname="commons-dbcp2"/>
-    <process_jarfile jarname="commons-httpclient"/>
     <process_jarfile jarname="commons-io"/>
     <process_jarfile jarname="commons-jexl2"/>
     <process_jarfile jarname="commons-jexl3"/>
     <process_jarfile jarname="commons-lang3"/>
     <process_jarfile jarname="commons-math3"/>
     <process_jarfile jarname="commons-net"/>
     <process_jarfile jarname="commons-pool2"/>
     <process_jarfile jarname="dnsjava"/>
     <process_jarfile jarname="freemarker"/>
     <process_jarfile jarname="groovy-all"/>
     <process_jarfile jarname="hamcrest-core"/>
     <process_jarfile jarname="httpclient"/>
     <process_jarfile jarname="httpasyncclient"/>
     <process_jarfile jarname="httpcore"/>
     <process_jarfile jarname="httpcore-nio"/>
     <process_jarfile jarname="httpmime"/>
     <process_jarfile jarname="jakarta-oro"/>
     <process_jarfile jarname="javamail"/>
     <process_jarfile jarname="jcharts"/>
     <process_jarfile jarname="jdom" dest.dir="${lib.doc}"/>
     <process_jarfile jarname="jms"/>
     <process_jarfile jarname="rhino"/>
     <process_jarfile jarname="jodd-core"/>
     <process_jarfile jarname="jodd-lagarto"/>
     <process_jarfile jarname="jodd-log"/>
     <process_jarfile jarname="jodd-props"/>
     <process_jarfile jarname="json-path"/>
     <process_jarfile jarname="json-smart"/>
     <process_jarfile jarname="jsoup"/>
     <process_jarfile jarname="junit"/>
     <process_jarfile jarname="mongo-java-driver"/>
     <process_jarfile jarname="ph-css" />
     <process_jarfile jarname="ph-commons" />
     <process_jarfile jarname="rsyntaxtextarea"/>
     <process_jarfile jarname="serializer"/>
     <process_jarfile jarname="slf4j-api"/>
     <process_jarfile jarname="slf4j-ext"/>
     <process_jarfile jarname="jcl-over-slf4j"/>
     <process_jarfile jarname="log4j-api"/>
     <process_jarfile jarname="log4j-1.2-api"/>
     <process_jarfile jarname="log4j-core"/>
     <process_jarfile jarname="log4j-slf4j-impl"/>
     <process_jarfile jarname="jtidy"/>
     <process_jarfile jarname="tika-core"/>
     <process_jarfile jarname="tika-parsers"/>
     <process_jarfile jarname="velocity"   dest.dir="${lib.doc}"/>
     <process_jarfile jarname="commons-lang" dest.dir="${lib.doc}"/>
     <process_jarfile jarname="xalan"/>
     <process_jarfile jarname="xerces"/>
     <process_jarfile jarname="xml-apis"/>
     <process_jarfile jarname="xmlgraphics-commons"/>
     <process_jarfile jarname="xmlpull"/>
     <process_jarfile jarname="xpp3"/>
     <process_jarfile jarname="xstream"/>
     <process_jarfile jarname="jacocoant" dest.dir="${lib.coverage}" />
     <process_jarfile jarname="sonarqube-ant-task" dest.dir="${lib.coverage}" />
   </target>
 
   <target name="_process_doc_jars">
     <process_jarfile jarname="commons-collections"/>
     <process_jarfile jarname="commons-lang"   dest.dir="${lib.doc}"/>
     <process_jarfile jarname="jdom"           dest.dir="${lib.doc}"/>
     <process_jarfile jarname="velocity"   dest.dir="${lib.doc}"/>
   </target>
 
   <target name="_process_checkstyle_jars">
     <process_jarfile jarname="checkstyle-all"    dest.dir="${lib.opt}"/>
   </target>
 
   <target name="_process_rat_jars">
     <process_jarfile jarname="rat"        dest.dir="${lib.opt}"/>
     <process_jarfile jarname="rat-tasks"  dest.dir="${lib.opt}"/>
   </target>
 
   <!-- Update a jar (clean, download, package in one shot.-->
   <target name="update_jar" depends="clean, download_jars, package">
   </target>
 
 
   <!-- Download all missing jars.-->
   <target name="download_jars" description="Download any missing jar files">
     <!-- build.dir may be needed as a temporary work area -->
     <mkdir dir="${build.dir}" />
     <!-- The directories must exist otherwise the build fails when deleting previous versions -->
     <mkdir dir="${lib.api}" />
     <mkdir dir="${lib.doc}" />
     <delete verbose="true">
       <!-- bcprov jars no longer have the same prefix so the wildcard delete does not work; drop any old ones -->
       <fileset dir="${lib.api}" includes="bcmail-jdk15-*.jar bcprov-jdk15-*.jar"/>
       <fileset dir="${lib.dir}" includes="ApacheJMeter_slf4j_logkit.jar" />
       <!-- tidy up unused Excalibur jars -->
       <fileset dir="${lib.dir}" includes="avalon-framework-4.1.4.jar excalibur-datasource-2.1.jar excalibur-instrument-1.0.jar excalibur-logger-1.1.jar excalibur-pool-api-2.1.jar excalibur-pool-impl-2.1.jar excalibur-pool-instrumented-2.1.jar"/>
       <!-- jdom jar has moved; drop the old one -->
       <fileset dir="${lib.dir}" includes="jdom-1.1.3.jar"/>
       <!-- Drop slf4j-nop implementation -->
       <fileset dir="${lib.dir}" includes="slf4j-nop-1.7.13.jar"/>
       <!-- tidy up unused commons-logging jar -->
       <fileset dir="${lib.dir}" includes="commons-logging-1.2.jar"/>
+      <!-- tidy up unused commons-httpclient jar -->
+      <fileset dir="${lib.dir}" includes="commons-httpclient-3.1.jar"/>
       <!-- tidy up unused htmlparser jars -->
       <fileset dir="${lib.dir}" includes="htmllexer-2.1.jar htmlparser-2.1.jar"/>
       <!-- tidy up unused logkit jars -->
       <fileset dir="${lib.dir}" includes="logkit-2.0.jar"/>
     </delete>
     <antcall target="_process_all_jars">
         <param name="_get_file" value="true"/>
     </antcall>
   </target>
 
   <target name="download_doc_jars">
     <!-- build.dir may be needed as a temporary work area -->
     <mkdir dir="${build.dir}" />
     <antcall target="_process_doc_jars">
       <param name="_get_file" value="true"/>
     </antcall>
   </target>
 
   <target name="download_checkstyle">
     <!-- build.dir may be needed as a temporary work area -->
    <mkdir dir="${build.dir}" />
     <antcall target="_process_checkstyle_jars">
       <param name="_get_file" value="true"/>
     </antcall>
   </target>
 
   <target name="download_rat">
     <!-- build.dir may be needed as a temporary work area -->
    <mkdir dir="${build.dir}" />
     <antcall target="_process_rat_jars">
       <param name="_get_file" value="true"/>
     </antcall>
   </target>
 
   <target name="_coverage.prepare" >
      <available property="jacocoant.jar.available" file="${lib.coverage}/${jacocoant.jar}"/>
      <fail message="This task requires JaCoCo library, please run download_jars target to download it" unless="jacocoant.jar.available"/>
      <taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
         <classpath path="${lib.coverage}/${jacocoant.jar}"/>
      </taskdef>
      <jacoco:agent property="jacocoagent"
                    destfile="reports/jacoco.exec"
                    includes="org.apache.jmeter.*:org.apache.jorphan.*:org.apache.commons.cli.avalon.*:org.sl4j.impl.StaticLoggerBinder"
                    sessionid=""
      />
   </target>
 
   <target name="_coverage.report" depends="_coverage.prepare, init-svnVersion, init-version">
     <jacoco:report>
         <executiondata>
             <file file="reports/jacoco.exec"/>
         </executiondata>
         <structure name="JMeter ${jmeter.version} ${implementation.version}">
             <classfiles>
                 <fileset dir="${build.components}"/>
                 <fileset dir="${build.core}"/>
                 <fileset dir="${build.functions}"/>
                 <fileset dir="${build.jorphan}"/>
                 <fileset dir="${build.junit}"/>
                 <fileset dir="${build.ftp}"/>
                 <fileset dir="${build.http}"/>
                 <fileset dir="${build.java}"/>
                 <fileset dir="${build.jdbc}"/>
                 <fileset dir="${build.jms}"/>
                 <fileset dir="${build.ldap}"/>
                 <fileset dir="${build.mail}"/>
                 <fileset dir="${build.mongodb}"/>
                 <fileset dir="${build.native}"/>
                 <fileset dir="${build.tcp}"/>
                 <fileset dir="${build.test}"/>
             </classfiles>
             <sourcefiles encoding="${encoding}">
                 <fileset dir="${src.components}"/>
                 <fileset dir="${src.core}"/>
                 <fileset dir="${src.functions}"/>
                 <fileset dir="${src.jorphan}"/>
                 <fileset dir="${src.junit}"/>
                 <fileset dir="${src.ftp}"/>
                 <fileset dir="${src.http}"/>
                 <fileset dir="${src.java}"/>
                 <fileset dir="${src.jdbc}"/>
                 <fileset dir="${src.jms}"/>
                 <fileset dir="${src.ldap}"/>
                 <fileset dir="${src.mail}"/>
                 <fileset dir="${src.mongodb}"/>
                 <fileset dir="${src.native}"/>
                 <fileset dir="${src.tcp}"/>
                 <fileset dir="${src.test}"/>
             </sourcefiles>
         </structure>
         <html destdir="reports/coverage"/>
         <xml destfile="reports/coverage/jmeter-coverage.xml"/>
         <csv destfile="reports/coverage/jmeter-coverage.csv"/>
     </jacoco:report>
   </target>
 
   <target name="coverage"  depends="ant-version,_coverage.prepare, test-both, _allbatchtests, _coverage.report"/>
 
   <target name="_check_exists" if="_check_exists">
     <fail message="Invalid call sequence - file.exists should not be defined" if="file.exists"/>
     <available file="${file}" property="file.exists"/>
     <fail message="Could not find file ${file}" unless="file.exists"/>
     <antcall target="_checkMD5">
       <param name="file" value="${jar}"/>
       <param name="path" value="${path}"/>
       <param name="md5"  value="${md5}"/>
     </antcall>
     <!--echo level="info" message="Found ${file}"/-->
   </target>
 
   <target name="check_jars" description="Check that all required jar files are present" unless="no_check_jars">
     <antcall target="_process_all_jars">
       <param name="_check_exists" value="true"/>
     </antcall>
   </target>
 
   <!-- Special: process to get RSyntaxTextArea-->
   <!-- Useless since rsyntaxtextarea artifacts are published to Maven Repo since 9th july 2014 (JMeter 2.12) -->
   <!--
   <target name="_process_rsyntaxtextarea">
       <available file="./lib/${rsyntaxtextarea.jar}" property="rsyntaxtextarea.exists"/>
       <antcall target="_get_rsyntaxtextarea"/>
   </target>
   -->
   <!-- Get RSyntaxTextArea binary zip file, unpack it, pick up jar file and remove the zip -->
   <!-- Useless since rsyntaxtextarea artifacts are published to Maven Repo since 9th july 2014 (JMeter 2.12) -->
   <!--
   <target name="_get_rsyntaxtextarea" unless="rsyntaxtextarea.exists">
     <property name="loc" value="${rsyntaxtextarea.loc}"/>
     <property name="zip" value="${rsyntaxtextarea.name}_${rsyntaxtextarea.version}.zip"/>
     <property name="jar" value="${rsyntaxtextarea.name}.jar"/>
     <property name="md5" value="${rsyntaxtextarea.md5}"/>
     <property name="path" value="./lib"/>
     <get src="${loc}/${zip}"
          dest="${build.dir}/${zip}"
          usetimestamp="true" ignoreerrors="false"/>
     <unzip dest="${build.dir}" src="${build.dir}/${zip}">
       <patternset>
         <include name="**/${jar}"/>
       </patternset>
       <mapper type="flatten"/>
     </unzip>
     <antcall target="_checkMD5">
       <param name="file" value="${build.dir}/${jar}"/>
       <param name="path" value="${build.dir}"/>
       <param name="md5"  value="${md5}"/>
     </antcall>
     <delete>
       <fileset dir="${path}" includes="${rsyntaxtextarea.name}-*.jar"/>
     </delete>
     <move preservelastmodified="true" overwrite="true"
         file="${build.dir}/${jar}" tofile="${path}/${rsyntaxtextarea.jar}" verbose="true"/>
     <delete file="${build.dir}/${zip}"/>
   </target>
   -->
 
   <!-- Need to define config_loc for use by Eclipse -->
   <property name="config_loc" value="."/>
   <target name="checkstyle">
     <available property="checkstyle.jar.available" file="${lib.opt}/${checkstyle-all.jar}"/>
     <fail message="This task requires checkstyle, please run download_checkstyle target to download checkstyle" unless="checkstyle.jar.available"/>
 
     <antcall target="_process_checkstyle_jars"></antcall>
     <taskdef resource="com/puppycrawl/tools/checkstyle/ant/checkstyle-ant-task.properties"
              classpath="${lib.opt}/${checkstyle-all.jar}"/>
     <checkstyle config="checkstyle.xml">
       <fileset dir="src" includes="**/*.java"/>
       <formatter type="plain"/>
       <formatter type="xml" toFile="build/checkstyle_errors.xml"/>
     </checkstyle>
 
   </target>
 
   <target name="rat">
     <available property="rat.jar.available" file="${lib.opt}/${rat.jar}"/>
     <fail message="This task requires Apache Creadur RAT, please run download_rat target to download it" unless="rat.jar.available"/>
     <taskdef
       uri="antlib:org.apache.rat.anttasks"
       resource="org/apache/rat/anttasks/antlib.xml">
       <classpath>
         <pathelement location="${lib.opt}/${rat.jar}"/>
         <pathelement location="${lib.opt}/${rat-tasks.jar}"/>
       </classpath>
     </taskdef>
     <mkdir dir="${basedir}/reports/" />
     <rat:report reportfile="reports/rat-report.txt">
         <fileset dir="." excludesfile="rat-excludes.txt"/>
     </rat:report>
     <loadfile property="rat-errors" srcFile="reports/rat-report.txt">
       <filterchain>
         <linecontains>
           <contains value="Unknown"/>
         </linecontains>
       </filterchain>
     </loadfile>
     <echo message="reports/rat-report.txt:"/>
     <echo message="${rat-errors}"/>
   </target>
 
   <target name="sign_dist"
     description="Sign release artifacts in dist and dist/maven.  Usage: ant sign_dist -Dgpg.keyname=key-id [-Dgpg.secretKeyring=path-to-keyring]      ">
     <scriptdef name="gpg" language="beanshell">
       <classpath>
         <pathelement location="${lib.dir}/${beanshell.jar}"/>
       </classpath>
       <element name="fileset" type="fileset"/>
       <![CDATA[
       int execcode( String command ) // helper
       {
           StringTokenizer st = new StringTokenizer(command);
           String[] cmdarray = new String[st.countTokens()];
           for (int i = 0; st.hasMoreTokens(); i++) {
               cmdarray[i] = st.nextToken();
           }
           // Merge stderr with stdout so only have to fetch one stream
           proc = new ProcessBuilder(cmdarray).redirectErrorStream(true).start();
           din = new DataInputStream( proc.getInputStream() );
           while( (line=din.readLine()) != null ) {
               print(line);
           }
           return this.proc.waitFor();
       }
         keyname = project.getProperty("gpg.keyname");
         // Java 1.6 returns void, Java 1.5 returns null
         if (keyname == void || keyname == null) {
           self.fail("Please provide the gpg.keyname property");
         }
         keyring = project.getProperty("gpg.secretKeyring");
         if (keyring == void || keyring == null) {
           keyring = "secring.gpg"; // the default
         }
         sep=java.io.File.separator;
         cmd="gpg2 --batch --yes -ba -u " + keyname + " --secret-keyring " + keyring;
         self.log("Command: "+cmd);
         filesets = elements.get("fileset");
         for (i = 0; i < filesets.size(); ++i) {
           fileset = filesets.get(i);
           basedir = fileset.getDir();
           self.log("Processing "+basedir);
           ds = fileset.getDirectoryScanner();
           srcFiles = ds.getIncludedFiles();
           for (j=0; j < srcFiles.length; j++) {
             srcFile=srcFiles[j];
             file=basedir + sep + srcFile;
             self.log("Signing "+srcFile);
             ret=execcode(cmd+ " " + file);
             if (ret != 0) {
                self.fail("Command failed: "+ret);
             }
           }
         }
       ]]>
     </scriptdef>
     <gpg>
       <fileset dir="${dist.dir}"  includes="*.*" excludes="*.asc *.md5 *.sha1 *.sha"/>
       <fileset dir="${maven.dir}" includes="*.*" excludes="*.asc *.md5 *.sha1 *.sha"/>
     </gpg>
   </target>
 
   <path id="sonar.classpath">
     <fileset dir="./lib/opt" includes="**/*.jar" />
   </path>
 
 
   <target name="_sonar">
     <property environment="env" />
     <property name="sonar.organizationName" value="Apache" />
     <property name="sonar.projectName" value="JMeter" />
 
     <property name="sonar.projectKey" value="org.apache.jmeter:${sonar.projectName}" />
     <property name="sonar.projectVersion" value="${jmeter.version}" />
     <property name="sonar.language" value="java" />
     <property name="sonar.links.homepage" value="http://jmeter.apache.org" />
     <property name="sonar.links.ci" value="https://builds.apache.org/job/JMeter-trunk/" />
     <property name="sonar.links.scm" value="http://jmeter.apache.org/svnindex.html" />
     <property name="sonar.links.issue" value="http://jmeter.apache.org/issues.html" />
     <property name="sonar.modules" value="core,http,ftp,java,jdbc,ldap,mail,components,functions,jorphan,tcp,jms,native" />
     <property name="sonar.java.binaries" value="${build.core},${build.http},${build.core},${build.http},${build.ftp},${build.java},${build.jdbc},${build.ldap},${build.mail},${build.components},${build.functions},${build.jorphan},${build.tcp},${build.jms},${build.native}" />
     <property name="sonar.java.libraries" value="lib,lib/opt" />
 
     <property name="sonar.junit.reportsPath" value="reports" />
     <property name="sonar.jacoco.reportPath" value="reports/jacoco.exec" />
 
     <property name="sonar.issue.ignore.multicriteria" value="c1,c2,c3,c4,c5" />
     <property name="sonar.issue.ignore.multicriteria.c1.ruleKey"
            value="squid:S1948" />
     <property name="sonar.issue.ignore.multicriteria.c1.resourceKey"
            value="**/*.java" />
     <property name="sonar.issue.ignore.multicriteria.c2.ruleKey"
            value="squid:S00112" />
     <property name="sonar.issue.ignore.multicriteria.c2.resourceKey"
            value="**/*.java" />
     <property name="sonar.issue.ignore.multicriteria.c3.ruleKey"
            value="squid:MaximumInheritanceDepth" />
     <property name="sonar.issue.ignore.multicriteria.c3.resourceKey"
            value="**/*.java" />
     <property name="sonar.issue.ignore.multicriteria.c4.ruleKey"
            value="squid:S134" />
     <property name="sonar.issue.ignore.multicriteria.c4.resourceKey"
            value="**/*.java" />
     <property name="sonar.issue.ignore.multicriteria.c5.ruleKey"
            value="squid:S1192" />
     <property name="sonar.issue.ignore.multicriteria.c5.resourceKey"
            value="**/*.java" />
     <property name="core.sonar.projectName" value="core" />
     <property name="core.sonar.sources" value="${src.core}" />
     <property name="core.sonar.projectBaseDir" value="./" />
     <property name="http.sonar.projectName" value="http" />
     <property name="http.sonar.sources" value="${src.http}" />
     <property name="http.sonar.projectBaseDir" value="./" />
     <property name="ftp.sonar.projectName" value="ftp" />
     <property name="ftp.sonar.sources" value="${src.ftp}" />
     <property name="ftp.sonar.projectBaseDir" value="./" />
     <property name="java.sonar.projectName" value="java" />
     <property name="java.sonar.sources" value="${src.java}" />
     <property name="java.sonar.projectBaseDir" value="./" />
     <property name="jdbc.sonar.projectName" value="jdbc" />
     <property name="jdbc.sonar.sources" value="${src.jdbc}" />
     <property name="jdbc.sonar.projectBaseDir" value="./" />
     <property name="ldap.sonar.projectName" value="ldap" />
     <property name="ldap.sonar.sources" value="${src.ldap}" />
     <property name="ldap.sonar.projectBaseDir" value="./" />
     <property name="mail.sonar.projectName" value="mail" />
     <property name="mail.sonar.sources" value="${src.mail}" />
     <property name="mail.sonar.projectBaseDir" value="./" />
     <property name="components.sonar.projectName" value="components" />
     <property name="components.sonar.sources" value="${src.components}" />
     <property name="components.sonar.projectBaseDir" value="./" />
     <property name="functions.sonar.projectName" value="functions" />
     <property name="functions.sonar.sources" value="${src.functions}" />
     <property name="functions.sonar.projectBaseDir" value="./" />
     <property name="jorphan.sonar.projectName" value="jorphan" />
     <property name="jorphan.sonar.sources" value="${src.jorphan}" />
     <property name="jorphan.sonar.projectBaseDir" value="./" />
     <property name="tcp.sonar.projectName" value="tcp" />
     <property name="tcp.sonar.sources" value="${src.tcp}" />
     <property name="tcp.sonar.projectBaseDir" value="./" />
     <property name="jms.sonar.projectName" value="jms" />
     <property name="jms.sonar.sources" value="${src.jms}" />
     <property name="jms.sonar.projectBaseDir" value="./" />
     <property name="native.sonar.projectName" value="native" />
     <property name="native.sonar.sources" value="${src.native}" />
     <property name="native.sonar.projectBaseDir" value="./" />
     <condition property="sonar.host.url" value="${env.SONAR_HOST_URL}" else="http://localhost:9000">
       <isset property="env.SONAR_HOST_URL" />
     </condition>
     <condition property="sonar.login" value="${env.SONAR_LOGIN}">
       <isset property="env.SONAR_LOGIN" />
     </condition>
     <condition property="sonar.password" value="${env.SONAR_PASSWORD}">
       <isset property="env.SONAR_PASSWORD" />
     </condition>
     <condition property="sonar.jdbc.url" value="${env.SONAR_JDBC_URL}">
       <isset property="env.SONAR_JDBC_URL" />
     </condition>
     <condition property="sonar.jdbc.username" value="${env.SONAR_JDBC_USERNAME}">
       <isset property="env.SONAR_JDBC_USERNAME" />
     </condition>
     <condition property="sonar.jdbc.password" value="${env.SONAR_JDBC_PASSWORD}">
       <isset property="env.SONAR_JDBC_PASSWORD" />
     </condition>
     <property name="sonar.java.test.libraries" value="lib/**/*.jar" />
 
     <taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml">
       <classpath refid="sonar.classpath" />
     </taskdef>
 
     <sonar:sonar xmlns:sonar="antlib:org.sonar.ant">
     </sonar:sonar>
   </target>
 
   <target name="sonar" depends="compile, install, coverage, _sonar" />
 
   <target name="nightlysonar" depends="_coverage.prepare, nightly, _coverage.report, _sonar" />
 
 </project>
diff --git a/eclipse.classpath b/eclipse.classpath
index b7a1863a1..a873bf0ba 100644
--- a/eclipse.classpath
+++ b/eclipse.classpath
@@ -1,114 +1,113 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at
 
        http://www.apache.org/licenses/LICENSE-2.0
 
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
 -->
 <!--
    This is a sample Eclipse .classpath file, which can be used to help set up the proper .classpath.
    Note that the "con" entry may be different on individual systems, but the other entries
    should generally be the same, unless you attach sources or javadoc to the jars.
 
    Eclipse seems to use TABS for indenting the entries.
  -->
 <classpath>
 	<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER">
 		<accessrules>
 			<accessrule kind="accessible" pattern="javafx/**"/>
 		</accessrules>
 	</classpathentry>
 	<classpathentry kind="src" output="build/components" path="src/components"/>
 	<classpathentry kind="src" output="build/core" path="src/core"/>
 	<classpathentry kind="src" output="build/examples" path="src/examples"/>
 	<classpathentry kind="src" output="build/functions" path="src/functions"/>
 	<classpathentry kind="src" output="build/jorphan" path="src/jorphan"/>
 	<classpathentry kind="src" output="build/junit" path="src/junit"/>
 	<classpathentry kind="src" output="build/protocol/ftp" path="src/protocol/ftp"/>
 	<classpathentry kind="src" output="build/protocol/http" path="src/protocol/http"/>
 	<classpathentry kind="src" output="build/protocol/java" path="src/protocol/java"/>
 	<classpathentry kind="src" output="build/protocol/jdbc" path="src/protocol/jdbc"/>
 	<classpathentry kind="src" output="build/protocol/jms" path="src/protocol/jms"/>
 	<classpathentry kind="src" output="build/protocol/ldap" path="src/protocol/ldap"/>
 	<classpathentry kind="src" output="build/protocol/mail" path="src/protocol/mail"/>
 	<classpathentry kind="src" output="build/protocol/mongodb" path="src/protocol/mongodb"/>
 	<classpathentry kind="src" output="build/protocol/native" path="src/protocol/native"/>
 	<classpathentry kind="src" output="build/protocol/tcp" path="src/protocol/tcp"/>
 	<classpathentry kind="src" output="build/test" path="test/src"/>
 	<classpathentry kind="lib" path="lib/accessors-smart-1.1.jar"/>
 	<classpathentry kind="lib" path="lib/asm-5.2.jar"/>
 	<classpathentry kind="lib" path="lib/bsf-2.4.0.jar"/>
 	<classpathentry kind="lib" path="lib/bsh-2.0b5.jar"/>
 	<classpathentry kind="lib" path="lib/caffeine-2.3.5.jar"/>
 	<classpathentry kind="lib" path="lib/commons-codec-1.10.jar"/>
 	<classpathentry kind="lib" path="lib/commons-collections-3.2.2.jar"/>
 	<classpathentry kind="lib" path="lib/commons-dbcp2-2.1.1.jar"/>
-	<classpathentry kind="lib" path="lib/commons-httpclient-3.1.jar"/>
 	<classpathentry kind="lib" path="lib/commons-io-2.5.jar"/>
 	<classpathentry kind="lib" path="lib/commons-jexl-2.1.1.jar"/>
 	<classpathentry kind="lib" path="lib/commons-jexl3-3.0.jar"/>
 	<classpathentry kind="lib" path="lib/commons-lang3-3.5.jar"/>
 	<classpathentry kind="lib" path="lib/commons-math3-3.6.1.jar"/>
 	<classpathentry kind="lib" path="lib/commons-net-3.5.jar"/>
 	<classpathentry kind="lib" path="lib/commons-pool2-2.4.2.jar"/>
 	<classpathentry kind="lib" path="lib/dnsjava-2.1.8.jar"/>
 	<classpathentry kind="lib" path="lib/freemarker-2.3.23.jar"/>
 	<classpathentry kind="lib" path="lib/groovy-all-2.4.8.jar"/>
 	<classpathentry kind="lib" path="lib/hamcrest-core-1.3.jar"/>
 	<classpathentry kind="lib" path="lib/geronimo-jms_1.1_spec-1.1.1.jar"/>
 	<classpathentry kind="lib" path="lib/httpasyncclient-4.1.3.jar"/>
 	<classpathentry kind="lib" path="lib/httpclient-4.5.3.jar"/>
 	<classpathentry kind="lib" path="lib/httpcore-nio-4.4.6.jar"/>
 	<classpathentry kind="lib" path="lib/httpcore-4.4.6.jar"/>
 	<classpathentry kind="lib" path="lib/httpmime-4.5.3.jar"/>
 	<classpathentry kind="lib" path="lib/jcharts-0.7.5.jar"/>
 	<classpathentry kind="lib" path="lib/jcl-over-slf4j-1.7.22.jar"/>
 	<classpathentry kind="lib" path="lib/jodd-core-3.8.1.jar"/>
 	<classpathentry kind="lib" path="lib/jodd-lagarto-3.8.1.jar"/>
 	<classpathentry kind="lib" path="lib/jodd-log-3.8.1.jar"/>
 	<classpathentry kind="lib" path="lib/jodd-props-3.8.1.jar"/>
 	<classpathentry kind="lib" path="lib/json-path-2.2.0.jar"/>
 	<classpathentry kind="lib" path="lib/json-smart-2.2.1.jar"/>
 	<classpathentry kind="lib" path="lib/jsoup-1.10.2.jar"/>
 	<classpathentry kind="lib" path="lib/jtidy-r938.jar"/>
 	<classpathentry kind="lib" path="lib/junit-4.12.jar"/>
 	<classpathentry kind="lib" path="lib/mail-1.5.0-b01.jar"/>
 	<classpathentry kind="lib" path="lib/mongo-java-driver-2.11.3.jar"/>
 	<classpathentry kind="lib" path="lib/ph-css-5.0.3.jar"/>
 	<classpathentry kind="lib" path="lib/ph-commons-8.6.0.jar"/>
 	<classpathentry kind="lib" path="lib/oro-2.0.8.jar"/>
 	<classpathentry kind="lib" path="lib/rhino-1.7.7.1.jar"/>
 	<classpathentry kind="lib" path="lib/rsyntaxtextarea-2.6.0.jar"/>
 	<classpathentry kind="lib" path="lib/serializer-2.7.2.jar"/>
 	<classpathentry kind="lib" path="lib/slf4j-api-1.7.22.jar"/>
 	<classpathentry kind="lib" path="lib/slf4j-ext-1.7.22.jar"/>
 	<classpathentry kind="lib" path="lib/log4j-api-2.7.jar"/>
 	<classpathentry kind="lib" path="lib/log4j-core-2.7.jar"/>
 	<classpathentry kind="lib" path="lib/log4j-slf4j-impl-2.7.jar"/>
 	<classpathentry kind="lib" path="lib/log4j-1.2-api-2.7.jar"/>
 	<classpathentry kind="lib" path="lib/tika-core-1.14.jar"/>
 	<classpathentry kind="lib" path="lib/tika-parsers-1.14.jar"/>
 	<classpathentry kind="lib" path="lib/xalan-2.7.2.jar"/>
 	<classpathentry kind="lib" path="lib/xercesImpl-2.11.0.jar"/>
 	<classpathentry kind="lib" path="lib/xml-apis-1.4.01.jar"/>
 	<classpathentry kind="lib" path="lib/xmlgraphics-commons-2.1.jar"/>
 	<classpathentry kind="lib" path="lib/xmlpull-1.1.3.1.jar"/>
 	<classpathentry kind="lib" path="lib/xpp3_min-1.1.4c.jar"/>
 	<classpathentry kind="lib" path="lib/xstream-1.4.9.jar"/>
 	<!-- Needed for build and test -->
 	<classpathentry kind="lib" path="lib/api/bcmail-jdk15on-1.49.jar"/>
 	<classpathentry kind="lib" path="lib/api/bcprov-jdk15on-1.49.jar"/>
 	<classpathentry kind="lib" path="lib/api/bcpkix-jdk15on-1.49.jar"/>
 	<classpathentry kind="src" path="test/resources" output="build/test"/>
 	<classpathentry kind="output" path="classes"/>
 </classpath>
diff --git a/lib/aareadme.txt b/lib/aareadme.txt
index c276aee4b..4d93ba620 100644
--- a/lib/aareadme.txt
+++ b/lib/aareadme.txt
@@ -1,270 +1,263 @@
 Directories
 ===========
 lib - utility jars
 lib/api - Directory where API spec libraries live.
 lib/doc - jars needed for generating documentation. Not included with JMeter releases.
 lib/ext - JMeter jars only
 lib/junit - test jar for JUnit sampler
 lib/opt - Directory where Optional 3rd party libraries live
 lib/src - storage area for source and javadoc jars, e.g. for use in IDEs
           Excluded from SVN, not included in classpath
 
 Which jars are used by which modules?
 ====================================
 [not exhaustive]
 
 asm-5.2 (org.ow2.asm)
 ----------------------
 - JSON Path extractor
 
 accessors-smart-1.1 (net.minidev)
 ----------------------
 - JSON Path extractor
 
 bsf-2.4.0.jar (org.apache.bsf)
 -------------
 http://jakarta.apache.org/site/downloads/downloads_bsf.cgi
 - BSF test elements (sampler etc.)
 
 bsh-2.0b5.jar (org.bsh)
 -------------
 - BeanShell test elements
 
 commons-codec-1.10
 -----------------
 http://commons.apache.org/downloads/download_codec.cgi
-- used by commons-httpclient-3.1
-- also HtmlParserTester for Base64
+- Used by ProxyControl and JSR223Test Element for Base64 and md5 
 
 commons-collections-3.2.2
 -------------------------
 http://commons.apache.org/downloads/download_collections.cgi
 - ListenerNotifier
 - Anakia
 
-commons-httpclient-3.1
-----------------------
-http://hc.apache.org/downloads.cgi
-- httpclient version of HTTP sampler
-- Cookie manager implementation
-
 commons-io-2.5
 --------------
 http://commons.apache.org/downloads/download_io.cgi
 - FTPSampler
 
 commons-jexl-2.1.1, commons-jexl3-3.0
 ----------------
 http://commons.apache.org/downloads/download_jexl.cgi
 - Jexl function and BSF test elements
 
 commons-lang-2.6
 ----------------
 http://commons.apache.org/downloads/download_lang.cgi
 - velocity (Anakia)
 
 commons-lang3-3.5
 ----------------
 http://commons.apache.org/downloads/download_lang.cgi
 - URLCollection (unescapeXml)
 
 commons-math3-3.6.1
 -----------------
 http://commons.apache.org/proper/commons-math/download_math.cgi
 - BackendListener
 
 commons-net-3.5
 -----------------
 http://commons.apache.org/downloads/download_net.cgi
 - FTPSampler
 
 commons-pool2-2.4.2
 -----------------
 http://commons.apache.org/proper/commons-pool/download_pool.cgi
 - BackendListener
 
 dnsjava-2.1.8
 -----------------
 http://www.dnsjava.org/download/
 - DNSCacheManager
 
 groovy-all-2.4.8
 ----------------------
 Advised scripting language for JSR223 Test Elements
 
 hamcrest-core-1.3
 ----------------------
 - unit tests, JUnit sampler
 https://github.com/hamcrest/JavaHamcrest
 
 freemarker-2.3.23.jar
 ----------------------
 - used by Report/Dashboard feature
 
 jCharts-0.7.5 (org.jCharts)
 -------------
 http://jcharts.sourceforge.net/downloads.html
 - AxisGraph,LineGraph,LineChart
 
 jdom-1.1.3
 --------
 http://www.jdom.org/downloads/index.html
 - Anakia
 
 jodd-core-3.8.1
 --------
 http://www.jodd.org/
 - CSS/JQuery like extractor dependency
 
 jodd-lagarto-3.8.1
 --------
 http://jodd.org/doc/csselly/
 - CSS/JQuery like extractor
 
 jodd-log-3.8.1
 --------
 http://www.jodd.org/
 - CSS/JQuery like extractor dependency
 
 jodd-props-3.8.1
 --------
 http://www.jodd.org/
 - used by Report/Dashboard feature properties management
 
 json-path-2.2.0
 --------
 https://github.com/jayway/JsonPath
 - JSON Path Extractor
 - JSON Path Renderer
 
 json-smart-2.2.1 (net.minidev)
 --------
 https://github.com/netplex/json-smart-v2
 - JSON Path Extractor
 - JSON Path Renderer
 
 jsoup-1.10.2
 --------
 http://www.jsoup.org/
 - CSS/JQuery like extractor
 
 ph-css-5.0.3
 --------
 https://github.com/phax/ph-css
 - CssParser
 
 ph-commons-8.6.0
 --------
 https://github.com/phax/ph-commons
 - CssParser
 
 rhino-1.7.7.1
 --------
 http://www.mozilla.org/rhino/download.html
 - javascript function
 - IfController
 - WhileController
 - BSF (Javascript)
 
 jTidy-r938
 ----
 - http: various modules for parsing html
 - org.xml.sax - various
 - XPathUtil (XPath assertion)
 
 junit 4.12
 -----------
 - unit tests, JUnit sampler
 
 HttpComponents
 - HttpComponents Core 4.4.6 
 - HttpComponents Client 4.5.3
 - HttpComponents AsyncClient 4.1.3
 - HttpComponents Core NIO 4.4.6
 -----------
 http://hc.apache.org/
 - httpclient 4 implementation for HTTP sampler
 - httpasyncclient implementation for InfluxDB Backend Listener Client
 
 mongo-java-driver 2.11.3
 ------------------------
 http://www.mongodb.org/
 - MongoDB sampler
 
 oro-2.0.8
 ---------
 http://jakarta.apache.org/site/downloads/downloads_oro.cgi
 - regular expressions: various
 
 rsyntaxtextarea-2.6.0
 ---------------------
 http://fifesoft.com/rsyntaxtextarea/
 - syntax coloration
 
 serialiser-2.7.1
 ----------------
 http://www.apache.org/dyn/closer.cgi/xml/xalan-j
 - xalan
 
 slf4j-api-1.7.22
 ----------------
 http://www.slf4j.org/
 - jodd-core
 - json-path
 
 tika-1.14
 --------------
 http://tika.apache.org/
 - Regular Expression Extractor
 
 commons-dbcp2-2.1.1 (org.apache.commons.dbcp2)
 --------------------------
 - DataSourceElement (JDBC)
 
 velocity-1.7
 --------------
 http://velocity.apache.org/download.cgi
 - Anakia (create documentation) Not used by JMeter runtime
 
 xalan_2.7.1
 -----------
 http://www.apache.org/dyn/closer.cgi/xml/xalan-j
 +org.apache.xalan|xml|xpath
 
 xercesimpl-2.11.0
 ----------------
 http://xerces.apache.org/xerces2-j/download.cgi
 +org.apache.html.dom|org.apache.wml|org.apache.xerces|org.apache.xml.serialize
 +org.w3c.dom.html|ls
 
 xml-apis-1.4.01
 --------------
 http://xerces.apache.org/xerces2-j/download.cgi
 +javax.xml
 +org.w3c.dom
 +org.xml.sax
 
 The x* jars above are used for XML handling
 
 xmlgraphics-commons-2.1 (org.apache.xmlgraphics.image.codec)
 ------------------
 http://xmlgraphics.apache.org/commons/download.html
 - SaveGraphicsService
 
 xmlpull-1.1.3.1
 ---------------
 http://www.xmlpull.org/impls.shtml
 - xstream
 
 
 xpp3_min-1.1.4c
 ---------------
 http://x-stream.github.io/download.html
 or
 http://www.extreme.indiana.edu/dist/java-repository/xpp3/distributions/
 - xstream
 
 xstream-1.4.9
 -------------
 http://x-stream.github.io/download.html
 - SaveService
diff --git a/licenses/bin/README.txt b/licenses/bin/README.txt
index 407cb2562..5f4ebb215 100644
--- a/licenses/bin/README.txt
+++ b/licenses/bin/README.txt
@@ -1,34 +1,33 @@
 This directory contains additional LICENSE files for software contained in binary distributions
 
 The following files are ASF products, and are licensed under the Apache License 2.0
 
 avalon-framework-4.1.4.jar
 bsf-2.4.0.jar
 bshclient.jar (part of JMeter)
 commons-codec-1.10.jar
 commons-collections-3.2.2.jar
 commons-dbcp2-2.1.1.jar
-commons-httpclient-3.1.jar
 commons-io-2.5.jar
 commons-jexl-2.1.1.jar
 commons-jexl3-3.0.jar
 commons-lang3-3.5.jar
 commons-math3-3.5.jar
 commons-net-3.5.jar
 commons-pool2-2.4.2.jar
 excalibur-logger-1.1.jar
 geronimo-jms_1.1_spec-1.1.1.jar
 groovy-all-2.4.8.jar
 httpclient-4.5.3.jar
 httpcore-4.4.6.jar
 httpmime-4.5.3.jar
 jorphan.jar (part of JMeter)
 logkit-2.0.jar
 oro-2.0.8.jar
 serializer-2.7.2.jar
 tika-core-1.14.jar
 tika-parsers-1.14.jar
 xalan-2.7.2.jar
 xercesImpl-2.11.0.jar
 xml-apis-1.4.01.jar
 xmlgraphics-commons-2.1.jar
diff --git a/res/maven/ApacheJMeter_parent.pom b/res/maven/ApacheJMeter_parent.pom
index 991d9e3fa..e5c1fa5ad 100644
--- a/res/maven/ApacheJMeter_parent.pom
+++ b/res/maven/ApacheJMeter_parent.pom
@@ -1,445 +1,439 @@
 <!--
 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at
 
   http://www.apache.org/licenses/LICENSE-2.0
 
 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.
 -->
 <project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
     <modelVersion>4.0.0</modelVersion>
     <groupId>org.apache.jmeter</groupId>
     <artifactId>ApacheJMeter_parent</artifactId>
     <version>@MAVEN.DEPLOY.VERSION@</version>
     <name>Apache JMeter parent</name>
     <!-- Parent poms have to be packaged as pom, not jar -->
     <packaging>pom</packaging>
 
     <description>Apache JMeter is open source software, a 100% pure Java desktop application designed to load test
         functional behavior and measure performance. It was originally designed for testing Web Applications but has
         since expanded to other test functions.
     </description>
     <url>http://jmeter.apache.org/</url>
     <inceptionYear>1998</inceptionYear>
     <licenses>
         <license>
             <name>Apache 2</name>
             <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
             <distribution>repo</distribution>
             <comments>A business-friendly OSS license</comments>
         </license>
     </licenses>
     <issueManagement>
         <system>bugzilla</system>
         <url>https://bz.apache.org/bugzilla/describecomponents.cgi?product=JMeter</url>
     </issueManagement>
     <scm>
         <connection>http://svn.apache.org/repos/asf/jmeter/trunk/</connection>
         <developerConnection>https://svn.apache.org/repos/asf/jmeter/trunk/</developerConnection>
         <url>http://svn.apache.org/viewvc/jmeter/trunk/</url>
     </scm>
 
 
     <properties>
       <!-- these must agree with the definitions in build.properties -->
       <accessors-smart.version>1.1</accessors-smart.version>
       <apache-bsf.version>2.4.0</apache-bsf.version>
       <asm.version>5.2</asm.version>
       <beanshell.version>2.0b5</beanshell.version>
       <bcmail.version>1.49</bcmail.version>
       <bcprov.version>1.49</bcprov.version>
       <bcpkix.version>1.49</bcpkix.version>
       <caffeine.version>2.3.5</caffeine.version>
       <commons-codec.version>1.10</commons-codec.version>
       <commons-collections.version>3.2.2</commons-collections.version>
       <commons-dbcp2.version>2.1.1</commons-dbcp2.version>
-      <commons-httpclient.version>3.1</commons-httpclient.version>
       <commons-io.version>2.5</commons-io.version>
       <commons-jexl2.version>2.1.1</commons-jexl2.version>
       <commons-jexl3.version>3.0</commons-jexl3.version>
       <commons-lang3.version>3.5</commons-lang3.version>
       <commons-math3.version>3.6.1</commons-math3.version>
       <commons-net.version>3.5</commons-net.version>
       <commons-pool2.version>2.4.2</commons-pool2.version>
       <dnsjava.version>2.1.8</dnsjava.version>
       <freemarker.version>2.3.23</freemarker.version>
       <groovy-all.version>2.4.8</groovy-all.version>
       <hamcrest-core.version>1.3</hamcrest-core.version>
       <httpasyncclient.version>4.1.3</httpasyncclient.version>
       <httpclient.version>4.5.3</httpclient.version>
       <httpcore.version>4.4.6</httpcore.version>
       <httpcore-nio.version>4.4.6</httpcore-nio.version>
       <httpmime.version>4.5.3</httpmime.version>
       <jakarta-oro.version>2.0.8</jakarta-oro.version>
       <jcharts.version>0.7.5</jcharts.version>
       <jcl-over-slf4j.version>1.7.22</jcl-over-slf4j.version>
       <jodd-core.version>3.8.1</jodd-core.version>
       <jodd-lagarto.version>3.8.1</jodd-lagarto.version>
       <jodd-log.version>3.8.1</jodd-log.version>
       <jodd-props.version>3.8.1</jodd-props.version>
       <json-path.version>2.2.0</json-path.version>
       <json-smart.version>2.2.1</json-smart.version>
       <jsoup.version>1.10.2</jsoup.version>
       <rhino.version>1.7.7.1</rhino.version>
       <junit.version>4.12</junit.version>
       <mongo-java-driver.version>2.11.3</mongo-java-driver.version>
       <ph-css.version>5.0.3</ph-css.version>
       <ph-commons.version>8.6.0</ph-commons.version>
       <rsyntaxtextarea.version>2.6.0</rsyntaxtextarea.version>
       <slf4j-api.version>1.7.22</slf4j-api.version>
       <slf4j-ext.version>1.7.22</slf4j-ext.version>
       <log4j-api.version>2.7</log4j-api.version>
       <log4j-core.version>2.7</log4j-core.version>
       <log4j-slf4j-impl.version>2.7</log4j-slf4j-impl.version>
       <log4j-1.2-api.version>2.7</log4j-1.2-api.version>
       <jtidy.version>r938</jtidy.version>
       <tika-core.version>1.14</tika-core.version>
       <tika-parsers.version>1.14</tika-parsers.version>
       <xmlpull.version>1.1.3.1</xmlpull.version>
       <xstream.version>1.4.9</xstream.version>
       <xpp3.version>1.1.4c</xpp3.version>
       <xalan.version>2.7.2</xalan.version>
       <serializer.version>2.7.2</serializer.version>
       <xerces.version>2.11.0</xerces.version>
       <xml-apis.version>1.4.01</xml-apis.version>
       <xmlgraphics-commons.version>2.1</xmlgraphics-commons.version>
       <javamail.version>1.5.0-b01</javamail.version>
       <jms.version>1.1.1</jms.version>
     </properties>
 
     <dependencies>
       <dependency>
         <groupId>org.ow2.asm</groupId>
         <artifactId>asm</artifactId>
         <version>${asm.version}</version>
       </dependency>
       <dependency>
         <groupId>net.minidev</groupId>
         <artifactId>accessors-smart</artifactId>
         <version>${accessors-smart.version}</version>
       </dependency>
       <dependency>
         <groupId>bsf</groupId>
         <artifactId>bsf</artifactId>
         <version>${apache-bsf.version}</version>
       </dependency>
       <dependency>
         <groupId>org.beanshell</groupId>
         <artifactId>bsh</artifactId>
         <version>${beanshell.version}</version>
       </dependency>
       <dependency>
         <groupId>org.bouncycastle</groupId>
         <artifactId>bcmail-jdk15on</artifactId>
         <version>${bcmail.version}</version>
       </dependency>
       <dependency>
         <groupId>org.bouncycastle</groupId>
         <artifactId>bcprov-jdk15on</artifactId>
         <version>${bcprov.version}</version>
       </dependency>
       <dependency>
         <groupId>org.bouncycastle</groupId>
         <artifactId>bcpkix-jdk15on</artifactId>
         <version>${bcpkix.version}</version>
       </dependency>
       <dependency>
       <groupId>com.github.ben-manes.caffeine</groupId>
         <artifactId>caffeine</artifactId>
         <version>${caffeine.version}</version>
       </dependency>
       <dependency>
         <groupId>commons-codec</groupId>
         <artifactId>commons-codec</artifactId>
         <version>${commons-codec.version}</version>
       </dependency>
       <dependency>
         <groupId>commons-collections</groupId>
         <artifactId>commons-collections</artifactId>
         <version>${commons-collections.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.commons</groupId>
         <artifactId>commons-dbcp2</artifactId>
         <version>${commons-dbcp2.version}</version>
       </dependency>
       <dependency>
-        <groupId>commons-httpclient</groupId>
-        <artifactId>commons-httpclient</artifactId>
-        <version>${commons-httpclient.version}</version>
-      </dependency>
-      <dependency>
         <groupId>commons-io</groupId>
         <artifactId>commons-io</artifactId>
         <version>${commons-io.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.commons</groupId>
         <artifactId>commons-jexl</artifactId>
         <version>${commons-jexl2.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.commons</groupId>
         <artifactId>commons-jexl3</artifactId>
         <version>${commons-jexl3.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.commons</groupId>
         <artifactId>commons-lang3</artifactId>
         <version>${commons-lang3.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.commons</groupId>
         <artifactId>commons-math3</artifactId>
         <version>${commons-math3.version}</version>
       </dependency>
       <dependency>
         <groupId>commons-net</groupId>
         <artifactId>commons-net</artifactId>
         <version>${commons-net.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.commons</groupId>
         <artifactId>commons-pool2</artifactId>
         <version>${commons-pool2.version}</version>
       </dependency>
       <dependency>
         <groupId>dnsjava</groupId>
         <artifactId>dnsjava</artifactId>
         <version>${dnsjava.version}</version>
       </dependency>
       <dependency>
         <groupId>org.codehaus.groovy</groupId>
         <artifactId>groovy-all</artifactId>
         <version>${groovy-all.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.httpcomponents</groupId>
         <artifactId>httpasyncclient</artifactId>
         <version>${httpasyncclient.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.httpcomponents</groupId>
         <artifactId>httpclient</artifactId>
         <version>${httpclient.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.httpcomponents</groupId>
         <artifactId>httpmime</artifactId>
         <version>${httpmime.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.httpcomponents</groupId>
         <artifactId>httpcore</artifactId>
         <version>${httpcore.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.httpcomponents</groupId>
         <artifactId>httpcore-nio</artifactId>
         <version>${httpcore-nio.version}</version>
       </dependency>
       <dependency>
         <groupId>oro</groupId>
         <artifactId>oro</artifactId>
         <version>${jakarta-oro.version}</version>
       </dependency>
       <dependency>
         <groupId>jcharts</groupId>
         <artifactId>jcharts</artifactId>
         <version>0.7.5</version>
       </dependency>
       <dependency>
         <groupId>org.mozilla</groupId>
         <artifactId>rhino</artifactId>
         <version>${rhino.version}</version>
       </dependency>
       <dependency>
         <groupId>junit</groupId>
         <artifactId>junit</artifactId>
         <version>${junit.version}</version>
       </dependency>
       <dependency>
         <groupId>net.sf.jtidy</groupId>
         <artifactId>jtidy</artifactId>
         <version>${jtidy.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.tika</groupId>
         <artifactId>tika-core</artifactId>
         <version>${tika-core.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.tika</groupId>
         <artifactId>tika-parsers</artifactId>
         <version>${tika-parsers.version}</version>
       </dependency>
       <dependency>
         <groupId>com.thoughtworks.xstream</groupId>
         <artifactId>xstream</artifactId>
         <version>${xstream.version}</version>
       </dependency>
       <dependency>
         <groupId>xmlpull</groupId>
         <artifactId>xmlpull</artifactId>
         <version>${xmlpull.version}</version>
       </dependency>
       <dependency>
         <groupId>xpp3</groupId>
         <artifactId>xpp3_min</artifactId>
         <version>${xpp3.version}</version>
       </dependency>
       <dependency>
         <groupId>xalan</groupId>
         <artifactId>xalan</artifactId>
         <version>${xalan.version}</version>
       </dependency>
       <dependency>
         <groupId>xalan</groupId>
         <artifactId>serializer</artifactId>
         <version>${serializer.version}</version>
       </dependency>
       <dependency>
         <groupId>xerces</groupId>
         <artifactId>xercesImpl</artifactId>
         <version>${xerces.version}</version>
       </dependency>
       <dependency>
         <groupId>xml-apis</groupId>
         <artifactId>xml-apis</artifactId>
         <version>${xml-apis.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.xmlgraphics</groupId>
         <artifactId>xmlgraphics-commons</artifactId>
         <version>${xmlgraphics-commons.version}</version>
       </dependency>
       <dependency>
         <groupId>javax.mail</groupId>
         <artifactId>mail</artifactId>
         <version>${javamail.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.geronimo.specs</groupId>
         <artifactId>geronimo-jms_1.1_spec</artifactId>
         <version>${jms.version}</version>
       </dependency>
       <dependency>
         <groupId>com.jayway.jsonpath</groupId>
         <artifactId>json-path</artifactId>
         <version>${json-path.version}</version>
       </dependency>
       <dependency>
         <groupId>net.minidev</groupId>
         <artifactId>json-smart</artifactId>
         <version>${json-smart.version}</version>
       </dependency>
       <dependency>
         <groupId>org.jsoup</groupId>
         <artifactId>jsoup</artifactId>
         <version>${jsoup.version}</version>
       </dependency>
       <dependency>
         <groupId>org.jodd</groupId>
         <artifactId>jodd-core</artifactId>
         <version>${jodd-core.version}</version>
       </dependency>
       <dependency>
         <groupId>org.jodd</groupId>
         <artifactId>jodd-lagarto</artifactId>
         <version>${jodd-lagarto.version}</version>
       </dependency>
       <dependency>
         <groupId>org.jodd</groupId>
         <artifactId>jodd-log</artifactId>
         <version>${jodd-log.version}</version>
       </dependency>
       <dependency>
         <groupId>org.jodd</groupId>
         <artifactId>jodd-props</artifactId>
         <version>${jodd-props.version}</version>
       </dependency>
       <dependency>
         <groupId>org.mongodb</groupId>
         <artifactId>mongo-java-driver</artifactId>
         <version>${mongo-java-driver.version}</version>
       </dependency>
       <dependency>
         <groupId>com.helger</groupId>
         <artifactId>ph-css</artifactId>
         <version>${ph-css.version}</version>
       </dependency>
       <dependency>
         <groupId>com.helger</groupId>
         <artifactId>ph-commons</artifactId>
         <version>${ph-commons.version}</version>
       </dependency>
       <dependency>
         <groupId>com.fifesoft</groupId>
         <artifactId>rsyntaxtextarea</artifactId>
         <version>${rsyntaxtextarea.version}</version>
       </dependency>
       <dependency>
         <groupId>org.slf4j</groupId>
         <artifactId>slf4j-api</artifactId>
         <version>${slf4j-api.version}</version>
       </dependency>
       <dependency>
         <groupId>org.slf4j</groupId>
         <artifactId>slf4j-ext</artifactId>
         <version>${slf4j-ext.version}</version>
       </dependency>
       <dependency>
         <groupId>org.slf4j</groupId>
         <artifactId>jcl-over-slf4j</artifactId>
         <version>${jcl-over-slf4j.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.logging.log4j</groupId>
         <artifactId>log4j-api</artifactId>
         <version>${log4j-api.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.logging.log4j</groupId>
         <artifactId>log4j-core</artifactId>
         <version>${log4j-core.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.logging.log4j</groupId>
         <artifactId>log4j-slf4j-impl</artifactId>
         <version>${log4j-slf4j-impl.version}</version>
       </dependency>
       <dependency>
         <groupId>org.apache.logging.log4j</groupId>
         <artifactId>log4j-1.2-api</artifactId>
         <version>${log4j-1.2-api.version}</version>
       </dependency>
       <dependency>
         <groupId>org.freemarker</groupId>
         <artifactId>freemarker</artifactId>
         <version>${freemarker.version}</version>
       </dependency>
       <dependency>
         <groupId>org.hamcrest</groupId>
         <artifactId>hamcrest-core</artifactId>
         <version>${hamcrest-core.version}</version>
       </dependency>
     </dependencies>
 
     <repositories>
         <repository>
             <!--Required for bsh 2.0b5 -->
             <id>JBoss</id>
             <url>https://repository.jboss.org/nexus/content/repositories/thirdparty-releases/</url>
         </repository>
     </repositories>
 </project>
diff --git a/src/core/org/apache/jmeter/save/SaveService.java b/src/core/org/apache/jmeter/save/SaveService.java
index b5b303dae..322ff3535 100644
--- a/src/core/org/apache/jmeter/save/SaveService.java
+++ b/src/core/org/apache/jmeter/save/SaveService.java
@@ -1,570 +1,570 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *
  */
 
 package org.apache.jmeter.save;
 
 import java.io.BufferedInputStream;
 import java.io.BufferedReader;
 import java.io.File;
 import java.io.FileInputStream;
 import java.io.FileReader;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.InputStreamReader;
 import java.io.OutputStream;
 import java.io.OutputStreamWriter;
 import java.io.Writer;
 import java.lang.reflect.InvocationTargetException;
 import java.nio.charset.Charset;
 import java.security.MessageDigest;
 import java.security.NoSuchAlgorithmException;
 import java.util.ArrayList;
 import java.util.List;
 import java.util.Map;
 import java.util.Properties;
 
 import org.apache.commons.lang3.builder.ToStringBuilder;
 import org.apache.jmeter.reporters.ResultCollectorHelper;
 import org.apache.jmeter.samplers.SampleEvent;
 import org.apache.jmeter.samplers.SampleResult;
 import org.apache.jmeter.testelement.TestElement;
 import org.apache.jmeter.util.JMeterUtils;
 import org.apache.jmeter.util.NameUpdater;
 import org.apache.jorphan.collections.HashTree;
 import org.apache.jorphan.util.JMeterError;
 import org.apache.jorphan.util.JOrphanUtils;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
 import com.thoughtworks.xstream.XStream;
 import com.thoughtworks.xstream.converters.ConversionException;
 import com.thoughtworks.xstream.converters.Converter;
 import com.thoughtworks.xstream.converters.DataHolder;
 import com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider;
 import com.thoughtworks.xstream.converters.reflection.ReflectionProvider;
 import com.thoughtworks.xstream.io.xml.XppDriver;
 import com.thoughtworks.xstream.mapper.CannotResolveClassException;
 import com.thoughtworks.xstream.mapper.Mapper;
 import com.thoughtworks.xstream.mapper.MapperWrapper;
 
 /**
  * Handles setting up XStream serialisation.
  * The class reads alias definitions from saveservice.properties.
  *
  */
 public class SaveService {
 
     private static final Logger log = LoggerFactory.getLogger(SaveService.class);
 
     // Names of DataHolder entries for JTL processing
     public static final String SAMPLE_EVENT_OBJECT = "SampleEvent"; // $NON-NLS-1$
     public static final String RESULTCOLLECTOR_HELPER_OBJECT = "ResultCollectorHelper"; // $NON-NLS-1$
 
     // Names of DataHolder entries for JMX processing
     public static final String TEST_CLASS_NAME = "TestClassName"; // $NON-NLS-1$
 
     private static final class XStreamWrapper extends XStream {
         private XStreamWrapper(ReflectionProvider reflectionProvider) {
             super(reflectionProvider);
         }
 
         // Override wrapMapper in order to insert the Wrapper in the chain
         @Override
         protected MapperWrapper wrapMapper(MapperWrapper next) {
             // Provide our own aliasing using strings rather than classes
             return new MapperWrapper(next){
             // Translate alias to classname and then delegate to wrapped class
             @Override
             public Class<?> realClass(String alias) {
                 String fullName = aliasToClass(alias);
                 if (fullName != null) {
                     fullName = NameUpdater.getCurrentName(fullName);
                 }
                 return super.realClass(fullName == null ? alias : fullName);
             }
             // Translate to alias and then delegate to wrapped class
             @Override
             public String serializedClass(@SuppressWarnings("rawtypes") // superclass does not use types 
                     Class type) {
                 if (type == null) {
                     return super.serializedClass(null); // was type, but that caused FindBugs warning
                 }
                 String alias = classToAlias(type.getName());
                 return alias == null ? super.serializedClass(type) : alias ;
                 }
             };
         }
     }
 
     private static final XStream JMXSAVER = new XStreamWrapper(new PureJavaReflectionProvider());
     private static final XStream JTLSAVER = new XStreamWrapper(new PureJavaReflectionProvider());
     static {
         JTLSAVER.setMode(XStream.NO_REFERENCES); // This is needed to stop XStream keeping copies of each class
     }
 
     // The XML header, with placeholder for encoding, since that is controlled by property
     private static final String XML_HEADER = "<?xml version=\"1.0\" encoding=\"<ph>\"?>"; // $NON-NLS-1$
 
     // Default file name
     private static final String SAVESERVICE_PROPERTIES_FILE = "/bin/saveservice.properties"; // $NON-NLS-1$
 
     // Property name used to define file name
     private static final String SAVESERVICE_PROPERTIES = "saveservice_properties"; // $NON-NLS-1$
 
     // Define file format versions
     private static final String VERSION_2_2 = "2.2";  // $NON-NLS-1$
 
     // Holds the mappings from the saveservice properties file
     // Key: alias Entry: full class name
     // There may be multiple aliases which map to the same class
     private static final Properties aliasToClass = new Properties();
 
     // Holds the reverse mappings
     // Key: full class name Entry: primary alias
     private static final Properties classToAlias = new Properties();
 
     // Version information for test plan header
     // This is written to JMX files by ScriptWrapperConverter
     // Also to JTL files by ResultCollector
     private static final String VERSION = "1.2"; // $NON-NLS-1$
 
     // This is written to JMX files by ScriptWrapperConverter
     private static String propertiesVersion = "";// read from properties file; written to JMX files
     
     // Must match _version property value in saveservice.properties
     // used to ensure saveservice.properties and SaveService are updated simultaneously
     static final String PROPVERSION = "3.2";// Expected version $NON-NLS-1$
 
     // Internal information only
     private static String fileVersion = ""; // computed from saveservice.properties file// $NON-NLS-1$
     // Must match the sha1 checksum of the file saveservice.properties (without newline character),
     // used to ensure saveservice.properties and SaveService are updated simultaneously
-    static final String FILEVERSION = "09831d0774c9e7131205e2f5c614abe0c3effba6"; // Expected value $NON-NLS-1$
+    static final String FILEVERSION = "672a997ce15720edd5ac94b288fd19f80202e4d3"; // Expected value $NON-NLS-1$
 
     private static String fileEncoding = ""; // read from properties file// $NON-NLS-1$
 
     static {
         log.info("Testplan (JMX) version: {}. Testlog (JTL) version: {}", VERSION_2_2, VERSION_2_2);
         initProps();
         checkVersions();
     }
 
     // Helper method to simplify alias creation from properties
     private static void makeAlias(String aliasList, String clazz) {
         String[] aliases = aliasList.split(","); // Can have multiple aliases for same target classname
         String alias = aliases[0];
         for (String a : aliases){
             Object old = aliasToClass.setProperty(a,clazz);
             if (old != null){
                 log.error("Duplicate class detected for {}: {} & {}", alias, clazz, old);
             }
         }
         Object oldval=classToAlias.setProperty(clazz,alias);
         if (oldval != null) {
             log.error("Duplicate alias detected for {}: {} & {}", clazz, alias, oldval);
         }
     }
 
     public static Properties loadProperties() throws IOException{
         Properties nameMap = new Properties();
         try (FileInputStream fis = new FileInputStream(JMeterUtils.getJMeterHome()
                 + JMeterUtils.getPropDefault(SAVESERVICE_PROPERTIES, SAVESERVICE_PROPERTIES_FILE))){
             nameMap.load(fis);
         }
         return nameMap;
     }
 
     private static String getChecksumForPropertiesFile()
             throws NoSuchAlgorithmException, IOException {
         MessageDigest md = MessageDigest.getInstance("SHA1");
         try (FileReader fileReader = new FileReader(
                     JMeterUtils.getJMeterHome()
                     + JMeterUtils.getPropDefault(SAVESERVICE_PROPERTIES,
                     SAVESERVICE_PROPERTIES_FILE));
                 BufferedReader reader = new BufferedReader(fileReader)) {
             String line = null;
             while ((line = reader.readLine()) != null) {
                 md.update(line.getBytes());
             }
         }
         return JOrphanUtils.baToHexString(md.digest());
     }
     private static void initProps() {
         // Load the alias properties
         try {
             fileVersion = getChecksumForPropertiesFile();
         } catch (IOException | NoSuchAlgorithmException e) {
             log.error("Can't compute checksum for saveservice properties file", e);
             throw new JMeterError("JMeter requires the checksum of saveservice properties file to continue", e);
         }
         try {
             Properties nameMap = loadProperties();
             // now create the aliases
             for (Map.Entry<Object, Object> me : nameMap.entrySet()) {
                 String key = (String) me.getKey();
                 String val = (String) me.getValue();
                 if (!key.startsWith("_")) { // $NON-NLS-1$
                     makeAlias(key, val);
                 } else {
                     // process special keys
                     if (key.equalsIgnoreCase("_version")) { // $NON-NLS-1$
                         propertiesVersion = val;
                         log.info("Using SaveService properties version {}", propertiesVersion);
                     } else if (key.equalsIgnoreCase("_file_version")) { // $NON-NLS-1$
                         log.info("SaveService properties file version is now computed by a checksum,"
                                 + "the property _file_version is not used anymore and can be removed.");
                     } else if (key.equalsIgnoreCase("_file_encoding")) { // $NON-NLS-1$
                         fileEncoding = val;
                         log.info("Using SaveService properties file encoding {}", fileEncoding);
                     } else {
                         key = key.substring(1);// Remove the leading "_"
                         try {
                             final String trimmedValue = val.trim();
                             if (trimmedValue.equals("collection") // $NON-NLS-1$
                              || trimmedValue.equals("mapping")) { // $NON-NLS-1$
                                 registerConverter(key, JMXSAVER, true);
                                 registerConverter(key, JTLSAVER, true);
                             } else {
                                 registerConverter(key, JMXSAVER, false);
                                 registerConverter(key, JTLSAVER, false);
                             }
                         } catch (IllegalAccessException | InstantiationException | ClassNotFoundException | IllegalArgumentException|
                                 SecurityException | InvocationTargetException | NoSuchMethodException e1) {
                             log.warn("Can't register a converter: {}", key, e1);
                         }
                     }
                 }
             }
         } catch (IOException e) {
             log.error("Bad saveservice properties file", e);
             throw new JMeterError("JMeter requires the saveservice properties file to continue");
         }
     }
 
     /**
      * Register converter.
      * @param key
      * @param jmxsaver
      * @param useMapper
      *
      * @throws InstantiationException
      * @throws IllegalAccessException
      * @throws InvocationTargetException
      * @throws NoSuchMethodException
      * @throws ClassNotFoundException
      */
     private static void registerConverter(String key, XStream jmxsaver, boolean useMapper)
             throws InstantiationException, IllegalAccessException,
             InvocationTargetException, NoSuchMethodException,
             ClassNotFoundException {
         if (useMapper){
             jmxsaver.registerConverter((Converter) Class.forName(key).getConstructor(
                     new Class[] { Mapper.class }).newInstance(
                             new Object[] { jmxsaver.getMapper() }));
         } else {
             jmxsaver.registerConverter((Converter) Class.forName(key).newInstance());
         }
     }
 
     // For converters to use
     public static String aliasToClass(String s){
         String r = aliasToClass.getProperty(s);
         return r == null ? s : r;
     }
 
     // For converters to use
     public static String classToAlias(String s){
         String r = classToAlias.getProperty(s);
         return r == null ? s : r;
     }
 
     // Called by Save function
     public static void saveTree(HashTree tree, OutputStream out) throws IOException {
         // Get the OutputWriter to use
         OutputStreamWriter outputStreamWriter = getOutputStreamWriter(out);
         writeXmlHeader(outputStreamWriter);
         // Use deprecated method, to avoid duplicating code
         ScriptWrapper wrapper = new ScriptWrapper();
         wrapper.testPlan = tree;
         JMXSAVER.toXML(wrapper, outputStreamWriter);
         outputStreamWriter.write('\n');// Ensure terminated properly
         outputStreamWriter.close();
     }
 
     // Used by Test code
     public static void saveElement(Object el, OutputStream out) throws IOException {
         // Get the OutputWriter to use
         OutputStreamWriter outputStreamWriter = getOutputStreamWriter(out);
         writeXmlHeader(outputStreamWriter);
         // Use deprecated method, to avoid duplicating code
         JMXSAVER.toXML(el, outputStreamWriter);
         outputStreamWriter.close();
     }
 
     // Used by Test code
     public static Object loadElement(InputStream in) throws IOException {
         // Get the InputReader to use
         InputStreamReader inputStreamReader = getInputStreamReader(in);
         // Use deprecated method, to avoid duplicating code
         Object element = JMXSAVER.fromXML(inputStreamReader);
         inputStreamReader.close();
         return element;
     }
 
     /**
      * Save a sampleResult to an XML output file using XStream.
      *
      * @param evt sampleResult wrapped in a sampleEvent
      * @param writer output stream which must be created using {@link #getFileEncoding(String)}
      * @throws IOException when writing data to output fails
      */
     // Used by ResultCollector.sampleOccurred(SampleEvent event)
     public synchronized static void saveSampleResult(SampleEvent evt, Writer writer) throws IOException {
         DataHolder dh = JTLSAVER.newDataHolder();
         dh.put(SAMPLE_EVENT_OBJECT, evt);
         // This is effectively the same as saver.toXML(Object, Writer) except we get to provide the DataHolder
         // Don't know why there is no method for this in the XStream class
         try {
             JTLSAVER.marshal(evt.getResult(), new XppDriver().createWriter(writer), dh);
         } catch(RuntimeException e) {
             throw new IllegalArgumentException("Failed marshalling:"+(evt.getResult() != null ? showDebuggingInfo(evt.getResult()) : "null"), e);
         }
         writer.write('\n');
     }
 
     /**
      * 
      * @param result SampleResult
      * @return String debugging information
      */
     private static String showDebuggingInfo(SampleResult result) {
         try {
             return "class:"+result.getClass()+",content:"+ToStringBuilder.reflectionToString(result);
         } catch(Exception e) {
             return "Exception occured creating debug from event, message:"+e.getMessage();
         }
     }
 
     /**
      * @param elem test element
      * @param writer output stream which must be created using {@link #getFileEncoding(String)}
      * @throws IOException when writing data to output fails
      */
     // Used by ResultCollector#recordStats()
     public synchronized static void saveTestElement(TestElement elem, Writer writer) throws IOException {
         JMXSAVER.toXML(elem, writer); // TODO should this be JTLSAVER? Only seems to be called by MonitorHealthVisualzer
         writer.write('\n');
     }
 
     // Routines for TestSaveService
     static String getPropertyVersion(){
         return SaveService.propertiesVersion;
     }
 
     static String getFileVersion(){
         return SaveService.fileVersion;
     }
 
     // Allow test code to check for spurious class references
     static List<String> checkClasses(){
         final ClassLoader classLoader = SaveService.class.getClassLoader();
         List<String> missingClasses = new ArrayList<>();
         //boolean OK = true;
         for (Object clazz : classToAlias.keySet()) {
             String name = (String) clazz;
             if (!NameUpdater.isMapped(name)) {// don't bother checking class is present if it is to be updated
                 try {
                     Class.forName(name, false, classLoader);
                 } catch (ClassNotFoundException e) {
                         log.error("Unexpected entry in saveservice.properties; class does not exist and is not upgraded: {}", name);
                         missingClasses.add(name);
                 }
             }
         }
         return missingClasses;
     }
 
     private static void checkVersions() {
         if (!PROPVERSION.equalsIgnoreCase(propertiesVersion)) {
             log.warn("Bad _version - expected {}, found {}.", PROPVERSION, propertiesVersion);
         }
     }
 
     /**
      * Read results from JTL file.
      *
      * @param reader of the file
      * @param resultCollectorHelper helper class to enable TestResultWrapperConverter to deliver the samples
      * @throws IOException if an I/O error occurs
      */
     public static void loadTestResults(InputStream reader, ResultCollectorHelper resultCollectorHelper) throws IOException {
         // Get the InputReader to use
         InputStreamReader inputStreamReader = getInputStreamReader(reader);
         DataHolder dh = JTLSAVER.newDataHolder();
         dh.put(RESULTCOLLECTOR_HELPER_OBJECT, resultCollectorHelper); // Allow TestResultWrapper to feed back the samples
         // This is effectively the same as saver.fromXML(InputStream) except we get to provide the DataHolder
         // Don't know why there is no method for this in the XStream class
         JTLSAVER.unmarshal(new XppDriver().createReader(reader), null, dh);
         inputStreamReader.close();
     }
     
     /**
      * Load a Test tree (JMX file)
      * @param file the JMX file
      * @return the loaded tree
      * @throws IOException if there is a problem reading the file or processing it
      */
     public static HashTree loadTree(File file) throws IOException {
         log.info("Loading file: {}", file);
         try (InputStream inputStream = new FileInputStream(file);
                 BufferedInputStream bufferedInputStream = 
                     new BufferedInputStream(inputStream)){
             return readTree(bufferedInputStream, file);
         }
     }
 
     /**
      * 
      * @param inputStream {@link InputStream} 
      * @param file the JMX file used only for debug, can be null
      * @return the loaded tree
      * @throws IOException if there is a problem reading the file or processing it
      */
     private static HashTree readTree(InputStream inputStream, File file)
             throws IOException {
         ScriptWrapper wrapper = null;
         try {
             // Get the InputReader to use
             InputStreamReader inputStreamReader = getInputStreamReader(inputStream);
             wrapper = (ScriptWrapper) JMXSAVER.fromXML(inputStreamReader);
             inputStreamReader.close();
             if (wrapper == null){
                 log.error("Problem loading XML: see above.");
                 return null;
             }
             return wrapper.testPlan;
         } catch (CannotResolveClassException e) {
             if(file != null) {
                 throw new IllegalArgumentException("Problem loading XML from:'"+file.getAbsolutePath()+"', cannot determine class for element: " + e, e);
             } else {
                 throw new IllegalArgumentException("Problem loading XML, cannot determine class for element: " + e, e);
             }
         } catch (ConversionException | NoClassDefFoundError e) {
             if(file != null) {
                 throw new IllegalArgumentException("Problem loading XML from:'"+file.getAbsolutePath()+"', missing class "+e , e);
             } else {
                 throw new IllegalArgumentException("Problem loading XML, missing class "+e , e);
             }
         }
 
     }
     private static InputStreamReader getInputStreamReader(InputStream inStream) {
         // Check if we have a encoding to use from properties
         Charset charset = getFileEncodingCharset();
         if(charset != null) {
             return new InputStreamReader(inStream, charset);
         }
         else {
             // We use the default character set encoding of the JRE
             return new InputStreamReader(inStream);
         }
     }
 
     private static OutputStreamWriter getOutputStreamWriter(OutputStream outStream) {
         // Check if we have a encoding to use from properties
         Charset charset = getFileEncodingCharset();
         if(charset != null) {
             return new OutputStreamWriter(outStream, charset);
         }
         else {
             // We use the default character set encoding of the JRE
             return new OutputStreamWriter(outStream);
         }
     }
 
     /**
      * Returns the file Encoding specified in saveservice.properties or the default
      * @param dflt value to return if file encoding was not provided
      *
      * @return file encoding or default
      */
     // Used by ResultCollector when creating output files
     public static String getFileEncoding(String dflt){
         if(fileEncoding != null && fileEncoding.length() > 0) {
             return fileEncoding;
         }
         else {
             return dflt;
         }
     }
 
     private static Charset getFileEncodingCharset() {
         // Check if we have a encoding to use from properties
         if(fileEncoding != null && fileEncoding.length() > 0) {
             return Charset.forName(fileEncoding);
         }
         else {
             // We use the default character set encoding of the JRE
             return null;
         }
     }
 
     private static void writeXmlHeader(OutputStreamWriter writer) throws IOException {
         // Write XML header if we have the charset to use for encoding
         Charset charset = getFileEncodingCharset();
         if(charset != null) {
             // We do not use getEncoding method of Writer, since that returns
             // the historical name
             String header = XML_HEADER.replaceAll("<ph>", charset.name());
             writer.write(header);
             writer.write('\n');
         }
     }
 
 //  Normal output
 //  ---- Debugging information ----
 //  required-type       : org.apache.jorphan.collections.ListedHashTree
 //  cause-message       : WebServiceSampler : WebServiceSampler
 //  class               : org.apache.jmeter.save.ScriptWrapper
 //  message             : WebServiceSampler : WebServiceSampler
 //  line number         : 929
 //  path                : /jmeterTestPlan/hashTree/hashTree/hashTree[4]/hashTree[5]/WebServiceSampler
 //  cause-exception     : com.thoughtworks.xstream.alias.CannotResolveClassException
 //  -------------------------------
 
     /**
      * Simplify getMessage() output from XStream ConversionException
      * @param ce - ConversionException to analyse
      * @return string with details of error
      */
     public static String CEtoString(ConversionException ce){
         String msg =
             "XStream ConversionException at line: " + ce.get("line number")
             + "\n" + ce.get("message")
             + "\nPerhaps a missing jar? See log file.";
         return msg;
     }
 
     public static String getPropertiesVersion() {
         return propertiesVersion;
     }
 
     public static String getVERSION() {
         return VERSION;
     }
 }
diff --git a/src/core/org/apache/jmeter/util/HttpSSLProtocolSocketFactory.java b/src/core/org/apache/jmeter/util/HttpSSLProtocolSocketFactory.java
index 654e911b7..cc2f8564a 100644
--- a/src/core/org/apache/jmeter/util/HttpSSLProtocolSocketFactory.java
+++ b/src/core/org/apache/jmeter/util/HttpSSLProtocolSocketFactory.java
@@ -1,270 +1,190 @@
 /*
  *  Licensed to the Apache Software Foundation (ASF) under one or more
  *  contributor license agreements.  See the NOTICE file distributed with
  *  this work for additional information regarding copyright ownership.
  *  The ASF licenses this file to You under the Apache License, Version 2.0
  *  (the "License"); you may not use this file except in compliance with
  *  the License.  You may obtain a copy of the License at
  *
  *      http://www.apache.org/licenses/LICENSE-2.0
  *
  *  Unless required by applicable law or agreed to in writing, software
  *  distributed under the License is distributed on an "AS IS" BASIS,
  *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  *  See the License for the specific language governing permissions and
  *  limitations under the License.
  */
 
 package org.apache.jmeter.util;
 
 import java.io.IOException;
 import java.net.InetAddress;
-import java.net.InetSocketAddress;
 import java.net.Socket;
-import java.net.SocketAddress;
 import java.net.UnknownHostException;
 import java.security.GeneralSecurityException;
 
 import javax.net.ssl.SSLContext;
 import javax.net.ssl.SSLSocket;
 import javax.net.ssl.SSLSocketFactory;
 
-import org.apache.commons.httpclient.ConnectTimeoutException;
-import org.apache.commons.httpclient.params.HttpConnectionParams;
-import org.apache.commons.httpclient.protocol.SecureProtocolSocketFactory;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
 /**
  * Derived from EasySSLProtocolFactory
  *
- * Used by JsseSSLManager to set up the Commons HttpClient and Java https socket handling
+ * Used by JsseSSLManager to set up the Java https socket handling
  */
 
 public class HttpSSLProtocolSocketFactory
-    extends SSLSocketFactory // for java sockets
-    implements SecureProtocolSocketFactory { // for Commons Httpclient sockets
+    extends SSLSocketFactory {// for java sockets
 
     private static final Logger log = LoggerFactory.getLogger(HttpSSLProtocolSocketFactory.class);
 
     private static final String PROTOCOL_LIST =
             JMeterUtils.getPropDefault("https.socket.protocols", ""); // $NON-NLS-1$ $NON-NLS-2$
 
     private static final String[] protocols = PROTOCOL_LIST.split(" "); // $NON-NLS-1$
 
     static {
         if (!PROTOCOL_LIST.isEmpty()) {
             log.info("Using protocol list: {}", PROTOCOL_LIST);
         }
     }
 
     private final JsseSSLManager sslManager;
 
     private final int CPS; // Characters per second to emulate
 
     public HttpSSLProtocolSocketFactory(JsseSSLManager sslManager) {
         this(sslManager, 0);
     }
 
     public HttpSSLProtocolSocketFactory(JsseSSLManager sslManager, int cps) {
         super();
         this.sslManager = sslManager;
         CPS=cps;
     }
 
 
     private void setSocket(Socket socket){
         if (!(socket instanceof SSLSocket)) {
             throw new IllegalArgumentException("Expected SSLSocket");
         }
         SSLSocket sock = (SSLSocket) socket;
         if (!PROTOCOL_LIST.isEmpty()) {
             try {
                 sock.setEnabledProtocols(protocols);
             } catch (IllegalArgumentException e) {
                 if (log.isWarnEnabled()) {
                     log.warn("Could not set protocol list: {}.", PROTOCOL_LIST);
                     log.warn("Valid protocols are: {}", join(sock.getSupportedProtocols()));
                 }
             }
         }
     }
 
     private String join(String[] strings) {
         StringBuilder sb = new StringBuilder();
         for (int i=0;i<strings.length;i++){
             if (i>0) {
                 sb.append(' ');
             }
             sb.append(strings[i]);
         }
         return sb.toString();
     }
 
     private SSLSocketFactory getSSLSocketFactory() throws IOException {
         try {
             SSLContext sslContext = this.sslManager.getContext();
             return sslContext.getSocketFactory();
         } catch (GeneralSecurityException ex) {
             throw new IOException("Rethrown as IOE", ex);
         }
     }
 
     /*
      * Wraps the socket in a slow SSL socket if necessary
      */
     private Socket wrapSocket(Socket sock){
         if (CPS>0) {
             return new SlowSSLSocket((SSLSocket) sock, CPS);
         }
         return sock;
     }
 
     /**
-     * Attempts to get a new socket connection to the given host within the given time limit.
-     *
-     * @param host the host name/IP
-     * @param port the port on the host
-     * @param localAddress the local host name/IP to bind the socket to
-     * @param localPort the port on the local machine
-     * @param params {@link HttpConnectionParams Http connection parameters}
-     *
-     * @return Socket a new socket
-     *
-     * @throws IOException if an I/O error occurs while creating the socket
-     * @throws UnknownHostException if the IP address of the host cannot be
-     * determined
-     */
-    @Override
-    public Socket createSocket(
-        final String host,
-        final int port,
-        final InetAddress localAddress,
-        final int localPort,
-        final HttpConnectionParams params
-    ) throws IOException, UnknownHostException, ConnectTimeoutException {
-        if (params == null) {
-            throw new IllegalArgumentException("Parameters may not be null");
-        }
-        int timeout = params.getConnectionTimeout();
-
-        SSLSocketFactory sslfac = getSSLSocketFactory();
-        Socket socket;
-        if (timeout == 0) {
-            socket = sslfac.createSocket(host, port, localAddress, localPort);
-        } else {
-            socket = sslfac.createSocket();
-            SocketAddress localaddr = new InetSocketAddress(localAddress, localPort);
-            SocketAddress remoteaddr = new InetSocketAddress(host, port);
-            socket.bind(localaddr);
-            socket.connect(remoteaddr, timeout);
-        }
-        setSocket(socket);
-        return wrapSocket(socket);
-    }
-
-    /**
-     * @see SecureProtocolSocketFactory#createSocket(java.lang.String,int)
-     */
-    @Override
-    public Socket createSocket(String host, int port)
-        throws IOException, UnknownHostException {
-        SSLSocketFactory sslfac = getSSLSocketFactory();
-        Socket sock = sslfac.createSocket(
-            host,
-            port
-        );
-        setSocket(sock);
-        return wrapSocket(sock);
-    }
-
-    /**
      * @see javax.net.SocketFactory#createSocket()
      */
     @Override
     public Socket createSocket() throws IOException, UnknownHostException {
         SSLSocketFactory sslfac = getSSLSocketFactory();
         Socket sock = sslfac.createSocket();
         setSocket(sock);
         return wrapSocket(sock);
     }
 
-    /**
-     * @see SecureProtocolSocketFactory#createSocket(java.net.Socket,java.lang.String,int,boolean)
-     */
-    @Override
-    public Socket createSocket(
-        Socket socket,
-        String host,
-        int port,
-        boolean autoClose)
-        throws IOException, UnknownHostException {
-        SSLSocketFactory sslfac = getSSLSocketFactory();
-        Socket sock = sslfac.createSocket(
-            socket,
-            host,
-            port,
-            autoClose
-        );
-        setSocket(sock);
-        return wrapSocket(sock);
-    }
-
-    /**
-     * @see SecureProtocolSocketFactory#createSocket(java.lang.String,int,java.net.InetAddress,int)
-     */
-    @Override
-    public Socket createSocket(
-        String host,
-        int port,
-        InetAddress clientHost,
-        int clientPort)
-        throws IOException, UnknownHostException {
-
-        SSLSocketFactory sslfac = getSSLSocketFactory();
-        Socket sock = sslfac.createSocket(
-            host,
-            port,
-            clientHost,
-            clientPort
-        );
-        setSocket(sock);
-        return wrapSocket(sock);
-    }
 
     @Override
     public Socket createSocket(InetAddress host, int port) throws IOException {
         SSLSocketFactory sslfac = getSSLSocketFactory();
         Socket sock=sslfac.createSocket(host,port);
         setSocket(sock);
         return wrapSocket(sock);
     }
 
     @Override
     public Socket createSocket(InetAddress address, int port, InetAddress localAddress, int localPort) throws IOException {
         SSLSocketFactory sslfac = getSSLSocketFactory();
         Socket sock=sslfac.createSocket(address, port, localAddress, localPort);
         setSocket(sock);
         return wrapSocket(sock);
     }
 
     @Override
     public String[] getDefaultCipherSuites() {
         try {
             SSLSocketFactory sslfac = getSSLSocketFactory();
             return sslfac.getDefaultCipherSuites();
         } catch (IOException ex) {
             return new String[] {};
         }
     }
 
     @Override
     public String[] getSupportedCipherSuites() {
         try {
             SSLSocketFactory sslfac = getSSLSocketFactory();
             return sslfac.getSupportedCipherSuites();
         } catch (IOException ex) {
             return new String[] {};
         }
     }
+
+    @Override
+    public Socket createSocket(Socket s, String host, int port, boolean autoClose) throws IOException {
+        SSLSocketFactory sslfac = getSSLSocketFactory();
+        Socket sock=sslfac.createSocket(s, host,port, autoClose);
+        setSocket(sock);
+        return wrapSocket(sock);
+    }
+
+    @Override
+    public Socket createSocket(String host, int port) throws IOException, UnknownHostException {
+        SSLSocketFactory sslfac = getSSLSocketFactory();
+        Socket sock=sslfac.createSocket(host,port);
+        setSocket(sock);
+        return wrapSocket(sock);
+    }
+
+    @Override
+    public Socket createSocket(String host, int port, InetAddress inetAddress, int localPort)
+            throws IOException, UnknownHostException {
+        SSLSocketFactory sslfac = getSSLSocketFactory();
+        Socket sock=sslfac.createSocket(host, port, inetAddress, localPort);
+        setSocket(sock);
+        return wrapSocket(sock);
+
+    }
 }
diff --git a/src/core/org/apache/jmeter/util/JsseSSLManager.java b/src/core/org/apache/jmeter/util/JsseSSLManager.java
index 457baa593..3c8226064 100644
--- a/src/core/org/apache/jmeter/util/JsseSSLManager.java
+++ b/src/core/org/apache/jmeter/util/JsseSSLManager.java
@@ -1,424 +1,414 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *
  */
 
 package org.apache.jmeter.util;
 
 import java.net.HttpURLConnection;
 import java.net.Socket;
 import java.security.GeneralSecurityException;
 import java.security.Principal;
 import java.security.PrivateKey;
 import java.security.Provider;
 import java.security.SecureRandom;
 import java.security.cert.X509Certificate;
 
 import javax.net.ssl.HostnameVerifier;
 import javax.net.ssl.HttpsURLConnection;
 import javax.net.ssl.KeyManager;
 import javax.net.ssl.KeyManagerFactory;
 import javax.net.ssl.SSLContext;
 import javax.net.ssl.SSLSession;
 import javax.net.ssl.TrustManager;
 import javax.net.ssl.TrustManagerFactory;
 import javax.net.ssl.X509ExtendedKeyManager;
 import javax.net.ssl.X509KeyManager;
 import javax.net.ssl.X509TrustManager;
 
-import org.apache.commons.httpclient.protocol.Protocol;
-import org.apache.commons.httpclient.protocol.ProtocolSocketFactory;
 import org.apache.jmeter.util.keystore.JmeterKeyStore;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
 /**
  * The SSLManager handles the KeyStore information for JMeter. Basically, it
  * handles all the logic for loading and initializing all the JSSE parameters
  * and selecting the alias to authenticate against if it is available.
  * SSLManager will try to automatically select the client certificate for you,
  * but if it can't make a decision, it will pop open a dialog asking you for
  * more information.
  *
  * TODO: does not actually prompt
  *
  */
 public class JsseSSLManager extends SSLManager {
     private static final Logger log = LoggerFactory.getLogger(JsseSSLManager.class);
 
     private static final String HTTPS = "https"; // $NON-NLS-1$
 
     // Temporary fix to allow default protocol to be changed
     private static final String DEFAULT_SSL_PROTOCOL =
         JMeterUtils.getPropDefault("https.default.protocol","TLS"); // $NON-NLS-1$ // $NON-NLS-2$
 
     // Allow reversion to original shared session context
     private static final boolean SHARED_SESSION_CONTEXT =
         JMeterUtils.getPropDefault("https.sessioncontext.shared",false); // $NON-NLS-1$
 
     /**
      * Characters per second, used to slow down sockets
      */
     public static final int CPS = JMeterUtils.getPropDefault("httpclient.socket.https.cps", 0); // $NON-NLS-1$
 
     static {
         if (log.isInfoEnabled()) {
             log.info("Using default SSL protocol: {}", DEFAULT_SSL_PROTOCOL);
             log.info("SSL session context: {}", (SHARED_SESSION_CONTEXT ? "shared" : "per-thread"));
 
             if (CPS > 0) {
                 log.info("Setting up HTTPS SlowProtocol, cps={}", CPS);
             }
         }
     }
 
     /**
      * Cache the SecureRandom instance because it takes a long time to create
      */
     private SecureRandom rand;
 
     private Provider pro = null; // TODO why not use the super class value?
 
     private SSLContext defaultContext; // If we are using a single session
     private ThreadLocal<SSLContext> threadlocal; // Otherwise
 
     /**
      * Create the SSLContext, and wrap all the X509KeyManagers with
      * our X509KeyManager so that we can choose our alias.
      *
      * @param provider
      *            Description of Parameter
      */
     public JsseSSLManager(Provider provider) {
         log.debug("ssl Provider = {}", provider);
         setProvider(provider);
         if (null == this.rand) { // Surely this is always null in the constructor?
             this.rand = new SecureRandom();
         }
         try {
             if (SHARED_SESSION_CONTEXT) {
                 log.debug("Creating shared context");
                 this.defaultContext = createContext();
             } else {
                 this.threadlocal = new ThreadLocal<>();
             }
 
             HttpsURLConnection.setDefaultSSLSocketFactory(new HttpSSLProtocolSocketFactory(this, CPS));
             HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {
                 @Override
                 public boolean verify(String hostname, SSLSession session) {
                     return true;
                 }
             });
 
-            /*
-             * Also set up HttpClient defaults
-             */
-            Protocol protocol = new Protocol(
-                    JsseSSLManager.HTTPS,
-                    (ProtocolSocketFactory) new HttpSSLProtocolSocketFactory(this, CPS),
-                    443);
-            Protocol.registerProtocol(JsseSSLManager.HTTPS, protocol);
             log.debug("SSL stuff all set");
         } catch (GeneralSecurityException ex) {
             log.error("Could not set up SSLContext", ex);
         }
         log.debug("JsseSSLManager installed");
     }
 
     /**
      * Sets the Context attribute of the JsseSSLManager object
      *
      * @param conn
      *            The new Context value
      */
     @Override
     public void setContext(HttpURLConnection conn) {
         if (conn instanceof HttpsURLConnection) {
 /*
  * No point doing this on a per-connection basis, as there is currently no way to configure it.
  * So we leave it to the defaults set up in the SSL Context
  *
  */
 //          HttpsURLConnection secureConn = (HttpsURLConnection) conn;
 //          secureConn.setSSLSocketFactory(this.getContext().getSocketFactory());
         } else {
             if (log.isWarnEnabled()) {
                 log.warn("Unexpected HttpURLConnection class: {}", conn.getClass().getName());
             }
         }
     }
 
     /**
      * Sets the Provider attribute of the JsseSSLManager object
      *
      * @param p
      *            The new Provider value
      */
     @Override
     protected final void setProvider(Provider p) {
         super.setProvider(p);
         if (null == this.pro) {
             this.pro = p;
         }
     }
 
     /**
      * Returns the SSLContext we are using. This is either a context per thread,
      * or, for backwards compatibility, a single shared context.
      *
      * @return The Context value
      * @throws GeneralSecurityException
      *             when constructing the context fails
      */
     public SSLContext getContext() throws GeneralSecurityException {
         if (SHARED_SESSION_CONTEXT) {
             if (log.isDebugEnabled()){
                 log.debug("Using shared SSL context for: {}", Thread.currentThread().getName());
             }
             return this.defaultContext;
         }
 
         SSLContext sslContext = this.threadlocal.get();
         if (sslContext == null) {
             if (log.isDebugEnabled()){
                 log.debug("Creating threadLocal SSL context for: {}", Thread.currentThread().getName());
             }
             sslContext = createContext();
             this.threadlocal.set(sslContext);
         }
         if (log.isDebugEnabled()){
             log.debug("Using threadLocal SSL context for: {}", Thread.currentThread().getName());
         }
         return sslContext;
     }
 
     /**
      * Resets the SSLContext if using per-thread contexts.
      *
      */
     public void resetContext() {
         if (!SHARED_SESSION_CONTEXT) {
             log.debug("Clearing session context for current thread");
             this.threadlocal.set(null);
         }
     }
     
     /*
      * 
      * Creates new SSL context
      * 
      * @return SSL context
      * 
      * @throws GeneralSecurityException when the algorithm for the context can
      * not be found or the keys have problems
      */
     private SSLContext createContext() throws GeneralSecurityException {
         SSLContext context;
         if (pro != null) {
             context = SSLContext.getInstance(DEFAULT_SSL_PROTOCOL, pro); // $NON-NLS-1$
         } else {
             context = SSLContext.getInstance(DEFAULT_SSL_PROTOCOL); // $NON-NLS-1$
         }
         KeyManagerFactory managerFactory =
             KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
         JmeterKeyStore keys = this.getKeyStore();
         managerFactory.init(null, defaultpw == null ? new char[]{} : defaultpw.toCharArray());
         KeyManager[] managers = managerFactory.getKeyManagers();
         KeyManager[] newManagers = new KeyManager[managers.length];
 
         if (log.isDebugEnabled()) {
             log.debug("JmeterKeyStore type: {}", keys.getClass());
         }
 
         // Now wrap the default managers with our key manager
         for (int i = 0; i < managers.length; i++) {
             if (managers[i] instanceof X509KeyManager) {
                 X509KeyManager manager = (X509KeyManager) managers[i];
                 newManagers[i] = new WrappedX509KeyManager(manager, keys);
             } else {
                 newManagers[i] = managers[i];
             }
         }
 
         // Get the default trust managers
         TrustManagerFactory tmfactory = TrustManagerFactory.getInstance(
                 TrustManagerFactory.getDefaultAlgorithm());
         tmfactory.init(this.getTrustStore());
 
         // Wrap the defaults in our custom trust manager
         TrustManager[] trustmanagers = tmfactory.getTrustManagers();
         for (int i = 0; i < trustmanagers.length; i++) {
             if (trustmanagers[i] instanceof X509TrustManager) {
                 trustmanagers[i] = new CustomX509TrustManager(
                     (X509TrustManager)trustmanagers[i]);
             }
         }
         context.init(newManagers, trustmanagers, this.rand);
         if (log.isDebugEnabled()){
             String[] dCiphers = context.getSocketFactory().getDefaultCipherSuites();
             String[] sCiphers = context.getSocketFactory().getSupportedCipherSuites();
             int len = (dCiphers.length > sCiphers.length) ? dCiphers.length : sCiphers.length;
             for (int i = 0; i < len; i++) {
                 if (i < dCiphers.length) {
                     log.debug("Default Cipher: {}", dCiphers[i]);
                 }
                 if (i < sCiphers.length) {
                     log.debug("Supported Cipher: {}", sCiphers[i]);
                 }
             }
         }
         return context;
     }
 
     /**
      * This is the X509KeyManager we have defined for the sole purpose of
      * selecting the proper key and certificate based on the keystore available.
      *
      */
     private static class WrappedX509KeyManager extends X509ExtendedKeyManager {
 
         /**
          * The parent X509KeyManager.
          * This is used for the methods {@link #getServerAliases(String, Principal[])}
          *  and {@link #chooseServerAlias(String, Principal[], Socket)}
          */
         private final X509KeyManager manager;
 
         /**
          * The KeyStore this KeyManager uses.
          * This is used for the remaining X509KeyManager methods: 
          * {@link #getClientAliases(String, Principal[])},
          * {@link #getCertificateChain(String)},
          * {@link #getPrivateKey(String)} and
          * {@link #chooseClientAlias(String[], Principal[], Socket)}
          */
         private final JmeterKeyStore store;
 
         /**
          * Instantiate a new WrappedX509KeyManager.
          *
          * @param parent
          *            The parent X509KeyManager
          * @param ks
          *            The KeyStore we derive our client certs and keys from
          */
         public WrappedX509KeyManager(X509KeyManager parent, JmeterKeyStore ks) {
             this.manager = parent;
             this.store = ks;
         }
 
         /**
          * Compiles the list of all client aliases with a private key.
          *
          * @param keyType the key algorithm type name (RSA, DSA, etc.)
          * @param issuers  the CA certificates we are narrowing our selection on.
          * 
          * @return the array of aliases; may be empty
          */
         @Override
         public String[] getClientAliases(String keyType, Principal[] issuers) {
             log.debug("WrappedX509Manager: getClientAliases: ");
             // implementation moved to JmeterKeystore as only that has the keyType info
             return this.store.getClientAliases(keyType, issuers);
         }
 
         /**
          * Get the list of server aliases for the SSLServerSockets. This is not
          * used in JMeter.
          *
          * @param keyType
          *            the type of private key the server expects (RSA, DSA,
          *            etc.)
          * @param issuers
          *            the CA certificates we are narrowing our selection on.
          * @return the ServerAliases value
          */
         @Override
         public String[] getServerAliases(String keyType, Principal[] issuers) {
             log.debug("WrappedX509Manager: getServerAliases: ");
             return this.manager.getServerAliases(keyType, issuers);
         }
 
         /**
          * Get the Certificate chain for a particular alias
          *
          * @param alias
          *            The client alias
          * @return The CertificateChain value
          */
         @Override
         public X509Certificate[] getCertificateChain(String alias) {
             log.debug("WrappedX509Manager: getCertificateChain({})", alias);
             return this.store.getCertificateChain(alias);
         }
 
         /**
          * Get the Private Key for a particular alias
          *
          * @param alias
          *            The client alias
          * @return The PrivateKey value
          */
         @Override
         public PrivateKey getPrivateKey(String alias) {
             PrivateKey privateKey = this.store.getPrivateKey(alias);
             log.debug("WrappedX509Manager: getPrivateKey: {}", privateKey);
             return privateKey;
         }
 
         /**
          * Select the Alias we will authenticate as if Client authentication is
          * required by the server we are connecting to. We get the list of
          * aliases, and if there is only one alias we automatically select it.
          * If there are more than one alias that has a private key, we prompt
          * the user to choose which alias using a combo box. Otherwise, we
          * simply provide a text box, which may or may not work. The alias does
          * have to match one in the keystore.
          *
          * TODO? - does not actually allow the user to choose an alias at present
          * 
          * @param keyType the key algorithm type name(s), ordered with the most-preferred key type first.
          * @param issuers the list of acceptable CA issuer subject names or null if it does not matter which issuers are used.
          * @param socket the socket to be used for this connection. 
          *     This parameter can be null, which indicates that implementations are free to select an alias applicable to any socket.
          * 
          * @see javax.net.ssl.X509KeyManager#chooseClientAlias(String[], Principal[], Socket)
          */
         @Override
         public String chooseClientAlias(String[] keyType, Principal[] issuers, Socket socket) {
             if(log.isDebugEnabled()) {
                 log.debug("keyType: {}", keyType[0]);
             }
             String alias = this.store.getAlias();
             if(log.isDebugEnabled()) {
                 log.debug("Client alias: '{}'", alias);
             }
             return alias;
         }
 
         /**
          * Choose the server alias for the SSLServerSockets. This are not used
          * in JMeter.
          *
          * @see javax.net.ssl.X509KeyManager#chooseServerAlias(String, Principal[], Socket)
          */
         @Override
         public String chooseServerAlias(String keyType, Principal[] issuers, Socket socket) {
             return this.manager.chooseServerAlias(keyType, issuers, socket);
         }
     }
 }
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/control/CacheManager.java b/src/protocol/http/org/apache/jmeter/protocol/http/control/CacheManager.java
index 54b7e969b..d99e77b37 100644
--- a/src/protocol/http/org/apache/jmeter/protocol/http/control/CacheManager.java
+++ b/src/protocol/http/org/apache/jmeter/protocol/http/control/CacheManager.java
@@ -1,518 +1,441 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *
  */
 
 package org.apache.jmeter.protocol.http.control;
 
 import java.io.Serializable;
 import java.net.HttpURLConnection;
 import java.net.URL;
 import java.net.URLConnection;
 import java.util.Arrays;
 import java.util.Collections;
 import java.util.Date;
 import java.util.Map;
 
 import org.apache.commons.collections.map.LRUMap;
-import org.apache.commons.httpclient.HttpMethod;
-import org.apache.commons.httpclient.URIException;
 import org.apache.commons.lang3.StringUtils;
 import org.apache.http.HttpResponse;
 import org.apache.http.client.methods.HttpRequestBase;
 import org.apache.http.client.utils.DateUtils;
 import org.apache.jmeter.config.ConfigTestElement;
 import org.apache.jmeter.engine.event.LoopIterationEvent;
 import org.apache.jmeter.protocol.http.sampler.HTTPSampleResult;
 import org.apache.jmeter.protocol.http.util.HTTPConstants;
 import org.apache.jmeter.testelement.TestIterationListener;
 import org.apache.jmeter.testelement.TestStateListener;
 import org.apache.jmeter.testelement.property.BooleanProperty;
 import org.apache.jmeter.util.JMeterUtils;
-import org.slf4j.LoggerFactory;
 import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 /**
  * Handles HTTP Caching
  */
 public class CacheManager extends ConfigTestElement implements TestStateListener, TestIterationListener, Serializable {
 
     private static final Date EXPIRED_DATE = new Date(0L);
 
     private static final long serialVersionUID = 235L;
 
     private static final Logger log = LoggerFactory.getLogger(CacheManager.class);
 
     private static final String[] CACHEABLE_METHODS = JMeterUtils.getPropDefault("cacheable_methods", "GET").split("[ ,]");
 
     static {
         log.info("Will only cache the following methods: "+Arrays.toString(CACHEABLE_METHODS));
     }
 
     //+ JMX attributes, do not change values
     public static final String CLEAR = "clearEachIteration"; // $NON-NLS-1$
     public static final String USE_EXPIRES = "useExpires"; // $NON-NLS-1$
     public static final String MAX_SIZE = "maxSize";  // $NON-NLS-1$
     //-
 
     private transient InheritableThreadLocal<Map<String, CacheEntry>> threadCache;
 
     private transient boolean useExpires; // Cached value
 
     private static final int DEFAULT_MAX_SIZE = 5000;
 
     private static final long ONE_YEAR_MS = 365*24*60*60*1000L;
     
     /** used to share the cache between 2 cache managers
      * @see CacheManager#createCacheManagerProxy() 
      * @since 3.0 */
     private transient Map<String, CacheEntry> localCache;
 
     public CacheManager() {
         setProperty(new BooleanProperty(CLEAR, false));
         setProperty(new BooleanProperty(USE_EXPIRES, false));
         clearCache();
         useExpires = false;
     }
     
     CacheManager(Map<String, CacheEntry> localCache, boolean useExpires) {
         this.localCache = localCache;
         this.useExpires = useExpires;
     }
 
     /*
      * Holder for storing cache details.
      * Perhaps add original response later?
      */
     // package-protected to allow access by unit-test cases
     static class CacheEntry{
         private final String lastModified;
         private final String etag;
         private final Date expires;
         public CacheEntry(String lastModified, Date expires, String etag){
            this.lastModified = lastModified;
            this.etag = etag;
            this.expires = expires;
        }
         public String getLastModified() {
             return lastModified;
         }
         public String getEtag() {
             return etag;
         }
         @Override
         public String toString(){
             return lastModified+" "+etag;
         }
         public Date getExpires() {
             return expires;
         }
     }
 
     /**
      * Save the Last-Modified, Etag, and Expires headers if the result is cacheable.
      * Version for Java implementation.
      * @param conn connection
      * @param res result
      */
     public void saveDetails(URLConnection conn, HTTPSampleResult res){
         if (isCacheable(res) && !hasVaryHeader(conn)){
             String lastModified = conn.getHeaderField(HTTPConstants.LAST_MODIFIED);
             String expires = conn.getHeaderField(HTTPConstants.EXPIRES);
             String etag = conn.getHeaderField(HTTPConstants.ETAG);
             String url = conn.getURL().toString();
             String cacheControl = conn.getHeaderField(HTTPConstants.CACHE_CONTROL);
             String date = conn.getHeaderField(HTTPConstants.DATE);
             setCache(lastModified, cacheControl, expires, etag, url, date);
         }
     }
 
     private boolean hasVaryHeader(URLConnection conn) {
         return conn.getHeaderField(HTTPConstants.VARY) != null;
     }
 
     /**
      * Save the Last-Modified, Etag, and Expires headers if the result is
-     * cacheable. Version for Commons HttpClient implementation.
-     *
-     * @param method
-     *            {@link HttpMethod} to get header information from
-     * @param res
-     *            result to decide if result is cacheable
-     * @throws URIException
-     *             if extraction of the uri from <code>method</code> fails
-     * @deprecated HC3.1 will be dropped in upcoming version
-     */
-    @Deprecated
-    public void saveDetails(HttpMethod method, HTTPSampleResult res) throws URIException{
-        if (isCacheable(res) && !hasVaryHeader(method)){
-            String lastModified = getHeader(method ,HTTPConstants.LAST_MODIFIED);
-            String expires = getHeader(method ,HTTPConstants.EXPIRES);
-            String etag = getHeader(method ,HTTPConstants.ETAG);
-            String url = method.getURI().toString();
-            String cacheControl = getHeader(method, HTTPConstants.CACHE_CONTROL);
-            String date = getHeader(method, HTTPConstants.DATE);
-            setCache(lastModified, cacheControl, expires, etag, url, date);
-        }
-    }
-
-    /**
-     * @deprecated HC3.1 will be dropped in upcoming version
-     */
-    @Deprecated
-    private boolean hasVaryHeader(HttpMethod method) {
-        return getHeader(method, HTTPConstants.VARY) != null;
-    }
-
-    /**
-     * Save the Last-Modified, Etag, and Expires headers if the result is
      * cacheable. Version for Apache HttpClient implementation.
      *
      * @param method
      *            {@link HttpResponse} to extract header information from
      * @param res
      *            result to decide if result is cacheable
      */
     public void saveDetails(HttpResponse method, HTTPSampleResult res) {
         if (isCacheable(res) && !hasVaryHeader(method)){
             String lastModified = getHeader(method ,HTTPConstants.LAST_MODIFIED);
             String expires = getHeader(method ,HTTPConstants.EXPIRES);
             String etag = getHeader(method ,HTTPConstants.ETAG);
             String cacheControl = getHeader(method, HTTPConstants.CACHE_CONTROL);
             String date = getHeader(method, HTTPConstants.DATE);
             setCache(lastModified, cacheControl, expires, etag, res.getUrlAsString(), date); // TODO correct URL?
         }
     }
 
     private boolean hasVaryHeader(HttpResponse method) {
         return getHeader(method, HTTPConstants.VARY) != null;
     }
 
     // helper method to save the cache entry
     private void setCache(String lastModified, String cacheControl, String expires, String etag, String url, String date) {
         if (log.isDebugEnabled()){
             log.debug("setCache("
                   + lastModified + "," 
                   + cacheControl + ","
                   + expires + "," 
                   + etag + ","
                   + url + ","
                   + date
                   + ")");
         }
         Date expiresDate = null; // i.e. not using Expires
         if (useExpires) {// Check that we are processing Expires/CacheControl
             final String MAX_AGE = "max-age=";
             
             if(cacheControl != null && cacheControl.contains("no-store")) {
                 // We must not store an CacheEntry, otherwise a 
                 // conditional request may be made
                 return;
             }
             if (expires != null) {
                 try {
                     expiresDate = org.apache.http.client.utils.DateUtils.parseDate(expires);
                 } catch (IllegalArgumentException e) {
                     if (log.isDebugEnabled()){
                         log.debug("Unable to parse Expires: '"+expires+"' "+e);
                     }
                     expiresDate = CacheManager.EXPIRED_DATE; // invalid dates must be treated as expired
                 }
             }
             // if no-cache is present, ensure that expiresDate remains null, which forces revalidation
             if(cacheControl != null && !cacheControl.contains("no-cache")) {
                 // the max-age directive overrides the Expires header,
                 if(cacheControl.contains(MAX_AGE)) {
                     long maxAgeInSecs = Long.parseLong(
                             cacheControl.substring(cacheControl.indexOf(MAX_AGE)+MAX_AGE.length())
                                 .split("[, ]")[0] // Bug 51932 - allow for optional trailing attributes
                             );
                     expiresDate=new Date(System.currentTimeMillis()+maxAgeInSecs*1000);
 
                 } else if(expires==null) { // No max-age && No expires
                     if(!StringUtils.isEmpty(lastModified) && !StringUtils.isEmpty(date)) {
                         try {
                             Date responseDate = DateUtils.parseDate( date );
                             Date lastModifiedAsDate = DateUtils.parseDate( lastModified );
                             // see https://developer.mozilla.org/en/HTTP_Caching_FAQ
                             // see http://www.ietf.org/rfc/rfc2616.txt#13.2.4 
                             expiresDate=new Date(System.currentTimeMillis()
                                     +Math.round((responseDate.getTime()-lastModifiedAsDate.getTime())*0.1));
                         } catch(IllegalArgumentException e) {
                             // date or lastModified may be null or in bad format
                             if(log.isWarnEnabled()) {
                                 log.warn("Failed computing expiration date with following info:"
                                     +lastModified + "," 
                                     + cacheControl + ","
                                     + expires + "," 
                                     + etag + ","
                                     + url + ","
                                     + date);
                             }
                             // TODO Can't see anything in SPEC
                             expiresDate = new Date(System.currentTimeMillis()+ONE_YEAR_MS);
                         }
                     } else {
                         // TODO Can't see anything in SPEC
                         expiresDate = new Date(System.currentTimeMillis()+ONE_YEAR_MS);
                     }
                 }  
                 // else expiresDate computed in (expires!=null) condition is used
             }
         }
         getCache().put(url, new CacheEntry(lastModified, expiresDate, etag));
     }
 
-    /**
-     * Helper method to deal with missing headers - Commons HttpClient
-     * @param method Http method
-     * @param name Header name
-     * @return Header value
-     * @deprecated HC3.1 will be dropped in upcoming version
-     */
-    @Deprecated
-    private String getHeader(HttpMethod method, String name){
-        org.apache.commons.httpclient.Header hdr = method.getResponseHeader(name);
-        return hdr != null ? hdr.getValue() : null;
-    }
-
     // Apache HttpClient
     private String getHeader(HttpResponse method, String name) {
         org.apache.http.Header hdr = method.getLastHeader(name);
         return hdr != null ? hdr.getValue() : null;
     }
 
     /*
      * Is the sample result OK to cache?
      * i.e is it in the 2xx range or equal to 304, and is it a cacheable method?
      */
     private boolean isCacheable(HTTPSampleResult res){
         final String responseCode = res.getResponseCode();
         return isCacheableMethod(res) 
                 && (("200".compareTo(responseCode) <= 0  // $NON-NLS-1$
                     && "299".compareTo(responseCode) >= 0)  // $NON-NLS-1$
                     || "304".equals(responseCode));  // $NON-NLS-1$
     }
 
     private boolean isCacheableMethod(HTTPSampleResult res) {
         final String resMethod = res.getHTTPMethod();
         for(String method : CACHEABLE_METHODS) {
             if (method.equalsIgnoreCase(resMethod)) {
                 return true;
             }
         }
         return false;
     }
 
     /**
      * Check the cache, and if there is a match, set the headers:
      * <ul>
      * <li>If-Modified-Since</li>
      * <li>If-None-Match</li>
      * </ul>
-     * Commons HttpClient version
-     * @param url URL to look up in cache
-     * @param method where to set the headers
-     * @deprecated HC3.1 will be dropped in upcoming version
-     */
-    @Deprecated
-    public void setHeaders(URL url, HttpMethod method) {
-        CacheEntry entry = getCache().get(url.toString());
-        if (log.isDebugEnabled()){
-            log.debug(method.getName()+"(OACH) "+url.toString()+" "+entry);
-        }
-        if (entry != null){
-            final String lastModified = entry.getLastModified();
-            if (lastModified != null){
-                method.setRequestHeader(HTTPConstants.IF_MODIFIED_SINCE, lastModified);
-            }
-            final String etag = entry.getEtag();
-            if (etag != null){
-                method.setRequestHeader(HTTPConstants.IF_NONE_MATCH, etag);
-            }
-        }
-    }
-
-    /**
-     * Check the cache, and if there is a match, set the headers:
-     * <ul>
-     * <li>If-Modified-Since</li>
-     * <li>If-None-Match</li>
-     * </ul>
      * Apache HttpClient version.
      * @param url {@link URL} to look up in cache
      * @param request where to set the headers
      */
     public void setHeaders(URL url, HttpRequestBase request) {
         CacheEntry entry = getCache().get(url.toString());
         if (log.isDebugEnabled()){
             log.debug(request.getMethod()+"(OAH) "+url.toString()+" "+entry);
         }
         if (entry != null){
             final String lastModified = entry.getLastModified();
             if (lastModified != null){
                 request.setHeader(HTTPConstants.IF_MODIFIED_SINCE, lastModified);
             }
             final String etag = entry.getEtag();
             if (etag != null){
                 request.setHeader(HTTPConstants.IF_NONE_MATCH, etag);
             }
         }
     }
 
     /**
      * Check the cache, and if there is a match, set the headers:
      * <ul>
      * <li>If-Modified-Since</li>
      * <li>If-None-Match</li>
      * </ul>
      * @param url {@link URL} to look up in cache
      * @param conn where to set the headers
      */
     public void setHeaders(HttpURLConnection conn, URL url) {
         CacheEntry entry = getCache().get(url.toString());
         if (log.isDebugEnabled()){
             log.debug(conn.getRequestMethod()+"(Java) "+url.toString()+" "+entry);
         }
         if (entry != null){
             final String lastModified = entry.getLastModified();
             if (lastModified != null){
                 conn.addRequestProperty(HTTPConstants.IF_MODIFIED_SINCE, lastModified);
             }
             final String etag = entry.getEtag();
             if (etag != null){
                 conn.addRequestProperty(HTTPConstants.IF_NONE_MATCH, etag);
             }
         }
     }
 
     /**
      * Check the cache, if the entry has an expires header and the entry has not expired, return true<br>
      * @param url {@link URL} to look up in cache
      * @return <code>true</code> if entry has an expires header and the entry has not expired, else <code>false</code>
      */
     public boolean inCache(URL url) {
         CacheEntry entry = getCache().get(url.toString());
         if (log.isDebugEnabled()){
             log.debug("inCache "+url.toString()+" "+entry);
         }
         if (entry != null){
             final Date expiresDate = entry.getExpires();
             if (expiresDate != null) {
                 if (expiresDate.after(new Date())) {
                     if (log.isDebugEnabled()){
                         log.debug("Expires= " + expiresDate + " (Valid)");
                     }
                     return true;
                 } else {
                     if (log.isDebugEnabled()){
                         log.debug("Expires= " + expiresDate + " (Expired)");
                     }
                 }
             }
         }
         return false;
     }
 
     private Map<String, CacheEntry> getCache() {
         return localCache != null?localCache:threadCache.get();
     }
 
     public boolean getClearEachIteration() {
         return getPropertyAsBoolean(CLEAR);
     }
 
     public void setClearEachIteration(boolean clear) {
         setProperty(new BooleanProperty(CLEAR, clear));
     }
 
     public boolean getUseExpires() {
         return getPropertyAsBoolean(USE_EXPIRES);
     }
 
     public void setUseExpires(boolean expires) {
         setProperty(new BooleanProperty(USE_EXPIRES, expires));
     }
     
     /**
      * @return int cache max size
      */
     public int getMaxSize() {
         return getPropertyAsInt(MAX_SIZE, DEFAULT_MAX_SIZE);
     }
 
     /**
      * @param size int cache max size
      */
     public void setMaxSize(int size) {
         setProperty(MAX_SIZE, size, DEFAULT_MAX_SIZE);
     }
     
 
     @Override
     public void clear(){
         super.clear();
         clearCache();
     }
 
     private void clearCache() {
         log.debug("Clear cache");
         threadCache = new InheritableThreadLocal<Map<String, CacheEntry>>(){
             @Override
             protected Map<String, CacheEntry> initialValue(){
                 // Bug 51942 - this map may be used from multiple threads
                 @SuppressWarnings("unchecked") // LRUMap is not generic currently
                 Map<String, CacheEntry> map = new LRUMap(getMaxSize());
                 return Collections.synchronizedMap(map);
             }
         };
     }
 
     /**
      * create a cache manager that share the underlying cache of the current one
      * it allows to use the same cache in different threads which does not inherit from each other
      * @return a cache manager that share the underlying cache of the current one
      * @since 3.0
      */
     public CacheManager createCacheManagerProxy() {
         return new CacheManager(getCache(), this.useExpires);
     }
 
     @Override
     public void testStarted() {
     }
 
     @Override
     public void testEnded() {
     }
 
     @Override
     public void testStarted(String host) {
     }
 
     @Override
     public void testEnded(String host) {
     }
 
     @Override
     public void testIterationStart(LoopIterationEvent event) {
         if (getClearEachIteration()) {
             clearCache();
         }
         useExpires = getUseExpires(); // cache the value
     }
 
 }
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/control/CookieManager.java b/src/protocol/http/org/apache/jmeter/protocol/http/control/CookieManager.java
index e723552d1..fc5b1c8c5 100644
--- a/src/protocol/http/org/apache/jmeter/protocol/http/control/CookieManager.java
+++ b/src/protocol/http/org/apache/jmeter/protocol/http/control/CookieManager.java
@@ -1,457 +1,457 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *
  */
 
 // For unit tests @see TestCookieManager
 
 package org.apache.jmeter.protocol.http.control;
 
 import java.io.BufferedReader;
 import java.io.File;
 import java.io.FileReader;
 import java.io.FileWriter;
 import java.io.IOException;
 import java.io.PrintWriter;
 import java.io.Serializable;
 import java.net.URL;
 import java.util.ArrayList;
 
 import org.apache.http.client.config.CookieSpecs;
 import org.apache.jmeter.config.ConfigTestElement;
 import org.apache.jmeter.engine.event.LoopIterationEvent;
 import org.apache.jmeter.testelement.TestIterationListener;
 import org.apache.jmeter.testelement.TestStateListener;
 import org.apache.jmeter.testelement.property.BooleanProperty;
 import org.apache.jmeter.testelement.property.CollectionProperty;
 import org.apache.jmeter.testelement.property.JMeterProperty;
 import org.apache.jmeter.testelement.property.PropertyIterator;
 import org.apache.jmeter.threads.JMeterContext;
 import org.apache.jmeter.util.JMeterUtils;
 import org.apache.jorphan.reflect.ClassTools;
 import org.apache.jorphan.util.JMeterException;
 import org.apache.jorphan.util.JOrphanUtils;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
 /**
  * This class provides an interface to the netscape cookies file to pass cookies
  * along with a request.
  *
  */
 public class CookieManager extends ConfigTestElement implements TestStateListener, TestIterationListener, Serializable {
     private static final long serialVersionUID = 234L;
 
     private static final Logger log = LoggerFactory.getLogger(CookieManager.class);
 
     //++ JMX tag values
     private static final String CLEAR = "CookieManager.clearEachIteration";// $NON-NLS-1$
 
     private static final String COOKIES = "CookieManager.cookies";// $NON-NLS-1$
 
     private static final String POLICY = "CookieManager.policy"; //$NON-NLS-1$
     
     private static final String IMPLEMENTATION = "CookieManager.implementation"; //$NON-NLS-1$
     //-- JMX tag values
 
     private static final String TAB = "\t"; //$NON-NLS-1$
 
     // See bug 33796
     private static final boolean DELETE_NULL_COOKIES =
         JMeterUtils.getPropDefault("CookieManager.delete_null_cookies", true);// $NON-NLS-1$
 
     // See bug 28715
     // Package protected for tests
     static final boolean ALLOW_VARIABLE_COOKIES
         = JMeterUtils.getPropDefault("CookieManager.allow_variable_cookies", true);// $NON-NLS-1$
 
     private static final String COOKIE_NAME_PREFIX =
         JMeterUtils.getPropDefault("CookieManager.name.prefix", "COOKIE_").trim();// $NON-NLS-1$ $NON-NLS-2$
 
     private static final boolean SAVE_COOKIES =
         JMeterUtils.getPropDefault("CookieManager.save.cookies", false);// $NON-NLS-1$
 
     private static final boolean CHECK_COOKIES =
         JMeterUtils.getPropDefault("CookieManager.check.cookies", true);// $NON-NLS-1$
 
     static {
         log.info("Settings:"
                 + " Delete null: " + DELETE_NULL_COOKIES
                 + " Check: " + CHECK_COOKIES
                 + " Allow variable: " + ALLOW_VARIABLE_COOKIES
                 + " Save: " + SAVE_COOKIES
                 + " Prefix: " + COOKIE_NAME_PREFIX
                 );
     }
     private transient CookieHandler cookieHandler;
 
     private transient CollectionProperty initialCookies;
 
     /**
      * Defines the policy that is assumed when the JMX file does not contain an entry for it
      * MUST NOT BE CHANGED otherwise JMX files will not be correctly interpreted
      * <p>
      * The default policy for new CookieManager elements is defined by 
      * {@link org.apache.jmeter.protocol.http.gui.CookiePanel#DEFAULT_POLICY CookiePanel#DEFAULT_POLICY}
      *
      * @deprecated not intended for use outside this class (should have been created private)
      */
     @Deprecated
     public static final String DEFAULT_POLICY = CookieSpecs.BROWSER_COMPATIBILITY;
     
     /**
      * Defines the implementation that is assumed when the JMX file does not contain an entry for it
      * MUST NOT BE CHANGED otherwise JMX files will not be correctly interpreted
      * <p>
      * The default implementation for new CookieManager elements is defined by 
      * {@link org.apache.jmeter.protocol.http.gui.CookiePanel#DEFAULT_IMPLEMENTATION CookiePanel#DEFAULT_IMPLEMENTATION}
      *
      * @deprecated not intended for use outside this class (should have been created private)
      */
     @Deprecated
-    public static final String DEFAULT_IMPLEMENTATION = HC3CookieHandler.class.getName();
+    public static final String DEFAULT_IMPLEMENTATION = "org.apache.jmeter.protocol.http.control.HC3CookieHandler";
 
     public CookieManager() {
         clearCookies(); // Ensure that there is always a collection available
     }
 
     // ensure that the initial cookies are copied to the per-thread instances
     /** {@inheritDoc} */
     @Override
     public Object clone(){
         CookieManager clone = (CookieManager) super.clone();
         clone.initialCookies = initialCookies;
         clone.cookieHandler = cookieHandler;
         return clone;
     }
 
     public String getPolicy() {
         return getPropertyAsString(POLICY, DEFAULT_POLICY);
     }
 
     public void setCookiePolicy(String policy){
         setProperty(POLICY, policy, DEFAULT_POLICY);
     }
 
     public CollectionProperty getCookies() {
         return (CollectionProperty) getProperty(COOKIES);
     }
 
     public int getCookieCount() {// Used by GUI
         return getCookies().size();
     }
 
     public boolean getClearEachIteration() {
         return getPropertyAsBoolean(CLEAR);
     }
 
     public void setClearEachIteration(boolean clear) {
         setProperty(new BooleanProperty(CLEAR, clear));
     }
 
     public String getImplementation() {
         return getPropertyAsString(IMPLEMENTATION, DEFAULT_IMPLEMENTATION);
     }
 
     public void setImplementation(String implementation){
         setProperty(IMPLEMENTATION, implementation, DEFAULT_IMPLEMENTATION);
     }
 
     /**
      * Save the static cookie data to a file.
      * <p>
      * Cookies are only taken from the GUI - runtime cookies are not included.
      *
      * @param authFile
      *            name of the file to store the cookies into. If the name is
      *            relative, the system property <code>user.dir</code> will be
      *            prepended
      * @throws IOException
      *             when writing to that file fails
      */
     public void save(String authFile) throws IOException {
         File file = new File(authFile);
         if (!file.isAbsolute()) {
             file = new File(System.getProperty("user.dir") // $NON-NLS-1$
                     + File.separator + authFile);
         }
         try(PrintWriter writer = new PrintWriter(new FileWriter(file))) { // TODO Charset ?
             writer.println("# JMeter generated Cookie file");// $NON-NLS-1$
             long now = System.currentTimeMillis();
             for (JMeterProperty jMeterProperty : getCookies()) {
                 Cookie cook = (Cookie) jMeterProperty.getObjectValue();
                 final long expiresMillis = cook.getExpiresMillis();
                 if (expiresMillis == 0 || expiresMillis > now) { // only save unexpired cookies
                     writer.println(cookieToString(cook));
                 }
             }
             writer.flush();
         }
     }
 
     /**
      * Add cookie data from a file.
      *
      * @param cookieFile
      *            name of the file to read the cookies from. If the name is
      *            relative, the system property <code>user.dir</code> will be
      *            prepended
      * @throws IOException
      *             if reading the file fails
      */
     public void addFile(String cookieFile) throws IOException {
         File file = new File(cookieFile);
         if (!file.isAbsolute()) {
             file = new File(System.getProperty("user.dir") // $NON-NLS-1$
                     + File.separator + cookieFile);
         }
         BufferedReader reader = null;
         if (file.canRead()) {
             reader = new BufferedReader(new FileReader(file)); // TODO Charset ?
         } else {
             throw new IOException("The file you specified cannot be read.");
         }
 
         // N.B. this must agree with the save() and cookieToString() methods
         String line;
         try {
             final CollectionProperty cookies = getCookies();
             while ((line = reader.readLine()) != null) {
                 try {
                     if (line.startsWith("#") || JOrphanUtils.isBlank(line)) {//$NON-NLS-1$
                         continue;
                     }
                     String[] st = JOrphanUtils.split(line, TAB, false);
 
                     final int _domain = 0;
                     //final int _ignored = 1;
                     final int _path = 2;
                     final int _secure = 3;
                     final int _expires = 4;
                     final int _name = 5;
                     final int _value = 6;
                     final int _fields = 7;
                     if (st.length!=_fields) {
                         throw new IOException("Expected "+_fields+" fields, found "+st.length+" in "+line);
                     }
 
                     if (st[_path].length()==0) {
                         st[_path] = "/"; //$NON-NLS-1$
                     }
                     boolean secure = Boolean.parseBoolean(st[_secure]);
                     long expires = Long.parseLong(st[_expires]);
                     if (expires==Long.MAX_VALUE) {
                         expires=0;
                     }
                     //long max was used to represent a non-expiring cookie, but that caused problems
                     Cookie cookie = new Cookie(st[_name], st[_value], st[_domain], st[_path], secure, expires);
                     cookies.addItem(cookie);
                 } catch (NumberFormatException e) {
                     throw new IOException("Error parsing cookie line\n\t'" + line + "'\n\t" + e);
                 }
             }
         } finally {
             reader.close();
          }
     }
 
     private String cookieToString(Cookie c){
         StringBuilder sb=new StringBuilder(80);
         sb.append(c.getDomain());
         //flag - if all machines within a given domain can access the variable.
         //(from http://www.cookiecentral.com/faq/ 3.5)
         sb.append(TAB).append("TRUE");
         sb.append(TAB).append(c.getPath());
         sb.append(TAB).append(JOrphanUtils.booleanToSTRING(c.getSecure()));
         sb.append(TAB).append(c.getExpires());
         sb.append(TAB).append(c.getName());
         sb.append(TAB).append(c.getValue());
         return sb.toString();
     }
 
     /** {@inheritDoc} */
     @Override
     public void recoverRunningVersion() {
         // do nothing, the cookie manager has to accept changes.
     }
 
     /** {@inheritDoc} */
     @Override
     public void setRunningVersion(boolean running) {
         // do nothing, the cookie manager has to accept changes.
     }
 
     /**
      * Add a cookie.
      *
      * @param c cookie to be added
      */
     public void add(Cookie c) {
         String cv = c.getValue();
         String cn = c.getName();
         removeMatchingCookies(c); // Can't have two matching cookies
 
         if (DELETE_NULL_COOKIES && (null == cv || cv.length()==0)) {
             if (log.isDebugEnabled()) {
                 log.debug("Dropping cookie with null value " + c.toString());
             }
         } else {
             if (log.isDebugEnabled()) {
                 log.debug("Add cookie to store " + c.toString());
             }
             getCookies().addItem(c);
             if (SAVE_COOKIES)  {
                 JMeterContext context = getThreadContext();
                 if (context.isSamplingStarted()) {
                     context.getVariables().put(COOKIE_NAME_PREFIX+cn, cv);
                 }
             }
         }
     }
 
     /** {@inheritDoc} */
     @Override
     public void clear(){
         super.clear();
         clearCookies(); // ensure data is set up OK initially
     }
 
     /*
      * Remove all the cookies.
      */
     private void clearCookies() {
         log.debug("Clear all cookies from store");
         setProperty(new CollectionProperty(COOKIES, new ArrayList<>()));
     }
 
     /**
      * Remove a cookie.
      *
      * @param index index of the cookie to remove
      */
     public void remove(int index) {// TODO not used by GUI
         getCookies().remove(index);
     }
 
     /**
      * Return the cookie at index i.
      *
      * @param i index of the cookie to get
      * @return cookie at index <code>i</code>
      */
     public Cookie get(int i) {// Only used by GUI
         return (Cookie) getCookies().get(i).getObjectValue();
     }
 
     /**
      * Find cookies applicable to the given URL and build the Cookie header from
      * them.
      *
      * @param url
      *            URL of the request to which the returned header will be added.
      * @return the value string for the cookie header (goes after "Cookie: ").
      */
     public String getCookieHeaderForURL(URL url) {
         return cookieHandler.getCookieHeaderForURL(getCookies(), url, ALLOW_VARIABLE_COOKIES);
     }
 
 
     public void addCookieFromHeader(String cookieHeader, URL url){
         cookieHandler.addCookieFromHeader(this, CHECK_COOKIES, cookieHeader, url);
     }
     /**
      * Check if cookies match, i.e. name, path and domain are equal.
      * <br/>
      * TODO - should we compare secure too?
      * @param a
      * @param b
      * @return true if cookies match
      */
     private boolean match(Cookie a, Cookie b){
         return
         a.getName().equals(b.getName())
         &&
         a.getPath().equals(b.getPath())
         &&
         a.getDomain().equals(b.getDomain());
     }
 
     void removeMatchingCookies(Cookie newCookie){
         // Scan for any matching cookies
         PropertyIterator iter = getCookies().iterator();
         while (iter.hasNext()) {
             Cookie cookie = (Cookie) iter.next().getObjectValue();
             if (cookie == null) {// TODO is this possible?
                 continue;
             }
             if (match(cookie,newCookie)) {
                 if (log.isDebugEnabled()) {
                     log.debug("New Cookie = " + newCookie.toString()
                               + " removing matching Cookie " + cookie.toString());
                 }
                 iter.remove();
             }
         }
     }
 
     /** {@inheritDoc} */
     @Override
     public void testStarted() {
         initialCookies = getCookies();
         try {
             cookieHandler = (CookieHandler) ClassTools.construct(getImplementation(), getPolicy());
         } catch (JMeterException e) {
             log.error("Unable to load or invoke class: " + getImplementation(), e);
         }
         if (log.isDebugEnabled()){
             log.debug("Policy: "+getPolicy()+" Clear: "+getClearEachIteration());
         }
     }
 
     /** {@inheritDoc} */
     @Override
     public void testEnded() {
     }
 
     /** {@inheritDoc} */
     @Override
     public void testStarted(String host) {
         testStarted();
     }
 
     /** {@inheritDoc} */
     @Override
     public void testEnded(String host) {
     }
 
     /** {@inheritDoc} */
     @Override
     public void testIterationStart(LoopIterationEvent event) {
         if (getClearEachIteration()) {
             log.debug("Initialise cookies from pre-defined list");
             // No need to call clear
             setProperty(initialCookies.clone());
         }
     }
 
     /**
      * Package protected for tests
      * @return the cookieHandler
      */
     CookieHandler getCookieHandler() {
         return cookieHandler;
     }
 }
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/control/HC3CookieHandler.java b/src/protocol/http/org/apache/jmeter/protocol/http/control/HC3CookieHandler.java
deleted file mode 100644
index 86da53beb..000000000
--- a/src/protocol/http/org/apache/jmeter/protocol/http/control/HC3CookieHandler.java
+++ /dev/null
@@ -1,227 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *   http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- *
- */
-
-package org.apache.jmeter.protocol.http.control;
-
-import java.net.URL;
-import java.util.Date;
-
-import org.apache.commons.httpclient.cookie.CookiePolicy;
-import org.apache.commons.httpclient.cookie.CookieSpec;
-import org.apache.commons.httpclient.cookie.MalformedCookieException;
-import org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase;
-import org.apache.jmeter.testelement.property.CollectionProperty;
-import org.apache.jmeter.testelement.property.JMeterProperty;
-import org.slf4j.LoggerFactory;
-import org.slf4j.Logger;
-
-/**
- * HTTPClient 3.1 implementation
- * @deprecated since 3.0, will be removed in next version
- */
-@Deprecated
-public class HC3CookieHandler implements CookieHandler {
-   private static final Logger log = LoggerFactory.getLogger(HC3CookieHandler.class);
-
-   static final String DEFAULT_POLICY_NAME = "compatibility";
-   private static final String[] AVAILABLE_POLICIES = new String[] { 
-       DEFAULT_POLICY_NAME,
-       "default",
-       "rfc2109",
-       "rfc2965",
-       "ignorecookies",
-       "netscape"
-   };
-
-    private final transient CookieSpec cookieSpec;
-
-    /**
-     * Default constructor that uses {@link HC3CookieHandler#DEFAULT_POLICY_NAME}
-     */
-    public HC3CookieHandler() {
-        this(DEFAULT_POLICY_NAME);
-    }
-    
-    /**
-     * @param policy
-     *            cookie policy to which to conform (see
-     *            {@link CookiePolicy#getCookieSpec(String)}
-     */
-    public HC3CookieHandler(String policy) {
-        super();
-        this.cookieSpec = CookiePolicy.getCookieSpec(policy);
-    }
-
-    /**
-     * Create an HttpClient cookie from a JMeter cookie
-     */
-    private org.apache.commons.httpclient.Cookie makeCookie(Cookie jmc){
-        long exp = jmc.getExpiresMillis();
-        org.apache.commons.httpclient.Cookie ret=
-            new org.apache.commons.httpclient.Cookie(
-                jmc.getDomain(),
-                jmc.getName(),
-                jmc.getValue(),
-                jmc.getPath(),
-                exp > 0 ? new Date(exp) : null, // use null for no expiry
-                jmc.getSecure()
-               );
-        ret.setPathAttributeSpecified(jmc.isPathSpecified());
-        ret.setDomainAttributeSpecified(jmc.isDomainSpecified());
-        ret.setVersion(jmc.getVersion());
-        return ret;
-    }
-    /**
-     * Get array of valid HttpClient cookies for the URL
-     *
-     * @param cookiesCP cookies to consider
-     * @param url the target URL
-     * @param allowVariableCookie flag whether to allow jmeter variables in cookie values
-     * @return array of HttpClient cookies
-     *
-     */
-    org.apache.commons.httpclient.Cookie[] getCookiesForUrl(
-            CollectionProperty cookiesCP,
-            URL url, 
-            boolean allowVariableCookie){
-        org.apache.commons.httpclient.Cookie[] cookies =
-            new org.apache.commons.httpclient.Cookie[cookiesCP.size()];
-        int i = 0;
-        for (JMeterProperty jMeterProperty : cookiesCP) {
-            Cookie jmcookie = (Cookie) jMeterProperty.getObjectValue();
-            // Set to running version, to allow function evaluation for the cookie values (bug 28715)
-            if (allowVariableCookie) {
-                jmcookie.setRunningVersion(true);
-            }
-            cookies[i++] = makeCookie(jmcookie);
-            if (allowVariableCookie) {
-                jmcookie.setRunningVersion(false);
-            }
-        }
-        String host = url.getHost();
-        String protocol = url.getProtocol();
-        int port= HTTPSamplerBase.getDefaultPort(protocol,url.getPort());
-        String path = url.getPath();
-        boolean secure = HTTPSamplerBase.isSecure(protocol);
-        return cookieSpec.match(host, port, path, secure, cookies);
-    }
-    
-    /**
-     * Find cookies applicable to the given URL and build the Cookie header from
-     * them.
-     *
-     * @param url
-     *            URL of the request to which the returned header will be added.
-     * @return the value string for the cookie header (goes after "Cookie: ").
-     */
-    @Override
-    public String getCookieHeaderForURL(
-            CollectionProperty cookiesCP,
-            URL url,
-            boolean allowVariableCookie) {
-        org.apache.commons.httpclient.Cookie[] c = 
-                getCookiesForUrl(cookiesCP, url, allowVariableCookie);
-        int count = c.length;
-        boolean debugEnabled = log.isDebugEnabled();
-        if (debugEnabled){
-            log.debug("Found "+count+" cookies for "+url.toExternalForm());
-        }
-        if (count <=0){
-            return null;
-        }
-        String hdr=cookieSpec.formatCookieHeader(c).getValue();
-        if (debugEnabled){
-            log.debug("Cookie: "+hdr);
-        }
-        return hdr;
-    }
-    
-    /**
-     * {@inheritDoc}
-     */
-    @Override
-    public void addCookieFromHeader(CookieManager cookieManager,
-            boolean checkCookies,String cookieHeader, URL url){
-        boolean debugEnabled = log.isDebugEnabled();
-        if (debugEnabled) {
-            log.debug("Received Cookie: " + cookieHeader + " From: " + url.toExternalForm());
-        }
-        String protocol = url.getProtocol();
-        String host = url.getHost();
-        int port= HTTPSamplerBase.getDefaultPort(protocol,url.getPort());
-        String path = url.getPath();
-        boolean isSecure=HTTPSamplerBase.isSecure(protocol);
-        org.apache.commons.httpclient.Cookie[] cookies= null;
-        try {
-            cookies = cookieSpec.parse(host, port, path, isSecure, cookieHeader);
-        } catch (MalformedCookieException | IllegalArgumentException e) {
-            log.warn(cookieHeader+e.getLocalizedMessage());
-        }
-        if (cookies == null) {
-            return;
-        }
-        for(org.apache.commons.httpclient.Cookie cookie : cookies){
-            try {
-                if (checkCookies) {
-                    cookieSpec.validate(host, port, path, isSecure, cookie);
-                }
-                Date expiryDate = cookie.getExpiryDate();
-                long exp = 0;
-                if (expiryDate!= null) {
-                    exp=expiryDate.getTime();
-                }
-                Cookie newCookie = new Cookie(
-                        cookie.getName(),
-                        cookie.getValue(),
-                        cookie.getDomain(),
-                        cookie.getPath(),
-                        cookie.getSecure(),
-                        exp / 1000,
-                        cookie.isPathAttributeSpecified(),
-                        cookie.isDomainAttributeSpecified()
-                        );
-
-                // Store session cookies as well as unexpired ones
-                if (exp == 0 || exp >= System.currentTimeMillis()) {
-                    newCookie.setVersion(cookie.getVersion());
-                    cookieManager.add(newCookie); // Has its own debug log; removes matching cookies
-                } else {
-                    cookieManager.removeMatchingCookies(newCookie);
-                    if (debugEnabled){
-                        log.debug("Dropping expired Cookie: "+newCookie.toString());
-                    }
-                }
-            } catch (MalformedCookieException e) { // This means the cookie was wrong for the URL
-                log.warn("Not storing invalid cookie: <"+cookieHeader+"> for URL "+url+" ("+e.getLocalizedMessage()+")");
-            } catch (IllegalArgumentException e) {
-                log.warn(cookieHeader+e.getLocalizedMessage());
-            }
-        }
-
-    }
-
-    @Override
-    public String getDefaultPolicy() {
-        return DEFAULT_POLICY_NAME; 
-    }
-
-    @Override
-    public String[] getPolicies() {
-        return AVAILABLE_POLICIES;
-    }
-}
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/control/HC4CookieHandler.java b/src/protocol/http/org/apache/jmeter/protocol/http/control/HC4CookieHandler.java
index 072e64eab..5ef4abebb 100644
--- a/src/protocol/http/org/apache/jmeter/protocol/http/control/HC4CookieHandler.java
+++ b/src/protocol/http/org/apache/jmeter/protocol/http/control/HC4CookieHandler.java
@@ -1,265 +1,265 @@
 /* 
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  * 
  *   http://www.apache.org/licenses/LICENSE-2.0
  * 
  * Unless required by applicable law or agreed to in writing, software
  * distributed  under the  License is distributed on an "AS IS" BASIS,
  * WITHOUT  WARRANTIES OR CONDITIONS  OF ANY KIND, either  express  or
  * implied.
  * 
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
 
 package org.apache.jmeter.protocol.http.control;
 
 import java.net.URL;
 import java.util.ArrayList;
 import java.util.Date;
 import java.util.List;
 
 import org.apache.http.Header;
 import org.apache.http.client.config.CookieSpecs;
 import org.apache.http.client.protocol.HttpClientContext;
 import org.apache.http.config.Registry;
 import org.apache.http.config.RegistryBuilder;
 import org.apache.http.conn.util.PublicSuffixMatcher;
 import org.apache.http.conn.util.PublicSuffixMatcherLoader;
 import org.apache.http.cookie.ClientCookie;
 import org.apache.http.cookie.CookieOrigin;
 import org.apache.http.cookie.CookieSpec;
 import org.apache.http.cookie.CookieSpecProvider;
 import org.apache.http.cookie.MalformedCookieException;
 import org.apache.http.impl.cookie.BasicClientCookie;
 import org.apache.http.impl.cookie.DefaultCookieSpecProvider;
 import org.apache.http.impl.cookie.IgnoreSpecProvider;
 import org.apache.http.impl.cookie.NetscapeDraftSpecProvider;
 import org.apache.http.impl.cookie.RFC2109SpecProvider;
 import org.apache.http.impl.cookie.RFC2965SpecProvider;
 import org.apache.http.impl.cookie.RFC6265CookieSpecProvider;
 import org.apache.http.message.BasicHeader;
 import org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase;
 import org.apache.jmeter.protocol.http.util.HTTPConstants;
 import org.apache.jmeter.testelement.property.CollectionProperty;
 import org.apache.jmeter.testelement.property.JMeterProperty;
-import org.slf4j.LoggerFactory;
 import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 public class HC4CookieHandler implements CookieHandler {
     private static final Logger log = LoggerFactory.getLogger(HC4CookieHandler.class);
 
     // Needed by CookiePanel
     public static final String DEFAULT_POLICY_NAME = CookieSpecs.STANDARD; // NOSONAR 
 
     private static final String[] AVAILABLE_POLICIES = new String[]{ 
         DEFAULT_POLICY_NAME,
         CookieSpecs.STANDARD_STRICT,
         CookieSpecs.IGNORE_COOKIES,
         CookieSpecs.NETSCAPE,
         CookieSpecs.DEFAULT,
         "rfc2109",
         "rfc2965",
         CookieSpecs.BEST_MATCH,
         CookieSpecs.BROWSER_COMPATIBILITY
     };
 
     private final transient CookieSpec cookieSpec;
     
     private static PublicSuffixMatcher publicSuffixMatcher = PublicSuffixMatcherLoader.getDefault();
     private static Registry<CookieSpecProvider> registry  = 
             RegistryBuilder.<CookieSpecProvider>create()
             // case is ignored bug registry as it converts to lowerCase(Locale.US)
             .register(CookieSpecs.BEST_MATCH, new DefaultCookieSpecProvider(publicSuffixMatcher))
             .register(CookieSpecs.BROWSER_COMPATIBILITY, new DefaultCookieSpecProvider(publicSuffixMatcher))
             .register(CookieSpecs.STANDARD, new RFC6265CookieSpecProvider())
             .register("rfc2109", new RFC2109SpecProvider(publicSuffixMatcher, true)) //$NON-NLS-1$
             .register("rfc2965", new RFC2965SpecProvider(publicSuffixMatcher, true)) //$NON-NLS-1$
             .register(CookieSpecs.STANDARD_STRICT, new RFC6265CookieSpecProvider(
                     org.apache.http.impl.cookie.RFC6265CookieSpecProvider.CompatibilityLevel.STRICT, null))
             .register(CookieSpecs.DEFAULT, new DefaultCookieSpecProvider(publicSuffixMatcher))
             .register(CookieSpecs.IGNORE_COOKIES, new IgnoreSpecProvider())
             .register(CookieSpecs.NETSCAPE, new NetscapeDraftSpecProvider())
             .build();
 
     /**
      * Default constructor that uses {@link HC4CookieHandler#DEFAULT_POLICY_NAME}
      */
     public HC4CookieHandler() {
         this(DEFAULT_POLICY_NAME);
     }
     
     public HC4CookieHandler(String policy) {
         super();
-        if (policy.equals(org.apache.commons.httpclient.cookie.CookiePolicy.DEFAULT)) { // tweak diff HC3 vs HC4
+        if (policy.equalsIgnoreCase("default")) { // tweak diff HC3 vs HC4
             policy = CookieSpecs.DEFAULT;
         }
         HttpClientContext context = HttpClientContext.create();
         this.cookieSpec = registry.lookup(policy).create(context);
     }
 
     @Override
     public void addCookieFromHeader(CookieManager cookieManager,
             boolean checkCookies, String cookieHeader, URL url) {
             boolean debugEnabled = log.isDebugEnabled();
             if (debugEnabled) {
                 log.debug("Received Cookie: " + cookieHeader + " From: " + url.toExternalForm());
             }
             String protocol = url.getProtocol();
             String host = url.getHost();
             int port= HTTPSamplerBase.getDefaultPort(protocol,url.getPort());
             String path = url.getPath();
             boolean isSecure=HTTPSamplerBase.isSecure(protocol);
 
             List<org.apache.http.cookie.Cookie> cookies = null;
             
             CookieOrigin cookieOrigin = new CookieOrigin(host, port, path, isSecure);
             BasicHeader basicHeader = new BasicHeader(HTTPConstants.HEADER_SET_COOKIE, cookieHeader);
 
             try {
                 cookies = cookieSpec.parse(basicHeader, cookieOrigin);
             } catch (MalformedCookieException e) {
                 log.error("Unable to add the cookie", e);
             }
             if (cookies == null) {
                 return;
             }
             for (org.apache.http.cookie.Cookie cookie : cookies) {
                 try {
                     if (checkCookies) {
                         cookieSpec.validate(cookie, cookieOrigin);
                     }
                     Date expiryDate = cookie.getExpiryDate();
                     long exp = 0;
                     if (expiryDate!= null) {
                         exp=expiryDate.getTime();
                     }
                     Cookie newCookie = new Cookie(
                             cookie.getName(),
                             cookie.getValue(),
                             cookie.getDomain(),
                             cookie.getPath(),
                             cookie.isSecure(),
                             exp / 1000,
                             ((BasicClientCookie)cookie).containsAttribute(ClientCookie.PATH_ATTR),
                             ((BasicClientCookie)cookie).containsAttribute(ClientCookie.DOMAIN_ATTR),
                             cookie.getVersion());
 
                     // Store session cookies as well as unexpired ones
                     if (exp == 0 || exp >= System.currentTimeMillis()) {
                         cookieManager.add(newCookie); // Has its own debug log; removes matching cookies
                     } else {
                         cookieManager.removeMatchingCookies(newCookie);
                         if (debugEnabled){
                             log.info("Dropping expired Cookie: "+newCookie.toString());
                         }
                     }
                 } catch (MalformedCookieException e) { // This means the cookie was wrong for the URL
                     log.warn("Not storing invalid cookie: <"+cookieHeader+"> for URL "+url+" ("+e.getLocalizedMessage()+")");
                 } catch (IllegalArgumentException e) {
                     log.warn(cookieHeader+e.getLocalizedMessage());
                 }
             }
     }
 
     @Override
     public String getCookieHeaderForURL(CollectionProperty cookiesCP, URL url,
             boolean allowVariableCookie) {
         List<org.apache.http.cookie.Cookie> c = 
                 getCookiesForUrl(cookiesCP, url, allowVariableCookie);
         
         boolean debugEnabled = log.isDebugEnabled();
         if (debugEnabled){
             log.debug("Found "+c.size()+" cookies for "+url.toExternalForm());
         }
         if (c.isEmpty()) {
             return null;
         }
         List<Header> lstHdr = cookieSpec.formatCookies(c);
         
         StringBuilder sbHdr = new StringBuilder();
         for (Header header : lstHdr) {
             sbHdr.append(header.getValue());
         }
 
         return sbHdr.toString();
     }
 
     /**
      * Get array of valid HttpClient cookies for the URL
      *
      * @param cookiesCP property with all available cookies
      * @param url the target URL
      * @param allowVariableCookie flag whether cookies may contain jmeter variables
      * @return array of HttpClient cookies
      *
      */
     List<org.apache.http.cookie.Cookie> getCookiesForUrl(
             CollectionProperty cookiesCP, URL url, boolean allowVariableCookie) {
         List<org.apache.http.cookie.Cookie> cookies = new ArrayList<>();
 
         for (JMeterProperty jMeterProperty : cookiesCP) {
             Cookie jmcookie = (Cookie) jMeterProperty.getObjectValue();
             // Set to running version, to allow function evaluation for the cookie values (bug 28715)
             if (allowVariableCookie) {
                 jmcookie.setRunningVersion(true);
             }
             cookies.add(makeCookie(jmcookie));
             if (allowVariableCookie) {
                 jmcookie.setRunningVersion(false);
             }
         }
         String host = url.getHost();
         String protocol = url.getProtocol();
         int port = HTTPSamplerBase.getDefaultPort(protocol, url.getPort());
         String path = url.getPath();
         boolean secure = HTTPSamplerBase.isSecure(protocol);
 
         CookieOrigin cookieOrigin = new CookieOrigin(host, port, path, secure);
 
         List<org.apache.http.cookie.Cookie> cookiesValid = new ArrayList<>();
         for (org.apache.http.cookie.Cookie cookie : cookies) {
             if (cookieSpec.match(cookie, cookieOrigin)) {
                 cookiesValid.add(cookie);
             }
         }
 
         return cookiesValid;
     }
     
     /**
      * Create an HttpClient cookie from a JMeter cookie
      */
     private org.apache.http.cookie.Cookie makeCookie(Cookie jmc) {
         long exp = jmc.getExpiresMillis();
         BasicClientCookie ret = new BasicClientCookie(jmc.getName(),
                 jmc.getValue());
         ret.setDomain(jmc.getDomain());
         ret.setPath(jmc.getPath());
         ret.setExpiryDate(exp > 0 ? new Date(exp) : null); // use null for no expiry
         ret.setSecure(jmc.getSecure());
         ret.setVersion(jmc.getVersion());
         if(jmc.isDomainSpecified()) {
             ret.setAttribute(ClientCookie.DOMAIN_ATTR, jmc.getDomain());
         }
         if(jmc.isPathSpecified()) {
             ret.setAttribute(ClientCookie.PATH_ATTR, jmc.getPath());
         }
         return ret;
     }
     
     @Override
     public String getDefaultPolicy() {
         return DEFAULT_POLICY_NAME; 
     }
 
     @Override
     public String[] getPolicies() {
         return AVAILABLE_POLICIES;
     }
 }
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/SoapSamplerGui.java b/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/SoapSamplerGui.java
deleted file mode 100644
index 17e82d321..000000000
--- a/src/protocol/http/org/apache/jmeter/protocol/http/control/gui/SoapSamplerGui.java
+++ /dev/null
@@ -1,170 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *   http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- *
- */
-
-package org.apache.jmeter.protocol.http.control.gui;
-
-import java.awt.BorderLayout;
-import java.awt.Dimension;
-import java.awt.GridBagLayout;
-import java.awt.GridBagConstraints;
-
-import javax.swing.JCheckBox;
-import javax.swing.JPanel;
-
-import org.apache.jmeter.protocol.http.sampler.SoapSampler;
-import org.apache.jmeter.samplers.gui.AbstractSamplerGui;
-import org.apache.jmeter.testelement.TestElement;
-import org.apache.jmeter.util.JMeterUtils;
-import org.apache.jmeter.gui.util.FilePanel;
-import org.apache.jorphan.gui.JLabeledTextArea;
-import org.apache.jorphan.gui.JLabeledTextField;
-
-public class SoapSamplerGui extends AbstractSamplerGui {
-    private static final long serialVersionUID = 240L;
-
-    private JLabeledTextField urlField;
-    private JLabeledTextField soapAction;
-    private JCheckBox sendSoapAction;
-    private JCheckBox useKeepAlive;
-    private JLabeledTextArea soapXml;
-
-    private FilePanel soapXmlFile = new FilePanel();
-
-    public SoapSamplerGui() {
-        init();
-    }
-
-    @Override
-    public String getLabelResource() {
-        return "soap_sampler_title"; //$NON-NLS-1$
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    @Override
-    public TestElement createTestElement() {
-        SoapSampler sampler = new SoapSampler();
-        modifyTestElement(sampler);
-        return sampler;
-    }
-
-    /**
-     * Modifies a given TestElement to mirror the data in the gui components.
-     *
-     * @see org.apache.jmeter.gui.JMeterGUIComponent#modifyTestElement(TestElement)
-     */
-    @Override
-    public void modifyTestElement(TestElement s) {
-        super.configureTestElement(s);
-        if (s instanceof SoapSampler) {
-            SoapSampler sampler = (SoapSampler) s;
-            sampler.setURLData(urlField.getText());
-            sampler.setXmlData(soapXml.getText());
-            sampler.setXmlFile(soapXmlFile.getFilename());
-            sampler.setSOAPAction(soapAction.getText());
-            sampler.setSendSOAPAction(sendSoapAction.isSelected());
-            sampler.setUseKeepAlive(useKeepAlive.isSelected());
-        }
-    }
-
-    /**
-     * Implements JMeterGUIComponent.clearGui
-     */
-    @Override
-    public void clearGui() {
-        super.clearGui();
-
-        urlField.setText(""); //$NON-NLS-1$
-        soapAction.setText(""); //$NON-NLS-1$
-        soapXml.setText(""); //$NON-NLS-1$
-        sendSoapAction.setSelected(true);
-        soapXmlFile.setFilename(""); //$NON-NLS-1$
-        useKeepAlive.setSelected(false);
-    }
-
-    private void init() { // WARNING: called from ctor so must not be overridden (i.e. must be private or final)
-        setLayout(new BorderLayout());
-        setBorder(makeBorder());
-
-        add(makeTitlePanel(), BorderLayout.NORTH);
-
-        urlField = new JLabeledTextField(JMeterUtils.getResString("url"), 10); //$NON-NLS-1$
-        soapXml = new JLabeledTextArea(JMeterUtils.getResString("soap_data_title")); //$NON-NLS-1$
-        soapAction = new JLabeledTextField("", 10); //$NON-NLS-1$
-        sendSoapAction = new JCheckBox(JMeterUtils.getResString("soap_send_action"), true); //$NON-NLS-1$
-        useKeepAlive = new JCheckBox(JMeterUtils.getResString("use_keepalive")); // $NON-NLS-1$
-
-        JPanel mainPanel = new JPanel(new BorderLayout());
-        JPanel soapActionPanel = new JPanel();
-        soapActionPanel.setLayout(new GridBagLayout());
-        GridBagConstraints c = new GridBagConstraints();
-        c.fill = GridBagConstraints.HORIZONTAL;
-        c.gridwidth = 2;
-        c.gridx = 0;
-        c.gridy = 0;
-        c.weightx = 1;
-        soapActionPanel.add(urlField, c);
-        c.fill = GridBagConstraints.NONE;
-        c.gridwidth = 1;
-        c.gridy = 1;
-        c.weightx = 0;
-        soapActionPanel.add(sendSoapAction, c);
-        c.gridx = 1;
-        c.fill = GridBagConstraints.HORIZONTAL;
-        c.weightx = 1;
-        soapActionPanel.add(soapAction, c);
-
-        c.fill = GridBagConstraints.HORIZONTAL;
-        c.gridwidth = 2;
-        c.gridy = 2;
-        c.gridx = 0;
-        soapActionPanel.add(useKeepAlive, c);
-
-        mainPanel.add(soapActionPanel, BorderLayout.NORTH);
-        mainPanel.add(soapXml, BorderLayout.CENTER);
-        mainPanel.add(soapXmlFile, BorderLayout.SOUTH);
-
-        sendSoapAction.addActionListener(e -> soapAction.setEnabled(sendSoapAction.isSelected()));
-
-        add(mainPanel, BorderLayout.CENTER);
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    @Override
-    public void configure(TestElement el) {
-        super.configure(el);
-        SoapSampler sampler = (SoapSampler) el;
-        urlField.setText(sampler.getURLData());
-        sendSoapAction.setSelected(sampler.getSendSOAPAction());
-        soapAction.setText(sampler.getSOAPAction());
-        soapXml.setText(sampler.getXmlData());
-        soapXmlFile.setFilename(sampler.getXmlFile());
-        useKeepAlive.setSelected(sampler.getUseKeepAlive());
-    }
-
-    /**
-     * {@inheritDoc}
-     */
-    @Override
-    public Dimension getPreferredSize() {
-        return getMinimumSize();
-    }
-}
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC3Impl.java b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC3Impl.java
deleted file mode 100644
index b75faaa0f..000000000
--- a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC3Impl.java
+++ /dev/null
@@ -1,1137 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *   http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.jmeter.protocol.http.sampler;
-
-import java.io.ByteArrayOutputStream;
-import java.io.File;
-import java.io.FileNotFoundException;
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.OutputStream;
-import java.net.InetAddress;
-import java.net.URL;
-import java.net.URLDecoder;
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
-import java.util.zip.GZIPInputStream;
-
-import org.apache.commons.httpclient.DefaultHttpMethodRetryHandler;
-import org.apache.commons.httpclient.Header;
-import org.apache.commons.httpclient.HostConfiguration;
-import org.apache.commons.httpclient.HttpClient;
-import org.apache.commons.httpclient.HttpConnectionManager;
-import org.apache.commons.httpclient.HttpMethod;
-import org.apache.commons.httpclient.HttpMethodBase;
-import org.apache.commons.httpclient.HttpState;
-import org.apache.commons.httpclient.HttpVersion;
-import org.apache.commons.httpclient.NTCredentials;
-import org.apache.commons.httpclient.ProtocolException;
-import org.apache.commons.httpclient.SimpleHttpConnectionManager;
-import org.apache.commons.httpclient.auth.AuthScope;
-import org.apache.commons.httpclient.cookie.CookiePolicy;
-import org.apache.commons.httpclient.methods.EntityEnclosingMethod;
-import org.apache.commons.httpclient.methods.FileRequestEntity;
-import org.apache.commons.httpclient.methods.GetMethod;
-import org.apache.commons.httpclient.methods.HeadMethod;
-import org.apache.commons.httpclient.methods.OptionsMethod;
-import org.apache.commons.httpclient.methods.PostMethod;
-import org.apache.commons.httpclient.methods.PutMethod;
-import org.apache.commons.httpclient.methods.StringRequestEntity;
-import org.apache.commons.httpclient.methods.TraceMethod;
-import org.apache.commons.httpclient.methods.multipart.FilePart;
-import org.apache.commons.httpclient.methods.multipart.MultipartRequestEntity;
-import org.apache.commons.httpclient.methods.multipart.Part;
-import org.apache.commons.httpclient.methods.multipart.PartBase;
-import org.apache.commons.httpclient.methods.multipart.StringPart;
-import org.apache.commons.httpclient.params.DefaultHttpParams;
-import org.apache.commons.httpclient.params.HttpClientParams;
-import org.apache.commons.httpclient.params.HttpMethodParams;
-import org.apache.commons.httpclient.params.HttpParams;
-import org.apache.commons.httpclient.protocol.Protocol;
-import org.apache.commons.io.input.CountingInputStream;
-import org.apache.jmeter.protocol.http.control.AuthManager;
-import org.apache.jmeter.protocol.http.control.Authorization;
-import org.apache.jmeter.protocol.http.control.CacheManager;
-import org.apache.jmeter.protocol.http.control.CookieManager;
-import org.apache.jmeter.protocol.http.control.HeaderManager;
-import org.apache.jmeter.protocol.http.util.EncoderCache;
-import org.apache.jmeter.protocol.http.util.HTTPArgument;
-import org.apache.jmeter.protocol.http.util.HTTPConstants;
-import org.apache.jmeter.protocol.http.util.HTTPFileArg;
-import org.apache.jmeter.protocol.http.util.LoopbackHttpClientSocketFactory;
-import org.apache.jmeter.protocol.http.util.SlowHttpClientSocketFactory;
-import org.apache.jmeter.services.FileServer;
-import org.apache.jmeter.testelement.property.CollectionProperty;
-import org.apache.jmeter.testelement.property.JMeterProperty;
-import org.apache.jmeter.util.JMeterUtils;
-import org.apache.jmeter.util.JsseSSLManager;
-import org.apache.jmeter.util.SSLManager;
-import org.apache.jorphan.util.JOrphanUtils;
-import org.slf4j.Logger;
-import org.slf4j.LoggerFactory;
-
-/**
- * HTTP sampler using Apache (Jakarta) Commons HttpClient 3.1.
- * @deprecated since 3.0, will be removed in next version
- */
-@Deprecated
-public class HTTPHC3Impl extends HTTPHCAbstractImpl {
-
-    private static final Logger log = LoggerFactory.getLogger(HTTPHC3Impl.class);
-
-    /** retry count to be used (default 1); 0 = disable retries */
-    private static final int RETRY_COUNT = JMeterUtils.getPropDefault("httpclient3.retrycount", 0);
-
-    private static final String HTTP_AUTHENTICATION_PREEMPTIVE = "http.authentication.preemptive"; // $NON-NLS-1$
-
-    private static final boolean CAN_SET_PREEMPTIVE; // OK to set pre-emptive auth?
-
-    private static final ThreadLocal<Map<HostConfiguration, HttpClient>> httpClients =
-            ThreadLocal.withInitial(HashMap::new);
-
-    // Needs to be accessible by HTTPSampler2
-    volatile HttpClient savedClient;
-
-    private volatile boolean resetSSLContext;
-
-    static {
-        log.info("HTTP request retry count = "+RETRY_COUNT);
-        if (CPS_HTTP > 0) {
-            log.info("Setting up HTTP SlowProtocol, cps="+CPS_HTTP);
-            Protocol.registerProtocol(HTTPConstants.PROTOCOL_HTTP,
-                    new Protocol(HTTPConstants.PROTOCOL_HTTP,new SlowHttpClientSocketFactory(CPS_HTTP),HTTPConstants.DEFAULT_HTTP_PORT));
-        }
-
-        // Now done in JsseSSLManager (which needs to register the protocol)
-//        cps =
-//            JMeterUtils.getPropDefault("httpclient.socket.https.cps", 0); // $NON-NLS-1$
-//
-//        if (cps > 0) {
-//            log.info("Setting up HTTPS SlowProtocol, cps="+cps);
-//            Protocol.registerProtocol(PROTOCOL_HTTPS,
-//                    new Protocol(PROTOCOL_HTTPS,new SlowHttpClientSocketFactory(cps),DEFAULT_HTTPS_PORT));
-//        }
-
-        // Set default parameters as needed
-        HttpParams params = DefaultHttpParams.getDefaultParams();
-        params.setIntParameter("http.protocol.max-redirects", HTTPSamplerBase.MAX_REDIRECTS); //$NON-NLS-1$
-        // Process Commons HttpClient parameters file
-        String file=JMeterUtils.getProperty("httpclient.parameters.file"); // $NON-NLS-1$
-        if (file != null) {
-            HttpClientDefaultParameters.load(file, params);
-        }
-
-        // If the pre-emptive parameter is undefined, then we can set it as needed
-        // otherwise we should do what the user requested.
-        CAN_SET_PREEMPTIVE =  params.getParameter(HTTP_AUTHENTICATION_PREEMPTIVE) == null;
-
-        // Handle old-style JMeter properties
-        try {
-            params.setParameter(HttpMethodParams.PROTOCOL_VERSION, HttpVersion.parse("HTTP/"+HTTP_VERSION));
-        } catch (ProtocolException e) {
-            log.warn("Problem setting protocol version "+e.getLocalizedMessage());
-        }
-
-        if (SO_TIMEOUT >= 0){
-            params.setIntParameter(HttpMethodParams.SO_TIMEOUT, SO_TIMEOUT);
-        }
-
-        // This must be done last, as must not be overridden
-        params.setParameter(HttpMethodParams.COOKIE_POLICY,CookiePolicy.IGNORE_COOKIES);
-        // We do our own cookie handling
-
-        if (USE_LOOPBACK){
-            LoopbackHttpClientSocketFactory.setup();
-        }
-    }
-
-    protected HTTPHC3Impl(HTTPSamplerBase base) {
-        super(base);
-    }
-
-
-    /**
-     * Samples the URL passed in and stores the result in
-     * <code>HTTPSampleResult</code>, following redirects and downloading
-     * page resources as appropriate.
-     * <p>
-     * When getting a redirect target, redirects are not followed and resources
-     * are not downloaded. The caller will take care of this.
-     *
-     * @param url
-     *            URL to sample
-     * @param method
-     *            HTTP method: GET, POST,...
-     * @param areFollowingRedirect
-     *            whether we're getting a redirect target
-     * @param frameDepth
-     *            Depth of this target in the frame structure. Used only to
-     *            prevent infinite recursion.
-     * @return results of the sampling
-     */
-    @Override
-    protected HTTPSampleResult sample(URL url, String method, boolean areFollowingRedirect, int frameDepth) {
-
-        String urlStr = url.toString();
-
-        if (log.isDebugEnabled()) {
-            log.debug("Start : sample " + urlStr);
-            log.debug("method " + method+ " followingRedirect " + areFollowingRedirect + " depth " + frameDepth);            
-        }
-
-        HttpMethodBase httpMethod = null;
-
-        HTTPSampleResult res = new HTTPSampleResult();
-
-        res.setSampleLabel(urlStr); // May be replaced later
-        res.setHTTPMethod(method);
-        res.setURL(url);
-
-        res.sampleStart(); // Count the retries as well in the time
-        try {
-            // May generate IllegalArgumentException
-            if (method.equals(HTTPConstants.POST)) {
-                httpMethod = new PostMethod(urlStr);
-            } else if (method.equals(HTTPConstants.GET)){
-                httpMethod = new GetMethod(urlStr);
-            } else if (method.equals(HTTPConstants.PUT)){
-                httpMethod = new PutMethod(urlStr);
-            } else if (method.equals(HTTPConstants.HEAD)){
-                httpMethod = new HeadMethod(urlStr);
-            } else if (method.equals(HTTPConstants.TRACE)){
-                httpMethod = new TraceMethod(urlStr);
-            } else if (method.equals(HTTPConstants.OPTIONS)){
-                httpMethod = new OptionsMethod(urlStr);
-            } else if (method.equals(HTTPConstants.DELETE)){
-                httpMethod = new EntityEnclosingMethod(urlStr) {
-                    @Override
-                    public String getName() { // HC3.1 does not have the method
-                        return HTTPConstants.DELETE;
-                    }
-                };
-            } else if (method.equals(HTTPConstants.PATCH)){
-                httpMethod = new EntityEnclosingMethod(urlStr) {
-                    @Override
-                    public String getName() { // HC3.1 does not have the method
-                        return HTTPConstants.PATCH;
-                    }
-                };
-            } else {
-                throw new IllegalArgumentException("Unexpected method: '"+method+"'");
-            }
-
-            final CacheManager cacheManager = getCacheManager();
-            if (cacheManager != null && HTTPConstants.GET.equalsIgnoreCase(method)) {
-               if (cacheManager.inCache(url)) {
-                   return updateSampleResultForResourceInCache(res);
-               }
-            }
-
-            // Set any default request headers
-            setDefaultRequestHeaders(httpMethod);
-
-            // Setup connection
-            HttpClient client = setupConnection(url, httpMethod, res);
-            savedClient = client;
-
-            // Handle the various methods
-            if (method.equals(HTTPConstants.POST)) {
-                String postBody = sendPostData((PostMethod)httpMethod);
-                res.setQueryString(postBody);
-            } else if (method.equals(HTTPConstants.PUT) || method.equals(HTTPConstants.PATCH) 
-                    || method.equals(HTTPConstants.DELETE)) {
-                String putBody = sendEntityData((EntityEnclosingMethod) httpMethod);
-                res.setQueryString(putBody);
-            }
-
-            int statusCode = client.executeMethod(httpMethod);
-
-            // We've finished with the request, so we can add the LocalAddress to it for display
-            final InetAddress localAddr = client.getHostConfiguration().getLocalAddress();
-            if (localAddr != null) {
-                httpMethod.addRequestHeader(HEADER_LOCAL_ADDRESS, localAddr.toString());
-            }
-            // Needs to be done after execute to pick up all the headers
-            res.setRequestHeaders(getConnectionHeaders(httpMethod));
-
-            // Request sent. Now get the response:
-            InputStream instream = httpMethod.getResponseBodyAsStream();
-
-            if (instream != null) {// will be null for HEAD
-                instream = new CountingInputStream(instream);
-                try {
-                    Header responseHeader = httpMethod.getResponseHeader(HTTPConstants.HEADER_CONTENT_ENCODING);
-                    if (responseHeader!= null && HTTPConstants.ENCODING_GZIP.equals(responseHeader.getValue())) {
-                        InputStream tmpInput = new GZIPInputStream(instream); // tmp inputstream needs to have a good counting
-                        res.setResponseData(readResponse(res, tmpInput, httpMethod.getResponseContentLength()));                        
-                    } else {
-                        res.setResponseData(readResponse(res, instream, httpMethod.getResponseContentLength()));
-                    }
-                } finally {
-                    JOrphanUtils.closeQuietly(instream);
-                }
-            }
-
-            res.sampleEnd();
-            // Done with the sampling proper.
-
-            // Now collect the results into the HTTPSampleResult:
-
-            res.setSampleLabel(httpMethod.getURI().toString());
-            // Pick up Actual path (after redirects)
-
-            res.setResponseCode(Integer.toString(statusCode));
-            res.setSuccessful(isSuccessCode(statusCode));
-
-            res.setResponseMessage(httpMethod.getStatusText());
-
-            String ct = null;
-            Header h = httpMethod.getResponseHeader(HTTPConstants.HEADER_CONTENT_TYPE);
-            if (h != null)// Can be missing, e.g. on redirect
-            {
-                ct = h.getValue();
-                res.setContentType(ct);// e.g. text/html; charset=ISO-8859-1
-                res.setEncodingAndType(ct);
-            }
-
-            res.setResponseHeaders(getResponseHeaders(httpMethod));
-            if (res.isRedirect()) {
-                final Header headerLocation = httpMethod.getResponseHeader(HTTPConstants.HEADER_LOCATION);
-                if (headerLocation == null) { // HTTP protocol violation, but avoids NPE
-                    throw new IllegalArgumentException("Missing location header");
-                }
-                String redirectLocation = headerLocation.getValue();
-                res.setRedirectLocation(redirectLocation); // in case sanitising fails
-            }
-
-            // record some sizes to allow HTTPSampleResult.getBytes() with different options
-            if (instream != null) {
-                res.setBodySize(((CountingInputStream) instream).getByteCount());
-            }
-            res.setHeadersSize(calculateHeadersSize(httpMethod));
-            if (log.isDebugEnabled()) {
-                log.debug("Response headersSize=" + res.getHeadersSize() + " bodySize=" + res.getBodySizeAsLong()
-                        + " Total=" + (res.getHeadersSize() + res.getBodySizeAsLong()));
-            }
-            
-            // If we redirected automatically, the URL may have changed
-            if (getAutoRedirects()){
-                res.setURL(new URL(httpMethod.getURI().toString()));
-            }
-
-            // Store any cookies received in the cookie manager:
-            saveConnectionCookies(httpMethod, res.getURL(), getCookieManager());
-
-            // Save cache information
-            if (cacheManager != null){
-                cacheManager.saveDetails(httpMethod, res);
-            }
-
-            // Follow redirects and download page resources if appropriate:
-            res = resultProcessing(areFollowingRedirect, frameDepth, res);
-
-            log.debug("End : sample");
-            return res;
-        } catch (IllegalArgumentException // e.g. some kinds of invalid URL
-                | IOException e) { 
-            res.sampleEnd();
-            // pick up headers if failed to execute the request
-            // httpMethod can be null if method is unexpected
-            if(httpMethod != null) {
-                res.setRequestHeaders(getConnectionHeaders(httpMethod));
-            }
-            errorResult(e, res);
-            return res;
-        } finally {
-            savedClient = null;
-            if (httpMethod != null) {
-                httpMethod.releaseConnection();
-            }
-        }
-    }
-    
-    /**
-     * Calculate response headers size
-     * 
-     * @return the size response headers (in bytes)
-     */
-    private static int calculateHeadersSize(HttpMethodBase httpMethod) {
-        int headerSize = httpMethod.getStatusLine().toString().length()+2; // add a \r\n
-        Header[] rh = httpMethod.getResponseHeaders();
-        for (Header responseHeader : rh) {
-            headerSize += responseHeader.toString().length(); // already include the \r\n
-        }
-        headerSize += 2; // last \r\n before response data
-        return headerSize;
-    }
-
-    /**
-     * Returns an <code>HttpConnection</code> fully ready to attempt
-     * connection. This means it sets the request method (GET or POST), headers,
-     * cookies, and authorization for the URL request.
-     * <p>
-     * The request infos are saved into the sample result if one is provided.
-     *
-     * @param u
-     *            <code>URL</code> of the URL request
-     * @param httpMethod
-     *            GET/PUT/HEAD etc
-     * @param res
-     *            sample result to save request infos to
-     * @return <code>HttpConnection</code> ready for .connect
-     * @exception IOException
-     *                if an I/O Exception occurs
-     */
-    protected HttpClient setupConnection(URL u, HttpMethodBase httpMethod, HTTPSampleResult res) throws IOException {
-
-        String urlStr = u.toString();
-
-        org.apache.commons.httpclient.URI uri = new org.apache.commons.httpclient.URI(urlStr,false);
-
-        String schema = uri.getScheme();
-        if ((schema == null) || (schema.length()==0)) {
-            schema = HTTPConstants.PROTOCOL_HTTP;
-        }
-
-        final boolean isHTTPS = HTTPConstants.PROTOCOL_HTTPS.equalsIgnoreCase(schema);
-        if (isHTTPS){
-            SSLManager.getInstance(); // ensure the manager is initialised
-            // we don't currently need to do anything further, as this sets the default https protocol
-        }
-
-        Protocol protocol = Protocol.getProtocol(schema);
-
-        String host = uri.getHost();
-        int port = uri.getPort();
-
-        /*
-         *  We use the HostConfiguration as the key to retrieve the HttpClient,
-         *  so need to ensure that any items used in its equals/hashcode methods are
-         *  not changed after use, i.e.:
-         *  host, port, protocol, localAddress, proxy
-         *
-        */
-        HostConfiguration hc = new HostConfiguration();
-        hc.setHost(host, port, protocol); // All needed to ensure re-usablility
-
-        // Set up the local address if one exists
-        final InetAddress inetAddr = getIpSourceAddress();
-        if (inetAddr != null) {// Use special field ip source address (for pseudo 'ip spoofing')
-            hc.setLocalAddress(inetAddr);
-        } else {
-            hc.setLocalAddress(localAddress); // null means use the default
-        }
-
-        final String proxyHost = getProxyHost();
-        final int proxyPort = getProxyPortInt();
-
-        boolean useStaticProxy = isStaticProxy(host);
-        boolean useDynamicProxy = isDynamicProxy(proxyHost, proxyPort);
-
-        if (useDynamicProxy){
-            hc.setProxy(proxyHost, proxyPort);
-            useStaticProxy = false; // Dynamic proxy overrules static proxy
-        } else if (useStaticProxy) {
-            if (log.isDebugEnabled()){
-                log.debug("Setting proxy: "+PROXY_HOST+":"+PROXY_PORT);
-            }
-            hc.setProxy(PROXY_HOST, PROXY_PORT);
-        }
-
-        Map<HostConfiguration, HttpClient> map = httpClients.get();
-        // N.B. HostConfiguration.equals() includes proxy settings in the compare.
-        HttpClient httpClient = map.get(hc);
-
-        if (httpClient != null && resetSSLContext && isHTTPS) {
-            httpClient.getHttpConnectionManager().closeIdleConnections(-1000);
-            httpClient = null;
-            JsseSSLManager sslMgr = (JsseSSLManager) SSLManager.getInstance();
-            sslMgr.resetContext();
-            resetSSLContext = false;
-        }
-
-        if ( httpClient == null )
-        {
-            httpClient = new HttpClient(new SimpleHttpConnectionManager());
-            httpClient.getParams().setParameter(HttpMethodParams.RETRY_HANDLER, 
-                    new DefaultHttpMethodRetryHandler(RETRY_COUNT, false));
-            if (log.isDebugEnabled()) {
-                log.debug("Created new HttpClient: @"+System.identityHashCode(httpClient));
-            }
-            httpClient.setHostConfiguration(hc);
-            map.put(hc, httpClient);
-        } else {
-            if (log.isDebugEnabled()) {
-                log.debug("Reusing the HttpClient: @"+System.identityHashCode(httpClient));
-            }
-        }
-
-        // Set up any required Proxy credentials
-        if (useDynamicProxy){
-            String user = getProxyUser();
-            if (user.length() > 0){
-                httpClient.getState().setProxyCredentials(
-                        new AuthScope(proxyHost,proxyPort,null,AuthScope.ANY_SCHEME),
-                        new NTCredentials(user,getProxyPass(),LOCALHOST,PROXY_DOMAIN)
-                    );
-            } else {
-                httpClient.getState().clearProxyCredentials();
-            }
-        } else {
-            if (useStaticProxy) {
-                if (PROXY_USER.length() > 0){
-                    httpClient.getState().setProxyCredentials(
-                        new AuthScope(PROXY_HOST,PROXY_PORT,null,AuthScope.ANY_SCHEME),
-                        new NTCredentials(PROXY_USER,PROXY_PASS,LOCALHOST,PROXY_DOMAIN)
-                    );
-                }
-            } else {
-                httpClient.getState().clearProxyCredentials();
-            }
-        }
-
-        int rto = getResponseTimeout();
-        if (rto > 0){
-            httpMethod.getParams().setSoTimeout(rto);
-        }
-
-        int cto = getConnectTimeout();
-        if (cto > 0){
-            httpClient.getHttpConnectionManager().getParams().setConnectionTimeout(cto);
-        }
-
-
-        // Allow HttpClient to handle the redirects:
-        httpMethod.setFollowRedirects(getAutoRedirects());
-
-        // a well-behaved browser is supposed to send 'Connection: close'
-        // with the last request to an HTTP server. Instead, most browsers
-        // leave it to the server to close the connection after their
-        // timeout period. Leave it to the JMeter user to decide.
-        if (getUseKeepAlive()) {
-            httpMethod.setRequestHeader(HTTPConstants.HEADER_CONNECTION, HTTPConstants.KEEP_ALIVE);
-        } else {
-            httpMethod.setRequestHeader(HTTPConstants.HEADER_CONNECTION, HTTPConstants.CONNECTION_CLOSE);
-        }
-
-        setConnectionHeaders(httpMethod, u, getHeaderManager(), getCacheManager());
-        String cookies = setConnectionCookie(httpMethod, u, getCookieManager());
-
-        setConnectionAuthorization(httpClient, u, getAuthManager());
-
-        if (res != null) {
-            res.setCookies(cookies);
-        }
-
-        return httpClient;
-    }
-
-    /**
-     * Set any default request headers to include
-     *
-     * @param httpMethod the HttpMethod used for the request
-     */
-    protected void setDefaultRequestHeaders(HttpMethod httpMethod) {
-        // Method left empty here, but allows subclasses to override
-    }
-
-    /**
-     * Gets the ResponseHeaders
-     *
-     * @param method the method used to perform the request
-     * @return string containing the headers, one per line
-     */
-    protected String getResponseHeaders(HttpMethod method) {
-        StringBuilder headerBuf = new StringBuilder();
-        org.apache.commons.httpclient.Header[] rh = method.getResponseHeaders();
-        headerBuf.append(method.getStatusLine());// header[0] is not the status line...
-        headerBuf.append("\n"); // $NON-NLS-1$
-
-        for (Header responseHeader : rh) {
-            String key = responseHeader.getName();
-            headerBuf.append(key);
-            headerBuf.append(": "); // $NON-NLS-1$
-            headerBuf.append(responseHeader.getValue());
-            headerBuf.append("\n"); // $NON-NLS-1$
-        }
-        return headerBuf.toString();
-    }
-
-    /**
-     * Extracts all the required cookies for that particular URL request and
-     * sets them in the <code>HttpMethod</code> passed in.
-     *
-     * @param method <code>HttpMethod</code> for the request
-     * @param u <code>URL</code> of the request
-     * @param cookieManager the <code>CookieManager</code> containing all the cookies
-     * @return a String containing the cookie details (for the response)
-     * May be null
-     */
-    private String setConnectionCookie(HttpMethod method, URL u, CookieManager cookieManager) {
-        String cookieHeader = null;
-        if (cookieManager != null) {
-            cookieHeader = cookieManager.getCookieHeaderForURL(u);
-            if (cookieHeader != null) {
-                method.setRequestHeader(HTTPConstants.HEADER_COOKIE, cookieHeader);
-            }
-        }
-        return cookieHeader;
-    }
-
-    /**
-     * Extracts all the required non-cookie headers for that particular URL request and
-     * sets them in the <code>HttpMethod</code> passed in
-     *
-     * @param method
-     *            <code>HttpMethod</code> which represents the request
-     * @param u
-     *            <code>URL</code> of the URL request
-     * @param headerManager
-     *            the <code>HeaderManager</code> containing all the cookies
-     *            for this <code>UrlConfig</code>
-     * @param cacheManager the CacheManager (may be null)
-     */
-    private void setConnectionHeaders(HttpMethod method, URL u, HeaderManager headerManager, CacheManager cacheManager) {
-        // Set all the headers from the HeaderManager
-        if (headerManager != null) {
-            CollectionProperty headers = headerManager.getHeaders();
-            if (headers != null) {
-                for (JMeterProperty jMeterProperty : headers) {
-                    org.apache.jmeter.protocol.http.control.Header header
-                    = (org.apache.jmeter.protocol.http.control.Header)
-                            jMeterProperty.getObjectValue();
-                    String n = header.getName();
-                    // Don't allow override of Content-Length
-                    // This helps with SoapSampler hack too
-                    // TODO - what other headers are not allowed?
-                    if (! HTTPConstants.HEADER_CONTENT_LENGTH.equalsIgnoreCase(n)){
-                        String v = header.getValue();
-                        if (HTTPConstants.HEADER_HOST.equalsIgnoreCase(n)) {
-                            v = v.replaceFirst(":\\d+$",""); // remove any port specification // $NON-NLS-1$ $NON-NLS-2$
-                            method.getParams().setVirtualHost(v);
-                        } else {
-                            method.addRequestHeader(n, v);
-                        }
-                    }
-                }
-            }
-        }
-        if (cacheManager != null){
-            cacheManager.setHeaders(u, method);
-        }
-    }
-
-    /**
-     * Get all the request headers for the <code>HttpMethod</code>
-     *
-     * @param method
-     *            <code>HttpMethod</code> which represents the request
-     * @return the headers as a string
-     */
-    protected String getConnectionHeaders(HttpMethod method) {
-        // Get all the request headers
-        StringBuilder hdrs = new StringBuilder(100);
-        Header[] requestHeaders = method.getRequestHeaders();
-        for (Header requestHeader : requestHeaders) {
-            // Exclude the COOKIE header, since cookie is reported separately in the sample
-            if (!HTTPConstants.HEADER_COOKIE.equalsIgnoreCase(requestHeader.getName())) {
-                hdrs.append(requestHeader.getName());
-                hdrs.append(": "); // $NON-NLS-1$
-                hdrs.append(requestHeader.getValue());
-                hdrs.append("\n"); // $NON-NLS-1$
-            }
-        }
-
-        return hdrs.toString();
-    }
-
-
-    /**
-     * Extracts all the required authorization for that particular URL request
-     * and sets it in the <code>HttpMethod</code> passed in.
-     *
-     * @param client the HttpClient object
-     *
-     * @param u
-     *            <code>URL</code> of the URL request
-     * @param authManager
-     *            the <code>AuthManager</code> containing all the authorisations for
-     *            this <code>UrlConfig</code>
-     */
-    private void setConnectionAuthorization(HttpClient client, URL u, AuthManager authManager) {
-        HttpState state = client.getState();
-        if (authManager != null) {
-            HttpClientParams params = client.getParams();
-            Authorization auth = authManager.getAuthForURL(u);
-            if (auth != null) {
-                    String username = auth.getUser();
-                    String realm = auth.getRealm();
-                    String domain = auth.getDomain();
-                    if (log.isDebugEnabled()){
-                        log.debug(username + " >  D="+ username + " D="+domain+" R="+realm);
-                    }
-                    state.setCredentials(
-                            new AuthScope(u.getHost(),u.getPort(),
-                                    realm.length()==0 ? null : realm //"" is not the same as no realm
-                                    ,AuthScope.ANY_SCHEME),
-                            // NT Includes other types of Credentials
-                            new NTCredentials(
-                                    username,
-                                    auth.getPass(),
-                                    LOCALHOST,
-                                    domain
-                            ));
-                    // We have credentials - should we set pre-emptive authentication?
-                    if (CAN_SET_PREEMPTIVE){
-                        log.debug("Setting Pre-emptive authentication");
-                        params.setAuthenticationPreemptive(true);
-                    }
-            } else {
-                state.clearCredentials();
-                if (CAN_SET_PREEMPTIVE){
-                    params.setAuthenticationPreemptive(false);
-                }
-            }
-        } else {
-            state.clearCredentials();
-        }
-    }
-
-
-    /*
-     * Send POST data from <code>Entry</code> to the open connection.
-     *
-     * @param connection
-     *            <code>URLConnection</code> where POST data should be sent
-     * @return a String show what was posted. Will not contain actual file upload content
-     * @exception IOException
-     *                if an I/O exception occurs
-     */
-    private String sendPostData(PostMethod post) throws IOException {
-        // Buffer to hold the post body, except file content
-        StringBuilder postedBody = new StringBuilder(1000);
-        HTTPFileArg[] files = getHTTPFiles();
-        // Check if we should do a multipart/form-data or an
-        // application/x-www-form-urlencoded post request
-        if(getUseMultipartForPost()) {
-            // If a content encoding is specified, we use that as the
-            // encoding of any parameter values
-            String contentEncoding = getContentEncoding();
-            if(isNullOrEmptyTrimmed(contentEncoding)) {
-                contentEncoding = null;
-            }
-
-            final boolean browserCompatible = getDoBrowserCompatibleMultipart();
-            // We don't know how many entries will be skipped
-            List<PartBase> partlist = new ArrayList<>();
-            // Create the parts
-            // Add any parameters
-            for (JMeterProperty jMeterProperty : getArguments()) {
-                HTTPArgument arg = (HTTPArgument) jMeterProperty.getObjectValue();
-                String parameterName = arg.getName();
-                if (arg.isSkippable(parameterName)) {
-                    continue;
-                }
-                StringPart part = new StringPart(arg.getName(), arg.getValue(), contentEncoding);
-                if (browserCompatible) {
-                    part.setTransferEncoding(null);
-                    part.setContentType(null);
-                }
-                partlist.add(part);
-            }
-
-            // Add any files
-            for (HTTPFileArg file : files) {
-                File inputFile = FileServer.getFileServer().getResolvedFile(file.getPath());
-                // We do not know the char set of the file to be uploaded, so we set it to null
-                ViewableFilePart filePart = new ViewableFilePart(file.getParamName(), inputFile, file.getMimeType(), null);
-                filePart.setCharSet(null); // We do not know what the char set of the file is
-                partlist.add(filePart);
-            }
-
-            // Set the multipart for the post
-            int partNo = partlist.size();
-            Part[] parts = partlist.toArray(new Part[partNo]);
-            MultipartRequestEntity multiPart = new MultipartRequestEntity(parts, post.getParams());
-            post.setRequestEntity(multiPart);
-
-            // Set the content type
-            String multiPartContentType = multiPart.getContentType();
-            post.setRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE, multiPartContentType);
-
-            // If the Multipart is repeatable, we can send it first to
-            // our own stream, without the actual file content, so we can return it
-            if(multiPart.isRepeatable()) {
-                // For all the file multiparts, we must tell it to not include
-                // the actual file content
-                for(int i = 0; i < partNo; i++) {
-                    if(parts[i] instanceof ViewableFilePart) {
-                        ((ViewableFilePart) parts[i]).setHideFileData(true); // .sendMultipartWithoutFileContent(bos);
-                    }
-                }
-                // Write the request to our own stream
-                ByteArrayOutputStream bos = new ByteArrayOutputStream();
-                multiPart.writeRequest(bos);
-                bos.flush();
-                // We get the posted bytes using the encoding used to create it
-                postedBody.append(new String(bos.toByteArray(),
-                        contentEncoding == null ? "US-ASCII" // $NON-NLS-1$ this is the default used by HttpClient
-                        : contentEncoding));
-                bos.close();
-
-                // For all the file multiparts, we must revert the hiding of
-                // the actual file content
-                for(int i = 0; i < partNo; i++) {
-                    if(parts[i] instanceof ViewableFilePart) {
-                        ((ViewableFilePart) parts[i]).setHideFileData(false);
-                    }
-                }
-            }
-            else {
-                postedBody.append("<Multipart was not repeatable, cannot view what was sent>"); // $NON-NLS-1$
-            }
-        }
-        else {
-            // Check if the header manager had a content type header
-            // This allows the user to specify his own content-type for a POST request
-            Header contentTypeHeader = post.getRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE);
-            boolean hasContentTypeHeader = contentTypeHeader != null && contentTypeHeader.getValue() != null && contentTypeHeader.getValue().length() > 0;
-            // If there are no arguments, we can send a file as the body of the request
-            // TODO: needs a multiple file upload scenerio
-            if(!hasArguments() && getSendFileAsPostBody()) {
-                // If getSendFileAsPostBody returned true, it's sure that file is not null
-                HTTPFileArg file = files[0];
-                if(!hasContentTypeHeader) {
-                    // Allow the mimetype of the file to control the content type
-                    if(file.getMimeType() != null && file.getMimeType().length() > 0) {
-                        post.setRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE, file.getMimeType());
-                    }
-                    else {
-                        post.setRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE, HTTPConstants.APPLICATION_X_WWW_FORM_URLENCODED);
-                    }
-                }
-
-                FileRequestEntity fileRequestEntity = new FileRequestEntity(new File(file.getPath()),null);
-                post.setRequestEntity(fileRequestEntity);
-
-                // We just add placeholder text for file content
-                postedBody.append("<actual file content, not shown here>");
-            }
-            else {
-                // In a post request which is not multipart, we only support
-                // parameters, no file upload is allowed
-
-                // If a content encoding is specified, we set it as http parameter, so that
-                // the post body will be encoded in the specified content encoding
-                String contentEncoding = getContentEncoding();
-                boolean haveContentEncoding = false;
-                if(isNullOrEmptyTrimmed(contentEncoding)) {
-                    contentEncoding=null;                    
-                } else {
-                    post.getParams().setContentCharset(contentEncoding);
-                    haveContentEncoding = true;                    
-                }
-
-                // If none of the arguments have a name specified, we
-                // just send all the values as the post body
-                if(getSendParameterValuesAsPostBody()) {
-                    // Allow the mimetype of the file to control the content type
-                    // This is not obvious in GUI if you are not uploading any files,
-                    // but just sending the content of nameless parameters
-                    // TODO: needs a multiple file upload scenerio
-                    if(!hasContentTypeHeader) {
-                        HTTPFileArg file = files.length > 0? files[0] : null;
-                        if(file != null && file.getMimeType() != null && file.getMimeType().length() > 0) {
-                            post.setRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE, file.getMimeType());
-                        }
-                        else {
-                             // TODO - is this the correct default?
-                            post.setRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE, HTTPConstants.APPLICATION_X_WWW_FORM_URLENCODED);
-                        }
-                    }
-
-                    // Just append all the parameter values, and use that as the post body
-                    StringBuilder postBody = new StringBuilder();
-                    for (JMeterProperty jMeterProperty : getArguments()) {
-                        HTTPArgument arg = (HTTPArgument) jMeterProperty.getObjectValue();
-                        String value;
-                        if (haveContentEncoding) {
-                            value = arg.getEncodedValue(contentEncoding);
-                        } else {
-                            value = arg.getEncodedValue();
-                        }
-                        postBody.append(value);
-                    }
-                    StringRequestEntity requestEntity = new StringRequestEntity(postBody.toString(), post.getRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE).getValue(), contentEncoding);
-                    post.setRequestEntity(requestEntity);
-                }
-                else {
-                    // It is a normal post request, with parameter names and values
-
-                    // Set the content type
-                    if(!hasContentTypeHeader) {
-                        post.setRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE, HTTPConstants.APPLICATION_X_WWW_FORM_URLENCODED);
-                    }
-                    // Add the parameters
-                    for (JMeterProperty jMeterProperty : getArguments()) {
-                        HTTPArgument arg = (HTTPArgument) jMeterProperty.getObjectValue();
-                        // The HTTPClient always urlencodes both name and value,
-                        // so if the argument is already encoded, we have to decode
-                        // it before adding it to the post request
-                        String parameterName = arg.getName();
-                        if (arg.isSkippable(parameterName)) {
-                            continue;
-                        }
-                        String parameterValue = arg.getValue();
-                        if (!arg.isAlwaysEncoded()) {
-                            // The value is already encoded by the user
-                            // Must decode the value now, so that when the
-                            // httpclient encodes it, we end up with the same value
-                            // as the user had entered.
-                            String urlContentEncoding = contentEncoding;
-                            if (urlContentEncoding == null || urlContentEncoding.length() == 0) {
-                                // Use the default encoding for urls
-                                urlContentEncoding = EncoderCache.URL_ARGUMENT_ENCODING;
-                            }
-                            parameterName = URLDecoder.decode(parameterName, urlContentEncoding);
-                            parameterValue = URLDecoder.decode(parameterValue, urlContentEncoding);
-                        }
-                        // Add the parameter, httpclient will urlencode it
-                        post.addParameter(parameterName, parameterValue);
-                    }
-
-/*
-//                    // Alternative implementation, to make sure that HTTPSampler and HTTPSampler2
-//                    // sends the same post body.
-//
-//                    // Only include the content char set in the content-type header if it is not
-//                    // an APPLICATION_X_WWW_FORM_URLENCODED content type
-//                    String contentCharSet = null;
-//                    if(!post.getRequestHeader(HEADER_CONTENT_TYPE).getValue().equals(APPLICATION_X_WWW_FORM_URLENCODED)) {
-//                        contentCharSet = post.getRequestCharSet();
-//                    }
-//                    StringRequestEntity requestEntity = new StringRequestEntity(getQueryString(contentEncoding), post.getRequestHeader(HEADER_CONTENT_TYPE).getValue(), contentCharSet);
-//                    post.setRequestEntity(requestEntity);
-*/
-                }
-
-                // If the request entity is repeatable, we can send it first to
-                // our own stream, so we can return it
-                if(post.getRequestEntity().isRepeatable()) {
-                    ByteArrayOutputStream bos = new ByteArrayOutputStream();
-                    post.getRequestEntity().writeRequest(bos);
-                    bos.flush();
-                    // We get the posted bytes using the encoding used to create it
-                    postedBody.append(new String(bos.toByteArray(),post.getRequestCharSet()));
-                    bos.close();
-                }
-                else {
-                    postedBody.append("<RequestEntity was not repeatable, cannot view what was sent>");
-                }
-            }
-        }
-        // Set the content length
-        post.setRequestHeader(HTTPConstants.HEADER_CONTENT_LENGTH, Long.toString(post.getRequestEntity().getContentLength()));
-
-        return postedBody.toString();
-    }
-
-    /**
-     * Set up the PUT/PATCH/DELETE data
-     */
-    private String sendEntityData(EntityEnclosingMethod put) throws IOException {
-        // Buffer to hold the put body, except file content
-        StringBuilder putBody = new StringBuilder(1000);
-        boolean hasPutBody = false;
-
-        // Check if the header manager had a content type header
-        // This allows the user to specify his own content-type for a POST request
-        Header contentTypeHeader = put.getRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE);
-        boolean hasContentTypeHeader = contentTypeHeader != null && contentTypeHeader.getValue() != null && contentTypeHeader.getValue().length() > 0;
-        HTTPFileArg[] files = getHTTPFiles();
-
-        // If there are no arguments, we can send a file as the body of the request
-
-        if(!hasArguments() && getSendFileAsPostBody()) {
-            hasPutBody = true;
-
-            // If getSendFileAsPostBody returned true, it's sure that file is not null
-            File reservedFile = FileServer.getFileServer().getResolvedFile(files[0].getPath());
-            FileRequestEntity fileRequestEntity = new FileRequestEntity(reservedFile,null);
-            put.setRequestEntity(fileRequestEntity);
-        }
-        // If none of the arguments have a name specified, we
-        // just send all the values as the put body
-        else if(getSendParameterValuesAsPostBody()) {
-            hasPutBody = true;
-
-            // If a content encoding is specified, we set it as http parameter, so that
-            // the post body will be encoded in the specified content encoding
-            String contentEncoding = getContentEncoding();
-            boolean haveContentEncoding = false;
-            if(isNullOrEmptyTrimmed(contentEncoding)) {
-                contentEncoding = null;
-            } else {
-                put.getParams().setContentCharset(contentEncoding);
-                haveContentEncoding = true;
-            }
-
-            // Just append all the parameter values, and use that as the post body
-            StringBuilder putBodyContent = new StringBuilder();
-            for (JMeterProperty jMeterProperty : getArguments()) {
-                HTTPArgument arg = (HTTPArgument) jMeterProperty.getObjectValue();
-                String value = null;
-                if (haveContentEncoding) {
-                    value = arg.getEncodedValue(contentEncoding);
-                } else {
-                    value = arg.getEncodedValue();
-                }
-                putBodyContent.append(value);
-            }
-            String contentTypeValue = null;
-            if(hasContentTypeHeader) {
-                contentTypeValue = put.getRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE).getValue();
-            }
-            StringRequestEntity requestEntity = new StringRequestEntity(putBodyContent.toString(), contentTypeValue, put.getRequestCharSet());
-            put.setRequestEntity(requestEntity);
-        }
-        // Check if we have any content to send for body
-        if(hasPutBody) {
-            // If the request entity is repeatable, we can send it first to
-            // our own stream, so we can return it
-            if(put.getRequestEntity().isRepeatable()) {
-                putBody.append("<actual file content, not shown here>");
-            }
-            else {
-                putBody.append("<RequestEntity was not repeatable, cannot view what was sent>");
-            }
-            if(!hasContentTypeHeader) {
-                // Allow the mimetype of the file to control the content type
-                // This is not obvious in GUI if you are not uploading any files,
-                // but just sending the content of nameless parameters
-                // TODO: needs a multiple file upload scenerio
-                HTTPFileArg file = files.length > 0? files[0] : null;
-                if(file != null && file.getMimeType() != null && file.getMimeType().length() > 0) {
-                    put.setRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE, file.getMimeType());
-                }
-            }
-            // Set the content length
-            put.setRequestHeader(HTTPConstants.HEADER_CONTENT_LENGTH, Long.toString(put.getRequestEntity().getContentLength()));
-        }
-        return putBody.toString();
-    }
-
-    /**
-     * Class extending FilePart, so that we can send placeholder text
-     * instead of the actual file content
-     */
-    private static class ViewableFilePart extends FilePart {
-        private boolean hideFileData;
-
-        public ViewableFilePart(String name, File file, String contentType, String charset) throws FileNotFoundException {
-            super(name, file, contentType, charset);
-            this.hideFileData = false;
-        }
-
-        public void setHideFileData(boolean hideFileData) {
-            this.hideFileData = hideFileData;
-        }
-
-        @Override
-        protected void sendData(OutputStream out) throws IOException {
-            // Check if we should send only placeholder text for the
-            // file content, or the real file content
-            if(hideFileData) {
-                out.write("<actual file content, not shown here>".getBytes());// encoding does not really matter here
-            }
-            else {
-                super.sendData(out);
-            }
-        }
-    }
-
-    /**
-     * From the <code>HttpMethod</code>, store all the "set-cookie" key-pair
-     * values in the cookieManager of the <code>UrlConfig</code>.
-     *
-     * @param method
-     *            <code>HttpMethod</code> which represents the request
-     * @param u
-     *            <code>URL</code> of the URL request
-     * @param cookieManager
-     *            the <code>CookieManager</code> containing all the cookies
-     */
-    protected void saveConnectionCookies(HttpMethod method, URL u, CookieManager cookieManager) {
-        if (cookieManager != null) {
-            Header[] hdr = method.getResponseHeaders(HTTPConstants.HEADER_SET_COOKIE);
-            for (Header responseHeader : hdr) {
-                cookieManager.addCookieFromHeader(responseHeader.getValue(), u);
-            }
-        }
-    }
-
-
-    @Override
-    protected void threadFinished() {
-        log.debug("Thread Finished");
-
-        closeThreadLocalConnections();
-    }
-
-    @Override
-    protected void notifyFirstSampleAfterLoopRestart() {
-        log.debug("notifyFirstSampleAfterLoopRestart");
-        resetSSLContext = !USE_CACHED_SSL_CONTEXT;
-    }
-
-    /**
-     * 
-     */
-    private void closeThreadLocalConnections() {
-        // Does not need to be synchronised, as all access is from same thread
-        Map<HostConfiguration, HttpClient> map = httpClients.get();
-
-        if ( map != null ) {
-            for (HttpClient cl : map.values())
-            {
-                // Can cause NPE in HttpClient 3.1
-                //((SimpleHttpConnectionManager)cl.getHttpConnectionManager()).shutdown();// Closes the connection
-                // Revert to original method:
-                cl.getHttpConnectionManager().closeIdleConnections(-1000);// Closes the connection
-            }
-            map.clear();
-        }
-    }
-
-    /** {@inheritDoc} */
-    @Override
-    public boolean interrupt() {
-        HttpClient client = savedClient;
-        if (client != null) {
-            savedClient = null;
-            // TODO - not sure this is the best method
-            final HttpConnectionManager httpConnectionManager = client.getHttpConnectionManager();
-            if (httpConnectionManager instanceof SimpleHttpConnectionManager) {// Should be true
-                ((SimpleHttpConnectionManager)httpConnectionManager).shutdown();
-            }
-        }
-        return client != null;
-    }
-
-}
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSampler2.java b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSampler2.java
deleted file mode 100644
index 5526a2e8b..000000000
--- a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSampler2.java
+++ /dev/null
@@ -1,88 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *   http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.jmeter.protocol.http.sampler;
-
-
-import java.io.IOException;
-import java.net.URL;
-
-import org.apache.commons.httpclient.HttpClient;
-import org.apache.commons.httpclient.HttpMethod;
-import org.apache.commons.httpclient.HttpMethodBase;
-import org.apache.jmeter.engine.event.LoopIterationEvent;
-import org.apache.jmeter.protocol.http.control.CookieManager;
-import org.apache.jmeter.samplers.Interruptible;
-
-/**
- * A sampler which understands all the parts necessary to read statistics about
- * HTTP requests, including cookies and authentication.
- * This sampler uses HttpClient 3.1.
- * @deprecated since 3.0, will be removed in next version
- */
-@Deprecated
-public class HTTPSampler2 extends HTTPSamplerBase implements Interruptible {
-
-    private static final long serialVersionUID = 240L;
-
-    private final transient HTTPHC3Impl hc;
-    
-    public HTTPSampler2(){
-        hc = new HTTPHC3Impl(this);
-    }
-
-    @Override
-    public boolean interrupt() {
-        return hc.interrupt();
-    }
-
-    @Override
-    protected HTTPSampleResult sample(URL u, String method,
-            boolean areFollowingRedirect, int depth) {
-        return hc.sample(u, method, areFollowingRedirect, depth);
-    }
-
-    // Methods needed by subclasses to get access to the implementation
-    protected HttpClient setupConnection(URL url, HttpMethodBase httpMethod, HTTPSampleResult res) 
-        throws IOException {
-        return hc.setupConnection(url, httpMethod, res);
-    }
-
-    protected void saveConnectionCookies(HttpMethod httpMethod, URL url,
-            CookieManager cookieManager) {
-        hc.saveConnectionCookies(httpMethod, url, cookieManager);
-   }
-
-    protected String getResponseHeaders(HttpMethod httpMethod) {
-        return hc.getResponseHeaders(httpMethod);
-    }
-
-    protected String getConnectionHeaders(HttpMethod httpMethod) {
-        return hc.getConnectionHeaders(httpMethod);
-    }
-
-    protected void setSavedClient(HttpClient savedClient) {
-        hc.savedClient = savedClient;
-    }
-
-    /* (non-Javadoc)
-     * @see org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase#testIterationStart(org.apache.jmeter.engine.event.LoopIterationEvent)
-     */
-    @Override
-    public void testIterationStart(LoopIterationEvent event) {
-        hc.notifyFirstSampleAfterLoopRestart();
-    }
-}
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerBaseConverter.java b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerBaseConverter.java
index 718e5aa6a..66b7a3da5 100644
--- a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerBaseConverter.java
+++ b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerBaseConverter.java
@@ -1,77 +1,77 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  * http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  * License for the specific language governing permissions and limitations
  * under the License.
  *
  */
 
 /*
  * Created on Sep 14, 2004
  *
  */
 package org.apache.jmeter.protocol.http.sampler;
 
 import org.apache.jmeter.save.converters.TestElementConverter;
 
 import com.thoughtworks.xstream.converters.UnmarshallingContext;
 import com.thoughtworks.xstream.io.HierarchicalStreamReader;
 import com.thoughtworks.xstream.mapper.Mapper;
 
 /**
  * Class for XStream conversion of HTTPResult
  *
  */
 public class HTTPSamplerBaseConverter extends TestElementConverter {
 
     /**
      * Returns the converter version; used to check for possible
      * incompatibilities
      *
      * @return the version of this component
      */
     public static String getVersion() {
         return "$Revision$";  //$NON-NLS-1$
     }
 
     public HTTPSamplerBaseConverter(Mapper arg0) {
         super(arg0);
     }
 
     /** {@inheritDoc} */
     @Override
     public boolean canConvert(@SuppressWarnings("rawtypes") Class arg0) { // superclass does not support types
         return HTTPSamplerBase.class.isAssignableFrom(arg0);
     }
 
     /**
      * Override TestElementConverter; convert HTTPSamplerBase to merge
      * the two means of providing file names into a single list.
      * 
      * {@inheritDoc} 
      */
     @Override
     public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) {
         final HTTPSamplerBase httpSampler = (HTTPSamplerBase) super.unmarshal(reader, context);
         // Help convert existing JMX files which use HTTPSampler[2] nodes
         String nodeName = reader.getNodeName();
         if (nodeName.equals(HTTPSamplerFactory.HTTP_SAMPLER_JAVA)){
             httpSampler.setImplementation(HTTPSamplerFactory.IMPL_JAVA);
         }
         if (nodeName.equals(HTTPSamplerFactory.HTTP_SAMPLER_APACHE)){
-            httpSampler.setImplementation(HTTPSamplerFactory.IMPL_HTTP_CLIENT3_1);
+            httpSampler.setImplementation(HTTPSamplerFactory.IMPL_HTTP_CLIENT4);
         }
         httpSampler.mergeFileProperties();
         return httpSampler;
     }
 }
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerFactory.java b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerFactory.java
index f7e65c27f..c737eae0a 100644
--- a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerFactory.java
+++ b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerFactory.java
@@ -1,108 +1,103 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *
  */
 
 package org.apache.jmeter.protocol.http.sampler;
 
 import org.apache.jmeter.util.JMeterUtils;
 import org.apache.jorphan.util.JOrphanUtils;
 
 /**
  * Factory to return the appropriate HTTPSampler for use with classes that need
  * an HTTPSampler; also creates the implementations for use with HTTPSamplerProxy.
  *
  */
 public final class HTTPSamplerFactory {
 
     // N.B. These values are used in jmeter.properties (jmeter.httpsampler) - do not change
     // They can alse be used as the implementation name
     /** Use the default Java HTTP implementation */
     public static final String HTTP_SAMPLER_JAVA = "HTTPSampler"; //$NON-NLS-1$
 
     /** Use Apache HTTPClient HTTP implementation */
     public static final String HTTP_SAMPLER_APACHE = "HTTPSampler2"; //$NON-NLS-1$
 
     //+ JMX implementation attribute values (also displayed in GUI) - do not change
     public static final String IMPL_HTTP_CLIENT4 = "HttpClient4";  // $NON-NLS-1$
 
     public static final String IMPL_HTTP_CLIENT3_1 = "HttpClient3.1"; // $NON-NLS-1$
     
     public static final String IMPL_JAVA = "Java"; // $NON-NLS-1$
     //- JMX
 
     public static final String DEFAULT_CLASSNAME =
         JMeterUtils.getPropDefault("jmeter.httpsampler", IMPL_HTTP_CLIENT4); //$NON-NLS-1$
 
     private HTTPSamplerFactory() {
         // Not intended to be instantiated
     }
 
     /**
      * Create a new instance of the default sampler
      *
      * @return instance of default sampler
      */
     public static HTTPSamplerBase newInstance() {
         return newInstance(DEFAULT_CLASSNAME);
     }
 
     /**
      * Create a new instance of the required sampler type
      *
      * @param alias HTTP_SAMPLER or HTTP_SAMPLER_APACHE or IMPL_HTTP_CLIENT3_1 or IMPL_HTTP_CLIENT4
      * @return the appropriate sampler
      * @throws UnsupportedOperationException if alias is not recognised
      */
     public static HTTPSamplerBase newInstance(String alias) {
         if (alias ==null || alias.length() == 0) {
             return new HTTPSamplerProxy();
         }
         if (alias.equals(HTTP_SAMPLER_JAVA) || alias.equals(IMPL_JAVA)) {
             return new HTTPSamplerProxy(IMPL_JAVA);
         }
-        if (alias.equals(HTTP_SAMPLER_APACHE) || alias.equals(IMPL_HTTP_CLIENT3_1)) {
-            return new HTTPSamplerProxy(IMPL_HTTP_CLIENT3_1);
-        }
-        if (alias.equals(IMPL_HTTP_CLIENT4)) {
+        if (alias.equals(IMPL_HTTP_CLIENT4) || alias.equals(HTTP_SAMPLER_APACHE) || alias.equals(IMPL_HTTP_CLIENT3_1)) {
             return new HTTPSamplerProxy(IMPL_HTTP_CLIENT4);
         }
         throw new IllegalArgumentException("Unknown sampler type: '" + alias+"'");
     }
 
     public static String[] getImplementations(){
-        return new String[]{IMPL_HTTP_CLIENT4,IMPL_HTTP_CLIENT3_1,IMPL_JAVA};
+        return new String[]{IMPL_HTTP_CLIENT4,IMPL_JAVA};
     }
 
     public static HTTPAbstractImpl getImplementation(String impl, HTTPSamplerBase base){
         if (HTTPSamplerBase.PROTOCOL_FILE.equals(base.getProtocol())) {
             return new HTTPFileImpl(base);
         }
         if (JOrphanUtils.isBlank(impl)){
             impl = DEFAULT_CLASSNAME;
         }
         if (IMPL_JAVA.equals(impl) || HTTP_SAMPLER_JAVA.equals(impl)) {
             return new HTTPJavaImpl(base);
-        } else if (IMPL_HTTP_CLIENT3_1.equals(impl) || HTTP_SAMPLER_APACHE.equals(impl)) {
-            return new HTTPHC3Impl(base);                
         } else if (IMPL_HTTP_CLIENT4.equals(impl)) {
             return new HTTPHC4Impl(base);
         } else {
             throw new IllegalArgumentException("Unknown implementation type: '"+impl+"'");
         }
     }
 
 }
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HttpClientDefaultParameters.java b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HttpClientDefaultParameters.java
index c605faae0..78e909fbf 100644
--- a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HttpClientDefaultParameters.java
+++ b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HttpClientDefaultParameters.java
@@ -1,161 +1,130 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one
  * or more contributor license agreements.  See the NOTICE file
  * distributed with this work for additional information
  * regarding copyright ownership.  The ASF licenses this file
  * to you under the Apache License, Version 2.0 (the
  * "License"); you may not use this file except in compliance
  * with the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing,
  * software distributed under the License is distributed on an
  * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  * KIND, either express or implied.  See the License for the
  * specific language governing permissions and limitations
  * under the License.
  */
 
 package org.apache.jmeter.protocol.http.sampler;
 
 import java.io.File;
 import java.io.FileInputStream;
 import java.io.IOException;
 import java.io.InputStream;
 import java.util.Map;
 import java.util.Properties;
 
 import org.apache.jmeter.NewDriver;
-import org.apache.jorphan.util.JOrphanUtils;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
 /*
  * Utility class to set up default HttpClient parameters from a file.
  * 
  * Supports both Commons HttpClient and Apache HttpClient.
  * 
  */
 public class HttpClientDefaultParameters {
 
     private static final Logger log = LoggerFactory.getLogger(HttpClientDefaultParameters.class);
 
     // Non-instantiable
     private HttpClientDefaultParameters(){
     }
 
     // Helper class (callback) for applying parameter definitions
     private static abstract class GenericHttpParams {
         public abstract void setParameter(String name, Object value);
         public abstract void setVersion(String name, String value) throws Exception;
     }
 
     /**
      * Loads a property file and converts parameters as necessary.
      * 
      * @param file the file to load
-     * @param params Commons HttpClient parameter instance
-     * @deprecated HC3.1 will be dropped in upcoming version
-     */
-    @Deprecated
-    public static void load(String file, 
-            final org.apache.commons.httpclient.params.HttpParams params){
-        load(file, 
-                new GenericHttpParams (){
-                    @Override
-                    public void setParameter(String name, Object value) {
-                        params.setParameter(name, value);
-                    }
-                    @Override
-                    public void setVersion(String name, String value) throws Exception {
-                        params.setParameter(name,
-                        org.apache.commons.httpclient.HttpVersion.parse("HTTP/"+value));
-                    }            
-                }
-            );
-    }
-
-    /**
-     * Loads a property file and converts parameters as necessary.
-     * 
-     * @param file the file to load
      * @param params Apache HttpClient parameter instance
      */
     public static void load(String file, 
             final org.apache.http.params.HttpParams params){
         load(file, 
                 new GenericHttpParams (){
                     @Override
                     public void setParameter(String name, Object value) {
                         params.setParameter(name, value);
                     }
 
                     @Override
                     public void setVersion(String name, String value) {
                         String[] parts = value.split("\\.");
                         if (parts.length != 2){
                             throw new IllegalArgumentException("Version must have form m.n");
                         }
                         params.setParameter(name,
                                 new org.apache.http.HttpVersion(
                                         Integer.parseInt(parts[0]), Integer.parseInt(parts[1])));
                     }            
                 }
             );
     }
 
     private static void load(String file, GenericHttpParams params){
         log.info("Trying httpclient parameters from "+file);
         File f = new File(file);        
         if(! (f.exists() && f.canRead())) {
             f = new File(NewDriver.getJMeterDir() + File.separator
                     + "bin" + File.separator + file); // $NON-NLS-1$
             log.info(file + " httpclient parameters does not exist, trying "+f.getAbsolutePath());
             if(! (f.exists() && f.canRead())) {
                 log.error("Cannot read parameters file for HttpClient: "+ file);
                 return;
             }
         }
         log.info("Reading httpclient parameters from "+f.getAbsolutePath());
-        InputStream is = null;
         Properties props = new Properties();
-        try {
-            is = new FileInputStream(f);
+        try ( InputStream is = new FileInputStream(f) ){
             props.load(is);
             for (Map.Entry<Object, Object> me : props.entrySet()){
                 String key = (String) me.getKey();
                 String value = (String)me.getValue();
                 int typeSep = key.indexOf('$'); // $NON-NLS-1$
                 try {
                     if (typeSep > 0){
                         String type = key.substring(typeSep+1);// get past separator
                         String name=key.substring(0,typeSep);
                         log.info("Defining "+name+ " as "+value+" ("+type+")");
                         if (type.equals("Integer")){
                             params.setParameter(name, Integer.valueOf(value));
                         } else if (type.equals("Long")){
                             params.setParameter(name, Long.valueOf(value));
                         } else if (type.equals("Boolean")){
                             params.setParameter(name, Boolean.valueOf(value));
                         } else if (type.equals("HttpVersion")){ // Commons HttpClient only
                             params.setVersion(name, value);
                         } else {
                             log.warn("Unexpected type: "+type+" for name "+name);
                         }
                     } else {
                             log.info("Defining "+key+ " as "+value);
                             params.setParameter(key, value);
                     }
                 } catch (Exception e) {
                     log.error("Error in property: "+key+"="+value+" "+e.toString());
                 }
             }
         } catch (IOException e) {
             log.error("Problem loading properties "+e.toString());
-        } finally {
-            JOrphanUtils.closeQuietly(is);
         }
     }
-
 }
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/SoapSampler.java b/src/protocol/http/org/apache/jmeter/protocol/http/sampler/SoapSampler.java
deleted file mode 100644
index 4c2ab4e65..000000000
--- a/src/protocol/http/org/apache/jmeter/protocol/http/sampler/SoapSampler.java
+++ /dev/null
@@ -1,371 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *   http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- *
- */
-
-package org.apache.jmeter.protocol.http.sampler;
-
-import java.io.BufferedInputStream;
-import java.io.ByteArrayOutputStream;
-import java.io.File;
-import java.io.FileInputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.OutputStream;
-import java.io.UnsupportedEncodingException;
-import java.net.MalformedURLException;
-import java.net.URL;
-import java.util.zip.GZIPInputStream;
-
-import org.apache.commons.httpclient.HttpClient;
-import org.apache.commons.httpclient.methods.PostMethod;
-import org.apache.commons.httpclient.methods.RequestEntity;
-import org.apache.commons.io.IOUtils;
-import org.apache.jmeter.protocol.http.control.CacheManager;
-import org.apache.jmeter.protocol.http.control.Header;
-import org.apache.jmeter.protocol.http.control.HeaderManager;
-import org.apache.jmeter.protocol.http.util.HTTPConstants;
-import org.apache.jmeter.samplers.Interruptible;
-import org.apache.jmeter.util.JMeterUtils;
-import org.apache.jorphan.util.JOrphanUtils;
-import org.slf4j.Logger;
-import org.slf4j.LoggerFactory;
-
-/**
- * Commons HTTPClient based soap sampler
- * @deprecated since 3.0, will be removed in next version
- */
-@Deprecated
-public class SoapSampler extends HTTPSampler2 implements Interruptible { // Implemented by parent class
-    private static final Logger log = LoggerFactory.getLogger(SoapSampler.class);
-
-    private static final long serialVersionUID = 240L;
-
-    public static final String XML_DATA = "HTTPSamper.xml_data"; //$NON-NLS-1$
-
-    public static final String URL_DATA = "SoapSampler.URL_DATA"; //$NON-NLS-1$
-
-    public static final String SOAP_ACTION = "SoapSampler.SOAP_ACTION"; //$NON-NLS-1$
-
-    public static final String SEND_SOAP_ACTION = "SoapSampler.SEND_SOAP_ACTION"; //$NON-NLS-1$
-
-    public static final String XML_DATA_FILE = "SoapSampler.xml_data_file"; //$NON-NLS-1$
-
-    private static final String DOUBLE_QUOTE = "\""; //$NON-NLS-1$
-
-    private static final String SOAPACTION = "SOAPAction"; //$NON-NLS-1$
-
-    private static final String ENCODING = "utf-8"; //$NON-NLS-1$ TODO should this be variable?
-
-    private static final String DEFAULT_CONTENT_TYPE = "text/xml"; //$NON-NLS-1$
-
-    public void setXmlData(String data) {
-        setProperty(XML_DATA, data);
-    }
-
-    public String getXmlData() {
-        return getPropertyAsString(XML_DATA);
-    }
-
-    /**
-     * it's kinda obvious, but we state it anyways. Set the xml file with a
-     * string path.
-     *
-     * @param filename path to the xml file
-     */
-    public void setXmlFile(String filename) {
-        setProperty(XML_DATA_FILE, filename);
-    }
-
-    /**
-     * Get the file location of the xml file.
-     *
-     * @return String file path.
-     */
-    public String getXmlFile() {
-        return getPropertyAsString(XML_DATA_FILE);
-    }
-
-    public String getURLData() {
-        return getPropertyAsString(URL_DATA);
-    }
-
-    public void setURLData(String url) {
-        setProperty(URL_DATA, url);
-    }
-
-    public String getSOAPAction() {
-        return getPropertyAsString(SOAP_ACTION);
-    }
-
-    public String getSOAPActionQuoted() {
-        String action = getSOAPAction();
-        StringBuilder sb = new StringBuilder(action.length()+2);
-        sb.append(DOUBLE_QUOTE);
-        sb.append(action);
-        sb.append(DOUBLE_QUOTE);
-        return sb.toString();
-    }
-
-    public void setSOAPAction(String action) {
-        setProperty(SOAP_ACTION, action);
-    }
-
-    public boolean getSendSOAPAction() {
-        return getPropertyAsBoolean(SEND_SOAP_ACTION);
-    }
-
-    public void setSendSOAPAction(boolean action) {
-        setProperty(SEND_SOAP_ACTION, String.valueOf(action));
-    }
-
-    protected int setPostHeaders(PostMethod post) {
-        int length=0;// Take length from file
-        if (getHeaderManager() != null) {
-            // headerManager was set, so let's set the connection
-            // to use it.
-            HeaderManager mngr = getHeaderManager();
-            int headerSize = mngr.size();
-            for (int idx = 0; idx < headerSize; idx++) {
-                Header hd = mngr.getHeader(idx);
-                if (HTTPConstants.HEADER_CONTENT_LENGTH.equalsIgnoreCase(hd.getName())) {// Use this to override file length
-                    length = Integer.parseInt(hd.getValue());
-                    break;
-                }
-                // All the other headers are set up by HTTPSampler2.setupConnection()
-            }
-        } else {
-            // otherwise we use "text/xml" as the default
-            post.setRequestHeader(HTTPConstants.HEADER_CONTENT_TYPE, DEFAULT_CONTENT_TYPE); //$NON-NLS-1$
-        }
-        if (getSendSOAPAction()) {
-            post.setRequestHeader(SOAPACTION, getSOAPActionQuoted());
-        }
-        return length;
-    }
-
-    /**
-     * Send POST data from <code>Entry</code> to the open connection.
-     *
-     * @param post POST request to send
-     * @param length the length of the content
-     */
-    private String sendPostData(PostMethod post, final int length) {
-        // Buffer to hold the post body, except file content
-        StringBuilder postedBody = new StringBuilder(1000);
-        final String xmlFile = getXmlFile();
-        if (xmlFile != null && xmlFile.length() > 0) {
-            File xmlFileAsFile = new File(xmlFile);
-            if(!(xmlFileAsFile.exists() && xmlFileAsFile.canRead())) {
-                throw new IllegalArgumentException(JMeterUtils.getResString("soap_sampler_file_invalid") // $NON-NLS-1$
-                        + xmlFileAsFile.getAbsolutePath());
-            }
-            // We just add placeholder text for file content
-            postedBody.append("Filename: ").append(xmlFile).append("\n");
-            postedBody.append("<actual file content, not shown here>");
-            post.setRequestEntity(new RequestEntity() {
-                @Override
-                public boolean isRepeatable() {
-                    return true;
-                }
-
-                @Override
-                public void writeRequest(OutputStream out) throws IOException {
-                    try (InputStream fileStream = new FileInputStream(xmlFile);
-                            InputStream in = new BufferedInputStream(fileStream)) {
-                        IOUtils.copy(in, out);
-                        out.flush();
-                    }
-                }
-
-                @Override
-                public long getContentLength() {
-                    switch(length){
-                        case -1:
-                            return -1;
-                        case 0: // No header provided
-                            return new File(xmlFile).length();
-                        default:
-                            return length;
-                        }
-                }
-
-                @Override
-                public String getContentType() {
-                    // TODO do we need to add a charset for the file contents?
-                    return DEFAULT_CONTENT_TYPE; // $NON-NLS-1$
-                }
-            });
-        } else {
-            postedBody.append(getXmlData());
-            post.setRequestEntity(new RequestEntity() {
-                @Override
-                public boolean isRepeatable() {
-                    return true;
-                }
-
-                @Override
-                public void writeRequest(OutputStream out) throws IOException {
-                    // charset must agree with content-type below
-                    IOUtils.write(getXmlData(), out, ENCODING); // $NON-NLS-1$
-                    out.flush();
-                }
-
-                @Override
-                public long getContentLength() {
-                    try {
-                        return getXmlData().getBytes(ENCODING).length; // so we don't generate chunked encoding
-                    } catch (UnsupportedEncodingException e) {
-                        log.warn(e.getLocalizedMessage());
-                        return -1; // will use chunked encoding
-                    }
-                }
-
-                @Override
-                public String getContentType() {
-                    return DEFAULT_CONTENT_TYPE+"; charset="+ENCODING; // $NON-NLS-1$
-                }
-            });
-        }
-        return postedBody.toString();
-    }
-
-    @Override
-    protected HTTPSampleResult sample(URL url, String method, boolean areFollowingRedirect, int frameDepth) {
-
-        String urlStr = url.toString();
-
-        log.debug("Start : sample " + urlStr);
-
-        PostMethod httpMethod;
-        httpMethod = new PostMethod(urlStr);
-
-        HTTPSampleResult res = new HTTPSampleResult();
-
-        res.setSampleLabel(urlStr); // May be replaced later
-        res.setHTTPMethod(HTTPConstants.POST);
-        res.setURL(url);
-        res.sampleStart(); // Count the retries as well in the time
-        HttpClient client = null;
-        InputStream instream = null;
-        try {
-            int content_len = setPostHeaders(httpMethod);
-            client = setupConnection(url, httpMethod, res);
-            setSavedClient(client);
-
-            res.setQueryString(sendPostData(httpMethod,content_len));
-            int statusCode = client.executeMethod(httpMethod);
-            // Some headers are set by executeMethod()
-            res.setRequestHeaders(getConnectionHeaders(httpMethod));
-
-            // Request sent. Now get the response:
-            instream = httpMethod.getResponseBodyAsStream();
-
-            if (instream != null) {// will be null for HEAD
-
-                org.apache.commons.httpclient.Header responseHeader = httpMethod.getResponseHeader(HTTPConstants.HEADER_CONTENT_ENCODING);
-                if (responseHeader != null && HTTPConstants.ENCODING_GZIP.equals(responseHeader.getValue())) {
-                    instream = new GZIPInputStream(instream);
-                }
-
-                //int contentLength = httpMethod.getResponseContentLength();Not visible ...
-                //TODO size ouststream according to actual content length
-                ByteArrayOutputStream outstream = new ByteArrayOutputStream(4 * 1024);
-                //contentLength > 0 ? contentLength : DEFAULT_INITIAL_BUFFER_SIZE);
-                byte[] buffer = new byte[4096];
-                int len;
-                boolean first = true;// first response
-                while ((len = instream.read(buffer)) > 0) {
-                    if (first) { // save the latency
-                        res.latencyEnd();
-                        first = false;
-                    }
-                    outstream.write(buffer, 0, len);
-                }
-
-                res.setResponseData(outstream.toByteArray());
-                outstream.close();
-
-            }
-
-            res.sampleEnd();
-            // Done with the sampling proper.
-
-            // Now collect the results into the HTTPSampleResult:
-
-            res.setSampleLabel(httpMethod.getURI().toString());
-            // Pick up Actual path (after redirects)
-
-            res.setResponseCode(Integer.toString(statusCode));
-            res.setSuccessful(isSuccessCode(statusCode));
-
-            res.setResponseMessage(httpMethod.getStatusText());
-
-            // Set up the defaults (may be overridden below)
-            res.setDataEncoding(ENCODING);
-            res.setContentType(DEFAULT_CONTENT_TYPE);
-            String ct = null;
-            org.apache.commons.httpclient.Header h
-                    = httpMethod.getResponseHeader(HTTPConstants.HEADER_CONTENT_TYPE);
-            if (h != null)// Can be missing, e.g. on redirect
-            {
-                ct = h.getValue();
-                res.setContentType(ct);// e.g. text/html; charset=ISO-8859-1
-                res.setEncodingAndType(ct);
-            }
-
-            res.setResponseHeaders(getResponseHeaders(httpMethod));
-            if (res.isRedirect()) {
-                res.setRedirectLocation(httpMethod.getResponseHeader(HTTPConstants.HEADER_LOCATION).getValue());
-            }
-
-            // If we redirected automatically, the URL may have changed
-            if (getAutoRedirects()) {
-                res.setURL(new URL(httpMethod.getURI().toString()));
-            }
-
-            // Store any cookies received in the cookie manager:
-            saveConnectionCookies(httpMethod, res.getURL(), getCookieManager());
-
-            // Save cache information
-            final CacheManager cacheManager = getCacheManager();
-            if (cacheManager != null){
-                cacheManager.saveDetails(httpMethod, res);
-            }
-
-            // Follow redirects and download page resources if appropriate:
-            res = resultProcessing(areFollowingRedirect, frameDepth, res);
-
-            log.debug("End : sample");
-            httpMethod.releaseConnection();
-            return res;
-        } catch (IllegalArgumentException | IOException e)// e.g. some kinds of invalid URL
-        {
-            res.sampleEnd();
-            errorResult(e, res);
-            return res;
-        } finally {
-            JOrphanUtils.closeQuietly(instream);
-            setSavedClient(null);
-            httpMethod.releaseConnection();
-        }
-    }
-
-    @Override
-    public URL getUrl() throws MalformedURLException {
-        return new URL(getURLData());
-    }
-}
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/util/LoopbackHttpClientSocketFactory.java b/src/protocol/http/org/apache/jmeter/protocol/http/util/LoopbackHttpClientSocketFactory.java
deleted file mode 100644
index 02757c28a..000000000
--- a/src/protocol/http/org/apache/jmeter/protocol/http/util/LoopbackHttpClientSocketFactory.java
+++ /dev/null
@@ -1,97 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *   http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- *
- */
-
-package org.apache.jmeter.protocol.http.util;
-
-import java.io.IOException;
-import java.net.InetAddress;
-import java.net.Socket;
-import java.net.URL;
-import java.net.URLConnection;
-import java.net.URLStreamHandler;
-import java.net.URLStreamHandlerFactory;
-import java.net.UnknownHostException;
-
-import org.apache.commons.httpclient.ConnectTimeoutException;
-import org.apache.commons.httpclient.params.HttpConnectionParams;
-import org.apache.commons.httpclient.protocol.Protocol;
-import org.apache.commons.httpclient.protocol.ProtocolSocketFactory;
-
-/**
- * Commons HttpClient protocol factory to generate Loopback HTTP sockets
-  * @deprecated since 3.0, will be removed in next version
- */
-@Deprecated
-public class LoopbackHttpClientSocketFactory implements ProtocolSocketFactory {
-
-    public LoopbackHttpClientSocketFactory() {
-        super();
-    }
-
-    @Override
-    public Socket createSocket(String host, int port, InetAddress clientHost,
-            int clientPort) throws IOException, UnknownHostException {
-        return new LoopbackHTTPSocket(host,port,clientHost,clientPort);
-    }
-
-    @Override
-    public Socket createSocket(String host, int port) throws IOException,
-            UnknownHostException {
-        return new LoopbackHTTPSocket(host,port);
-    }
-
-    @Override
-    public Socket createSocket(String host, int port, InetAddress localAddress, int localPort,
-            HttpConnectionParams params)
-    throws IOException, UnknownHostException, ConnectTimeoutException {
-        int timeout = params.getConnectionTimeout();
-        if (timeout == 0) {
-            return new LoopbackHTTPSocket(host,port,localAddress,localPort);
-        } else {
-            return new LoopbackHTTPSocket(host,port,localAddress,localPort, timeout);
-        }
-    }
-
-    /**
-     * Convenience method to set up the necessary HttpClient protocol and URL handler.
-     *
-     * Only works for HttpClient, because it's not possible (or at least very difficult)
-     * to provide a different socket factory for the HttpURLConnection class.
-     */
-    public static void setup(){
-        final String LOOPBACK = "loopback"; // $NON-NLS-1$
-
-        // This ensures tha HttpClient knows about the protocol
-        Protocol.registerProtocol(LOOPBACK, new Protocol(LOOPBACK,new LoopbackHttpClientSocketFactory(),1));
-
-        // Now allow the URL handling to work.
-        URLStreamHandlerFactory ushf = protocol -> {
-            if (protocol.equalsIgnoreCase(LOOPBACK)){
-                return new URLStreamHandler(){
-                    @Override
-                    protected URLConnection openConnection(URL u) throws IOException {
-                        return null;// not needed for HttpClient
-                    }
-                };
-            }
-            return null;
-        };
-
-        java.net.URL.setURLStreamHandlerFactory(ushf);
-    }
-}
diff --git a/src/protocol/http/org/apache/jmeter/protocol/http/util/SlowHttpClientSocketFactory.java b/src/protocol/http/org/apache/jmeter/protocol/http/util/SlowHttpClientSocketFactory.java
deleted file mode 100644
index 648886de1..000000000
--- a/src/protocol/http/org/apache/jmeter/protocol/http/util/SlowHttpClientSocketFactory.java
+++ /dev/null
@@ -1,72 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *   http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- *
- */
-
-package org.apache.jmeter.protocol.http.util;
-
-import java.io.IOException;
-import java.net.InetAddress;
-import java.net.Socket;
-import java.net.UnknownHostException;
-
-import org.apache.commons.httpclient.ConnectTimeoutException;
-import org.apache.commons.httpclient.params.HttpConnectionParams;
-import org.apache.commons.httpclient.protocol.ProtocolSocketFactory;
-import org.apache.jmeter.util.SlowSocket;
-
-/**
- * Commons HttpClient protocol factory to generate "slow" sockets for emulating dial-up modems
- * @deprecated since 3.0, will be removed in next version
- */
-@Deprecated
-public class SlowHttpClientSocketFactory implements ProtocolSocketFactory {
-
-    private final int CPS; // Characters per second to emulate
-
-    /**
-     *
-     * @param cps - characters per second
-     */
-    public SlowHttpClientSocketFactory(final int cps) {
-        super();
-        CPS = cps;
-    }
-
-    @Override
-    public Socket createSocket(String host, int port, InetAddress clientHost,
-            int clientPort) throws IOException, UnknownHostException {
-        return new SlowSocket(CPS,host,port,clientHost,clientPort);
-    }
-
-    @Override
-    public Socket createSocket(String host, int port) throws IOException,
-            UnknownHostException {
-        return new SlowSocket(CPS,host,port);
-    }
-
-    @Override
-    public Socket createSocket(String host, int port, InetAddress localAddress, int localPort,
-            HttpConnectionParams params)
-    throws IOException, UnknownHostException, ConnectTimeoutException {
-        int timeout = params.getConnectionTimeout();
-        if (timeout == 0) {
-            return new SlowSocket(CPS,host,port,localAddress,localPort);
-        } else {
-            return new SlowSocket(CPS,host,port,localAddress,localPort, timeout);
-        }
-    }
-}
diff --git a/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerHttpMethod.java b/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerHttpMethod.java
deleted file mode 100644
index 258f58fb2..000000000
--- a/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerHttpMethod.java
+++ /dev/null
@@ -1,68 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *   http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- *
- */
-
-package org.apache.jmeter.protocol.http.control;
-
-import org.apache.commons.httpclient.Header;
-import org.apache.jmeter.protocol.http.sampler.HTTPSampleResult;
-import org.apache.jmeter.protocol.http.util.HTTPConstants;
-
-import static org.junit.Assert.assertEquals;
-
-public class TestCacheManagerHttpMethod extends TestCacheManagerUrlConnectionBase {
-
-    @Override
-    protected void setExpires(String expires) {
-        ((HttpMethodStub) httpMethod).expires = expires;
-    }
-
-    @Override
-    protected void setCacheControl(String cacheControl) {
-        ((HttpMethodStub) httpMethod).cacheControl = cacheControl;
-    }
-
-    @Override
-    protected void setLastModified(String lastModified) {
-        ((HttpMethodStub) httpMethod).lastModifiedHeader =
-                new org.apache.commons.httpclient.Header(HTTPConstants.LAST_MODIFIED,
-                        lastModified);
-    }
-
-    @Override
-    protected void cacheResult(HTTPSampleResult result) throws Exception {
-        this.cacheManager.saveDetails(this.httpMethod, result);
-    }
-
-    @Override
-    protected void addRequestHeader(String requestHeader, String value) {
-        this.httpMethod.addRequestHeader(new Header(requestHeader, value, false));
-    }
-
-    @Override
-    protected void setRequestHeaders() {
-        this.cacheManager.setHeaders(this.url, this.httpMethod);
-    }
-
-    @Override
-    protected void checkRequestHeader(String requestHeader, String expectedValue) {
-        org.apache.commons.httpclient.Header header = this.httpMethod.getRequestHeader(requestHeader);
-        assertEquals("Wrong name in header for " + requestHeader, requestHeader, header.getName());
-        assertEquals("Wrong value for header " + header, expectedValue, header.getValue());
-    }
-
-}
diff --git a/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerUrlConnection.java b/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerUrlConnection.java
index 89f89d0c1..c25488e1e 100644
--- a/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerUrlConnection.java
+++ b/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerUrlConnection.java
@@ -1,75 +1,76 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *
  */
 
 package org.apache.jmeter.protocol.http.control;
 
+import static org.junit.Assert.assertEquals;
+import static org.junit.Assert.assertNotNull;
+
+import java.net.HttpURLConnection;
 import java.util.List;
 import java.util.Map;
 
 import org.apache.jmeter.protocol.http.sampler.HTTPSampleResult;
 
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertNotNull;
-
 public class TestCacheManagerUrlConnection extends TestCacheManagerUrlConnectionBase {
 
     @Override
     protected void cacheResult(HTTPSampleResult result) throws Exception {
         this.cacheManager.saveDetails(this.urlConnection, result);
     }
 
     @Override
     protected void setExpires(String expires) {
         ((URLConnectionStub) urlConnection).expires = expires;
     }
 
     @Override
     protected void setCacheControl(String cacheControl) {
         ((URLConnectionStub) urlConnection).cacheControl = cacheControl;
     }
 
     @Override
     protected void setLastModified(String lastModified) {
         ((URLConnectionStub) urlConnection).lastModifiedHeader = lastModified;
     }
 
     @Override
     protected void checkRequestHeader(String requestHeader, String expectedValue) {
-        Map<String, List<String>> properties = this.httpUrlConnection.getRequestProperties();
+        Map<String, List<String>> properties = ((HttpURLConnection)this.urlConnection).getRequestProperties();
         checkProperty(properties, requestHeader, expectedValue);
     }
 
     @Override
     protected void addRequestHeader(String requestHeader, String value) {
         // no-op
     }
 
     @Override
     protected void setRequestHeaders() {
-        this.cacheManager.setHeaders(this.httpUrlConnection, this.url);
+        this.cacheManager.setHeaders((HttpURLConnection)this.urlConnection, this.url);
     }
 
     private static void checkProperty(Map<String, List<String>> properties, String property, String expectedPropertyValue) {
         assertNotNull("Properties should not be null. Expected to find within it property = " + property + " with expected value = " + expectedPropertyValue, properties);
         List<String> listOfPropertyValues = properties.get(property);
         assertNotNull("No property entry found for property " + property, listOfPropertyValues);
         assertEquals("Did not find single property for property " + property, 1, listOfPropertyValues.size());
         assertEquals("Unexpected value for property " + property, expectedPropertyValue, listOfPropertyValues.get(0));
     }
 
 }
diff --git a/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerUrlConnectionBase.java b/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerUrlConnectionBase.java
index c44f44a28..14c9ad8ae 100644
--- a/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerUrlConnectionBase.java
+++ b/test/src/org/apache/jmeter/protocol/http/control/TestCacheManagerUrlConnectionBase.java
@@ -1,161 +1,92 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *
  */
 
 package org.apache.jmeter.protocol.http.control;
 
 import java.io.IOException;
+import java.net.HttpURLConnection;
 import java.net.URL;
 import java.net.URLConnection;
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
 
-import org.apache.commons.httpclient.HttpMethod;
-import org.apache.commons.httpclient.URI;
-import org.apache.commons.httpclient.URIException;
-import org.apache.commons.httpclient.methods.PostMethod;
-import org.apache.commons.httpclient.util.HttpURLConnection;
 import org.apache.jmeter.protocol.http.util.HTTPConstants;
 
 public abstract class TestCacheManagerUrlConnectionBase extends TestCacheManagerBase {
-    protected class URLConnectionStub extends URLConnection {
+    protected class URLConnectionStub extends HttpURLConnection {
 
         protected URLConnectionStub(URL url) {
             super(url);
         }
 
         private URLConnectionStub(URLConnection urlConnection) {
             super(urlConnection.getURL());
         }
 
         @Override
         public void connect() throws IOException {
         }
 
         protected String expires = null;
         protected String cacheControl = null;
         protected String lastModifiedHeader = currentTimeInGMT;
 
         @Override
         public String getHeaderField(String name) {
             if (HTTPConstants.LAST_MODIFIED.equals(name)) {
                 return lastModifiedHeader;
             } else if (HTTPConstants.ETAG.equals(name)) {
                 return EXPECTED_ETAG;
             } else if (HTTPConstants.EXPIRES.equals(name)) {
                 return expires;
             } else if (HTTPConstants.CACHE_CONTROL.equals(name)) {
                 return cacheControl;
             } else if (HTTPConstants.DATE.equals(name)) {
                 return currentTimeInGMT;
             } else if (HTTPConstants.VARY.equals(name)) {
                 return vary;
             }
             return super.getHeaderField(name);
         }
 
         @Override
         public URL getURL() {
             return url;
         }
-    }
-
-    protected class HttpMethodStub extends PostMethod {
-        protected org.apache.commons.httpclient.Header lastModifiedHeader;
-        protected org.apache.commons.httpclient.Header etagHeader;
-        protected String expires;
-        protected String cacheControl;
-        protected org.apache.commons.httpclient.Header dateHeader;
-
-        HttpMethodStub() {
-            this.lastModifiedHeader = new org.apache.commons.httpclient.Header(HTTPConstants.LAST_MODIFIED, currentTimeInGMT);
-            this.dateHeader = new org.apache.commons.httpclient.Header(HTTPConstants.DATE, currentTimeInGMT);
-            this.etagHeader = new org.apache.commons.httpclient.Header(HTTPConstants.ETAG, EXPECTED_ETAG);
-        }
 
         @Override
-        public org.apache.commons.httpclient.Header getResponseHeader(String headerName) {
-            if (HTTPConstants.LAST_MODIFIED.equals(headerName)) {
-                return this.lastModifiedHeader;
-            } else if (HTTPConstants.ETAG.equals(headerName)) {
-                return this.etagHeader;
-            } else if (HTTPConstants.EXPIRES.equals(headerName)) {
-                return expires == null ? null : new org.apache.commons.httpclient.Header(HTTPConstants.EXPIRES, expires);
-            } else if (HTTPConstants.CACHE_CONTROL.equals(headerName)) {
-                return cacheControl == null ? null : new org.apache.commons.httpclient.Header(HTTPConstants.CACHE_CONTROL, cacheControl);
-            } else if (HTTPConstants.DATE.equals(headerName)) {
-                return this.dateHeader;
-            } else if (HTTPConstants.VARY.equals(headerName)) {
-                return vary == null ? null : new org.apache.commons.httpclient.Header(HTTPConstants.VARY, vary);
-            }
-            return null;
+        public void disconnect() {
         }
 
         @Override
-        public URI getURI() throws URIException {
-            return uri;
+        public boolean usingProxy() {
+            return false;
         }
     }
-
-    private static class HttpURLConnectionStub extends HttpURLConnection {
-        private Map<String, List<String>> properties;
-
-        public HttpURLConnectionStub(HttpMethod method, URL url) {
-            super(method, url);
-            this.properties = new HashMap<>();
-        }
-
-        @Override
-        public void addRequestProperty(String key, String value) {
-            List<String> list = new ArrayList<>();
-            list.add(value);
-            this.properties.put(key, list);
-        }
-
-        @Override
-        public Map<String, List<String>> getRequestProperties() {
-            return this.properties;
-        }
-
-    }
-
-    private URI uri;
     protected URLConnection urlConnection;
-    protected HttpMethod httpMethod;
-    protected HttpURLConnection httpUrlConnection;
 
     @Override
     public void setUp() throws Exception {
         super.setUp();
-        this.uri = new URI(LOCAL_HOST, false);
         this.urlConnection = new URLConnectionStub(this.url.openConnection());
-        this.httpMethod = new HttpMethodStub();
-        this.httpUrlConnection = new HttpURLConnectionStub(this.httpMethod, this.url);
-        this.httpMethod.setURI(this.uri);
     }
 
     @Override
     public void tearDown() throws Exception {
-        this.httpUrlConnection = null;
-        this.httpMethod = null;
         this.urlConnection = null;
-        this.uri = null;
         super.tearDown();
     }
 }
diff --git a/test/src/org/apache/jmeter/protocol/http/control/TestDNSCacheManager.java b/test/src/org/apache/jmeter/protocol/http/control/TestDNSCacheManager.java
index eb3d952a0..fe7df66d0 100644
--- a/test/src/org/apache/jmeter/protocol/http/control/TestDNSCacheManager.java
+++ b/test/src/org/apache/jmeter/protocol/http/control/TestDNSCacheManager.java
@@ -1,208 +1,208 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  * 
  */
 
 package org.apache.jmeter.protocol.http.control;
 
 import static org.junit.Assert.assertThat;
 import static org.junit.Assert.fail;
 
 import java.net.InetAddress;
 import java.net.UnknownHostException;
 import java.util.Arrays;
 
 import org.apache.jmeter.junit.JMeterTestCase;
 import org.hamcrest.CoreMatchers;
 import org.junit.Assert;
 import org.junit.Test;
 import org.xbill.DNS.ExtendedResolver;
 
 public class TestDNSCacheManager extends JMeterTestCase {
     private static final String INVALID_DNS_SERVER = "8.8.8.8.9"; //$NON-NLS-1$
     
     private static final String VALID_DNS_SERVER = "8.8.8.8"; //$NON-NLS-1$
 
     @Test
     public void testWithOneStaticHost() throws Exception {
         DNSCacheManager manager = new DNSCacheManager();
         manager.setCustomResolver(true);
         manager.addHost("jmeter.example.org", "127.0.0.1");
         assertThat(manager.resolve("jmeter.example.org"),
                 CoreMatchers.is(CoreMatchers.equalTo(new InetAddress[] { InetAddress.getByName("127.0.0.1") })));
     }
 
     @Test
     public void testWithMultipleStaticHost() throws Exception {
         DNSCacheManager manager = new DNSCacheManager();
         manager.setCustomResolver(true);
         manager.addHost("jmeter.example.org", "127.0.0.1, 1.2.3.4");
         assertThat(manager.resolve("jmeter.example.org"),
                 CoreMatchers.is(CoreMatchers.equalTo(new InetAddress[] { InetAddress.getByName("127.0.0.1"), InetAddress.getByName("1.2.3.4") })));
     }
 
     @Test
     public void testAddAndClearStaticHost() throws Exception {
         DNSCacheManager manager = new DNSCacheManager();
         manager.setCustomResolver(true);
         manager.addHost("apache.jmeter.org", "127.0.0.1");
         manager.resolve("apache.jmeter.org");
         manager.clear();
         assertThat(Arrays.asList(manager.resolve("jmeter.apache.org")),
                 CoreMatchers.hasItem(InetAddress.getByName("jmeter.apache.org")));
         assertThat(Arrays.asList(manager.resolve("jmeter.apache.org")),
                 CoreMatchers.not(CoreMatchers.hasItem(InetAddress.getByName("127.0.0.1"))));
     }
 
     
     @Test
     public void testWithCustomResolverAnd1WrongServer() throws UnknownHostException {
         DNSCacheManager original = new DNSCacheManager();
         original.addServer(INVALID_DNS_SERVER);
         original.setCustomResolver(true);
         original.setTimeoutMs(100);
         try {
             original.resolve("jmeter.apache.org");
             fail("Should have failed as DNS server does not exist");
         } catch (UnknownHostException e) {
             Assert.assertNull(original.resolver);
             Assert.assertTrue(original.initFailed);
         }
         
         try {
             original.resolve("www.apache.org");
             fail("Should have failed as DNS server does not exist");
             // OK
         } catch (UnknownHostException e) {
             Assert.assertNull(original.resolver);
             Assert.assertTrue(original.initFailed);
         }
     }
     
     @Test
     public void testWithCustomResolverAnd1Server() throws UnknownHostException {
         DNSCacheManager original = new DNSCacheManager();
         original.addServer(VALID_DNS_SERVER);
         original.setCustomResolver(true);
         original.setTimeoutMs(100);
         try {
             original.resolve("jmeter.apache.org");
             Assert.assertNotNull(original.resolver);
             Assert.assertTrue(((ExtendedResolver)original.resolver).getResolvers().length==1);
             Assert.assertTrue(original.cache.size()==1);
             // OK
         } catch (UnknownHostException e) {
-            fail("System DNS server should have been used");
+            fail("Should have succeeded resolving jmeter.apache.org, error:"+e.getMessage());
         }
     }
     
     @Test
     public void testUseCache() throws UnknownHostException {
         DNSCacheManager original = new DNSCacheManager();
         original.addServer(VALID_DNS_SERVER);
         original.setCustomResolver(true);
         original.setTimeoutMs(100);
         try {
             InetAddress[] expectedResult = new InetAddress[0];
             original.cache.put("jmeter.apache.org", new InetAddress[0]);
             InetAddress[] actual = original.resolve("jmeter.apache.org");
             Assert.assertArrayEquals(expectedResult, actual);
             // OK
         } catch (UnknownHostException e) {
             fail("Cache should have been used");
         }
         
         try {
             original.cache.put("jmeter.apache.org", null);
             Assert.assertNull(original.resolve("jmeter.apache.org"));
             // OK
         } catch (UnknownHostException e) {
             fail("Cache should have been used");
         }
     }
     
     @Test
     public void testWithCustomResolverAndNoServer() throws UnknownHostException {
         DNSCacheManager original = new DNSCacheManager();
         original.setCustomResolver(true);
         original.setTimeoutMs(100);
         try {
             // This will use Default System DNS resolver
             original.resolve("jmeter.apache.org");
             Assert.assertNotNull(original.resolver);
             Assert.assertTrue(((ExtendedResolver)original.resolver).getResolvers().length==0);
         } catch (UnknownHostException e) {
             fail("Should have failed as no DNS server provided");
         }
     }
     
     @Test
     public void testWithCustomResolverAndInvalidNameserver() throws UnknownHostException {
         DNSCacheManager original = new DNSCacheManager();
         original.setCustomResolver(true);
         original.addServer(INVALID_DNS_SERVER);
         original.setTimeoutMs(100);
         try {
             original.resolve("jmeter.apache.org");
             fail();
         } catch (UnknownHostException e) {
             // OK
         }
     }
     
     @Test
     public void testCloneWithCustomResolverAndInvalidNameserver() throws UnknownHostException {
         DNSCacheManager original = new DNSCacheManager();
         original.setCustomResolver(true);
         original.addServer(INVALID_DNS_SERVER);
         DNSCacheManager clone = (DNSCacheManager) original.clone();
         clone.setTimeoutMs(100);
         try {
             clone.resolve("jmeter.apache.org");
             fail();
         } catch (UnknownHostException e) {
             // OK
         }
     }
     
     @Test
     public void testResolveExistingHostWithSystemDefaultDnsServer() throws UnknownHostException {
         DNSCacheManager original = new DNSCacheManager();
         original.setCustomResolver(false);
         try {
             InetAddress[] result = original.resolve("www.example.org");
             Assert.assertNotNull(result);
             Assert.assertNull(original.resolver);
             // IPv4 and/or IPv6
             Assert.assertTrue(result.length>0);
         } catch (UnknownHostException e) {
             Assert.fail("Should not have failed");
         }
     }
     
     @Test
     public void testResolveNonExistingHostWithSystemDefaultDnsServer() throws UnknownHostException {
         DNSCacheManager original = new DNSCacheManager();
         original.setCustomResolver(false);
         try {
             original.resolve("jmeterxxx.apache.org");
             fail();
         } catch (UnknownHostException e) {
             Assert.assertNull(original.resolver);
             // OK
         }
     }
 }
diff --git a/test/src/org/apache/jmeter/protocol/http/control/TestHC3CookieManager.java b/test/src/org/apache/jmeter/protocol/http/control/TestHC3CookieManager.java
deleted file mode 100644
index 06658138d..000000000
--- a/test/src/org/apache/jmeter/protocol/http/control/TestHC3CookieManager.java
+++ /dev/null
@@ -1,459 +0,0 @@
-/*
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *   http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- * 
- */
-
-package org.apache.jmeter.protocol.http.control;
-
-import static org.junit.Assert.assertEquals;
-import static org.junit.Assert.assertFalse;
-import static org.junit.Assert.assertNotNull;
-import static org.junit.Assert.assertNull;
-import static org.junit.Assert.assertTrue;
-
-import java.net.URL;
-
-import org.apache.commons.httpclient.cookie.CookiePolicy;
-import org.apache.jmeter.junit.JMeterTestCase;
-import org.apache.jmeter.protocol.http.sampler.HTTPNullSampler;
-import org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase;
-import org.apache.jmeter.protocol.http.util.HTTPConstants;
-import org.apache.jmeter.threads.JMeterContext;
-import org.apache.jmeter.threads.JMeterContextService;
-import org.junit.Before;
-import org.junit.Test;
-
-/**
- * HC3CookieHandler tests
- */
-@SuppressWarnings("deprecation") // unit test of deprecated class
-public class TestHC3CookieManager extends JMeterTestCase {
-        private CookieManager man = null;
-
-        private JMeterContext jmctx = null;
-
-        @Before
-        public void setUp() throws Exception {
-            jmctx = JMeterContextService.getContext();
-            man = new CookieManager(); // defaults to HC3/compatibility
-            // but make double-sure that this is the case
-            man.setImplementation(HC3CookieHandler.class.getName());
-            man.setCookiePolicy(HC3CookieHandler.DEFAULT_POLICY_NAME);
-            man.setThreadContext(jmctx);
-            man.testStarted();// This is needed in order to set up the cookie policy
-        }
-
-        @Test
-        public void testRemoveCookie() throws Exception {
-            man.setThreadContext(jmctx);
-            Cookie c = new Cookie("id", "me", "127.0.0.1", "/", false, 0);
-            man.add(c);
-            assertEquals(1, man.getCookieCount());
-            // This should be ignored, as there is no value
-            Cookie d = new Cookie("id", "", "127.0.0.1", "/", false, 0);
-            man.add(d);
-            assertEquals(0, man.getCookieCount());
-            man.add(c);
-            man.add(c);
-            assertEquals(1, man.getCookieCount());
-            Cookie e = new Cookie("id", "me2", "127.0.0.1", "/", false, 0);
-            man.add(e);
-            assertEquals(1, man.getCookieCount());
-        }
-
-        @Test
-        public void testSendCookie() throws Exception {
-            man.add(new Cookie("id", "value", "jakarta.apache.org", "/", false, 9999999999L));
-            HTTPSamplerBase sampler = new HTTPNullSampler();
-            sampler.setDomain("jakarta.apache.org");
-            sampler.setPath("/index.html");
-            sampler.setMethod(HTTPConstants.GET);
-            assertNotNull(man.getCookieHeaderForURL(sampler.getUrl()));
-        }
-
-        @Test
-        public void testSendCookie2() throws Exception {
-            man.add(new Cookie("id", "value", ".apache.org", "/", false, 9999999999L));
-            HTTPSamplerBase sampler = new HTTPNullSampler();
-            sampler.setDomain("jakarta.apache.org");
-            sampler.setPath("/index.html");
-            sampler.setMethod(HTTPConstants.GET);
-            assertNotNull(man.getCookieHeaderForURL(sampler.getUrl()));
-        }
-
-        /**
-         * Test that the cookie domain field is actually handled as browsers do
-         * (i.e.: host X matches domain .X):
-         *
-         * @throws Exception if something fails
-         */
-        @Test
-        public void testDomainHandling() throws Exception {
-            URL url = new URL("http://jakarta.apache.org/");
-            man.addCookieFromHeader("test=1;domain=.jakarta.apache.org", url);
-            assertNotNull(man.getCookieHeaderForURL(url));
-        }
-
-        @Test
-        public void testCrossDomainHandling() throws Exception {
-            URL url = new URL("http://jakarta.apache.org/");
-            assertEquals(0,man.getCookieCount()); // starts empty
-            man.addCookieFromHeader("test=2;domain=.hc.apache.org", url);
-            assertEquals(0,man.getCookieCount()); // should not be stored
-            man.addCookieFromHeader("test=1;domain=.jakarta.apache.org", url);
-            assertEquals(1,man.getCookieCount()); // OK
-        }
-
-        /**
-         * Test that we won't be tricked by similar host names (this was a past
-         * bug, although it never got reported in the bug database):
-         *
-         * @throws Exception if something fails
-         */
-        @Test
-        public void testSimilarHostNames() throws Exception {
-            URL url = new URL("http://ache.org/");
-            man.addCookieFromHeader("test=1", url);
-            url = new URL("http://jakarta.apache.org/");
-            assertNull(man.getCookieHeaderForURL(url));
-        }
-
-        // Test session cookie is returned
-        @Test
-        public void testSessionCookie() throws Exception {
-            URL url = new URL("http://a.b.c/");
-            man.addCookieFromHeader("test=1", url);
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("test=1", s);
-        }
-
-        // Bug 2063
-        @Test
-        public void testCookieWithEquals() throws Exception {
-            URL url = new URL("http://a.b.c/");
-            man.addCookieFromHeader("NSCP_USER_LOGIN1_NEW=SHA=xxxxx", url);
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("NSCP_USER_LOGIN1_NEW=SHA=xxxxx", s);
-            Cookie c=man.get(0);
-            assertEquals("NSCP_USER_LOGIN1_NEW",c.getName());
-            assertEquals("SHA=xxxxx",c.getValue());
-        }
-
-        // Test Old cookie is not returned
-        @Test
-        public void testOldCookie() throws Exception {
-            URL url = new URL("http://a.b.c/");
-            man.addCookieFromHeader("test=1; expires=Mon, 01-Jan-1990 00:00:00 GMT", url);
-            String s = man.getCookieHeaderForURL(url);
-            assertNull(s);
-        }
-
-        // Test New cookie is returned
-        @Test
-        public void testNewCookie() throws Exception {
-            URL url = new URL("http://a.b.c/");
-            man.addCookieFromHeader("test=1; expires=Mon, 01-Jan-2990 00:00:00 GMT", url);
-            assertEquals(1,man.getCookieCount());
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("test=1", s);
-        }
-
-        // Test multi-cookie header handling
-        @Test
-        public void testCookies1() throws Exception {
-            URL url = new URL("http://a.b.c.d/testCookies1");
-            man.addCookieFromHeader("test1=1; comment=\"how,now\", test2=2; version=1", url);
-            assertEquals(2,man.getCookieCount());
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("test1=1; test2=2", s);
-        }
-        
-        @Test
-        public void testCookies2() throws Exception {
-            URL url = new URL("https://a.b.c.d/testCookies2");
-            man.addCookieFromHeader("test1=1;secure, test2=2;secure", url);
-            assertEquals(2,man.getCookieCount());
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("test1=1; test2=2", s);
-        }
-
-        // Test duplicate cookie handling
-        @Test
-        public void testDuplicateCookie() throws Exception {
-            URL url = new URL("http://a.b.c/");
-            man.addCookieFromHeader("test=1", url);
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("test=1", s);
-            man.addCookieFromHeader("test=2", url);
-            s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("test=2", s);
-        }
-
-        @Test
-        public void testDuplicateCookie2() throws Exception {
-            URL url = new URL("http://a.b.c/");
-            man.addCookieFromHeader("test=1", url);
-            man.addCookieFromHeader("test2=a", url);
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("test=1; test2=a", s); // Assumes some kind of list is used
-            man.addCookieFromHeader("test=2", url);
-            man.addCookieFromHeader("test3=b", url);
-            s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("test2=a; test=2; test3=b", s);// Assumes some kind of list is use
-            // If not using a list that retains the order, then the asserts would need to change
-        }
-        
-         
-        /** Tests missing cookie path for a trivial URL fetch from the domain 
-         *  Note that this fails prior to a fix for BUG 38256
-         *
-         * @throws Exception if something fails
-         */
-        @Test
-        public void testMissingPath0() throws Exception {
-            URL url = new URL("http://d.e.f/goo.html");
-            man.addCookieFromHeader("test=moo", url);
-            String s = man.getCookieHeaderForURL(new URL("http://d.e.f/"));
-            assertNotNull(s);
-            assertEquals("test=moo", s);
-        }
-        
-        /** Tests missing cookie path for a non-trivial URL fetch from the 
-         *  domain.  Note that this fails prior to a fix for BUG 38256
-         *
-         * @throws Exception if something fails
-         */
-        @Test
-        public void testMissingPath1() throws Exception {
-            URL url = new URL("http://d.e.f/moo.html");
-            man.addCookieFromHeader("test=moo", url);
-            String s = man.getCookieHeaderForURL(new URL("http://d.e.f/goo.html"));
-            assertNotNull(s);
-            assertEquals("test=moo", s);
-        }
-        
-        /** Tests explicit root path with a trivial URL fetch from the domain
-         *
-         * @throws Exception if something fails
-         */
-        @Test
-        public void testRootPath0() throws Exception {
-            URL url = new URL("http://d.e.f/goo.html");
-            man.addCookieFromHeader("test=moo;path=/", url);
-            String s = man.getCookieHeaderForURL(new URL("http://d.e.f/"));
-            assertNotNull(s);
-            assertEquals("test=moo", s);
-        }
-        
-        /** Tests explicit root path with a non-trivial URL fetch from the domain
-         *
-         * @throws Exception if something fails
-         */
-        @Test
-        public void testRootPath1() throws Exception {
-            URL url = new URL("http://d.e.f/moo.html");
-            man.addCookieFromHeader("test=moo;path=/", url);
-            String s = man.getCookieHeaderForURL(new URL("http://d.e.f/goo.html"));
-            assertNotNull(s);
-            assertEquals("test=moo", s);
-        }
-        
-        // Test cookie matching
-        @Test
-        public void testCookieMatching() throws Exception {
-            URL url = new URL("http://a.b.c:8080/TopDir/fred.jsp");
-            man.addCookieFromHeader("ID=abcd; Path=/TopDir", url);
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("ID=abcd", s);
-
-            url = new URL("http://a.b.c:8080/other.jsp");
-            s=man.getCookieHeaderForURL(url);
-            assertNull(s);
-            
-            url = new URL("http://a.b.c:8080/TopDir/suub/another.jsp");
-            s=man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            
-            url = new URL("http://a.b.c:8080/TopDir");
-            s=man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            
-            url = new URL("http://a.b.d/");
-            s=man.getCookieHeaderForURL(url);
-            assertNull(s);
-        }
-
-        @Test
-        public void testCookieOrdering1() throws Exception {
-            URL url = new URL("http://order.now/sub1/moo.html");
-            man.addCookieFromHeader("test1=moo1;path=/", url);
-            man.addCookieFromHeader("test2=moo2;path=/sub1", url);
-            man.addCookieFromHeader("test2=moo3;path=/", url);
-            assertEquals(3,man.getCookieCount());
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            assertEquals("test2=moo2; test1=moo1; test2=moo3", s);
-        }
-
-        @Test
-        public void testCookieOrdering2() throws Exception {
-            URL url = new URL("http://order.now/sub1/moo.html");
-            man.addCookieFromHeader("test1=moo1;", url);
-            man.addCookieFromHeader("test2=moo2;path=/sub1", url);
-            man.addCookieFromHeader("test2=moo3;path=/", url);
-            assertEquals(3,man.getCookieCount());
-            assertEquals("/sub1",man.get(0).getPath()); // Defaults to caller URL
-            assertEquals("/sub1",man.get(1).getPath());
-            assertEquals("/",man.get(2).getPath());
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            HC3CookieHandler hc3CookieHandler = (HC3CookieHandler) man.getCookieHandler();
-            org.apache.commons.httpclient.Cookie[] c = 
-                    hc3CookieHandler.getCookiesForUrl(man.getCookies(), url, 
-                    CookieManager.ALLOW_VARIABLE_COOKIES);
-            assertEquals("/sub1",c[0].getPath());
-            assertFalse(c[0].isPathAttributeSpecified());
-            assertEquals("/sub1",c[1].getPath());
-            assertTrue(c[1].isPathAttributeSpecified());
-            assertEquals("/",c[2].getPath());
-            assertEquals("test1=moo1; test2=moo2; test2=moo3", s);
-        }
-        
-        @Test
-        public void testCookiePolicy2109() throws Exception {
-            man.setCookiePolicy(CookiePolicy.RFC_2109);
-            man.testStarted(); // ensure policy is picked up
-            URL url = new URL("http://order.now/sub1/moo.html");
-            man.addCookieFromHeader("test1=moo1;", url);
-            man.addCookieFromHeader("test2=moo2;path=/sub1", url);
-            man.addCookieFromHeader("test2=moo3;path=/", url);
-            assertEquals(3,man.getCookieCount());
-            //assertEquals("/",man.get(0).getPath());
-            assertEquals("/sub1",man.get(1).getPath());
-            assertEquals("/",man.get(2).getPath());
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            HC3CookieHandler hc3CookieHandler = (HC3CookieHandler) man.getCookieHandler();
-            org.apache.commons.httpclient.Cookie[] c = 
-                    hc3CookieHandler.getCookiesForUrl(man.getCookies(), url, 
-                    CookieManager.ALLOW_VARIABLE_COOKIES);
-            assertEquals("/sub1",c[0].getPath());
-            assertFalse(c[0].isPathAttributeSpecified());
-            assertEquals("/sub1",c[1].getPath());
-            assertTrue(c[1].isPathAttributeSpecified());
-            assertEquals("/",c[2].getPath());
-            assertTrue(c[2].isPathAttributeSpecified());
-            assertEquals("$Version=0; test1=moo1; test2=moo2; $Path=/sub1; test2=moo3; $Path=/", s);
-        }
-
-        @Test
-        public void testCookiePolicyNetscape() throws Exception {
-            man.setCookiePolicy(CookiePolicy.NETSCAPE);
-            man.testStarted(); // ensure policy is picked up
-            URL url = new URL("http://www.order.now/sub1/moo.html");
-            man.addCookieFromHeader("test1=moo1;", url);
-            man.addCookieFromHeader("test2=moo2;path=/sub1", url);
-            man.addCookieFromHeader("test2=moo3;path=/", url);
-            assertEquals(3,man.getCookieCount());
-            assertEquals("/sub1",man.get(0).getPath());
-            assertEquals("/sub1",man.get(1).getPath());
-            assertEquals("/",man.get(2).getPath());
-            String s = man.getCookieHeaderForURL(url);
-            assertNotNull(s);
-            HC3CookieHandler hc3CookieHandler = (HC3CookieHandler) man.getCookieHandler();
-           
-            org.apache.commons.httpclient.Cookie[] c = 
-                    hc3CookieHandler.getCookiesForUrl(man.getCookies(), url, 
-                    CookieManager.ALLOW_VARIABLE_COOKIES);
-            assertEquals("/sub1",c[0].getPath());
-            assertFalse(c[0].isPathAttributeSpecified());
-            assertEquals("/sub1",c[1].getPath());
-            assertTrue(c[1].isPathAttributeSpecified());
-            assertEquals("/",c[2].getPath());
-            assertTrue(c[2].isPathAttributeSpecified());
-            assertEquals("test1=moo1; test2=moo2; test2=moo3", s);
-        }
-
-        @Test
-        public void testCookiePolicyIgnore() throws Exception {
-            man.setCookiePolicy(CookiePolicy.IGNORE_COOKIES);
-            man.testStarted(); // ensure policy is picked up
-            URL url = new URL("http://order.now/sub1/moo.html");
-            man.addCookieFromHeader("test1=moo1;", url);
-            man.addCookieFromHeader("test2=moo2;path=/sub1", url);
-            man.addCookieFromHeader("test2=moo3;path=/", url);
-            assertEquals(0,man.getCookieCount());// Cookies are ignored
-            Cookie cc;
-            cc=new Cookie("test1","moo1",null,"/sub1",false,0,false,false);
-            man.add(cc);
-            cc=new Cookie("test2","moo2",null,"/sub1",false,0,true,false);
-            man.add(cc);
-            cc=new Cookie("test3","moo3",null,"/",false,0,false,false);
-            man.add(cc);
-            assertEquals(3,man.getCookieCount());
-            assertEquals("/sub1",man.get(0).getPath());
-            assertEquals("/sub1",man.get(1).getPath());
-            assertEquals("/",man.get(2).getPath());
-            String s = man.getCookieHeaderForURL(url);
-            assertNull(s);
-            HC3CookieHandler hc3CookieHandler = (HC3CookieHandler) man.getCookieHandler();
-            org.apache.commons.httpclient.Cookie[] c = 
-                    hc3CookieHandler.getCookiesForUrl(man.getCookies(), url, 
-                    CookieManager.ALLOW_VARIABLE_COOKIES);
-            assertEquals(0,c.length); // Cookies again ignored
-        }
-
-        @Test
-        public void testLoad() throws Exception{
-            assertEquals(0,man.getCookieCount());
-            man.addFile(findTestPath("testfiles/cookies.txt"));
-            assertEquals(3,man.getCookieCount());
-
-            int num = 0;
-            assertEquals("name",man.get(num).getName());
-            assertEquals("value",man.get(num).getValue());
-            assertEquals("path",man.get(num).getPath());
-            assertEquals("domain",man.get(num).getDomain());
-            assertTrue(man.get(num).getSecure());
-            assertEquals(num,man.get(num).getExpires());
-
-            num++;
-            assertEquals("name2",man.get(num).getName());
-            assertEquals("value2",man.get(num).getValue());
-            assertEquals("/",man.get(num).getPath());
-            assertEquals("",man.get(num).getDomain());
-            assertFalse(man.get(num).getSecure());
-            assertEquals(0,man.get(num).getExpires());
-
-            num++;
-            assertEquals("a",man.get(num).getName());
-            assertEquals("b",man.get(num).getValue());
-            assertEquals("d",man.get(num).getPath());
-            assertEquals("c",man.get(num).getDomain());
-            assertTrue(man.get(num).getSecure());
-            assertEquals(0,man.get(num).getExpires()); // Show that maxlong now saved as 0
-        }
-}
diff --git a/test/src/org/apache/jmeter/protocol/http/sampler/TestHTTPSamplersAgainstHttpMirrorServer.java b/test/src/org/apache/jmeter/protocol/http/sampler/TestHTTPSamplersAgainstHttpMirrorServer.java
index 7fb7ef2d9..3fc726fb1 100644
--- a/test/src/org/apache/jmeter/protocol/http/sampler/TestHTTPSamplersAgainstHttpMirrorServer.java
+++ b/test/src/org/apache/jmeter/protocol/http/sampler/TestHTTPSamplersAgainstHttpMirrorServer.java
@@ -1,1453 +1,1422 @@
 /*
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  * 
  */
 
 package org.apache.jmeter.protocol.http.sampler;
 
 import java.io.ByteArrayOutputStream;
 import java.io.File;
 import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.OutputStream;
 import java.io.UnsupportedEncodingException;
 import java.net.URL;
 import java.net.URLEncoder;
 import java.util.Locale;
 
 import org.apache.jmeter.engine.util.ValueReplacer;
 import org.apache.jmeter.junit.JMeterTestCaseJUnit3;
 import org.apache.jmeter.protocol.http.control.HttpMirrorServer;
 import org.apache.jmeter.protocol.http.control.TestHTTPMirrorThread;
 import org.apache.jmeter.protocol.http.util.EncoderCache;
 import org.apache.jmeter.protocol.http.util.HTTPArgument;
 import org.apache.jmeter.protocol.http.util.HTTPConstants;
 import org.apache.jmeter.protocol.http.util.HTTPFileArg;
 import org.apache.jmeter.testelement.TestPlan;
 import org.apache.jmeter.threads.JMeterContextService;
 import org.apache.jmeter.threads.JMeterVariables;
 import org.apache.jmeter.util.JMeterUtils;
 import org.apache.oro.text.regex.MatchResult;
 import org.apache.oro.text.regex.Pattern;
 import org.apache.oro.text.regex.PatternMatcherInput;
 import org.apache.oro.text.regex.Perl5Compiler;
 import org.apache.oro.text.regex.Perl5Matcher;
 import org.junit.Assert;
 
 import junit.extensions.TestSetup;
 import junit.framework.Test;
 import junit.framework.TestSuite;
 
 /**
  * Class for performing actual samples for HTTPSampler and HTTPSampler2.
  * The samples are executed against the HttpMirrorServer, which is 
  * started when the unit tests are executed.
  */
 public class TestHTTPSamplersAgainstHttpMirrorServer extends JMeterTestCaseJUnit3 {
     private static final int HTTP_SAMPLER = 0;
-    private static final int HTTP_SAMPLER2 = 1;
     private static final int HTTP_SAMPLER3 = 2;
     
     /** The encodings used for http headers and control information */
     private static final String ISO_8859_1 = "ISO-8859-1"; // $NON-NLS-1$
     private static final String US_ASCII = "US-ASCII"; // $NON-NLS-1$
 
     private static final byte[] CRLF = { 0x0d, 0x0A };
     private static final int MIRROR_PORT = 8182; // Different from TestHTTPMirrorThread port and standard mirror server
     private static byte[] TEST_FILE_CONTENT;
 
     private static File temporaryFile;
 
     private final int item;
 
     public TestHTTPSamplersAgainstHttpMirrorServer(String arg0) {
         super(arg0);
         this.item = -1;
     }
 
     // additional ctor for processing tests which use int parameters
     public TestHTTPSamplersAgainstHttpMirrorServer(String arg0, int item) {
         super(arg0);
         this.item = item;
     }
 
     // This is used to emulate @before class and @after class
     public static Test suite(){
         final TestSuite testSuite = new TestSuite(TestHTTPSamplersAgainstHttpMirrorServer.class);
         // Add parameterised tests. For simplicity we assune each has cases 0-10
         for(int i=0; i<11; i++) {
             testSuite.addTest(new TestHTTPSamplersAgainstHttpMirrorServer("itemised_testGetRequest_Parameters", i));
-            testSuite.addTest(new TestHTTPSamplersAgainstHttpMirrorServer("itemised_testGetRequest_Parameters2", i));
             testSuite.addTest(new TestHTTPSamplersAgainstHttpMirrorServer("itemised_testGetRequest_Parameters3", i));
 
             testSuite.addTest(new TestHTTPSamplersAgainstHttpMirrorServer("itemised_testPostRequest_UrlEncoded", i));
-            testSuite.addTest(new TestHTTPSamplersAgainstHttpMirrorServer("itemised_testPostRequest_UrlEncoded2", i));
             testSuite.addTest(new TestHTTPSamplersAgainstHttpMirrorServer("itemised_testPostRequest_UrlEncoded3", i));
         }
 
         TestSetup setup = new TestSetup(testSuite){
             private HttpMirrorServer httpServer;
             @Override
             protected void setUp() throws Exception {
                     httpServer = TestHTTPMirrorThread.startHttpMirror(MIRROR_PORT);
                     // Create the test file content
                     TEST_FILE_CONTENT = "some foo content &?=01234+56789-\u007c\u2aa1\u266a\u0153\u20a1\u0115\u0364\u00c5\u2052\uc385%C3%85".getBytes("UTF-8");
 
                     // create a temporary file to make sure we always have a file to give to the PostWriter 
                     // Whereever we are or Whatever the current path is.
                     temporaryFile = File.createTempFile("TestHTTPSamplersAgainstHttpMirrorServer", "tmp");
                     OutputStream output = new FileOutputStream(temporaryFile);
                     output.write(TEST_FILE_CONTENT);
                     output.flush();
                     output.close();
             }
             
             @Override
             protected void tearDown() throws Exception {
                     // Shutdown mirror server
                     httpServer.stopServer();
                     httpServer = null;
                     // delete temporay file
                     if(!temporaryFile.delete()) {
                         Assert.fail("Could not delete file:"+temporaryFile.getAbsolutePath());
                     }
             }
         };
         return setup;
     }
     
     public void itemised_testPostRequest_UrlEncoded() throws Exception {
         testPostRequest_UrlEncoded(HTTP_SAMPLER, ISO_8859_1, item);
     }
 
-    public void itemised_testPostRequest_UrlEncoded2() throws Exception {
-        testPostRequest_UrlEncoded(HTTP_SAMPLER2, US_ASCII, item);
-    }
-
     public void itemised_testPostRequest_UrlEncoded3() throws Exception {
         testPostRequest_UrlEncoded(HTTP_SAMPLER3, US_ASCII, item);
     }
 
     public void testPostRequest_FormMultipart_0() throws Exception {
         testPostRequest_FormMultipart(HTTP_SAMPLER, ISO_8859_1);
     }
 
-    public void testPostRequest_FormMultipart2() throws Exception {
-        testPostRequest_FormMultipart(HTTP_SAMPLER2, US_ASCII);
-    }
-
     public void testPostRequest_FormMultipart3() throws Exception {
         // see https://issues.apache.org/jira/browse/HTTPCLIENT-1665
         testPostRequest_FormMultipart(HTTP_SAMPLER3, US_ASCII);
     }
 
     public void testPostRequest_FileUpload() throws Exception {
         testPostRequest_FileUpload(HTTP_SAMPLER, ISO_8859_1);
     }
 
-    public void testPostRequest_FileUpload2() throws Exception {        
-        testPostRequest_FileUpload(HTTP_SAMPLER2, US_ASCII);
-    }
-
     public void testPostRequest_FileUpload3() throws Exception {        
         // see https://issues.apache.org/jira/browse/HTTPCLIENT-1665
         testPostRequest_FileUpload(HTTP_SAMPLER3, US_ASCII);
     }
 
     public void testPostRequest_BodyFromParameterValues() throws Exception {
         testPostRequest_BodyFromParameterValues(HTTP_SAMPLER, ISO_8859_1);
     }
 
-    public void testPostRequest_BodyFromParameterValues2() throws Exception {
-        testPostRequest_BodyFromParameterValues(HTTP_SAMPLER2, US_ASCII);
-    }
-
     public void testPostRequest_BodyFromParameterValues3() throws Exception {
         testPostRequest_BodyFromParameterValues(HTTP_SAMPLER3, US_ASCII);
     }
 
     public void testGetRequest() throws Exception {
         testGetRequest(HTTP_SAMPLER);
     }
     
-    public void testGetRequest2() throws Exception {
-        testGetRequest(HTTP_SAMPLER2);
-    }
-    
     public void testGetRequest3() throws Exception {
         testGetRequest(HTTP_SAMPLER3);
     }
     
     public void itemised_testGetRequest_Parameters() throws Exception {
         testGetRequest_Parameters(HTTP_SAMPLER, item);
-    }
-    
-    public void itemised_testGetRequest_Parameters2() throws Exception {
-        testGetRequest_Parameters(HTTP_SAMPLER2, item);
-    }   
+    }  
 
     public void itemised_testGetRequest_Parameters3() throws Exception {
         testGetRequest_Parameters(HTTP_SAMPLER3, item);
     }   
 
     private void testPostRequest_UrlEncoded(int samplerType, String samplerDefaultEncoding, int test) throws Exception {
         String titleField = "title";
         String titleValue = "mytitle";
         String descriptionField = "description";
         String descriptionValue = "mydescription";
         HTTPSamplerBase sampler = createHttpSampler(samplerType);
         HTTPSampleResult res;
         String contentEncoding;
 
         switch(test) {
             case 0:
                 // Test sending data with default encoding
                 contentEncoding = "";
                 setupUrl(sampler, contentEncoding);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 checkPostRequestUrlEncoded(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, false);
                 break;
             case 1:
                 // Test sending data as ISO-8859-1
                 contentEncoding = ISO_8859_1;
                 setupUrl(sampler, contentEncoding);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 checkPostRequestUrlEncoded(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, false);
                 break;
             case 2:
                 // Test sending data as UTF-8
                 contentEncoding = "UTF-8";
                 titleValue = "mytitle2\u0153\u20a1\u0115\u00c5";
                 descriptionValue = "mydescription2\u0153\u20a1\u0115\u00c5";
                 setupUrl(sampler, contentEncoding);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 checkPostRequestUrlEncoded(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, false);
                 break;
             case 3:
                 // Test sending data as UTF-8, with values that will change when urlencoded
                 contentEncoding = "UTF-8";
                 titleValue = "mytitle3/=";
                 descriptionValue = "mydescription3   /\\";
                 setupUrl(sampler, contentEncoding);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 checkPostRequestUrlEncoded(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, false);
                 break;
             case 4:
                 // Test sending data as UTF-8, with values that have been urlencoded
                 contentEncoding = "UTF-8";
                 titleValue = "mytitle4%2F%3D";
                 descriptionValue = "mydescription4+++%2F%5C";
                 setupUrl(sampler, contentEncoding);
                 setupFormData(sampler, true, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 checkPostRequestUrlEncoded(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, true);
                 break;
             case 5:
                 // Test sending data as UTF-8, with values similar to __VIEWSTATE parameter that .net uses
                 contentEncoding = "UTF-8";
                 titleValue = "/wEPDwULLTE2MzM2OTA0NTYPZBYCAgMPZ/rA+8DZ2dnZ2dnZ2d/GNDar6OshPwdJc=";
                 descriptionValue = "mydescription5";
                 setupUrl(sampler, contentEncoding);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 checkPostRequestUrlEncoded(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, false);
                 break;
             case 6:
                 // Test sending data as UTF-8, with values similar to __VIEWSTATE parameter that .net uses,
                 // with values urlencoded, but the always encode set to false for the arguments
                 // This is how the HTTP Proxy server adds arguments to the sampler
                 contentEncoding = "UTF-8";
                 titleValue = "%2FwEPDwULLTE2MzM2OTA0NTYPZBYCAgMPZ%2FrA%2B8DZ2dnZ2dnZ2d%2FGNDar6OshPwdJc%3D";
                 descriptionValue = "mydescription6";
                 setupUrl(sampler, contentEncoding);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 ((HTTPArgument)sampler.getArguments().getArgument(0)).setAlwaysEncoded(false);
                 ((HTTPArgument)sampler.getArguments().getArgument(1)).setAlwaysEncoded(false);
                 res = executeSampler(sampler);
                 assertFalse(((HTTPArgument)sampler.getArguments().getArgument(0)).isAlwaysEncoded());
                 assertFalse(((HTTPArgument)sampler.getArguments().getArgument(1)).isAlwaysEncoded());
                 checkPostRequestUrlEncoded(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, true);
                 break;
             case 7:
                 // Test sending data as UTF-8, where user defined variables are used
                 // to set the value for form data
                 JMeterUtils.setLocale(Locale.ENGLISH);
                 TestPlan testPlan = new TestPlan();
                 JMeterVariables vars = new JMeterVariables();
                 vars.put("title_prefix", "a test\u00c5");
                 vars.put("description_suffix", "the_end");
                 JMeterContextService.getContext().setVariables(vars);
                 JMeterContextService.getContext().setSamplingStarted(true);
                 ValueReplacer replacer = new ValueReplacer();
                 replacer.setUserDefinedVariables(testPlan.getUserDefinedVariables());
                 
                 contentEncoding = "UTF-8";
                 titleValue = "${title_prefix}mytitle7\u0153\u20a1\u0115\u00c5";
                 descriptionValue = "mydescription7\u0153\u20a1\u0115\u00c5${description_suffix}";
                 setupUrl(sampler, contentEncoding);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 // Replace the variables in the sampler
                 replacer.replaceValues(sampler);
                 res = executeSampler(sampler);
                 String expectedTitleValue = "a test\u00c5mytitle7\u0153\u20a1\u0115\u00c5";
                 String expectedDescriptionValue = "mydescription7\u0153\u20a1\u0115\u00c5the_end";
                 checkPostRequestUrlEncoded(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, expectedTitleValue, descriptionField, expectedDescriptionValue, false);
                 break;
             case 8:
                 break;
             case 9:
                 break;
             case 10:
                 break;
             default:
                 fail("Unexpected switch value: "+test);
         }
         
 
 
 
 
         
 
     }
 
     private void testPostRequest_FormMultipart(int samplerType, String samplerDefaultEncoding) throws Exception {
         String titleField = "title";
         String titleValue = "mytitle";
         String descriptionField = "description";
         String descriptionValue = "mydescription";
 
         // Test sending data with default encoding
         HTTPSamplerBase sampler = createHttpSampler(samplerType);
         String contentEncoding = "";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         sampler.setDoMultipartPost(true);
         HTTPSampleResult res = executeSampler(sampler);
         checkPostRequestFormMultipart(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue);
         
         // Test sending data as ISO-8859-1
         sampler = createHttpSampler(samplerType);
         contentEncoding = ISO_8859_1;
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         sampler.setDoMultipartPost(true);
         res = executeSampler(sampler);
         checkPostRequestFormMultipart(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue);
 
         // Test sending data as UTF-8
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "mytitle\u0153\u20a1\u0115\u00c5";
         descriptionValue = "mydescription\u0153\u20a1\u0115\u00c5";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         sampler.setDoMultipartPost(true);
         res = executeSampler(sampler);
         checkPostRequestFormMultipart(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue);
         
         // Test sending data as UTF-8, with values that would have been urlencoded
         // if it was not sent as multipart
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "mytitle/=";
         descriptionValue = "mydescription   /\\";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         sampler.setDoMultipartPost(true);
         res = executeSampler(sampler);
         checkPostRequestFormMultipart(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue);
 
         // Test sending data as UTF-8, with values that have been urlencoded
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "mytitle%2F%3D";
         descriptionValue = "mydescription+++%2F%5C";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, true, titleField, titleValue, descriptionField, descriptionValue);
         sampler.setDoMultipartPost(true);
         res = executeSampler(sampler);
         String expectedTitleValue = "mytitle/=";
         String expectedDescriptionValue = "mydescription   /\\";
         checkPostRequestFormMultipart(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, expectedTitleValue, descriptionField, expectedDescriptionValue);
 
         // Test sending data as UTF-8, with values similar to __VIEWSTATE parameter that .net uses
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "/wEPDwULLTE2MzM2OTA0NTYPZBYCAgMPZ/rA+8DZ2dnZ2dnZ2d/GNDar6OshPwdJc=";
         descriptionValue = "mydescription";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         sampler.setDoMultipartPost(true);
         res = executeSampler(sampler);
         checkPostRequestFormMultipart(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue);
         
         // Test sending data as UTF-8, where user defined variables are used
         // to set the value for form data
         JMeterUtils.setLocale(Locale.ENGLISH);
         TestPlan testPlan = new TestPlan();
         JMeterVariables vars = new JMeterVariables();
         vars.put("title_prefix", "a test\u00c5");
         vars.put("description_suffix", "the_end");
         JMeterContextService.getContext().setVariables(vars);
         JMeterContextService.getContext().setSamplingStarted(true);
         ValueReplacer replacer = new ValueReplacer();
         replacer.setUserDefinedVariables(testPlan.getUserDefinedVariables());
         
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "${title_prefix}mytitle\u0153\u20a1\u0115\u00c5";
         descriptionValue = "mydescription\u0153\u20a1\u0115\u00c5${description_suffix}";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         sampler.setDoMultipartPost(true);
         // Replace the variables in the sampler
         replacer.replaceValues(sampler);
         res = executeSampler(sampler);
         expectedTitleValue = "a test\u00c5mytitle\u0153\u20a1\u0115\u00c5";
         expectedDescriptionValue = "mydescription\u0153\u20a1\u0115\u00c5the_end";
         checkPostRequestFormMultipart(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, expectedTitleValue, descriptionField, expectedDescriptionValue);
     }
 
     private void testPostRequest_FileUpload(int samplerType, String samplerDefaultEncoding) throws Exception {
         String titleField = "title";
         String titleValue = "mytitle";
         String descriptionField = "description";
         String descriptionValue = "mydescription";
         String fileField = "file1";
         String fileMimeType = "text/plain";
 
         // Test sending data with default encoding
         HTTPSamplerBase sampler = createHttpSampler(samplerType);
         String contentEncoding = "";
         setupUrl(sampler, contentEncoding);
         setupFileUploadData(sampler, false, titleField, titleValue, descriptionField, descriptionValue, fileField, temporaryFile, fileMimeType);
         HTTPSampleResult res = executeSampler(sampler);
         checkPostRequestFileUpload(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, fileField, temporaryFile, fileMimeType, TEST_FILE_CONTENT);
         
         // Test sending data as ISO-8859-1
         sampler = createHttpSampler(samplerType);
         contentEncoding = ISO_8859_1;
         setupUrl(sampler, contentEncoding);
         setupFileUploadData(sampler, false, titleField, titleValue, descriptionField, descriptionValue, fileField, temporaryFile, fileMimeType);
         res = executeSampler(sampler);
         checkPostRequestFileUpload(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, fileField, temporaryFile, fileMimeType, TEST_FILE_CONTENT);
 
         // Test sending data as UTF-8
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "mytitle\u0153\u20a1\u0115\u00c5";
         descriptionValue = "mydescription\u0153\u20a1\u0115\u00c5";
         setupUrl(sampler, contentEncoding);
         setupFileUploadData(sampler, false, titleField, titleValue, descriptionField, descriptionValue, fileField, temporaryFile, fileMimeType);
         res = executeSampler(sampler);
         checkPostRequestFileUpload(sampler, res, samplerDefaultEncoding, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, fileField, temporaryFile, fileMimeType, TEST_FILE_CONTENT);
     }
 
     private void testPostRequest_BodyFromParameterValues(int samplerType, String samplerDefaultEncoding) throws Exception {
         final String titleField = ""; // ensure only values are used
         String titleValue = "mytitle";
         final String descriptionField = ""; // ensure only values are used
         String descriptionValue = "mydescription";
 
         // Test sending data with default encoding
         HTTPSamplerBase sampler = createHttpSampler(samplerType);
         String contentEncoding = "";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         ((HTTPArgument)sampler.getArguments().getArgument(0)).setAlwaysEncoded(false);
         ((HTTPArgument)sampler.getArguments().getArgument(1)).setAlwaysEncoded(false);
         HTTPSampleResult res = executeSampler(sampler);
         String expectedPostBody = titleValue + descriptionValue;
         checkPostRequestBody(sampler, res, samplerDefaultEncoding, contentEncoding, expectedPostBody);
 
         // Test sending data as ISO-8859-1
         sampler = createHttpSampler(samplerType);
         contentEncoding = ISO_8859_1;
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         ((HTTPArgument)sampler.getArguments().getArgument(0)).setAlwaysEncoded(false);
         ((HTTPArgument)sampler.getArguments().getArgument(1)).setAlwaysEncoded(false);
         res = executeSampler(sampler);
         expectedPostBody = titleValue + descriptionValue;
         checkPostRequestBody(sampler, res, samplerDefaultEncoding, contentEncoding, expectedPostBody);
 
         // Test sending data as UTF-8
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "mytitle\u0153\u20a1\u0115\u00c5";
         descriptionValue = "mydescription\u0153\u20a1\u0115\u00c5";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         ((HTTPArgument)sampler.getArguments().getArgument(0)).setAlwaysEncoded(false);
         ((HTTPArgument)sampler.getArguments().getArgument(1)).setAlwaysEncoded(false);
         res = executeSampler(sampler);
         expectedPostBody = titleValue + descriptionValue;
         checkPostRequestBody(sampler, res, samplerDefaultEncoding, contentEncoding, expectedPostBody);
 
         // Test sending data as UTF-8, with values that will change when urlencoded
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "mytitle/=";
         descriptionValue = "mydescription   /\\";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         ((HTTPArgument)sampler.getArguments().getArgument(0)).setAlwaysEncoded(false);
         ((HTTPArgument)sampler.getArguments().getArgument(1)).setAlwaysEncoded(false);
         res = executeSampler(sampler);
         expectedPostBody = titleValue + descriptionValue;
         checkPostRequestBody(sampler, res, samplerDefaultEncoding, contentEncoding, expectedPostBody);
 
         // Test sending data as UTF-8, with values that will change when urlencoded, and where
         // we tell the sampler to urlencode the parameter value
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "mytitle/=";
         descriptionValue = "mydescription   /\\";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, true, titleField, titleValue, descriptionField, descriptionValue);
         res = executeSampler(sampler);
         expectedPostBody = URLEncoder.encode(titleValue + descriptionValue, contentEncoding);
         checkPostRequestBody(sampler, res, samplerDefaultEncoding, contentEncoding, expectedPostBody);
 
         // Test sending data as UTF-8, with values that have been urlencoded
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "mytitle%2F%3D";
         descriptionValue = "mydescription+++%2F%5C";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         ((HTTPArgument)sampler.getArguments().getArgument(0)).setAlwaysEncoded(false);
         ((HTTPArgument)sampler.getArguments().getArgument(1)).setAlwaysEncoded(false);
         res = executeSampler(sampler);
         expectedPostBody = titleValue + descriptionValue;
         checkPostRequestBody(sampler, res, samplerDefaultEncoding, contentEncoding, expectedPostBody);
 
         // Test sending data as UTF-8, with values that have been urlencoded, and
         // where we tell the sampler to urlencode the parameter values
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "mytitle%2F%3D";
         descriptionValue = "mydescription+++%2F%5C";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, true, titleField, titleValue, descriptionField, descriptionValue);
         res = executeSampler(sampler);
         expectedPostBody = titleValue + descriptionValue;
         checkPostRequestBody(sampler, res, samplerDefaultEncoding, contentEncoding, expectedPostBody);
 
         // Test sending data as UTF-8, with values similar to __VIEWSTATE parameter that .net uses
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "/wEPDwULLTE2MzM2OTA0NTYPZBYCAgMPZ/rA+8DZ2dnZ2dnZ2d/GNDar6OshPwdJc=";
         descriptionValue = "mydescription";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         ((HTTPArgument)sampler.getArguments().getArgument(0)).setAlwaysEncoded(false);
         ((HTTPArgument)sampler.getArguments().getArgument(1)).setAlwaysEncoded(false);
         res = executeSampler(sampler);
         expectedPostBody = titleValue + descriptionValue;
         checkPostRequestBody(sampler, res, samplerDefaultEncoding, contentEncoding, expectedPostBody);
 
         // Test sending data as UTF-8, with + as part of the value,
         // where the value is set in sampler as not urluencoded, but the 
         // isalwaysencoded flag of the argument is set to false.
         // This mimics the HTTPConstants.addNonEncodedArgument, which the
         // Proxy server calls in some cases
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "mytitle++";
         descriptionValue = "mydescription+";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         ((HTTPArgument)sampler.getArguments().getArgument(0)).setAlwaysEncoded(false);
         ((HTTPArgument)sampler.getArguments().getArgument(1)).setAlwaysEncoded(false);
         res = executeSampler(sampler);
         expectedPostBody = titleValue + descriptionValue;
         checkPostRequestBody(sampler, res, samplerDefaultEncoding, contentEncoding, expectedPostBody);
 
         // Test sending data as UTF-8, where user defined variables are used
         // to set the value for form data
         JMeterUtils.setLocale(Locale.ENGLISH);
         TestPlan testPlan = new TestPlan();
         JMeterVariables vars = new JMeterVariables();
         vars.put("title_prefix", "a test\u00c5");
         vars.put("description_suffix", "the_end");
         JMeterContextService.getContext().setVariables(vars);
         JMeterContextService.getContext().setSamplingStarted(true);
         ValueReplacer replacer = new ValueReplacer();
         replacer.setUserDefinedVariables(testPlan.getUserDefinedVariables());
         
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         titleValue = "${title_prefix}mytitle\u0153\u20a1\u0115\u00c5";
         descriptionValue = "mydescription\u0153\u20a1\u0115\u00c5${description_suffix}";
         setupUrl(sampler, contentEncoding);
         setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
         ((HTTPArgument)sampler.getArguments().getArgument(0)).setAlwaysEncoded(false);
         ((HTTPArgument)sampler.getArguments().getArgument(1)).setAlwaysEncoded(false);
         // Replace the variables in the sampler
         replacer.replaceValues(sampler);
         res = executeSampler(sampler);
         String expectedTitleValue = "a test\u00c5mytitle\u0153\u20a1\u0115\u00c5";
         String expectedDescriptionValue = "mydescription\u0153\u20a1\u0115\u00c5the_end";
         expectedPostBody = expectedTitleValue+ expectedDescriptionValue;
         checkPostRequestBody(sampler, res, samplerDefaultEncoding, contentEncoding, expectedPostBody);
     }
 
     private void testGetRequest(int samplerType) throws Exception {
         // Test sending simple HTTP get
         // Test sending data with default encoding
         HTTPSamplerBase sampler = createHttpSampler(samplerType);
         String contentEncoding = "";
         setupUrl(sampler, contentEncoding);
         sampler.setMethod(HTTPConstants.GET);
         HTTPSampleResult res = executeSampler(sampler);
         checkGetRequest(sampler, res);
         
         // Test sending data with ISO-8859-1 encoding
         sampler = createHttpSampler(samplerType);
         contentEncoding = ISO_8859_1;
         setupUrl(sampler, contentEncoding);
         sampler.setMethod(HTTPConstants.GET);
         res = executeSampler(sampler);
         checkGetRequest(sampler, res);
 
         // Test sending data with UTF-8 encoding
         sampler = createHttpSampler(samplerType);
         contentEncoding = "UTF-8";
         setupUrl(sampler, contentEncoding);
         sampler.setMethod(HTTPConstants.GET);
         res = executeSampler(sampler);
         checkGetRequest(sampler, res);
     }
 
     private void testGetRequest_Parameters(int samplerType, int test) throws Exception {
         String titleField = "title";
         String titleValue = "mytitle";
         String descriptionField = "description";
         String descriptionValue = "mydescription";
         HTTPSamplerBase sampler = createHttpSampler(samplerType);
         String contentEncoding;
         HTTPSampleResult res;
         URL executedUrl;
    
         switch(test) {
             case 0:
                 // Test sending simple HTTP get
                 // Test sending data with default encoding
                 contentEncoding = "";
                 setupUrl(sampler, contentEncoding);
                 sampler.setMethod(HTTPConstants.GET);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 sampler.setRunningVersion(true);
                 executedUrl = sampler.getUrl();
                 sampler.setRunningVersion(false);
                 checkGetRequest_Parameters(sampler, res, contentEncoding, executedUrl, titleField, titleValue, descriptionField, descriptionValue, false);
                 break;
             case 1:
                 // Test sending data with ISO-8859-1 encoding
                 sampler = createHttpSampler(samplerType);
                 contentEncoding = ISO_8859_1;
                 titleValue = "mytitle1\uc385";
                 descriptionValue = "mydescription1\uc385";
                 setupUrl(sampler, contentEncoding);
                 sampler.setMethod(HTTPConstants.GET);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 sampler.setRunningVersion(true);
                 executedUrl = sampler.getUrl();
                 sampler.setRunningVersion(false);
                 checkGetRequest_Parameters(sampler, res, contentEncoding, executedUrl, titleField, titleValue, descriptionField, descriptionValue, false);
                 break;
             case 2:
                 // Test sending data with UTF-8 encoding
                 sampler = createHttpSampler(samplerType);
                 contentEncoding = "UTF-8";
                 titleValue = "mytitle2\u0153\u20a1\u0115\u00c5";
                 descriptionValue = "mydescription2\u0153\u20a1\u0115\u00c5";
                 setupUrl(sampler, contentEncoding);
                 sampler.setMethod(HTTPConstants.GET);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 sampler.setRunningVersion(true);
                 executedUrl = sampler.getUrl();
                 sampler.setRunningVersion(false);
                 checkGetRequest_Parameters(sampler, res, contentEncoding, executedUrl, titleField, titleValue, descriptionField, descriptionValue, false);
                 break;
             case 3:
                 // Test sending data as UTF-8, with values that changes when urlencoded
                 sampler = createHttpSampler(samplerType);
                 contentEncoding = "UTF-8";
                 titleValue = "mytitle3\u0153+\u20a1 \u0115&yes\u00c5";
                 descriptionValue = "mydescription3 \u0153 \u20a1 \u0115 \u00c5";
                 setupUrl(sampler, contentEncoding);
                 sampler.setMethod(HTTPConstants.GET);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 sampler.setRunningVersion(true);
                 executedUrl = sampler.getUrl();
                 sampler.setRunningVersion(false);
                 checkGetRequest_Parameters(sampler, res, contentEncoding, executedUrl, titleField, titleValue, descriptionField, descriptionValue, false);
                 break;
             case 4:
                 // Test sending data as UTF-8, with values that have been urlencoded
                 sampler = createHttpSampler(samplerType);
                 contentEncoding = "UTF-8";
                 titleValue = "mytitle4%2F%3D";
                 descriptionValue = "mydescription4+++%2F%5C";
                 setupUrl(sampler, contentEncoding);
                 sampler.setMethod(HTTPConstants.GET);
                 setupFormData(sampler, true, titleField, titleValue, descriptionField, descriptionValue);
                 res = executeSampler(sampler);
                 sampler.setRunningVersion(true);
                 executedUrl = sampler.getUrl();
                 sampler.setRunningVersion(false);
                 checkGetRequest_Parameters(sampler, res, contentEncoding, executedUrl, titleField, titleValue, descriptionField, descriptionValue, true);
                 break;
             case 5:
                 // Test sending data as UTF-8, where user defined variables are used
                 // to set the value for form data
                 JMeterUtils.setLocale(Locale.ENGLISH);
                 TestPlan testPlan = new TestPlan();
                 JMeterVariables vars = new JMeterVariables();
                 vars.put("title_prefix", "a test\u00c5");
                 vars.put("description_suffix", "the_end");
                 JMeterContextService.getContext().setVariables(vars);
                 JMeterContextService.getContext().setSamplingStarted(true);
                 ValueReplacer replacer = new ValueReplacer();
                 replacer.setUserDefinedVariables(testPlan.getUserDefinedVariables());
                 
                 sampler = createHttpSampler(samplerType);
                 contentEncoding = "UTF-8";
                 titleValue = "${title_prefix}mytitle5\u0153\u20a1\u0115\u00c5";
                 descriptionValue = "mydescription5\u0153\u20a1\u0115\u00c5${description_suffix}";
                 setupUrl(sampler, contentEncoding);
                 sampler.setMethod(HTTPConstants.GET);
                 setupFormData(sampler, false, titleField, titleValue, descriptionField, descriptionValue);
                 // Replace the variables in the sampler
                 replacer.replaceValues(sampler);
                 res = executeSampler(sampler);
                 String expectedTitleValue = "a test\u00c5mytitle5\u0153\u20a1\u0115\u00c5";
                 String expectedDescriptionValue = "mydescription5\u0153\u20a1\u0115\u00c5the_end";
                 sampler.setRunningVersion(true);
                 executedUrl = sampler.getUrl();
                 sampler.setRunningVersion(false);
                 checkGetRequest_Parameters(sampler, res, contentEncoding, executedUrl, titleField, expectedTitleValue, descriptionField, expectedDescriptionValue, false);
                 break;
             case 6:
                 break;
             case 7:
                 break;
             case 8:
                 break;
             case 9:
                 break;
             case 10:
                 break;
             default:
                 fail("Unexpected switch value: "+test);
         }
     }
     
     private HTTPSampleResult executeSampler(HTTPSamplerBase sampler) {
         sampler.setRunningVersion(true);
         sampler.threadStarted();
         HTTPSampleResult res = (HTTPSampleResult) sampler.sample();
         sampler.threadFinished();
         sampler.setRunningVersion(false);
         return res;
     }
     
     private void checkPostRequestUrlEncoded(
             HTTPSamplerBase sampler,
             HTTPSampleResult res,
             String samplerDefaultEncoding,
             String contentEncoding,
             String titleField,
             String titleValue,
             String descriptionField,
             String descriptionValue,
             boolean valuesAlreadyUrlEncoded) throws IOException {
         if(contentEncoding == null || contentEncoding.length() == 0) {
             contentEncoding = samplerDefaultEncoding;
         }
         // Check URL
         assertEquals(sampler.getUrl(), res.getURL());
         String expectedPostBody = null;
         if(!valuesAlreadyUrlEncoded) {
             String expectedTitle = URLEncoder.encode(titleValue, contentEncoding);
             String expectedDescription = URLEncoder.encode(descriptionValue, contentEncoding);
             expectedPostBody = titleField + "=" + expectedTitle + "&" + descriptionField + "=" + expectedDescription;
         }
         else {
             expectedPostBody = titleField + "=" + titleValue + "&" + descriptionField + "=" + descriptionValue;
         }
         // Check the request
         checkPostRequestBody(
             sampler,
             res,
             samplerDefaultEncoding,
             contentEncoding,
             expectedPostBody
         );        
     }
 
     private void checkPostRequestFormMultipart(
             HTTPSamplerBase sampler,
             HTTPSampleResult res,
             String samplerDefaultEncoding,
             String contentEncoding,
             String titleField,
             String titleValue,
             String descriptionField,
             String descriptionValue) throws IOException {
         if(contentEncoding == null || contentEncoding.length() == 0) {
             contentEncoding = samplerDefaultEncoding;
         }
         // Check URL
         assertEquals(sampler.getUrl(), res.getURL());
         String boundaryString = getBoundaryStringFromContentType(res.getRequestHeaders());
         assertNotNull(boundaryString);
         byte[] expectedPostBody = createExpectedFormdataOutput(boundaryString, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, true, true);
         // Check request headers
         checkHeaderTypeLength(res.getRequestHeaders(), "multipart/form-data" + "; boundary=" + boundaryString, expectedPostBody.length);
         // Check post body from the result query string
         checkArraysHaveSameContent(expectedPostBody, res.getQueryString().getBytes(contentEncoding), contentEncoding, res);
 
         // Find the data sent to the mirror server, which the mirror server is sending back to us
         String dataSentToMirrorServer = new String(res.getResponseData(), contentEncoding);
         int posDividerHeadersAndBody = getPositionOfBody(dataSentToMirrorServer);
         String headersSent = null;
         String bodySent = "";
         if(posDividerHeadersAndBody >= 0) {
             headersSent = dataSentToMirrorServer.substring(0, posDividerHeadersAndBody);
             // Skip the blank line with crlf dividing headers and body
             bodySent = dataSentToMirrorServer.substring(posDividerHeadersAndBody+2);
         }
         else {
             fail("No header and body section found");
         }
          // Check response headers
         checkHeaderTypeLength(headersSent, "multipart/form-data" + "; boundary=" + boundaryString, expectedPostBody.length);
         // Check post body which was sent to the mirror server, and
         // sent back by the mirror server
         checkArraysHaveSameContent(expectedPostBody, bodySent.getBytes(contentEncoding), contentEncoding, res);
         // Check method, path and query sent
         checkMethodPathQuery(headersSent, sampler.getMethod(), sampler.getPath(), (String) null, res);
     }
     
     private void checkPostRequestFileUpload(
             HTTPSamplerBase sampler,
             HTTPSampleResult res,
             String samplerDefaultEncoding,
             String contentEncoding,
             String titleField,
             String titleValue,
             String descriptionField,
             String descriptionValue,
             String fileField,
             File fileValue,
             String fileMimeType,
             byte[] fileContent) throws IOException {
         if(contentEncoding == null || contentEncoding.length() == 0) {
             contentEncoding = samplerDefaultEncoding;
         }
         // Check URL
         assertEquals(sampler.getUrl(), res.getURL());
         String boundaryString = getBoundaryStringFromContentType(res.getRequestHeaders());
         assertNotNull(boundaryString);
         byte[] expectedPostBody = createExpectedFormAndUploadOutput(boundaryString, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, fileField, fileValue, fileMimeType, fileContent);
         // Check request headers
         checkHeaderTypeLength(res.getRequestHeaders(), "multipart/form-data" + "; boundary=" + boundaryString, expectedPostBody.length);
         // We cannot check post body from the result query string, since that will not contain
         // the actual file content, but placeholder text for file content
         //checkArraysHaveSameContent(expectedPostBody, res.getQueryString().getBytes(contentEncoding));
 
         // Find the data sent to the mirror server, which the mirror server is sending back to us
         String headersSent = getHeadersSent(res.getResponseData());
         if(headersSent == null) {
             fail("No header and body section found");
         }
         // Check response headers
         checkHeaderTypeLength(headersSent, "multipart/form-data" + "; boundary=" + boundaryString, expectedPostBody.length);
         byte[] bodySent = getBodySent(res.getResponseData());
         assertNotNull("Sent body should not be null", bodySent);
         // Check post body which was sent to the mirror server, and
         // sent back by the mirror server
         checkArraysHaveSameContent(expectedPostBody, bodySent, contentEncoding, res);
         // Check method, path and query sent
         checkMethodPathQuery(headersSent, sampler.getMethod(), sampler.getPath(), (String) null, res);
     }
 
     private void checkPostRequestBody(
             HTTPSamplerBase sampler,
             HTTPSampleResult res,
             String samplerDefaultEncoding,
             String contentEncoding,
             String expectedPostBody) throws IOException {
         if(contentEncoding == null || contentEncoding.length() == 0) {
             contentEncoding = samplerDefaultEncoding;
         }
         // Check URL
         assertEquals(sampler.getUrl(), res.getURL());
         // Check request headers
         checkHeaderTypeLength(res.getRequestHeaders(), HTTPConstants.APPLICATION_X_WWW_FORM_URLENCODED, expectedPostBody.getBytes(contentEncoding).length);
          // Check post body from the result query string
         checkArraysHaveSameContent(expectedPostBody.getBytes(contentEncoding), res.getQueryString().getBytes(contentEncoding), contentEncoding, res);
 
         // Find the data sent to the mirror server, which the mirror server is sending back to us
         String dataSentToMirrorServer = new String(res.getResponseData(), contentEncoding);
         int posDividerHeadersAndBody = getPositionOfBody(dataSentToMirrorServer);
         String headersSent = null;
         String bodySent = "";
         if(posDividerHeadersAndBody >= 0) {
             headersSent = dataSentToMirrorServer.substring(0, posDividerHeadersAndBody);
             // Skip the blank line with crlf dividing headers and body
             bodySent = dataSentToMirrorServer.substring(posDividerHeadersAndBody+2);
         }
         else {
             fail("No header and body section found");
         }
         // Check response headers
         checkHeaderTypeLength(headersSent, HTTPConstants.APPLICATION_X_WWW_FORM_URLENCODED, expectedPostBody.getBytes(contentEncoding).length);
         // Check post body which was sent to the mirror server, and
         // sent back by the mirror server
         checkArraysHaveSameContent(expectedPostBody.getBytes(contentEncoding), bodySent.getBytes(contentEncoding), contentEncoding, res);
         // Check method, path and query sent
         checkMethodPathQuery(headersSent, sampler.getMethod(), sampler.getPath(), (String) null, res);
     }
 
     private void checkGetRequest(
             HTTPSamplerBase sampler,
             HTTPSampleResult res
             ) throws IOException {
         // Check URL
         assertEquals(sampler.getUrl(), res.getURL());
         // Check method
         assertEquals(sampler.getMethod(), res.getHTTPMethod());
         // Check that the query string is empty
         assertEquals(0, res.getQueryString().length());
 
         // Find the data sent to the mirror server, which the mirror server is sending back to us
         String dataSentToMirrorServer = new String(res.getResponseData(), EncoderCache.URL_ARGUMENT_ENCODING);
         int posDividerHeadersAndBody = getPositionOfBody(dataSentToMirrorServer);
         String headersSent = null;
         String bodySent = "";
         if(posDividerHeadersAndBody >= 0) {
             headersSent = dataSentToMirrorServer.substring(0, posDividerHeadersAndBody);
             // Skip the blank line with crlf dividing headers and body
             bodySent = dataSentToMirrorServer.substring(posDividerHeadersAndBody+2);
         }
         else {
             fail("No header and body section found");
         }
         // No body should have been sent
         assertEquals(bodySent.length(), 0);
         // Check method, path and query sent
         checkMethodPathQuery(headersSent, sampler.getMethod(), sampler.getPath(), (String) null, res);
     }
     
     private void checkGetRequest_Parameters(
             HTTPSamplerBase sampler,
             HTTPSampleResult res,
             String contentEncoding,
             URL executedUrl,
             String titleField,
             String titleValue,
             String descriptionField,
             String descriptionValue,
             boolean valuesAlreadyUrlEncoded) throws IOException {
         if(contentEncoding == null || contentEncoding.length() == 0) {
             contentEncoding = EncoderCache.URL_ARGUMENT_ENCODING;
         }
         // Check URL
         assertEquals(executedUrl, res.getURL());
         // Check method
         assertEquals(sampler.getMethod(), res.getHTTPMethod());
         // Cannot check the query string of the result, because the mirror server
         // replies without including query string in URL
         
         String expectedQueryString = null;
         if(!valuesAlreadyUrlEncoded) {
             String expectedTitle = URLEncoder.encode(titleValue, contentEncoding);
             String expectedDescription = URLEncoder.encode(descriptionValue, contentEncoding);
             expectedQueryString = titleField + "=" + expectedTitle + "&" + descriptionField + "=" + expectedDescription;
         }
         else {
             expectedQueryString = titleField + "=" + titleValue + "&" + descriptionField + "=" + descriptionValue;
         }
 
         // Find the data sent to the mirror server, which the mirror server is sending back to us
         String dataSentToMirrorServer = new String(res.getResponseData(), EncoderCache.URL_ARGUMENT_ENCODING);
         int posDividerHeadersAndBody = getPositionOfBody(dataSentToMirrorServer);
         String headersSent = null;
         String bodySent = "";
         if(posDividerHeadersAndBody >= 0) {
             headersSent = dataSentToMirrorServer.substring(0, posDividerHeadersAndBody);
             // Skip the blank line with crlf dividing headers and body
             bodySent = dataSentToMirrorServer.substring(posDividerHeadersAndBody+2);
         }
         else {
             fail("No header and body section found in: ["+dataSentToMirrorServer+"]");
         }
         // No body should have been sent
         assertEquals(bodySent.length(), 0);
         // Check method, path and query sent
         checkMethodPathQuery(headersSent, sampler.getMethod(), sampler.getPath(), expectedQueryString, res);
     }
     
     private void checkMethodPathQuery(
             String headersSent,
             String expectedMethod,
             String expectedPath,
             String expectedQueryString,
             HTTPSampleResult res
             )
             throws IOException {
         // Check the Request URI sent to the mirror server, and
         // sent back by the mirror server
         int indexFirstSpace = headersSent.indexOf(' ');
         int indexSecondSpace = headersSent.indexOf(' ', headersSent.length() > indexFirstSpace ? indexFirstSpace + 1 : indexFirstSpace);
         if(indexFirstSpace <= 0 && indexSecondSpace <= 0 || indexFirstSpace == indexSecondSpace) {
             fail("Could not find method and URI sent");
         }
         String methodSent = headersSent.substring(0, indexFirstSpace);
         assertEquals(expectedMethod, methodSent);
         String uriSent = headersSent.substring(indexFirstSpace + 1, indexSecondSpace);
         int indexQueryStart = uriSent.indexOf('?');
         if(expectedQueryString != null && expectedQueryString.length() > 0) {
             // We should have a query string part
             if(indexQueryStart <= 0 || (indexQueryStart == uriSent.length() - 1)) {
                 fail("Could not find query string in URI");
             }
         }
         else {
             if(indexQueryStart > 0) {
                 // We should not have a query string part
                 fail("Query string present in URI");
             }
             else {
                 indexQueryStart = uriSent.length();
             }
         }
         // Check path
         String pathSent = uriSent.substring(0, indexQueryStart);
         assertEquals(expectedPath, pathSent);
         // Check query
         if(expectedQueryString != null && expectedQueryString.length() > 0) {
             String queryStringSent = uriSent.substring(indexQueryStart + 1);
             // Is it only the parameter values which are encoded in the specified
             // content encoding, the rest of the query is encoded in UTF-8
             // Therefore we compare the whole query using UTF-8
             checkArraysHaveSameContent(expectedQueryString.getBytes(EncoderCache.URL_ARGUMENT_ENCODING), queryStringSent.getBytes(EncoderCache.URL_ARGUMENT_ENCODING), EncoderCache.URL_ARGUMENT_ENCODING, res);
         }
     }
 
     private String getHeadersSent(byte[] responseData) throws IOException {
         // Find the data sent to the mirror server, which the mirror server is sending back to us
         // We assume the headers are in ISO_8859_1, and the body can be in any content encoding.
         String dataSentToMirrorServer = new String(responseData, ISO_8859_1);
         int posDividerHeadersAndBody = getPositionOfBody(dataSentToMirrorServer);
         String headersSent = null;
         if(posDividerHeadersAndBody >= 0) {
             headersSent = dataSentToMirrorServer.substring(0, posDividerHeadersAndBody);
         }
         return headersSent;
     }
 
     private byte[] getBodySent(byte[] responseData) throws IOException {
         // Find the data sent to the mirror server, which the mirror server is sending back to us
         // We assume the headers are in ISO_8859_1, and the body can be in any content encoding.
         // Therefore we get the data sent in ISO_8859_1, to be able to determine the end of the
         // header part, and then we just construct a byte array to hold the body part, not taking
         // encoding of the body into consideration, because it can contain file data, which is
         // sent as raw byte data
         byte[] bodySent = null;
         String headersSent = getHeadersSent(responseData);
         if(headersSent != null) {
             // Get the content length, it tells us how much data to read
             // TODO : Maybe support chunked encoding, then we cannot rely on content length
             String contentLengthValue = getSentRequestHeaderValue(headersSent, HTTPConstants.HEADER_CONTENT_LENGTH);
             int contentLength = -1;
             if(contentLengthValue != null) {
                 contentLength = Integer.parseInt(contentLengthValue);
             }
             else {
                 fail("Did not receive any content-length header");
             }
             bodySent = new byte[contentLength];
             System.arraycopy(responseData, responseData.length - contentLength, bodySent, 0, contentLength);
         }
         return bodySent;
     }
 
     private boolean isInRequestHeaders(String requestHeaders, String headerName, String headerValue) {
         return checkRegularExpression(requestHeaders, headerName + ": " + headerValue);
     }
   
     // Java 1.6.0_22+ no longer allows Content-Length to be set, so don't check it.
     // See: http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6996110
     // TODO any point in checking the other headers?
     private void checkHeaderTypeLength(String requestHeaders, String contentType, int contentLen) {
         boolean typeOK = isInRequestHeaders(requestHeaders, HTTPConstants.HEADER_CONTENT_TYPE, contentType);
 //        boolean lengOK = isInRequestHeaders(requestHeaders, HTTPConstants.HEADER_CONTENT_LENGTH, Integer.toString(contentLen));
         if (!typeOK){
             fail("Expected type:" + contentType + " in:\n"+ requestHeaders);
         }
 //        if (!lengOK){
 //            fail("Expected & length: " +contentLen + " in:\n"+requestHeaders);
 //        }
     }
    
     private String getSentRequestHeaderValue(String requestHeaders, String headerName) {
         Perl5Matcher localMatcher = JMeterUtils.getMatcher();
         String expression = ".*" + headerName + ": (\\d*).*";
         Pattern pattern = JMeterUtils.getPattern(expression, Perl5Compiler.READ_ONLY_MASK | Perl5Compiler.CASE_INSENSITIVE_MASK | Perl5Compiler.SINGLELINE_MASK);
         if(localMatcher.matches(requestHeaders, pattern)) {
             // The value is in the first group, group 0 is the whole match
             return localMatcher.getMatch().group(1);
         }
         return null;
     }
 
     private boolean checkRegularExpression(String stringToCheck, String regularExpression) {
         Perl5Matcher localMatcher = JMeterUtils.getMatcher();
         Pattern pattern = JMeterUtils.getPattern(regularExpression, Perl5Compiler.READ_ONLY_MASK | Perl5Compiler.CASE_INSENSITIVE_MASK | Perl5Compiler.SINGLELINE_MASK);
         return localMatcher.contains(stringToCheck, pattern);
     }
 
     private int getPositionOfBody(String stringToCheck) {
         Perl5Matcher localMatcher = JMeterUtils.getMatcher();
         // The headers and body are divided by a blank line
         String regularExpression = "^.$"; 
         Pattern pattern = JMeterUtils.getPattern(regularExpression, Perl5Compiler.READ_ONLY_MASK | Perl5Compiler.CASE_INSENSITIVE_MASK | Perl5Compiler.MULTILINE_MASK);
         
         PatternMatcherInput input = new PatternMatcherInput(stringToCheck);
         while(localMatcher.contains(input, pattern)) {
             MatchResult match = localMatcher.getMatch();
             return match.beginOffset(0);
         }
         // No divider was found
         return -1;
     }
 
     private String getBoundaryStringFromContentType(String requestHeaders) {
         Perl5Matcher localMatcher = JMeterUtils.getMatcher();
         String regularExpression = "^" + HTTPConstants.HEADER_CONTENT_TYPE + ": multipart/form-data; boundary=(.+)$"; 
         Pattern pattern = JMeterUtils.getPattern(regularExpression, Perl5Compiler.READ_ONLY_MASK | Perl5Compiler.CASE_INSENSITIVE_MASK | Perl5Compiler.MULTILINE_MASK);
         if(localMatcher.contains(requestHeaders, pattern)) {
             MatchResult match = localMatcher.getMatch();
             String matchString =  match.group(1);
             // Header may contain ;charset= , regexp extracts it so computed boundary is wrong
             int indexOf = matchString.indexOf(';');
             if(indexOf>=0) {
                 return matchString.substring(0, indexOf);
             } else {
                 return matchString;
             }
         }
         else {
             return null;
         }
     }
 
     private void setupUrl(HTTPSamplerBase sampler, String contentEncoding) {
         String protocol = "http";
         // String domain = "localhost";
         String domain = "localhost";
         String path = "/test/somescript.jsp";
         sampler.setProtocol(protocol);
         sampler.setMethod(HTTPConstants.POST);
         sampler.setPath(path);
         sampler.setDomain(domain);
         sampler.setPort(MIRROR_PORT);
         sampler.setContentEncoding(contentEncoding);
     }
 
     /**
      * Setup the form data with specified values
      * 
      * @param httpSampler
      */
     private void setupFormData(HTTPSamplerBase httpSampler, boolean isEncoded, String titleField, String titleValue, String descriptionField, String descriptionValue) {
         if(isEncoded) {
             httpSampler.addEncodedArgument(titleField, titleValue);
             httpSampler.addEncodedArgument(descriptionField, descriptionValue);
         }
         else {
             httpSampler.addArgument(titleField, titleValue);
             httpSampler.addArgument(descriptionField, descriptionValue);
         }
     }
 
     /**
      * Setup the form data with specified values, and file to upload
      * 
      * @param httpSampler
      */
     private void setupFileUploadData(
             HTTPSamplerBase httpSampler,
             boolean isEncoded,
             String titleField,
             String titleValue,
             String descriptionField,
             String descriptionValue,
             String fileField,
             File fileValue,
             String fileMimeType) {
         // Set the form data
         setupFormData(httpSampler, isEncoded, titleField, titleValue, descriptionField, descriptionValue);
         // Set the file upload data
         HTTPFileArg[] hfa = {new HTTPFileArg(fileValue == null ? "" : fileValue.getAbsolutePath(), fileField, fileMimeType)};
         httpSampler.setHTTPFiles(hfa);
 
     }
 
     /**
      * Check that the two byte arrays have identical content
      * 
      * @param expected
      * @param actual
      * @throws UnsupportedEncodingException 
      */
     private void checkArraysHaveSameContent(byte[] expected, byte[] actual, String encoding, HTTPSampleResult res) throws UnsupportedEncodingException {
         if(expected != null && actual != null) {
             if(expected.length != actual.length) {
                 System.out.println("\n>>>>>>>>>>>>>>>>>>>> expected:");
                 System.out.println(new String(expected, encoding));
                 System.out.println("==================== actual:");
                 System.out.println(new String(actual, encoding));
                 System.out.println("<<<<<<<<<<<<<<<<<<<<");
                 if (res != null) {
                     System.out.println("URL="+res.getUrlAsString());
                 }
                 fail("arrays have different length, expected is " + expected.length + ", actual is " + actual.length);
             }
             else {
                 for(int i = 0; i < expected.length; i++) {
                     if(expected[i] != actual[i]) {
                         System.out.println("\n>>>>>>>>>>>>>>>>>>>> expected:");
                         System.out.println(new String(expected,0,i+1, encoding));
                         System.out.println("==================== actual:");
                         System.out.println(new String(actual,0,i+1, encoding));
                         System.out.println("<<<<<<<<<<<<<<<<<<<<");
 /*                        
                         // Useful to when debugging
                         for(int j = 0; j  < expected.length; j++) {
                             System.out.print(expected[j] + " ");
                         }
                         System.out.println();
                         for(int j = 0; j  < actual.length; j++) {
                             System.out.print(actual[j] + " ");
                         }
                         System.out.println();
 */                        
                         if (res != null) {
                             System.out.println("URL="+res.getUrlAsString());
                         }
                         fail("byte at position " + i + " is different, expected is " + expected[i] + ", actual is " + actual[i]);
                     }
                 }
             }
         }
         else {
             if (res != null) {
                 System.out.println("URL="+res.getUrlAsString());
             }
             fail("expected or actual byte arrays were null");
         }
     }
     
     /**
      * Create the expected output multipart/form-data, with only form data,
      * and no file multipart.
      * This method is copied from the PostWriterTest class
      * 
      * @param lastMultipart true if this is the last multipart in the request
      */
     private byte[] createExpectedFormdataOutput(
             String boundaryString,
             String contentEncoding,
             String titleField,
             String titleValue,
             String descriptionField,
             String descriptionValue,
             boolean firstMultipart,
             boolean lastMultipart) throws IOException {
         // The encoding used for http headers and control information
         final byte[] DASH_DASH = "--".getBytes(ISO_8859_1);
 
         final ByteArrayOutputStream output = new ByteArrayOutputStream();
         if(firstMultipart) {
             output.write(DASH_DASH);
             output.write(boundaryString.getBytes(ISO_8859_1));
             output.write(CRLF);
         }
         output.write("Content-Disposition: form-data; name=\"".getBytes(ISO_8859_1));
         output.write(titleField.getBytes(ISO_8859_1));
         output.write("\"".getBytes(ISO_8859_1));
         output.write(CRLF);
         output.write("Content-Type: text/plain".getBytes(ISO_8859_1));
         if(contentEncoding != null) {
             output.write("; charset=".getBytes(ISO_8859_1));
             output.write(contentEncoding.getBytes(ISO_8859_1));
         }
         output.write(CRLF);
         output.write("Content-Transfer-Encoding: 8bit".getBytes(ISO_8859_1));
         output.write(CRLF);
         output.write(CRLF);
         if(contentEncoding != null) {
             output.write(titleValue.getBytes(contentEncoding));
         }
         else {
             output.write(titleValue.getBytes()); // TODO - charset?
         }
         output.write(CRLF);
         output.write(DASH_DASH);
         output.write(boundaryString.getBytes(ISO_8859_1));
         output.write(CRLF);
         output.write("Content-Disposition: form-data; name=\"".getBytes(ISO_8859_1));
         output.write(descriptionField.getBytes(ISO_8859_1));
         output.write("\"".getBytes(ISO_8859_1));
         output.write(CRLF);
         output.write("Content-Type: text/plain".getBytes(ISO_8859_1));
         if(contentEncoding != null) {
             output.write("; charset=".getBytes(ISO_8859_1));
             output.write(contentEncoding.getBytes(ISO_8859_1));
         }
         output.write(CRLF);
         output.write("Content-Transfer-Encoding: 8bit".getBytes(ISO_8859_1));
         output.write(CRLF);
         output.write(CRLF);
         if(contentEncoding != null) {
             output.write(descriptionValue.getBytes(contentEncoding));
         }
         else {
             output.write(descriptionValue.getBytes()); // TODO - charset?
         }
         output.write(CRLF);
         output.write(DASH_DASH);
         output.write(boundaryString.getBytes(ISO_8859_1));
         if(lastMultipart) {
             output.write(DASH_DASH);
         }
         output.write(CRLF);
                 
         output.flush();
         output.close();
 
         return output.toByteArray();
     }
 
     /**
      * Create the expected file multipart
      * 
      * @param lastMultipart true if this is the last multipart in the request
      */
     private byte[] createExpectedFilepartOutput(
             String boundaryString,
             String fileField,
             File file,
             String mimeType,
             byte[] fileContent,
             boolean firstMultipart,
             boolean lastMultipart) throws IOException {
         final byte[] DASH_DASH = "--".getBytes(ISO_8859_1);
         
         final ByteArrayOutputStream output = new ByteArrayOutputStream();
         if(firstMultipart) {
             output.write(DASH_DASH);
             output.write(boundaryString.getBytes(ISO_8859_1));
             output.write(CRLF);
         }
         // replace all backslash with double backslash
         String filename = file.getName();
         output.write("Content-Disposition: form-data; name=\"".getBytes(ISO_8859_1));
         output.write(fileField.getBytes(ISO_8859_1));
         output.write(("\"; filename=\"" + filename + "\"").getBytes(ISO_8859_1));
         output.write(CRLF);
         output.write("Content-Type: ".getBytes(ISO_8859_1));
         output.write(mimeType.getBytes(ISO_8859_1));
         output.write(CRLF);
         output.write("Content-Transfer-Encoding: binary".getBytes(ISO_8859_1));
         output.write(CRLF);
         output.write(CRLF);
         output.write(fileContent);
         output.write(CRLF);
         output.write(DASH_DASH);
         output.write(boundaryString.getBytes(ISO_8859_1));
         if(lastMultipart) {
             output.write(DASH_DASH);
         }
         output.write(CRLF);
         
         output.flush();
         output.close();
 
         return output.toByteArray();
     }
     
     /**
      * Create the expected output post body for form data and file multiparts
      * with specified values, when request is multipart
      */
     private byte[] createExpectedFormAndUploadOutput(
             String boundaryString,
             String contentEncoding,
             String titleField,
             String titleValue,
             String descriptionField,
             String descriptionValue,
             String fileField,
             File fileValue,
             String fileMimeType,
             byte[] fileContent) throws IOException {
         // Create the multiparts
         byte[] formdataMultipart = createExpectedFormdataOutput(boundaryString, contentEncoding, titleField, titleValue, descriptionField, descriptionValue, true, false);
         byte[] fileMultipart = createExpectedFilepartOutput(boundaryString, fileField, fileValue, fileMimeType, fileContent, false, true);
         
         // Join the two multiparts
         ByteArrayOutputStream output = new ByteArrayOutputStream();
         output.write(formdataMultipart);
         output.write(fileMultipart);
         
         output.flush();
         output.close();
         
         return output.toByteArray();
     }
     
     private HTTPSamplerBase createHttpSampler(int samplerType) {
         switch(samplerType) {
             case HTTP_SAMPLER:
                 return new HTTPSampler();
-            case HTTP_SAMPLER2:
-            @SuppressWarnings("deprecation") // unit test of deprecated class
-            final HTTPSampler2 httpSampler2 = new HTTPSampler2();
-            return httpSampler2;
             case HTTP_SAMPLER3:
                 return new HTTPSampler3();
             default:
                 break;
         }
         throw new IllegalArgumentException("Unexpected type: "+samplerType);
     }
 }
diff --git a/xdocs/changes.xml b/xdocs/changes.xml
index c677188da..97f49a2df 100644
--- a/xdocs/changes.xml
+++ b/xdocs/changes.xml
@@ -1,381 +1,383 @@
 <?xml version="1.0"?>
 <!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at
 
        http://www.apache.org/licenses/LICENSE-2.0
 
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
 -->
 <!DOCTYPE document
 [
 <!ENTITY hellip   "&#x02026;" >
 <!ENTITY rarr     "&#x02192;" >
 <!ENTITY vellip   "&#x022EE;" >
 ]>
 <document>
 <properties>
     <author email="dev AT jmeter.apache.org">JMeter developers</author>
     <title>Changes</title>
 </properties>
 <body>
 <section name="Changes">
 <style type="text/css"><!--
 h2 { color: #960000; }
 h3 { color: #960000; }
 --></style>
 <note>
 <b>This page details the changes made in the current version only.</b>
 <br></br>
 Earlier changes are detailed in the <a href="changes_history.html">History of Previous Changes</a>.
 </note>
 
 
 <!--  =================== 3.2 =================== -->
 
 <h1>Version 3.2</h1>
 <p>
 Summary
 </p>
 <ul>
 <li><a href="#New and Noteworthy">New and Noteworthy</a></li>
 <li><a href="#Incompatible changes">Incompatible changes</a></li>
 <li><a href="#Bug fixes">Bug fixes</a></li>
 <li><a href="#Improvements">Improvements</a></li>
 <li><a href="#Non-functional changes">Non-functional changes</a></li>
 <li><a href="#Known problems and workarounds">Known problems and workarounds</a></li>
 <li><a href="#Thanks">Thanks</a></li>
 
 </ul>
 
 <ch_section>New and Noteworthy</ch_section>
 
 <ch_section>IMPORTANT CHANGE</ch_section>
 <p>
 JMeter now requires Java 8. Ensure you use most up to date version.
 </p>
 
 <ch_title>Core improvements</ch_title>
 <ul>
 <li>Fill in improvements</li>
 </ul>
 
 <ch_title>Documentation improvements</ch_title>
 <ul>
 <li>PDF Documentations have been migrated to HTML user manual</li>
 </ul>
 <!-- <ch_category>Sample category</ch_category> -->
 <!-- <ch_title>Sample title</ch_title> -->
 <!-- <figure width="846" height="613" image="changes/3.0/view_results_tree_search_feature.png"></figure> -->
 
 <!-- =================== Incompatible changes =================== -->
 
 <ch_section>Incompatible changes</ch_section>
 
 <ul>
     <li>JMeter requires now at least a JAVA 8 version to run.</li>
     <li>JMeter logging has been migrated to SLF4J and Log4j2, this involves changes in the way configuration is done. JMeter now relies on standard
     <a href="https://logging.apache.org/log4j/2.x/manual/configuration.html">log4j2 configuration</a> in file <code>log4j2.xml</code>
     </li>
     <li>The following jars have been removed after migration from Logkit to SLF4J (see <bugzilla>60589</bugzilla>):
         <ul>
             <li>ApacheJMeter_slf4j_logkit.jar</li>
             <li>avalon-framework-4.1.4.jar</li>
             <li>avalon-framework-4.1.4.jar</li>
             <li>commons-logging-1.2.jar</li>
             <li>excalibur-logger-1.1.jar</li>
             <li>logkit-2.0.jar</li>
         </ul>
     </li>
+    <li>The <code>commons-httpclient-3.1.jar</code> has been removed after drop of HC3.1 support(see <bugzilla>60727</bugzilla>)</li>
     <li>JMeter now sets through <code>-Djava.security.egd=file:/dev/urandom</code> the algorithm for secure random</li>
     <li>Process Sampler now returns error code 500 when an error occurs. It previously returned an empty value.</li>
     <li>In <code>org.apache.jmeter.protocol.http.sampler.HTTPHCAbstractImpl</code> 2 protected static fields (localhost and nonProxyHostSuffixSize) have been renamed to (LOCALHOST and NON_PROXY_HOST_SUFFIX_SIZE) 
         to follow static fields naming convention</li>
     <li>JMeter now uses by default Oracle Nashorn engine instead of Mozilla Rhino for better performances. This should not have an impact unless
     you use some advanced features. You can revert back to Rhino by settings property <code>javascript.use_rhino=true</code>. 
     You can read this <a href="https://wiki.openjdk.java.net/display/Nashorn/Rhino+Migration+Guide">migration guide</a> for more details on Nashorn. See <bugzilla>60672</bugzilla></li>
     <li><bug>60729</bug>The Random Variable Config Element now allows minimum==maximum. Previous versions logged an error when minimum==maximum and did not set the configured variable.</li>
     <li><bug>60730</bug>The JSON PostProcessor now sets the <code>_ALL</code> variable (assuming <code>Compute concatenation var</code> was checked)
     even if the JSON path matches only once. Previous versions did not set the <code>_ALL</code> variable in this case.</li>
 </ul>
 
 <h3>Deprecated and removed elements or functions</h3>
 <p><note>These elements do not appear anymore in the menu, if you need them modify <code>not_in_menu</code> property. The JMeter team advises not to use them anymore and migrate to their replacement.</note></p>
 <ul>
-    <li><bug>60661</bug>Deprecate SOAP/XML-RPC Request</li>
+    <li>SOAP/XML-RPC Request has been removed as part of <bugzilla>60727</bugzilla>. Use HTTP Request element as a replacement. See <a href="./build-ws-test-plan.html" >Building a WebService Test Plan</a></li>
     <li><bug>60423</bug>Drop Monitor Results listener </li>
     <li>Drop deprecated class <code>org.apache.jmeter.protocol.system.NativeCommand</code></li>
     <li>Drop deprecated class <code>org.apache.jmeter.protocol.http.config.gui.MultipartUrlConfigGui</code></li>
     <li>Drop deprecated class <code>org.apache.jmeter.testelement.TestListener</code></li>
     <li>Drop deprecated class <code>org.apache.jmeter.reporters.FileReporter</code></li>
     <li>Drop deprecated class <code>org.apache.jmeter.protocol.http.modifier.UserSequence</code></li>
     <li>Drop deprecated class <code>org.apache.jmeter.protocol.http.parser.HTMLParseError</code></li>
     <li>Drop unused methods <code>org.apache.jmeter.protocol.http.control.HeaderManager#getSOAPHeader</code>
     and <code>org.apache.jmeter.protocol.http.control.HeaderManager#setSOAPHeader(Object)</code>
     </li>
     <li><code>org.apache.jmeter.protocol.http.util.Base64Encode</code> has been deprecated, you can use <code>java.util.Base64</code> as a replacement</li>
 </ul>
 
 <!-- =================== Improvements =================== -->
 
 <ch_section>Improvements</ch_section>
 
 <h3>HTTP Samplers and Test Script Recorder</h3>
 <ul>
     <li><bug>59934</bug>Fix race-conditions in CssParser. Based on a patch by Jerome Loisel (loisel.jerome at gmail.com)</li>
     <li><bug>60543</bug>HTTP Request / Http Request Defaults UX: Move to advanced panel Timeouts, Implementation, Proxy. Implemented by Philippe Mouawad (p.mouawad at ubik-ingenierie.com) and contributed by Ubik Load Pack (support at ubikloadpack.com)</li>
     <li><bug>60548</bug>HTTP Request : Allow Upper Panel to be collapsed</li>
     <li><bug>57242</bug>HTTP Authorization is not pre-emptively set with HttpClient4</li>
+    <li><bug>60727</bug>Drop commons-httpclient-3.1 and related elements. Contributed by Ubik Load Pack (support at ubikloadpack.com)</li>
 </ul>
 
 <h3>Other samplers</h3>
 <ul>
     <li><bug>60585</bug>JMS Publisher and JMS Subscriber : Allow reconnection on error and pause between errors. Based on <pr>240</pr> from by Logan Mauzaize (logan.mauzaize at gmail.com) and Maxime Chassagneux (maxime.chassagneux at gmail.com).</li>
     <li><pr>259</pr>Refactored and reformatted SmtpSampler. Contributed by Graham Russell (graham at ham1.co.uk)</li>
 </ul>
 
 <h3>Controllers</h3>
 <ul>
     <li><bug>60672</bug>JavaScript function / IfController : use Nashorn engine by default</li>
 </ul>
 
 <h3>Listeners</h3>
 <ul>
     <li><bug>60144</bug>View Results Tree : Add a more up to date Browser Renderer to replace old Render</li>
     <li><bug>60542</bug>View Results Tree : Allow Upper Panel to be collapsed. Contributed by Ubik Load Pack (support at ubikloadpack.com)</li>
     <li><bug>52962</bug>Allow sorting by columns for View Results in Table, Summary Report, Aggregate Report and Aggregate Graph. Based on a <pr>245</pr> by Logan Mauzaize (logan.mauzaize at gmail.com) and Maxime Chassagneux (maxime.chassagneux at gmail.com).</li>
     <li><bug>60590</bug>BackendListener : Add Influxdb BackendListenerClient implementation to JMeter. Partly based on <pr>246</pr> by Logan Mauzaize (logan.mauzaize at gmail.com) and Maxime Chassagneux (maxime.chassagneux at gmail.com).</li>
     <li><bug>60591</bug>BackendListener : Add a time boxed sampling. Based on a <pr>237</pr> by Logan Mauzaize (logan.mauzaize at gmail.com) and Maxime Chassagneux (maxime.chassagneux at gmail.com).</li>
     <li><bug>60678</bug>View Results Tree : Text renderer, search should not popup "Text Not Found"</li>
     <li><bug>60691</bug>View Results Tree : In Renderers (XPath, JSON Path Tester, RegExp Tester and CSS/JQuery Tester) lower panel is sometimes not visible as upper panel is too big and cannot be resized</li>
     <li><bug>60687</bug>Keep GUI responsive when many events are processed by View Results Tree, Summary Table and Log Panel.</li>
 </ul>
 
 <h3>Timers, Assertions, Config, Pre- &amp; Post-Processors</h3>
 <ul>
     <li><bug>60154</bug>User Parameters GUI: allow rows to be moved up &amp; down in the list. Contributed by Murdecai777 (https://github.com/Murdecai777).</li>
     <li><bug>60507</bug>Added '<code>Or</code>' Function into ResponseAssertion. Based on a contribution from 忻隆 (298015902 at qq.com)</li>
     <li><bug>58943</bug>Create a Better Think Time experience. Contributed by Ubik Load Pack (support at ubikloadpack.com)</li>
     <li><bug>60602</bug>XPath Extractor : Add Match No. to allow extraction randomly, by index or all matches</li>
     <li><bug>60710</bug>XPath Extractor : When content on which assertion applies is not XML, in View Results Tree the extractor is marked in Red and named SAXParseException. Contributed by Ubik Load Pack (support at ubikloadpack.com)</li>
     <li><bug>60712</bug>Response Assertion : Improve Renderer of Patterns</li>
     <li><bug>59174</bug>Add a table with static hosts to the DNS Cache Manager. This enables better virtual hosts testing with HttpClient4.</li>
 </ul>
 
 <h3>Functions</h3>
 <ul>
 </ul>
 
 <h3>I18N</h3>
 <ul>
     <li>Improve translation "save_as" in French. Based on a <pr>252</pr> by Maxime Chassagneux (maxime.chassagneux at gmail.com).</li>
 </ul>
 
 <h3>Report / Dashboard</h3>
 <ul>
     <li><bug>60637</bug>Improve Statistics table design <figure image="dashboard/report_statistics.png" ></figure></li>
 </ul>
 
 <h3>General</h3>
 <ul>
     <li><bug>54525</bug>Search Feature : Enhance it with ability to replace</li>
     <li><bug>60530</bug>Add API to create JMeter threads while test is running. Based on a contribution by Logan Mauzaize (logan.mauzaize at gmail.com) and Maxime Chassagneux (maxime.chassagneux at gmail.com).</li>
     <li><bug>60514</bug>Ability to apply a naming convention on Children of a Transaction Controller. Contributed by Ubik Load Pack (support at ubikloadpack.com)</li>
     <li><bug>60711</bug>Improve Delete button behaviour for Assertions / Header Manager / User Parameters GUIs</li>
     <li><bug>60593</bug>Switch to G1 GC algorithm</li>
     <li><bug>60595</bug>Add a SplashScreen at the start of JMeter GUI. Contributed by Maxime Chassagneux (maxime.chassagneux at gmail.com).</li>
     <li><bug>55258</bug>Drop "Close" icon from toolbar and add "New" to menu. Partly based on contribution from Sanduni Kanishka (https://github.com/SanduniKanishka)</li>
     <li><bug>59995</bug>Allow user to change font size with 2 new menu items and use <code>jmeter.hidpi.scale.factor</code> for scaling fonts. Contributed by Ubik Load Pack (support at ubikloadpack.com)</li>
     <li><bug>60654</bug>Validation Feature : Be able to ignore BackendListener. Contributed by Maxime Chassagneux (maxime.chassagneux at gmail.com).</li>
     <li><bug>60646</bug>Workbench : Save it by default</li>
     <li><bug>60684</bug>Thread Group: Validate ended prematurely by Scheduler with 0 or very short duration. Contributed by Andrew Burton (andrewburtonatwh at gmail.com).</li>
     <li><bug>60589</bug>Migrate LogKit to SLF4J - Drop avalon, logkit and excalibur with backward compatibility for 3rd party modules. Contributed by Woonsan Ko (woonsan at apache.org)</li>
     <li><bug>60565</bug>Migrate LogKit to SLF4J - Optimize logging statements. e.g, message format args, throwable args, unnecessary if-enabled-logging in simple ones, etc. Contributed by Woonsan Ko (woonsan at apache.org)</li>
     <li><bug>60564</bug>Migrate LogKit to SLF4J - Replace logkit loggers with slf4j ones and keep the current logkit binding solution for backward compatibility with plugins. Contributed by Woonsan Ko (woonsan at apache.org)</li>
     <li><bug>60664</bug>Add a UI menu to set log level. Contributed by Woonsan Ko (woonsan at apache.org)</li>
     <li><pr>276</pr>Added some translations for polish locale. Contributed by Bartosz Siewniak (barteksiewniak at gmail.com)</li>
 </ul>
 
 <ch_section>Non-functional changes</ch_section>
 <ul>
     <li><bug>60415</bug>Drop support for Java 7.</li>
     <li>Updated to dnsjava-2.1.8.jar (from 2.1.7)</li>
     <li>Updated to groovy 2.4.8 (from 2.4.7)</li>
     <li>Updated to httpcore 4.4.6 (from 4.4.5)</li>
     <li>Updated to httpclient 4.5.3 (from 4.5.2)</li>
     <li>Updated to jodd 3.8.1 (from 3.8.1.jar)</li>
     <li>Updated to jsoup-1.10.2 (from 1.10.1)</li>
     <li>Updated to ph-css 5.0.3 (from 4.1.6)</li>
     <li>Updated to ph-commons 8.6.0 (from 6.2.4)</li>
     <li>Updated to slf4j-api 1.7.22 (from 1.7.21)</li>
     <li>Updated to asm 5.2 (from 5.1)</li>
     <li>Converted the old pdf tutorials to xml.</li>
     <li><pr>255</pr>Utilised Java 8 (and 7) features to tidy up code. Contributed by Graham Russell (graham at ham1.co.uk)</li>
 </ul>
 
  <!-- =================== Bug fixes =================== -->
 
 <ch_section>Bug fixes</ch_section>
 
 <h3>HTTP Samplers and Test Script Recorder</h3>
 <ul>
     <li><bug>60531</bug>HTTP Cookie Manager : changing Implementation does not update Cookie Policy</li>
     <li><bug>60575</bug>HTTP GET Requests could have a content-type header without a body.</li>
     <li><bug>60682</bug>HTTP Request : Get method may fail on redirect due to Content-Length header being set</li>
     <li><bug>60643</bug>HTTP(S) Test Script Recorder doesn't correctly handle restart or start after stop. Contributed by Ubik Load Pack (support at ubikloadpack.com)</li>
     <li><bug>60652</bug>PUT might leak file descriptors.</li>
     <li><bug>60689</bug><code>httpclient4.validate_after_inactivity</code> has no impact leading to usage of potentially stale/closed connections</li>
     <li><bug>60690</bug>Default values for "httpclient4.validate_after_inactivity" and "httpclient4.time_to_live" which are equal to each other makes validation useless</li>
 </ul>
 
 <h3>Other Samplers</h3>
 <ul>
     <li><bug>603982</bug>Guard Exception handler of the <code>JDBCSampler</code> against null messages</li>
     <li><bug>55652</bug>JavaSampler silently resets classname if class can not be found</li>
 </ul>
 
 <h3>Controllers</h3>
 <ul>
 </ul>
 
 <h3>Listeners</h3>
 <ul>
     <li><bug>60648</bug>GraphiteBackendListener can lose some metrics at end of test if test is very short</li>
     <li><bug>60650</bug>AbstractBackendListenerClient does not reset UserMetric between runs</li>
 </ul>
 
 <h3>Timers, Assertions, Config, Pre- &amp; Post-Processors</h3>
 <ul>
     <li><bug>60438</bug><pr>235</pr>Clear old variables before extracting new ones in JSON Extractor.
     Based on a patch by Qi Chen (qi.chensh at ele.me)</li>
     <li><bug>60607</bug>DNS Cache Manager configuration is ignored</li>
     <li><bug>60729</bug>The Random Variable Config Element should allow minimum==maximum</li>
     <li><bug>60730</bug>The JSON PostProcessor should set the <code>_ALL</code> variable even if the JSON path matches only once.</li>
 </ul>
 
 <h3>Functions</h3>
 <ul>
 </ul>
 
 <h3>I18N</h3>
 <ul>
 </ul>
 
 <h3>Report / Dashboard</h3>
 <ul>
     <li><bug>60726</bug>Report / Dashboard : Top 5 errors by samplers must not take into account the series filtering</li>
 </ul>
     
 <h3>General</h3>
 <ul>
     <li><bug>60428</bug>JMeter Graphite Backend Listener throws exception when test ends
     and <code>useRegexpForSamplersList</code> is set to <code>true</code>.
     Based on patch by Liu XP (liu_xp2003 at sina.com)</li>
     <li><bug>60442</bug>Fix a typo in <code>build.xml</code> (gavin at 16degrees.com.au)</li>
     <li><bug>60449</bug>JMeter Tree : Annoying behaviour when node name is empty</li>
     <li><bug>60494</bug>Add sonar analysis task to build</li>
     <li><bug>60501</bug>Search Feature : Performance issue when regexp is checked</li>
     <li><bug>60444</bug>Intermittent failure of TestHTTPMirrorThread#testSleep(). Contributed by Thomas Schapitz (ts-nospam12 at online.de)</li>
     <li><bug>60621</bug>The "report-template" folder is missing from ApacheJMeter_config-3.1.jar in maven central</li>
 </ul>
 
  <!--  =================== Thanks =================== -->
 
 <ch_section>Thanks</ch_section>
 <p>We thank all contributors mentioned in bug and improvement sections above:
 </p>
 <ul>
 <li>Jerome Loisel (loisel.jerome at gmail.com)</li>
 <li>Liu XP (liu_xp2003 at sina.com)</li>
 <li>Qi Chen (qi.chensh at ele.me)</li>
 <li>(gavin at 16degrees.com.au)</li>
 <li>Thomas Schapitz (ts-nospam12 at online.de)</li>
 <li>Murdecai777 (https://github.com/Murdecai777)</li>
 <li>Logan Mauzaize (logan.mauzaize at gmail.com)</li>
 <li>Maxime Chassagneux (maxime.chassagneux at gmail.com)</li>
 <li>忻隆 (298015902 at qq.com)</li>
 <li><a href="http://ubikloadpack.com">Ubik Load Pack</a></li>
 <li>Graham Russell (graham at ham1.co.uk)</li>
 <li>Sanduni Kanishka (https://github.com/SanduniKanishka)</li>
 <li>Andrew Burton (andrewburtonatwh at gmail.com)</li>
 <li>Woonsan Ko (woonsan at apache.org)</li>
 <li>Bartosz Siewniak (barteksiewniak at gmail.com)</li>
 </ul>
 <p>We also thank bug reporters who helped us improve JMeter. <br/>
 For this release we want to give special thanks to the following reporters for the clear reports and tests made after our fixes:</p>
 <ul>
 <li>Tuukka Mustonen (tuukka.mustonen at gmail.com) who gave us a lot of useful feedback which helped resolve <bugzilla>60689</bugzilla> and <bugzilla>60690</bugzilla></li>
 <li>Amar Darisa (amar.darisa at gmail.com) who helped us with his feedback on <bugzilla>60682</bugzilla></li>
 </ul>
 <p>
 Apologies if we have omitted anyone else.
  </p>
  <!--  =================== Known bugs or issues related to JAVA Bugs =================== -->
 
 <ch_section>Known problems and workarounds</ch_section>
 
 <ul>
 <li>The Once Only controller behaves correctly under a Thread Group or Loop Controller,
 but otherwise its behaviour is not consistent (or clearly specified).</li>
 
 <li>
 The numbers that appear to the left of the green box are the number of active threads / total number of threads,
 the total number of threads only applies to a locally run test, otherwise it will show <code>0</code> (see <bugzilla>55510</bugzilla>).
 </li>
 
 <li>
 Note that under some windows systems you may have this WARNING:
 <source>
 java.util.prefs.WindowsPreferences
 WARNING: Could not open/create prefs root node Software\JavaSoft\Prefs at root 0
 x80000002. Windows RegCreateKeyEx(&hellip;) returned error code 5.
 </source>
 The fix is to run JMeter as Administrator, it will create the registry key for you, then you can restart JMeter as a normal user and you won't have the warning anymore.
 </li>
 
 <li>
 You may encounter the following error:
 <source>java.security.cert.CertificateException: Certificates does not conform to algorithm constraints</source>
  if you run a HTTPS request on a web site with a SSL certificate (itself or one of SSL certificates in its chain of trust) with a signature
  algorithm using MD2 (like md2WithRSAEncryption) or with a SSL certificate with a size lower than 1024 bits.
 This error is related to increased security in Java 7 version u16 (MD2) and version u40 (Certificate size lower than 1024 bits), and Java 8 too.
 <br></br>
 To allow you to perform your HTTPS request, you can downgrade the security of your Java installation by editing
 the Java <code>jdk.certpath.disabledAlgorithms</code> property. Remove the MD2 value or the constraint on size, depending on your case.
 <br></br>
 This property is in this file:
 <source>JAVA_HOME/jre/lib/security/java.security</source>
 See  <bugzilla>56357</bugzilla> for details.
 </li>
 
 <li>
 Under Mac OSX Aggregate Graph will show wrong values due to mirroring effect on numbers.
 This is due to a known Java bug, see Bug <a href="https://bugs.openjdk.java.net/browse/JDK-8065373" >JDK-8065373</a>
 The fix is to use JDK8_u45 or later.
 </li>
 
 <li>
 View Results Tree may fail to display some HTML code under HTML renderer, see <bugzilla>54586</bugzilla>.
 This is due to a known Java bug which fails to parse "<code>px</code>" units in row/col attributes.
 See Bug <a href="https://bugs.openjdk.java.net/browse/JDK-8031109" >JDK-8031109</a>
 The fix is to use JDK9 b65 or later (but be aware that Java 9 is not certified yet for JMeter).
 </li>
 
 <li>
 JTable selection with keyboard (<keycombo><keysym>SHIFT</keysym><keysym>up/down</keysym></keycombo>) is totally unusable with JAVA 7 on Mac OSX.
 This is due to a known Java bug <a href="https://bugs.openjdk.java.net/browse/JDK-8025126" >JDK-8025126</a>
 The fix is to use JDK 8 b132 or later.
 </li>
 </ul>
 
 </section>
 </body>
 </document>
diff --git a/xdocs/usermanual/component_reference.xml b/xdocs/usermanual/component_reference.xml
index 2e6d0a054..1b78d1b24 100644
--- a/xdocs/usermanual/component_reference.xml
+++ b/xdocs/usermanual/component_reference.xml
@@ -1,1699 +1,1660 @@
 <?xml version="1.0"?>
 <!-- 
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  * 
  -->
 <!DOCTYPE document
 [
 <!ENTITY sect-num '19'>
 <!ENTITY hellip   "&#x02026;" >
 <!ENTITY le       "&#x02264;" >
 <!ENTITY ge       "&#x02265;" >
 ]>
 <document index="yes" index-level-2="yes" index-numbers="no" colbreak="&sect-num;.4"
   prev="boss.html" next="properties_reference.html" id="$Id$">
 
 <properties>
   <title>User's Manual: Component Reference</title>
 </properties>
 
 <body>
 
 <!--
     Because this is an XML document, all tags must be properly closed, including ones
     which are passed unchanged into the HTML output, e.g. <br/>, not just <br>.
 
     Unfortunately Java does not currently allow for this - it outputs the trailing > -
     which messes up the Help display. 
     To avoid these artifacts, use the form <br></br>, which Java does seem to handle OK.
 
  -->
 <section name="&sect-num; Introduction" anchor="introduction">
 <description>
 <p>
 
 </p>
  <note>
  Several test elements use JMeter properties to control their behaviour.
  These properties are normally resolved when the class is loaded.
  This generally occurs before the test plan starts, so it's not possible to change the settings by using the <code>__setProperty()</code> function.
 </note>
 <p>
 </p>
 </description>
 </section>
  
 <section name="&sect-num;.1 Samplers" anchor="samplers">
 <description>
     <p>
     Samplers perform the actual work of JMeter.
     Each sampler (except <complink name="Test Action" />) generates one or more sample results.
     The sample results have various attributes (success/fail, elapsed time, data size etc.) and can be viewed in the various listeners.
     </p>
 </description>
 <component name="FTP Request" index="&sect-num;.1.1" width="911" height="274" screenshot="ftptest/ftp-request.png">
 <description>
 This controller lets you send an FTP "retrieve file" or "upload file" request to an FTP server.
 If you are going to send multiple requests to the same FTP server, consider
 using a <complink name="FTP Request Defaults"/> Configuration
 Element so you do not have to enter the same information for each FTP Request Generative
 Controller. When downloading a file, it can be stored on disk (Local File) or in the Response Data, or both.
 <p>
 Latency is set to the time it takes to login.
 </p>
 </description>
 <properties>
         <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
         <property name="Server Name or IP" required="Yes">Domain name or IP address of the FTP server.</property>
         <property name="Port" required="No">Port to use. If this is <code>&gt;0</code>, then this specific port is used,
            otherwise JMeter uses the default FTP port.</property>
         <property name="Remote File:" required="Yes">File to retrieve or name of destination file to upload.</property>
         <property name="Local File:" required="Yes, if uploading (*)">File to upload, or destination for downloads (defaults to remote file name).</property>
         <property name="Local File Contents:" required="Yes, if uploading (*)">Provides the contents for the upload, overrides the Local File property.</property>
         <property name="get(RETR) / put(STOR)" required="Yes">Whether to retrieve or upload a file.</property>
         <property name="Use Binary mode?" required="Yes">Check this to use Binary mode (default ASCII)</property>
         <property name="Save File in Response?" required="Yes, if downloading">
         Whether to store contents of retrieved file in response data.
         If the mode is ASCII, then the contents will be visible in the <complink name="View Results Tree"/>.
         </property>
         <property name="Username" required="Usually">FTP account username.</property>
         <property name="Password" required="Usually">FTP account password. N.B. This will be visible in the test plan.</property>
 </properties>
 <links>
         <link href="test_plan.html#assertions">Assertions</link>
         <complink name="FTP Request Defaults"/>
         <link href="build-ftp-test-plan.html">Building an FTP Test Plan</link>
 </links>
 
 </component>
 
 <component name="HTTP Request" index="&sect-num;.1.2" width="953" height="611" screenshot="http-request.png">
 
 <description>
         <p>This sampler lets you send an HTTP/HTTPS request to a web server.  It
         also lets you control whether or not JMeter parses HTML files for images and
         other embedded resources and sends HTTP requests to retrieve them.
         The following types of embedded resource are retrieved:</p>
         <ul>
         <li>images</li>
         <li>applets</li>
         <li>stylesheets (CSS) and resources referenced from those files</li>
         <li>external scripts</li>
         <li>frames, iframes</li>
         <li>background images (body, table, TD, TR)</li>
         <li>background sound</li>
         </ul>
         <p>
         The default parser is <code>org.apache.jmeter.protocol.http.parser.LagartoBasedHtmlParser</code>.
         This can be changed by using the property "<code>htmlparser.className</code>" - see <code>jmeter.properties</code> for details.
         </p>
         <p>If you are going to send multiple requests to the same web server, consider
         using an <complink name="HTTP Request Defaults"/>
         Configuration Element so you do not have to enter the same information for each
         HTTP Request.</p>
 
         <p>Or, instead of manually adding HTTP Requests, you may want to use
         JMeter's <complink name="HTTP(S) Test Script Recorder"/> to create
         them.  This can save you time if you have a lot of HTTP requests or requests with many
         parameters.</p>
 
         <p><b>There are two different test elements used to define the samplers:</b></p>
         <dl>
         <dt>AJP/1.3 Sampler</dt><dd>uses the Tomcat mod_jk protocol (allows testing of Tomcat in AJP mode without needing Apache httpd)
         The AJP Sampler does not support multiple file upload; only the first file will be used.
         </dd>
         <dt>HTTP Request</dt><dd>this has an implementation drop-down box, which selects the HTTP protocol implementation to be used:
           <dl>
             <dt><code>Java</code></dt><dd>uses the HTTP implementation provided by the JVM.
             This has some limitations in comparison with the HttpClient implementations - see below.</dd>
-            <dt><code>HTTPClient3.1</code></dt><dd>(DEPRECATED SINCE 3.0) uses Apache Commons HttpClient 3.1.
-            This is no longer being developed, and support for this will be dropped in a future JMeter release.</dd>
             <dt><code>HTTPClient4</code></dt><dd>uses Apache HttpComponents HttpClient 4.x.</dd>
             <dt>Blank Value</dt><dd>does not set implementation on HTTP Samplers, so relies on HTTP Request Defaults if present or on <code>jmeter.httpsampler</code> property defined in <code>jmeter.properties</code></dd>
           </dl>
         </dd>
         </dl>
          <p>The Java HTTP implementation has some limitations:</p>
          <ul>
          <li>There is no control over how connections are re-used.
          When a connection is released by JMeter, it may or may not be re-used by the same thread.</li>
          <li>The API is best suited to single-threaded usage - various settings
          are defined via system properties, and therefore apply to all connections.</li>
          <li>There is a bug in the handling of HTTPS via a Proxy (the <code>CONNECT</code> is not handled correctly).
          See Java bugs 6226610 and 6208335.
          </li>
          <li>It does not support virtual hosts.</li>
          <li>It supports only the following methods: <code>GET</code>, <code>POST</code>, <code>HEAD</code>, <code>OPTIONS</code>, <code>PUT</code>, <code>DELETE</code> and <code>TRACE</code></li>
          <li>It does not support client based certificate testing with Keystore Config.</li>
          </ul>
          <note>Note: the <code>FILE</code> protocol is intended for testing purposes only.
          It is handled by the same code regardless of which HTTP Sampler is used.</note>
         <p>If the request requires server or proxy login authorization (i.e. where a browser would create a pop-up dialog box),
          you will also have to add an <complink name="HTTP Authorization Manager"/> Configuration Element.
          For normal logins (i.e. where the user enters login information in a form), you will need to work out what the form submit button does,
          and create an HTTP request with the appropriate method (usually <code>POST</code>) 
          and the appropriate parameters from the form definition.
          If the page uses HTTP, you can use the JMeter Proxy to capture the login sequence.
         </p>
         <p>
         A separate SSL context is used for each thread.
         If you want to use a single SSL context (not the standard behaviour of browsers), set the JMeter property:</p>
 <source>
 https.sessioncontext.shared=true
 </source>
         By default, the SSL context is retained for the duration of the test.
         The SSL session can be optionally reset for each test iteration.
         To enable this, set the JMeter property:
 <source>
 https.use.cached.ssl.context=false
 </source>
         <note>
          Note: this does not apply to the Java HTTP implementation.
         </note>
         JMeter defaults to the SSL protocol level TLS.
         If the server needs a different level, e.g. <code>SSLv3</code>, change the JMeter property, for example:
 <source>
 https.default.protocol=SSLv3
 </source>
         <p>
         JMeter also allows one to enable additional protocols, by changing the property <code>https.socket.protocols</code>.
         </p>
         <p>If the request uses cookies, then you will also need an
         <complink name="HTTP Cookie Manager"/>.  You can
         add either of these elements to the Thread Group or the HTTP Request. If you have
         more than one HTTP Request that needs authorizations or cookies, then add the
         elements to the Thread Group. That way, all HTTP Request controllers will share the
         same Authorization Manager and Cookie Manager elements.</p>
 
         <p>If the request uses a technique called "URL Rewriting" to maintain sessions,
         then see section
         <a href="build-adv-web-test-plan.html#session_url_rewriting">6.1 Handling User Sessions With URL Rewriting</a>
         for additional configuration steps.</p>
 </description>
 <figure width="951" height="284" image="http-request-advanced-tab.png">HTTP Request Advanced config fields</figure>
 
 <properties>
         <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
         <property name="Server" required="Yes, unless provided by HTTP Request Defaults">
             Domain name or IP address of the web server, e.g. <code>www.example.com</code>. [Do not include the <code>http://</code> prefix.]
             Note: If the "<code>Host</code>" header is defined in a Header Manager, then this will be used
             as the virtual host name.
         </property>
         <property name="Port" required="No">Port the web server is listening to. Default: <code>80</code></property>
         <property name="Connect Timeout" required="No">Connection Timeout. Number of milliseconds to wait for a connection to open.</property>
         <property name="Response Timeout" required="No">Response Timeout. Number of milliseconds to wait for a response.
         Note that this applies to each wait for a response. If the server response is sent in several chunks, the overall
         elapsed time may be longer than the timeout.
         <p>A <complink name="Duration Assertion"/> can be used to detect responses that take too long to complete.</p>
         </property>
         <property name="Server (proxy)" required="No">Hostname or IP address of a proxy server to perform request. [Do not include the <code>http://</code> prefix.]</property>
         <property name="Port" required="No, unless proxy hostname is specified">Port the proxy server is listening to.</property>
         <property name="Username" required="No">(Optional) username for proxy server.</property>
         <property name="Password" required="No">(Optional) password for proxy server. (N.B. this is stored unencrypted in the test plan)</property>
-        <property name="Implementation" required="No"><code>Java</code>, <code>HttpClient3.1 (DEPRECATED SINCE 3.0)</code>, <code>HttpClient4</code>.
+        <property name="Implementation" required="No"><code>Java</code>, <code>HttpClient4</code>.
         If not specified (and not defined by HTTP Request Defaults), the default depends on the value of the JMeter property
         <code>jmeter.httpsampler</code>, failing that, the HttpClient4 implementation is used.</property>
         <property name="Protocol" required="No"><code>HTTP</code>, <code>HTTPS</code> or <code>FILE</code>. Default: <code>HTTP</code></property>
         <property name="Method" required="Yes"><code>GET</code>, <code>POST</code>, <code>HEAD</code>, <code>TRACE</code>,
           <code>OPTIONS</code>, <code>PUT</code>, <code>DELETE</code>, <code>PATCH</code> (not supported for
           <code>JAVA</code> implementation). With <code>HttpClient4</code>, the following methods related to WebDav are
           also allowed: <code>COPY</code>, <code>LOCK</code>, <code>MKCOL</code>, <code>MOVE</code>,
           <code>PROPFIND</code>, <code>PROPPATCH</code>, <code>UNLOCK</code>, <code>REPORT</code>, <code>MKCALENDAR</code>,
           <code>SEARCH</code>.
           <p>More methods can be pre-defined for the HttpClient4 by using the JMeter property
             <code>httpsampler.user_defined_methods</code>.</p>
         </property>
         <property name="Content Encoding" required="No">
         Content encoding to be used (for <code>POST</code>, <code>PUT</code>, <code>PATCH</code> and <code>FILE</code>).
         This is the character encoding to be used, and is not related to the Content-Encoding HTTP header.
         </property>
         <property name="Redirect Automatically" required="No">
         Sets the underlying http protocol handler to automatically follow redirects,
         so they are not seen by JMeter, and thus will not appear as samples.
         Should only be used for <code>GET</code> and <code>HEAD</code> requests.
         The HttpClient sampler will reject attempts to use it for <code>POST</code> or <code>PUT</code>.
         <note>Warning: see below for information on cookie and header handling.</note>
         </property>
         <property name="Follow Redirects" required="No">
         This only has any effect if "<code>Redirect Automatically</code>" is not enabled.
         If set, the JMeter sampler will check if the response is a redirect and follow it if so.
         The initial redirect and further responses will appear as additional samples.
         The URL and data fields of the parent sample will be taken from the final (non-redirected)
         sample, but the parent byte count and elapsed time include all samples.
         The latency is taken from the initial response.
         Note that the HttpClient sampler may log the following message:
         <source>"Redirect requested but followRedirects is disabled"</source>
         This can be ignored.
         <br/>
         JMeter will collapse paths of the form '<code>/../segment</code>' in
         both absolute and relative redirect URLs. For example <code>http://host/one/../two</code> will be collapsed into <code>http://host/two</code>.
         If necessary, this behaviour can be suppressed by setting the JMeter property
         <code>httpsampler.redirect.removeslashdotdot=false</code>
         </property>
         <property name="Use KeepAlive" required="No">JMeter sets the Connection: <code>keep-alive</code> header. This does not work properly with the default HTTP implementation, as connection re-use is not under user-control.
                   It does work with the Apache HttpComponents HttpClient implementations.</property>
         <property name="Use multipart/form-data for HTTP POST" required="No">
         Use a <code>multipart/form-data</code> or <code>application/x-www-form-urlencoded</code> post request
         </property>
         <property name="Browser-compatible headers" required="No">
         When using <code>multipart/form-data</code>, this suppresses the <code>Content-Type</code> and
         <code>Content-Transfer-Encoding</code> headers; only the <code>Content-Disposition</code> header is sent.
         </property>
         <property name="Path" required="Yes">The path to resource (for example, <code>/servlets/myServlet</code>). If the
 resource requires query string parameters, add them below in the
 "Send Parameters With the Request" section.
 <note>
 As a special case, if the path starts with "<code>http://</code>" or "<code>https://</code>" then this is used as the full URL.
 </note>
 In this case, the server, port and protocol fields are ignored; parameters are also ignored for <code>GET</code> and <code>DELETE</code> methods.
 Also please note that the path is not encoded - apart from replacing spaces with <code>%20</code> -
 so unsafe characters may need to be encoded to avoid errors such as <code>URISyntaxException</code>.
 </property>
         <property name="Send Parameters With the Request" required="No">The query string will
         be generated from the list of parameters you provide.  Each parameter has a <code>name</code> and
         <code>value</code>, the options to encode the parameter, and an option to include or exclude an equals sign (some applications
         don't expect an equals sign when the value is the empty string).  The query string will be generated in the correct fashion, depending on
         the choice of "Method" you made (i.e. if you chose <code>GET</code> or <code>DELETE</code>, the query string will be
         appended to the URL, if <code>POST</code> or <code>PUT</code>, then it will be sent separately).  Also, if you are
         sending a file using a multipart form, the query string will be created using the
         multipart form specifications.
         <b>See below for some further information on parameter handling.</b>
         <p>
         Additionally, you can specify whether each parameter should be URL encoded.  If you are not sure what this
         means, it is probably best to select it.  If your values contain characters such as the following then encoding is usually required.:
         </p>
         <ul>
             <li>ASCII Control Chars</li>
             <li>Non-ASCII characters</li>
             <li>Reserved characters:URLs use some characters for special use in defining their syntax. When these characters are not used in their special role inside a URL, they need to be encoded, example : '<code>$</code>', '<code>&amp;</code>', '<code>+</code>', '<code>,</code>' , '<code>/</code>', '<code>:</code>', '<code>;</code>', '<code>=</code>', '<code>?</code>', '<code>@</code>'</li>
             <li>Unsafe characters: Some characters present the possibility of being misunderstood within URLs for various reasons. These characters should also always be encoded, example : '<code> </code>', '<code>&lt;</code>', '<code>&gt;</code>', '<code>#</code>', '<code>%</code>', &hellip;</li>
         </ul>
         </property>
         <property name="File Path:" required="No">Name of the file to send.  If left blank, JMeter
         does not send a file, if filled in, JMeter automatically sends the request as
         a multipart form request.
         <p>
         If it is a <code>POST</code> or <code>PUT</code> or <code>PATCH</code> request and there is a single file whose 'Parameter name' attribute (below) is omitted, 
         then the file is sent as the entire body
         of the request, i.e. no wrappers are added. This allows arbitrary bodies to be sent. This functionality is present for <code>POST</code> requests, 
         and also for <code>PUT</code> requests.
         <b>See below for some further information on parameter handling.</b>
         </p>
         </property>
         <property name="Parameter name:" required="No">Value of the "<code>name</code>" web request parameter.</property>
         <property name="MIME Type" required="No">MIME type (for example, <code>text/plain</code>).
         If it is a <code>POST</code> or <code>PUT</code> or <code>PATCH</code> request and either the '<code>name</code>' attribute (below) are omitted or the request body is
         constructed from parameter values only, then the value of this field is used as the value of the
         <code>content-type</code> request header.
         </property>
         <property name="Retrieve All Embedded Resources from HTML Files" required="No">Tell JMeter to parse the HTML file
 and send HTTP/HTTPS requests for all images, Java applets, JavaScript files, CSSs, etc. referenced in the file.
         See below for more details.
         </property>
        <property name="Save response as MD5 hash?" required="No">
        If this is selected, then the response is not stored in the sample result.
        Instead, the 32 character MD5 hash of the data is calculated and stored instead.
        This is intended for testing large amounts of data.
        </property>
         <property name="Embedded URLs must match:" required="No">
         If present, this must be a regular expression that is used to match against any embedded URLs found.
         So if you only want to download embedded resources from <code>http://example.com/</code>, use the expression:
         <code>http://example\.com/.*</code>
         </property>
         <property name="Use concurrent pool" required="No">Use a pool of concurrent connections to get embedded resources.</property>
         <property name="Size" required="No">Pool size for concurrent connections used to get embedded resources.</property>
         <property name="Source address type" required="No">
         <i>[Only for HTTP Request with HTTPClient implementation]</i> <br></br>
         To distinguish the source address value, select the type of these:
         <ul>
         <li>Select <i>IP/Hostname</i> to use a specific IP address or a (local) hostname</li>
         <li>Select <i>Device</i> to pick the first available address for that interface which
         this may be either IPv4 or IPv6</li>
         <li>Select <i>Device IPv4</i> to select the IPv4 address of the device name (like <code>eth0</code>, <code>lo</code>, <code>em0</code>, etc.)</li>
         <li>Select <i>Device IPv6</i> to select the IPv6 address of the device name (like <code>eth0</code>, <code>lo</code>, <code>em0</code>, etc.)</li>
         </ul>
         </property>
         <property name="Source address field" required="No">
         <i>[Only for HTTP Request with HTTPClient implementation]</i> <br></br>
         This property is used to enable IP Spoofing.
         It overrides the default local IP address for this sample.
         The JMeter host must have multiple IP addresses (i.e. IP aliases, network interfaces, devices).
         The value can be a host name, IP address, or a network interface device such as "<code>eth0</code>" or "<code>lo</code>" or "<code>wlan0</code>".<br></br>
         If the property <code>httpclient.localaddress</code> is defined, that is used for all HttpClient requests.
         </property>
 </properties>
 <note>
 When using Automatic Redirection, cookies are only sent for the initial URL.
 This can cause unexpected behaviour for web-sites that redirect to a local server.
 E.g. if <code>www.example.com</code> redirects to <code>www.example.co.uk</code>.
 In this case the server will probably return cookies for both URLs, but JMeter will only see the cookies for the last
 host, i.e. <code>www.example.co.uk</code>. If the next request in the test plan uses <code>www.example.com</code>,
 rather than <code>www.example.co.uk</code>, it will not get the correct cookies.
 Likewise, Headers are sent for the initial request, and won't be sent for the redirect.
 This is generally only a problem for manually created test plans,
 as a test plan created using a recorder would continue from the redirected URL.
 </note>
 <p>
 <b>Parameter Handling:</b><br></br>
 For the <code>POST</code> and <code>PUT</code> method, if there is no file to send, and the name(s) of the parameter(s) are omitted,
 then the body is created by concatenating all the value(s) of the parameters.
 Note that the values are concatenated without adding any end-of-line characters.
 These can be added by using the <code>__char()</code> function in the value fields.
 This allows arbitrary bodies to be sent.
 The values are encoded if the encoding flag is set.
 See also the MIME Type above how you can control the <code>content-type</code> request header that is sent.
 <br></br>
 For other methods, if the name of the parameter is missing,
 then the parameter is ignored. This allows the use of optional parameters defined by variables.
 </p>
 <br/>
 <p>You have the option to switch to <code>Body Data</code> tab when a request has only unnamed parameters
 (or no parameters at all).
 This option is useful in the following cases (amongst others):</p>
 <ul>
 <li>GWT RPC HTTP Request</li>
 <li>JSON REST HTTP Request</li>
 <li>XML REST HTTP Request</li>
 <li>SOAP HTTP Request</li>
 </ul>
 <note>
 Note that once you leave the Tree node, you cannot switch back to the parameter tab unless you clear the <code>Body Data</code> tab from its data.
 </note>
 <p>
 In <code>Body Data</code> mode, each line will be sent with <code>CRLF</code> appended, apart from the last line.
 To send a <code>CRLF</code> after the last line of data, just ensure that there is an empty line following it.
 (This cannot be seen, except by noting whether the cursor can be placed on the subsequent line.)
 </p>
 <figure width="902" height="421" image="http-request-raw-single-parameter.png">Figure 1 - HTTP Request with one unnamed parameter</figure>
 <figure width="908" height="212" image="http-request-confirm-raw-body.png">Figure 2 - Confirm dialog to switch</figure>
 <figure width="905" height="423" image="http-request-raw-body.png">Figure 3 - HTTP Request using Body Data</figure>
 
 <p>
 <b>Method Handling:</b><br></br>
 The <code>GET</code>, <code>DELETE</code>, <code>POST</code>, <code>PUT</code> and <code>PATCH</code> request methods work similarly, except that as of 3.1, only <code>POST</code> method supports multipart requests
 or file upload.
 The <code>PUT</code> and <code>PATCH</code> method body must be provided as one of the following:</p>
 <ul>
 <li>define the body as a file with empty Parameter name field; in which case the MIME Type is used as the Content-Type</li>
 <li>define the body as parameter value(s) with no name</li>
 <li>use the <code>Body Data</code> tab</li>
 </ul>
 
 The <code>GET</code>, <code>DELETE</code> and <code>POST</code> methods have an additional way of passing parameters by using the <code>Parameters</code> tab.
 <p>
 <code>GET</code>, <code>DELETE</code>, <code>PUT</code> and <code>PATCH</code> require a Content-Type.
 If not using a file, attach a Header Manager to the sampler and define the Content-Type there.
 </p>
 <p>JMeter scan responses from embedded resources. It uses the property <code>HTTPResponse.parsers</code>, which is a list of parser ids,
  e.g. <code>htmlParser</code>, <code>cssParser</code> and <code>wmlParser</code>. For each id found, JMeter checks two further properties:</p>
  <ul>
  <li><code>id.types</code> - a list of content types</li>
  <li><code>id.className</code> - the parser to be used to extract the embedded resources</li>
  </ul>
  <p>See <code>jmeter.properties</code> file for the details of the settings.
  If the <code>HTTPResponse.parser</code> property is not set, JMeter reverts to the previous behaviour,
  i.e. only <code>text/html</code> responses will be scanned</p>
 <b>Emulating slow connections:</b><br></br>
 <code>HttpClient31</code>, <code>HttpClient4</code> and <code>Java</code> Sampler support emulation of slow connections; see the following entries in <code>jmeter.properties</code>:
 <source>
 # Define characters per second &gt; 0 to emulate slow connections
 #httpclient.socket.http.cps=0
 #httpclient.socket.https.cps=0
 </source>
 <p><b>Response size calculation</b><br></br>
 Optional properties to allow change the method to get response size:<br></br></p>
 <ul><li>Gets the real network size in bytes for the body response
 <source>sampleresult.getbytes.body_real_size=true</source></li>
 <li>Add HTTP headers to full response size
 <source>sampleresult.getbytes.headers_size=true</source></li></ul>
 
 <note>
 The <code>Java</code> and <code>HttpClient3</code> implementations do not include transport overhead such as
 chunk headers in the response body size.<br></br>
 The <code>HttpClient4</code> implementation does include the overhead in the response body size,
 so the value may be greater than the number of bytes in the response content.
 </note>
 
 <note>When those two properties are set  <code>false</code>, JMeter returns only data response size (uncompressed if request uses gzip/deflate mode).</note>
 <p>
 <b>Retry handling</b><br></br>
 For HttpClient4 and Commons HttpClient 3.1 samplers, the retry count has been set to <code>0</code>, meaning not retry is attempted. 
 Note that the Java implementation appears to retry 1 time.
 The retry count can be overridden by setting the relevant JMeter property, for example:
 </p>
 <source>
 httpclient4.retrycount=3
-httpclient3.retrycount=3
 </source>
 <p>
 <b>Note: Certificates does not conform to algorithm constraints</b><br></br>
 You may encounter the following error: <code>java.security.cert.CertificateException: Certificates does not conform to algorithm constraints</code>
  if you run a HTTPS request on a web site with a SSL certificate (itself or one of SSL certificates in its chain of trust) with a signature
  algorithm using MD2 (like <code>md2WithRSAEncryption</code>) or with a SSL certificate with a size lower than 1024 bits.
 </p><p>
 This error is related to increased security in Java 8.
 </p><p>
 To allow you to perform your HTTPS request, you can downgrade the security of your Java installation by editing
 the Java <code>jdk.certpath.disabledAlgorithms</code> property. Remove the MD2 value or the constraint on size, depending on your case.
 </p><p>
 This property is in this file:</p>
 <source>JAVA_HOME/jre/lib/security/java.security</source>
 <p>See  <bugzilla>56357</bugzilla> for details.
 </p>
 <links>
         <link href="test_plan.html#assertions">Assertion</link>
         <link href="build-web-test-plan.html">Building a Web Test Plan</link>
         <link href="build-adv-web-test-plan.html">Building an Advanced Web Test Plan</link>
         <complink name="HTTP Authorization Manager"/>
         <complink name="HTTP Cookie Manager"/>
         <complink name="HTTP Header Manager"/>
         <complink name="HTML Link Parser"/>
         <complink name="HTTP(S) Test Script Recorder"/>
         <complink name="HTTP Request Defaults"/>
         <link href="build-adv-web-test-plan.html#session_url_rewriting">HTTP Requests and Session ID's: URL Rewriting</link>
 </links>
 
 </component>
 
 <component name="JDBC Request" index="&sect-num;.1.3"  width="710" height="629" screenshot="jdbctest/jdbc-request.png">
 
 <description><p>This sampler lets you send a JDBC Request (an SQL query) to a database.</p>
 <p>Before using this you need to set up a
 <complink name="JDBC Connection Configuration"/> Configuration element
 </p>
 <p>
 If the Variable Names list is provided, then for each row returned by a Select statement, the variables are set up
 with the value of the corresponding column (if a variable name is provided), and the count of rows is also set up.
 For example, if the Select statement returns 2 rows of 3 columns, and the variable list is <code>A,,C</code>,
 then the following variables will be set up:</p>
 <source>
 A_#=2 (number of rows)
 A_1=column 1, row 1
 A_2=column 1, row 2
 C_#=2 (number of rows)
 C_1=column 3, row 1
 C_2=column 3, row 2
 </source>
 <p>
 If the Select statement returns zero rows, then the <code>A_#</code> and <code>C_#</code> variables would be set to <code>0</code>, and no other variables would be set.
 </p>
 <p>
 Old variables are cleared if necessary - e.g. if the first select retrieves six rows and a second select returns only three rows,
 the additional variables for rows four, five and six will be removed.
 </p>
 <note>The latency time is set from the time it took to acquire a connection.</note>
 </description>
 
 <properties>
         <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
         <property name="Variable Name" required="Yes">
         Name of the JMeter variable that the connection pool is bound to.
         This must agree with the '<code>Variable Name</code>' field of a <complink name="JDBC Connection Configuration"/>.
         </property>
         <property name="Query Type" required="Yes">Set this according to the statement type:
             <ul>
             <li>Select Statement</li>
             <li>Update Statement - use this for Inserts and Deletes as well</li>
             <li>Callable Statement</li>
             <li>Prepared Select Statement</li>
             <li>Prepared Update Statement - use this for Inserts and Deletes as well</li>
             <li>Commit</li>
             <li>Rollback</li>
             <li>Autocommit(false)</li>
             <li>Autocommit(true)</li>
             <li>Edit - this should be a variable reference that evaluates to one of the above</li>
             </ul>
         </property>
         <property name="SQL Query" required="Yes">
         SQL query.
         <note>Do not enter a trailing semi-colon.</note>
         There is generally no need to use <code>{</code> and <code>}</code> to enclose Callable statements;
         however they may be used if the database uses a non-standard syntax.
         <note>The JDBC driver automatically converts the statement if necessary when it is enclosed in <code>{}</code>.</note>
         For example:
         <ul>
         <li><code>select * from t_customers where id=23</code></li>
         <li><code>CALL SYSCS_UTIL.SYSCS_EXPORT_TABLE (null, ?, ?, null, null, null)</code>
         <ul>
         <li>Parameter values: <code>tablename</code>,<code>filename</code></li>
         <li>Parameter types:  <code>VARCHAR</code>,<code>VARCHAR</code></li>
         </ul>
         </li>
         </ul>
         The second example assumes you are using Apache Derby.
         </property>
         <property name="Parameter values" required="Yes, if a prepared or callable statement has parameters">
         Comma-separated list of parameter values. Use <code>]NULL[</code> to indicate a <code>NULL</code> parameter.
         (If required, the null string can be changed by defining the property "<code>jdbcsampler.nullmarker</code>".)
         <br></br>
         The list must be enclosed in double-quotes if any of the values contain a comma or double-quote,
         and any embedded double-quotes must be doubled-up, for example:
         <source>"Dbl-Quote: "" and Comma: ,"</source>
         <note>There must be as many values as there are placeholders in the statement even if your parameters are <code>OUT</code> ones.
         Be sure to set a value even if the value will not be used (for example in a CallableStatement).</note>
         </property>
         <property name="Parameter types" required="Yes, if a prepared or callable statement has parameters">
         Comma-separated list of SQL parameter types (e.g. <code>INTEGER</code>, <code>DATE</code>, <code>VARCHAR</code>, <code>DOUBLE</code>) or integer values of Constants. Those integer values can be used, when you use custom database types proposed by driver (For example <code>OracleTypes.CURSOR</code> could be represented by its integer value <code>-10</code>).<br/>
         These are defined as fields in the class <code>java.sql.Types</code>, see for example:<br/>
         <a href="http://docs.oracle.com/javase/8/docs/api/java/sql/Types.html">Javadoc for java.sql.Types</a>.<br/>
         <note>Note: JMeter will use whatever types are defined by the runtime JVM,
         so if you are running on a different JVM, be sure to check the appropriate documentation</note>
         <b>If the callable statement has <code>INOUT</code> or <code>OUT</code> parameters, then these must be indicated by prefixing the
         appropriate parameter types, e.g. instead of "<code>INTEGER</code>", use "<code>INOUT INTEGER</code>".</b> <br/>
         If not specified, "<code>IN</code>" is assumed, i.e. "<code>DATE</code>" is the same as "<code>IN DATE</code>".
         <br></br>
         If the type is not one of the fields found in <code>java.sql.Types</code>, JMeter also
         accepts the corresponding integer number, e.g. since <code>OracleTypes.CURSOR == -10</code>, you can use "<code>INOUT -10</code>".
         <br></br>
         There must be as many types as there are placeholders in the statement.
         </property>
         <property name="Variable Names" required="No">Comma-separated list of variable names to hold values returned by Select statements, Prepared Select Statements or CallableStatement. 
         Note that when used with CallableStatement, list of variables must be in the same sequence as the <code>OUT</code> parameters returned by the call.
         If there are less variable names than <code>OUT</code> parameters only as many results shall be stored in the thread-context variables as variable names were supplied.
         If more variable names than <code>OUT</code> parameters exist, the additional variables will be ignored</property>
         <property name="Result Variable Name" required="No">
         If specified, this will create an Object variable containing a list of row maps.
         Each map contains the column name as the key and the column data as the value. Usage:<br></br>
         <source>columnValue = vars.getObject("resultObject").get(0).get("Column Name");</source>
         </property>
         <property name="Handle ResultSet" required="No">Defines how ResultSet returned from callable statements be handled:
             <ul>
                 <li><code>Store As String</code> (default) - All variables on Variable Names list are stored as strings, will not iterate through a <code>ResultSet</code> when present on the list. <code>CLOB</code>s will be converted to Strings. <code>BLOB</code>s will be converted to Strings as if they were an UTF-8 encoded byte-array. Both <code>CLOB</code>s and <code>BLOB</code>s will be cut off after <code>jdbcsampler.max_retain_result_size</code> bytes.</li>
                 <li><code>Store As Object</code> - Variables of <code>ResultSet</code> type on Variables Names list will be stored as Object and can be accessed in subsequent tests/scripts and iterated, will not iterate through the <code>ResultSet</code>. <code>CLOB</code>s will be handled as if <code>Store As String</code> was selected. <code>BLOBs</code> will be stored as a byte array. Both <code>CLOB</code>s and <code>BLOB</code>s will be cut off after <code>jdbcsampler.max_retain_result_size</code> bytes.</li>
                 <li><code>Count Records</code> - Variables of <code>ResultSet</code> types will be iterated through showing the count of records as result. Variables will be stored as Strings. For <code>BLOB</code>s the size of the object will be stored.</li>
             </ul>
         </property>
 </properties>
 
 <links>
         <link href="build-db-test-plan.html">Building a Database Test Plan</link>
         <complink name="JDBC Connection Configuration"/>
 </links>
 <note>Current Versions of JMeter use UTF-8 as the character encoding. Previously the platform default was used.</note>
 <note>Ensure Variable Name is unique across Test Plan.</note>
 </component>
 
 <component name="Java Request" index="&sect-num;.1.4"  width="628" height="365" screenshot="java_request.png">
 
 <description><p>This sampler lets you control a java class that implements the
 <code>org.apache.jmeter.protocol.java.sampler.JavaSamplerClient</code> interface.
 By writing your own implementation of this interface,
 you can use JMeter to harness multiple threads, input parameter control, and
 data collection.</p>
 <p>The pull-down menu provides the list of all such implementations found by
 JMeter in its classpath.  The parameters can then be specified in the
 table below - as defined by your implementation.  Two simple examples (<code>JavaTest</code> and <code>SleepTest</code>) are provided.
 </p>
 <p>
 The <code>JavaTest</code> example sampler can be useful for checking test plans, because it allows one to set
 values in almost all the fields. These can then be used by Assertions, etc.
 The fields allow variables to be used, so the values of these can readily be seen.
 </p>
 </description>
 
 <note>If the method <code>teardownTest</code> is not overridden by a subclass of <code><a href="../api/org/apache/jmeter/protocol/java/sampler/AbstractJavaSamplerClient.html">AbstractJavaSamplerClient</a></code>, its <code>teardownTest</code> method will not be called.
 This reduces JMeter memory requirements.
 This will not have any impact on existing Test plans.
 </note>
 <note>The Add/Delete buttons don't serve any purpose at present.</note>
 
     <properties>
         <property name="Name" required="No">Descriptive name for this sampler
          that is shown in the tree.</property>
         <property name="Classname" required="Yes">The specific implementation of
         the JavaSamplerClient interface to be sampled.</property>
         <property name="Send Parameters with Request" required="No">A list of
         arguments that will be passed to the sampled class.  All arguments
         are sent as Strings. See below for specific settings.</property>
     </properties>
 
     <p>The following parameters apply to the <code>SleepTest</code> and <code>JavaTest</code> implementations:</p>
 
     <properties>
         <property name="Sleep_time" required="Yes">How long to sleep for (ms)</property>
         <property name="Sleep_mask" required="Yes">How much "randomness" to add:<br></br>
             The sleep time is calculated as follows:
             <source>totalSleepTime = SleepTime + (System.currentTimeMillis() % SleepMask)</source>
         </property>
     </properties>
 
     <p>The following parameters apply additionally to the <code>JavaTest</code> implementation:</p>
 
     <properties>
         <property name="Label" required="No">The label to use. If provided, overrides <code>Name</code></property>
         <property name="ResponseCode" required="No">If provided, sets the SampleResult ResponseCode.</property>
         <property name="ResponseMessage" required="No">If provided, sets the SampleResult ResponseMessage.</property>
         <property name="Status" required="No">If provided, sets the SampleResult Status. If this equals "<code>OK</code>" (ignoring case) then the status is set to success, otherwise the sample is marked as failed.</property>
         <property name="SamplerData" required="No">If provided, sets the SampleResult SamplerData.</property>
         <property name="ResultData" required="No">If provided, sets the SampleResult ResultData.</property>
     </properties>
 </component>
-
-<component name="SOAP/XML-RPC Request (DEPRECATED)" index="&sect-num;.1.5"  width="426" height="276" screenshot="soap_sampler.png">
-<note>
-See <a href="build-ws-test-plan.html">Building a WebService Test Plan</a> for up to date way of test SOAP and REST Webservices
-</note>
-<description><p>This sampler lets you send a SOAP request to a webservice.  It can also be
-used to send XML-RPC over HTTP.  It creates an HTTP POST request, with the specified XML as the
-POST content.
-To change the "<code>Content-type</code>" from the default of "<code>text/xml</code>", use a <complink name="HTTP Header Manager" />.
-Note that the sampler will use all the headers from the <complink name="HTTP Header Manager"/>.
-If a SOAP action is specified, that will override any <code>SOAPaction</code> in the <complink name="HTTP Header Manager"/>.
-The primary difference between the soap sampler and
-webservice sampler, is the soap sampler uses raw post and does not require conformance to
-SOAP 1.1.</p>
-<note>The sampler no longer uses chunked encoding by default.<br/>
-For screen input, it now always uses the size of the data.<br/>
-File input uses the file length as determined by Java.<br/>
-On some OSes this may not work for all files, in which case add a child <complink name="HTTP Header Manager"/>
-with <code>Content-Length</code> set to the actual length of the file.<br/>
-Or set <code>Content-Length</code> to <code>-1</code> to force chunked encoding.
-</note>
-</description>
-
-<properties>
-        <property name="Name" required="No">Descriptive name for this sampler
-         that is shown in the tree.</property>
-        <property name="URL" required="Yes">The URL to direct the SOAP request to.</property>
-        <property name="Send SOAP action" required="No">Send a SOAP action header? (overrides the <complink name="HTTP Header Manager"/>)</property>
-        <property name="Use KeepAlive" required="No">If set, sends <code>Connection: keep-alive</code>, else sends <code>Connection: close</code></property>
-        <property name="Soap/XML-RPC Data" required="No">The Soap XML message, or XML-RPC instructions.
-        Not used if the filename is provided.
-        </property>
-        <property name="Filename" required="No">If specified, then the contents of the file are sent, and the Data field is ignored</property>
-        </properties>
-</component>
-
 <component name="LDAP Request" index="&sect-num;.1.7" width="621" height="462" screenshot="ldap_request.png">
   <description>This Sampler lets you send a different Ldap request(<code>Add</code>, <code>Modify</code>, <code>Delete</code> and <code>Search</code>) to an LDAP server.
     <p>If you are going to send multiple requests to the same LDAP server, consider
       using an <complink name="LDAP Request Defaults"/>
       Configuration Element so you do not have to enter the same information for each
       LDAP Request.</p> The same way the <complink name="Login Config Element"/> also using for Login and password.
   </description>
 
   <p>There are two ways to create test cases for testing an LDAP Server.</p>
   <ol>
     <li>Inbuilt Test cases.</li>
     <li>User defined Test cases.</li>
   </ol>
 
   <p>There are four test scenarios of testing LDAP. The tests are given below:</p>
   <ol>
     <li>Add Test
       <ol>
         <li>Inbuilt test:
           <p>This will add a pre-defined entry in the LDAP Server and calculate
           the execution time. After execution of the test, the created entry will be
           deleted from the LDAP
           Server.</p>
         </li>
         <li>User defined test:
           <p>This will add the entry in the LDAP Server. User has to enter all the
           attributes in the table.The entries are collected from the table to add. The
           execution time is calculated. The created entry will not be deleted after the
           test.</p>
         </li>
       </ol>
     </li>
     <li>Modify Test
       <ol>
         <li>Inbuilt test:
           <p>This will create a pre-defined entry first, then will modify the
           created entry in the LDAP Server.And calculate the execution time. After
           execution
           of the test, the created entry will be deleted from the LDAP Server.</p>
         </li>
         <li>User defined test:
           <p>This will modify the entry in the LDAP Server. User has to enter all the
           attributes in the table. The entries are collected from the table to modify.
           The execution time is calculated. The entry will not be deleted from the LDAP
           Server.</p>
         </li>
       </ol>
     </li>
     <li>Search Test
       <ol>
         <li>Inbuilt test:
           <p>This will create the entry first, then will search if the attributes
           are available. It calculates the execution time of the search query. At the
           end of  the execution,created entry will be deleted from the LDAP Server.</p>
         </li>
         <li>User defined test:
           <p>This will search the user defined entry(Search filter) in the Search
           base (again, defined by the user). The entries should be available in the LDAP
           Server. The execution time is  calculated.</p>
         </li>
       </ol>
     </li>
     <li>Delete Test
       <ol>
         <li>Inbuilt test:
           <p>This will create a pre-defined entry first, then it will be deleted
           from the LDAP Server. The execution time is calculated.</p>
         </li>
         <li>User defined test:
           <p>This will delete the user-defined entry in the LDAP Server. The entries
           should be available in the LDAP Server. The execution time is calculated.</p>
         </li>
       </ol>
     </li>
   </ol>
   <properties>
     <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
     <property name="Server Name or IP" required="Yes">Domain name or IP address of the LDAP server.
       JMeter assumes the LDAP server is listening on the default port (<code>389</code>).</property>
     <property name="Port" required="Yes">Port to connect to (default is <code>389</code>).</property>
     <property name="root DN" required="Yes">Base DN to use for ldap operations</property>
     <property name="Username" required="Usually">LDAP server username.</property>
     <property name="Password" required="Usually">LDAP server password. (N.B. this is stored unencrypted in the test plan)</property>
     <property name="Entry DN" required="Yes, if User Defined Test and Add Test or Modify Test is selected">the name of the context to create or Modify; may not be empty.
      <note>You have to set the right attributes of the object yourself. So if you want to add <code>cn=apache,ou=test</code>
       you have to add in the table <code>name</code> and <code>value</code> to <code>cn</code> and <code>apache</code>.
      </note>
     </property>
     <property name="Delete" required="Yes, if User Defined Test and Delete Test is selected">the name of the context to Delete; may not be empty</property>
     <property name="Search base" required="Yes, if User Defined Test and Search Test is selected">the name of the context or object to search</property>
     <property name="Search filter" required="Yes, if User Defined Test and Search Test is selected"> the filter expression to use for the search; may not be null</property>
     <property name="add test" required="Yes, if User Defined Test and add Test is selected">Use these <code>name</code>, <code>value</code> pairs for creation of the new object in the given context</property>
     <property name="modify test" required="Yes, if User Defined Test and Modify Test is selected">Use these <code>name</code>, <code>value</code> pairs for modification of the given context object</property>
   </properties>
 
   <links>
     <link href="build-ldap-test-plan.html">Building an Ldap Test Plan</link>
     <complink name="LDAP Request Defaults"/>
   </links>
 
 </component>
 
 <component name="LDAP Extended Request" index="&sect-num;.1.8" width="619" height="371" screenshot="ldapext_request.png">
   <description>This Sampler can send all 8 different LDAP requests to an LDAP server. It is an extended version of the LDAP sampler,
   therefore it is harder to configure, but can be made much closer resembling a real LDAP session.
     <p>If you are going to send multiple requests to the same LDAP server, consider
       using an <complink name="LDAP Extended Request Defaults"/>
       Configuration Element so you do not have to enter the same information for each
       LDAP Request.</p> </description>
 
    <p>There are nine test operations defined. These operations are given below:</p>
     <dl>
       <dt><b>Thread bind</b></dt>
       <dd>
         <p>Any LDAP request is part of an LDAP session, so the first thing that should be done is starting a session to the LDAP server.
         For starting this session a thread bind is used, which is equal to the LDAP "<code>bind</code>" operation.
         The user is requested to give a <code>username</code> (Distinguished name) and <code>password</code>,
         which will be used to initiate a session.
         When no password, or the wrong password is specified, an anonymous session is started. Take care,
         omitting the password will not fail this test, a wrong password will.
         (N.B. this is stored unencrypted in the test plan)</p>
         <properties>
           <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
           <property name="Servername" required="Yes">The name (or IP-address) of the LDAP server.</property>
           <property name="Port" required="No">The port number that the LDAP server is listening to. If this is omitted
             JMeter assumes the LDAP server is listening on the default port(389).</property>
           <property name="DN" required="No">The distinguished name of the base object that will be used for any subsequent operation.
             It can be used as a starting point for all operations. You cannot start any operation on a higher level than this DN!</property>
           <property name="Username" required="No">Full distinguished name of the user as which you want to bind.</property>
           <property name="Password" required="No">Password for the above user. If omitted it will result in an anonymous bind.
             If it is incorrect, the sampler will return an error and revert to an anonymous bind. (N.B. this is stored unencrypted in the test plan)</property>
         </properties>
       </dd>
       <dt><b>Thread unbind</b></dt>
       <dd>
         <p>This is simply the operation to end a session.
         It is equal to the LDAP "<code>unbind</code>" operation.</p>
         <properties>
           <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
         </properties>
       </dd>
       <dt><b>Single bind/unbind</b></dt>
       <dd>
         <p> This is a combination of the LDAP "<code>bind</code>" and "<code>unbind</code>" operations.
         It can be used for an authentication request/password check for any user. It will open a new session, just to
         check the validity of the user/password combination, and end the session again.</p>
         <properties>
           <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
           <property name="Username" required="Yes">Full distinguished name of the user as which you want to bind.</property>
           <property name="Password" required="No">Password for the above user. If omitted it will result in an anonymous bind.
             If it is incorrect, the sampler will return an error. (N.B. this is stored unencrypted in the test plan)</property>
         </properties>
       </dd>
       <dt><b>Rename entry</b></dt>
       <dd>
        <p>This is the LDAP "<code>moddn</code>" operation. It can be used to rename an entry, but
        also for moving an entry or a complete subtree to a different place in
        the LDAP tree.</p>
        <properties>
          <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
          <property name="Old entry name" required="Yes">The current distinguished name of the object you want to rename or move,
            relative to the given DN in the thread bind operation.</property>
          <property name="New distinguished name" required="Yes">The new distinguished name of the object you want to rename or move,
            relative to the given DN in the thread bind operation.</property>
        </properties>
      </dd>
      <dt><b>Add test</b></dt>
      <dd>
        <p>This is the ldap "<code>add</code>" operation. It can be used to add any kind of
        object to the LDAP server.</p>
        <properties>
          <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
          <property name="Entry DN" required="Yes">Distinguished name of the object you want to add, relative to the given DN in the thread bind operation.</property>
          <property name="Add test" required="Yes">A list of attributes and their values you want to use for the object.
            If you need to add a multiple value attribute, you need to add the same attribute with their respective
            values several times to the list.</property>
        </properties>
      </dd>
      <dt><b>Delete test</b></dt>
      <dd>
        <p> This is the LDAP "<code>delete</code>" operation, it can be used to delete an
        object from the LDAP tree</p>
        <properties>
          <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
          <property name="Delete" required="Yes">Distinguished name of the object you want to delete, relative to the given DN in the thread bind operation.</property>
        </properties>
      </dd>
      <dt><b>Search test</b></dt>
      <dd>
        <p>This is the LDAP "<code>search</code>" operation, and will be used for defining searches.</p>
        <properties>
          <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
          <property name="Search base" required="No">Distinguished name of the subtree you want your
            search to look in, relative to the given DN in the thread bind operation.</property>
          <property name="Search Filter" required="Yes">searchfilter, must be specified in LDAP syntax.</property>
          <property name="Scope" required="No">Use <code>0</code> for baseobject-, <code>1</code> for onelevel- and <code>2</code> for a subtree search. (Default=<code>0</code>)</property>
          <property name="Size Limit" required="No">Specify the maximum number of results you want back from the server. (default=<code>0</code>, which means no limit.) When the sampler hits the maximum number of results, it will fail with errorcode <code>4</code></property>
          <property name="Time Limit" required="No">Specify the maximum amount of (cpu)time (in milliseconds) that the server can spend on your search. Take care, this does not say anything about the response time. (default is <code>0</code>, which means no limit)</property>
          <property name="Attributes" required="No">Specify the attributes you want to have returned, separated by a semicolon. An empty field will return all attributes</property>
          <property name="Return object" required="No">Whether the object will be returned (<code>true</code>) or not (<code>false</code>). Default=<code>false</code></property>
          <property name="Dereference aliases" required="No">If <code>true</code>, it will dereference aliases, if <code>false</code>, it will not follow them (default=<code>false</code>)</property>
          <property name="Parse the search results?" required="No">If <code>true</code>, the search results will be added to the response data. If <code>false</code>, a marker - whether results where found or not - will be added to the response data.</property>
        </properties>
      </dd>
      <dt><b>Modification test</b></dt>
      <dd>
        <p>This is the LDAP "<code>modify</code>" operation. It can be used to modify an object. It
        can be used to add, delete or replace values of an attribute. </p>
        <properties>
          <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
          <property name="Entry name" required="Yes">Distinguished name of the object you want to modify, relative 
            to the given DN in the thread bind operation</property>
          <property name="Modification test" required="Yes">The attribute-value-opCode triples. The opCode can be any
            valid LDAP operationCode (<code>add</code>, <code>delete</code>/<code>remove</code> or <code>replace</code>).
            If you don't specify a value with a <code>delete</code> operation,
            all values of the given attribute will be deleted. If you do specify a value in a <code>delete</code> operation, only
            the given value will be deleted. If this value is non-existent, the sampler will fail the test.</property>
        </properties>
      </dd>
      <dt><b>Compare</b></dt>
      <dd>
        <p>This is the LDAP "<code>compare</code>" operation. It can be used to compare the value
        of a given attribute with some already known value. In reality this is mostly
        used to check whether a given person is a member of some group. In such a case
        you can compare the DN of the user as a given value, with the values in the
        attribute "<code>member</code>" of an object of the type <code>groupOfNames</code>.
        If the compare operation fails, this test fails with errorcode <code>49</code>.</p>
        <properties>
          <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
          <property name="Entry DN" required="Yes">The current distinguished name of the object of
            which you want  to compare an attribute, relative to the given DN in the thread bind operation.</property>
          <property name="Compare filter" required="Yes">In the form "<code>attribute=value</code>"</property>
        </properties>
      </dd>
    </dl>
    <links>
      <link href="build-ldapext-test-plan.html">Building an LDAP Test Plan</link>
      <complink name="LDAP Extended Request Defaults"/>
    </links>
 </component>
 
 
 
 
 <component name="Access Log Sampler" index="&sect-num;.1.9"  width="702" height="305" screenshot="accesslogsampler.png">
 <center><h2>(Beta Code)</h2></center>
 <description><p>AccessLogSampler was designed to read access logs and generate http requests.
 For those not familiar with the access log, it is the log the webserver maintains of every
 request it accepted. This means every image, css file, javascript file, html file, &hellip;
 The current implementation is complete, but some features have not been enabled. 
 There is a filter for the access log parser, but I haven't figured out how to link to the pre-processor. 
 Once I do, changes to the sampler will be made to enable that functionality.</p>
 <p>Tomcat uses the common format for access logs. This means any webserver that uses the
 common log format can use the AccessLogSampler. Server that use common log format include:
 Tomcat, Resin, Weblogic, and SunOne. Common log format looks
 like this:</p>
 <source>127.0.0.1 - - [21/Oct/2003:05:37:21 -0500] "GET /index.jsp?%2Findex.jsp= HTTP/1.1" 200 8343</source>
 <note>The current implementation of the parser only looks at the text within the quotes that contains one of the HTTP protocol methods (<code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>DELETE</code>, &hellip;).
 Everything else is stripped out and ignored. For example, the response code is completely
 ignored by the parser. </note>
 <p>For the future, it might be nice to filter out entries that
 do not have a response code of <code>200</code>. Extending the sampler should be fairly simple. There
 are two interfaces you have to implement:</p>
 <ul>
 <li><code>org.apache.jmeter.protocol.http.util.accesslog.LogParser</code></li>
 <li><code>org.apache.jmeter.protocol.http.util.accesslog.Generator</code></li>
 </ul>
 <p>The current implementation of AccessLogSampler uses the generator to create a new
 HTTPSampler. The servername, port and get images are set by AccessLogSampler. Next,
 the parser is called with integer <code>1</code>, telling it to parse one entry. After that,
 <code>HTTPSampler.sample()</code> is called to make the request.</p>
 <source>
 samp = (HTTPSampler) GENERATOR.generateRequest();
 samp.setDomain(this.getDomain());
 samp.setPort(this.getPort());
 samp.setImageParser(this.isImageParser());
 PARSER.parse(1);
 res = samp.sample();
 res.setSampleLabel(samp.toString());
 </source>
 The required methods in <code>LogParser</code> are:
 <ul>
 <li><code>setGenerator(Generator)</code></li>
 <li><code>parse(int)</code></li> 
 </ul>
 <p>
 Classes implementing <code>Generator</code> interface should provide concrete implementation
 for all the methods. For an example of how to implement either interface, refer to
 <code>StandardGenerator</code> and <code>TCLogParser</code>.
 </p>
 </description>
 
 <properties>
         <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
         <property name="Server" required="Yes">Domain name or IP address of the web server.</property>
         <property name="Protocol" required="No (defaults to http">Scheme</property>
         <property name="Port" required="No (defaults to 80)">Port the web server is listening to.</property>
         <property name="Log parser class" required="Yes (default provided)">The log parser class is responsible for parsing the logs.</property>
         <property name="Filter" required="No">The filter class is used to filter out certain lines.</property>
         <property name="Location of log file" required="Yes">The location of the access log file.</property>
 </properties>
 <p>
 The <code>TCLogParser</code> processes the access log independently for each thread.
 The <code>SharedTCLogParser</code> and <code>OrderPreservingLogParser</code> share access to the file, 
 i.e. each thread gets the next entry in the log.
 </p>
 <p>
 The <code>SessionFilter</code> is intended to handle Cookies across threads. 
 It does not filter out any entries, but modifies the cookie manager so that the cookies for a given IP are
 processed by a single thread at a time. If two threads try to process samples from the same client IP address,
 then one will be forced to wait until the other has completed.
 </p>
 <p>
 The <code>LogFilter</code> is intended to allow access log entries to be filtered by filename and regex,
 as well as allowing for the replacement of file extensions. However, it is not currently possible
 to configure this via the GUI, so it cannot really be used.
 </p>
 </component>
 
 <component name="BeanShell Sampler" index="&sect-num;.1.10"  width="848" height="566" screenshot="beanshellsampler.png">
     <description><p>This sampler allows you to write a sampler using the BeanShell scripting language.
 </p><p>
 <b>For full details on using BeanShell, please see the <a href="http://www.beanshell.org/">BeanShell website.</a></b>
 </p>
 <p>
 The test element supports the <code>ThreadListener</code> and <code>TestListener</code> interface methods.
 These must be defined in the initialisation file.
 See the file <code>BeanShellListeners.bshrc</code> for example definitions.
 </p>
 <p>
 The BeanShell sampler also supports the <code>Interruptible</code> interface.
 The <code>interrupt()</code> method can be defined in the script or the init file.
 </p>
     </description>
 <properties>
     <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.
     The name is stored in the script variable Label</property>
     <property name="Reset bsh.Interpreter before each call" required="Yes">
     If this option is selected, then the interpreter will be recreated for each sample.
     This may be necessary for some long running scripts. 
     For further information, see <a href="best-practices#bsh_scripting">Best Practices - BeanShell scripting</a>.
     </property>
     <property name="Parameters" required="No">Parameters to pass to the BeanShell script.
     This is intended for use with script files; for scripts defined in the GUI, you can use whatever
     variable and function references you need within the script itself.
     The parameters are stored in the following variables:
     <dl>
         <dt><code>Parameters</code></dt><dd>string containing the parameters as a single variable</dd>
         <dt><code>bsh.args</code></dt><dd>String array containing parameters, split on white-space</dd>
     </dl></property>
     <property name="Script file" required="No">A file containing the BeanShell script to run.
     The file name is stored in the script variable <code>FileName</code></property>
     <property name="Script" required="Yes (unless script file is provided)">The BeanShell script to run. 
     The return value (if not <code>null</code>) is stored as the sampler result.</property>
 </properties>
 <note>
 N.B. Each Sampler instance has its own BeanShell interpreter,
 and Samplers are only called from a single thread
 </note><p>
 If the property "<code>beanshell.sampler.init</code>" is defined, it is passed to the Interpreter
 as the name of a sourced file.
 This can be used to define common methods and variables. 
 There is a sample init file in the bin directory: <code>BeanShellSampler.bshrc</code>.
 </p><p>
 If a script file is supplied, that will be used, otherwise the script will be used.</p>
 <note>
 JMeter processes function and variable references before passing the script field to the interpreter,
 so the references will only be resolved once.
 Variable and function references in script files will be passed
 verbatim to the interpreter, which is likely to cause a syntax error.
 In order to use runtime variables, please use the appropriate props methods,
 e.g.<code>props.get("START.HMS"); props.put("PROP1","1234");</code>
 <br/>
 BeanShell does not currently support Java 5 syntax such as generics and the enhanced for loop.
 </note>
         <p>Before invoking the script, some variables are set up in the BeanShell interpreter:</p>
         <p>The contents of the Parameters field is put into the variable "<code>Parameters</code>".
             The string is also split into separate tokens using a single space as the separator, and the resulting list
             is stored in the String array <code>bsh.args</code>.</p>
         <p>The full list of BeanShell variables that is set up is as follows:</p>
         <ul>
         <li><code>log</code> - the <a href="http://excalibur.apache.org/apidocs/org/apache/log/Logger.html">Logger</a></li>
         <li><code>Label</code> - the Sampler label</li>
         <li><code>FileName</code> - the file name, if any</li>
         <li><code>Parameters</code> - text from the Parameters field</li>
         <li><code>bsh.args</code> - the parameters, split as described above</li>
         <li><code>SampleResult</code> - pointer to the current <a href="../api/org/apache/jmeter/samplers/SampleResult.html"><code>SampleResult</code></a></li>
             <li><code>ResponseCode</code> defaults to <code>200</code></li>
             <li><code>ResponseMessage</code> defaults to "<code>OK</code>"</li>
             <li><code>IsSuccess</code> defaults to <code>true</code></li>
             <li><code>ctx</code> - <a href="../api/org/apache/jmeter/threads/JMeterContext.html">JMeterContext</a></li>
             <li><code>vars</code> - <a href="../api/org/apache/jmeter/threads/JMeterVariables.html">JMeterVariables</a>  - e.g. 
                <source>vars.get("VAR1");
 vars.put("VAR2","value");
 vars.remove("VAR3");
 vars.putObject("OBJ1",new Object());</source></li>
             <li><code>props</code> - JMeterProperties (class <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html"><code>java.util.Properties</code></a>) - e.g.
                 <source>props.get("START.HMS");
 props.put("PROP1","1234");</source></li>
         </ul>
         <p>When the script completes, control is returned to the Sampler, and it copies the contents
             of the following script variables into the corresponding variables in the <a href="../api/org/apache/jmeter/samplers/SampleResult.html"><code>SampleResult</code></a>:</p>
             <ul>
             <li><code>ResponseCode</code> - for example <code>200</code></li>
             <li><code>ResponseMessage</code> - for example "<code>OK</code>"</li>
             <li><code>IsSuccess</code> - <code>true</code> or <code>false</code></li>
             </ul>
             <p>The SampleResult ResponseData is set from the return value of the script.
             If the script returns null, it can set the response directly, by using the method 
             <code>SampleResult.setResponseData(data)</code>, where data is either a String or a byte array.
             The data type defaults to "<code>text</code>", but can be set to binary by using the method
             <code>SampleResult.setDataType(SampleResult.BINARY)</code>.
             </p>
             <p>The <code>SampleResult</code> variable gives the script full access to all the fields and
                 methods in the <code>SampleResult</code>. For example, the script has access to the methods
                 <code>setStopThread(boolean)</code> and <code>setStopTest(boolean)</code>.
 
                 Here is a simple (not very useful!) example script:</p>
 
 <source>
 if (bsh.args[0].equalsIgnoreCase("StopThread")) {
     log.info("Stop Thread detected!");
     SampleResult.setStopThread(true);
 }
 return "Data from sample with Label "+Label;
 //or
 SampleResult.setResponseData("My data");
 return null;
 </source>
 <p>Another example:<br></br> ensure that the property <code>beanshell.sampler.init=BeanShellSampler.bshrc</code> is defined in <code>jmeter.properties</code>. 
 The following script will show the values of all the variables in the <code>ResponseData</code> field:
 </p>
 <source>
 return getVariables();
 </source>
 <p>
 For details on the methods available for the various classes (<a href="../api/org/apache/jmeter/threads/JMeterVariables.html"><code>JMeterVariables</code></a>, <a href="../api/org/apache/jmeter/samplers/SampleResult.html"><code>SampleResult</code></a> etc.) please check the Javadoc or the source code.
 Beware however that misuse of any methods can cause subtle faults that may be difficult to find.
 </p>
 </component>
 
 
 <component name="BSF Sampler (DEPRECATED)" index="&sect-num;.1.11"  width="848" height="590" screenshot="bsfsampler.png">
     <description><p>This sampler allows you to write a sampler using a BSF scripting language.<br></br>
         See the <a href="http://commons.apache.org/bsf/index.html">Apache Bean Scripting Framework</a>
         website for details of the languages supported.
         You may need to download the appropriate jars for the language; they should be put in the JMeter <code>lib</code> directory.
         </p>
         <note>
         The BSF API has been largely superseded by JSR-223, which is included in Java 6 onwards.
         Most scripting languages now include support for JSR-223; please use the JSR223 Sampler instead.
         The BSF Sampler should only be needed for supporting legacy languages/test scripts.
         </note>
         <p>By default, JMeter supports the following languages:</p>
         <ul>
         <li>javascript</li>
         <li>xslt</li>
         </ul>
         <note>Unlike the BeanShell sampler, the interpreter is not saved between invocations.</note>
     </description>
 <properties>
     <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
     <property name="Scripting Language" required="Yes">Name of the BSF scripting language to be used.
       <note>N.B. Not all the languages in the drop-down list are supported by default.
         The following are supported: javascript, xslt.
         Others may be available if the appropriate jar is installed in the JMeter lib directory.
       </note>
     </property>
     <property name="Script File" required="No">Name of a file to be used as a BSF script, if a relative file path is used, then it will be relative to directory referenced by "<code>user.dir</code>" System property</property>
     <property name="Parameters" required="No">List of parameters to be passed to the script file or the script.</property>
     <property name="Script" required="Yes (unless script file is provided)">Script to be passed to BSF language</property>
 </properties>
 <p>
 If a script file is supplied, that will be used, otherwise the script will be used.</p>
 <note>
 JMeter processes function and variable references before passing the script field to the interpreter,
 so the references will only be resolved once.
 Variable and function references in script files will be passed
 verbatim to the interpreter, which is likely to cause a syntax error.
 In order to use runtime variables, please use the appropriate props methods,
 e.g.<code>props.get("START.HMS"); props.put("PROP1","1234");</code> 
 </note>
 <p>
 Before invoking the script, some variables are set up.
 Note that these are BSF variables - i.e. they can be used directly in the script.
 </p>
 <ul>
 <li><code>log</code> - the <a href="http://excalibur.apache.org/apidocs/org/apache/log/Logger.html">Logger</a></li>
 <li><code>Label</code> - the Sampler label</li>
 <li><code>FileName</code> - the file name, if any</li>
 <li><code>Parameters</code> - text from the Parameters field</li>
 <li><code>args</code> - the parameters, split as described above</li>
 <li><code>SampleResult</code> - pointer to the current <a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a></li>
 <li><code>sampler</code> - <a href="../api/org/apache/jmeter/samplers/Sampler.html">Sampler</a> - pointer to current Sampler</li>
 <li><code>ctx</code> - <a href="../api/org/apache/jmeter/threads/JMeterContext.html">JMeterContext</a></li>
 <li><code>vars</code> - <a href="../api/org/apache/jmeter/threads/JMeterVariables.html">JMeterVariables</a>  - e.g. 
   <source>vars.get("VAR1");
 vars.put("VAR2","value");
 vars.remove("VAR3");
 vars.putObject("OBJ1",new Object());</source></li>
 <li><code>props</code> - JMeterProperties  (class <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html"><code>java.util.Properties</code></a>) - e.g. 
   <source>props.get("START.HMS");
 props.put("PROP1","1234");</source></li>
 <li><code>OUT</code> - System.out - e.g. <code>OUT.println("message")</code></li>
 </ul>
 <p>
 The <a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a> ResponseData is set from the return value of the script.
 If the script returns <code>null</code>, it can set the response directly, by using the method 
 <code>SampleResult.setResponseData(data)</code>, where data is either a String or a byte array.
 The data type defaults to "<code>text</code>", but can be set to binary by using the method
 <code>SampleResult.setDataType(SampleResult.BINARY)</code>.
 </p>
 <p>
 The SampleResult variable gives the script full access to all the fields and
 methods in the SampleResult. For example, the script has access to the methods
 <code>setStopThread(boolean)</code> and <code>setStopTest(boolean)</code>.
 </p>
 <p>
 Unlike the BeanShell Sampler, the BSF Sampler does not set the <code>ResponseCode</code>, <code>ResponseMessage</code> and sample status via script variables.
 Currently the only way to change these is via the <a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a> methods:
 </p>
 <ul>
 <li><code>SampleResult.setSuccessful(true/false)</code></li>
 <li><code>SampleResult.setResponseCode("code")</code></li>
 <li><code>SampleResult.setResponseMessage("message")</code></li>
 </ul>
 </component>
 
 <component name="JSR223 Sampler" index="&sect-num;.1.11.1" width="861" height="502" screenshot="jsr223-sampler.png">
 <description>
 <p>
 The JSR223 Sampler allows JSR223 script code to be used to perform a sample.
 </p>
 <p>
 The JSR223 test elements have a feature (compilation) that can significantly increase performance.
 To benefit from this feature:
 </p>
 <ul>
     <li>Use Script files instead of inlining them. This will make JMeter compile them if this feature is available on ScriptEngine and cache them.</li>
     <li>Or Use Script Text and check <code>Cache compiled script if available</code> property.
     <note>When using this feature, ensure your script code does not use JMeter variables directly in script code as caching would only cache first replacement. Instead use script parameters.</note>
     <note>To benefit from caching and compilation, the language engine used for scripting must implement JSR223 <code><a href="https://docs.oracle.com/javase/8/docs/api/javax/script/Compilable.html">Compilable</a></code> interface (Groovy is one of these, java, beanshell and javascript are not)</note>
     <note>When using Groovy as scripting language and not checking <code>Cache compiled script if available</code> (while caching is recommended), you should set this JVM Property <code>-Dgroovy.use.classvalue=true</code>
         due to a Groovy Memory leak as of version 2.4.6, see:
         <ul>
             <li><a href="https://issues.apache.org/jira/browse/GROOVY-7683" >GROOVY-7683</a></li>
             <li><a href="https://issues.apache.org/jira/browse/GROOVY-7591">GROOVY-7591</a></li>
             <li><a href="https://bugs.openjdk.java.net/browse/JDK-8136353">JDK-8136353</a></li>
         </ul> 
     </note>
     </li>
 </ul>
 Cache size is controlled by the following jmeter property (<code>jmeter.properties</code>):
 <source>jsr223.compiled_scripts_cache_size=100</source>
 <note>Unlike the <complink name="BeanShell Sampler" />, the interpreter is not saved between invocations.</note>
 <note>
 JSR223 Test Elements using Script file or Script text + checked <code>Cache compiled script if available</code> are now compiled if ScriptEngine supports this feature, this enables great performance enhancements.
 </note>
 </description>
 <note>
 JMeter processes function and variable references before passing the script field to the interpreter,
 so the references will only be resolved once.
 Variable and function references in script files will be passed
 verbatim to the interpreter, which is likely to cause a syntax error.
 In order to use runtime variables, please use the appropriate props methods,
 e.g. <source>props.get("START.HMS");
 props.put("PROP1","1234");</source>
 </note>
 <properties>
     <property name="Name" required="No">Descriptive name for this sampler that is shown in the tree.</property>
     <property name="Scripting Language" required="Yes">Name of the JSR223 scripting language to be used.
       <note>There are other languages supported than those that appear in the drop-down list.
         Others may be available if the appropriate jar is installed in the JMeter lib directory.
       </note>
     </property>
     <property name="Script File" required="No">Name of a file to be used as a JSR223 script, if a relative file path is used, then it will be relative to directory referenced by "<code>user.dir</code>" System property</property>
     <property name="Parameters" required="No">List of parameters to be passed to the script file or the script.</property>
     <property name="Cache compiled script if available" required="No">If checked (advised) and the language used supports <code><a href="https://docs.oracle.com/javase/8/docs/api/javax/script/Compilable.html">Compilable</a></code> interface (Groovy is one of these, java, beanshell and javascript are not), JMeter will compile the Script and cache it using it's MD5 hash as unique cache key</property>
     <property name="Script" required="Yes (unless script file is provided)">Script to be passed to JSR223 language</property>
 </properties>
 <p>
 If a script file is supplied, that will be used, otherwise the script will be used.</p>
 
 <p>
 Before invoking the script, some variables are set up.
 Note that these are JSR223 variables - i.e. they can be used directly in the script.
 </p>
 <ul>
 <li><code>log</code> - the <a href="http://excalibur.apache.org/apidocs/org/apache/log/Logger.html">Logger</a></li>
 <li><code>Label</code> - the Sampler label</li>
 <li><code>FileName</code> - the file name, if any</li>
 <li><code>Parameters</code> - text from the Parameters field</li>
 <li><code>args</code> - the parameters, split as described above</li>
 <li><code>SampleResult</code> - pointer to the current <a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a></li>
 <li><code>sampler</code> - (<a href="../api/org/apache/jmeter/samplers/Sampler.html">Sampler</a>) - pointer to current Sampler</li>
 <li><code>ctx</code> - <a href="../api/org/apache/jmeter/threads/JMeterContext.html">JMeterContext</a></li>
 <li><code>vars</code> - <a href="../api/org/apache/jmeter/threads/JMeterVariables.html">JMeterVariables</a>  - e.g. 
   <source>vars.get("VAR1");
 vars.put("VAR2","value");
 vars.remove("VAR3");
 vars.putObject("OBJ1",new Object());</source></li>
 <li><code>props</code> - JMeterProperties  (class <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html"><code>java.util.Properties</code></a>) - e.g. 
   <source>props.get("START.HMS");
 props.put("PROP1","1234");</source></li>
 <li><code>OUT</code> - System.out - e.g. <code>OUT.println("message")</code></li>
 </ul>
 <p>
 The <a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a> ResponseData is set from the return value of the script.
 If the script returns <code>null</code>, it can set the response directly, by using the method 
 <code>SampleResult.setResponseData(data)</code>, where data is either a String or a byte array.
 The data type defaults to "<code>text</code>", but can be set to binary by using the method
 <code>SampleResult.setDataType(SampleResult.BINARY)</code>.
 </p>
 <p>
 The SampleResult variable gives the script full access to all the fields and
 methods in the SampleResult. For example, the script has access to the methods
 <code>setStopThread(boolean)</code> and <code>setStopTest(boolean)</code>.
 </p>
 <p>
 Unlike the BeanShell Sampler, the JSR223 Sampler does not set the <code>ResponseCode</code>, <code>ResponseMessage</code> and sample status via script variables.
 Currently the only way to changes these is via the <a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a> methods:
 </p>
 <ul>
 <li><code>SampleResult.setSuccessful(true/false)</code></li>
 <li><code>SampleResult.setResponseCode("code")</code></li>
 <li><code>SampleResult.setResponseMessage("message")</code></li>
 </ul>
 </component>
 
 <component name="TCP Sampler" index="&sect-num;.1.12"  width="827" height="521" screenshot="tcpsampler.png">
     <description>
         <p>
         The TCP Sampler opens a TCP/IP connection to the specified server.
         It then sends the text, and waits for a response.
         </p><p>
         If "<code>Re-use connection</code>" is selected, connections are shared between Samplers in the same thread,
         provided that the exact same host name string and port are used. 
         Different hosts/port combinations will use different connections, as will different threads. 
         If both of "<code>Re-use connection</code>" and "<code>Close connection</code>" are selected, the socket will be closed after running the sampler. 
         On the next sampler, another socket will be created. You may want to close a socket at the end of each thread loop.
         </p><p>
         If an error is detected - or "<code>Re-use connection</code>" is not selected - the socket is closed.
         Another socket will be reopened on the next sample.
         </p><p>
         The following properties can be used to control its operation:
         </p>
         <dl>
             <dt><code>tcp.status.prefix</code></dt><dd>text that precedes a status number</dd>
             <dt><code>tcp.status.suffix</code></dt><dd>text that follows a status number</dd>
             <dt><code>tcp.status.properties</code></dt><dd>name of property file to convert status codes to messages</dd>
             <dt><code>tcp.handler</code></dt><dd>Name of TCP Handler class (default <code>TCPClientImpl</code>) - only used if not specified on the GUI</dd>
         </dl>
         The class that handles the connection is defined by the GUI, failing that the property <code>tcp.handler</code>.
         If not found, the class is then searched for in the package <code>org.apache.jmeter.protocol.tcp.sampler</code>.
         <p>
         Users can provide their own implementation.
         The class must extend <code>org.apache.jmeter.protocol.tcp.sampler.TCPClient</code>.
         </p>
         <p>
         The following implementations are currently provided.
         </p>
         <ul>
         <li><code>TCPClientImpl</code></li>
         <li><code>BinaryTCPClientImpl</code></li>
         <li><code>LengthPrefixedBinaryTCPClientImpl</code></li>
         </ul>
         The implementations behave as follows:
         <dl>
         <dt><code>TCPClientImpl</code></dt>
         <dd>
         This implementation is fairly basic.
         When reading the response, it reads until the end of line byte, if this is defined
         by setting the property <code>tcp.eolByte</code>, otherwise until the end of the input stream.
         You can control charset encoding by setting <code>tcp.charset</code>, which will default to Platform default encoding.
         </dd>
         <dt><code>BinaryTCPClientImpl</code></dt>
         <dd>
         This implementation converts the GUI input, which must be a hex-encoded string, into binary,
         and performs the reverse when reading the response.
         When reading the response, it reads until the end of message byte, if this is defined
         by setting the property <code>tcp.BinaryTCPClient.eomByte</code>, otherwise until the end of the input stream.
         </dd>
         <dt><code>LengthPrefixedBinaryTCPClientImpl</code></dt>
         <dd>
         This implementation extends BinaryTCPClientImpl by prefixing the binary message data with a binary length byte.
         The length prefix defaults to 2 bytes.
         This can be changed by setting the property <code>tcp.binarylength.prefix.length</code>.
         </dd>
         <dt><b>Timeout handling</b></dt>
         <dd>
         If the timeout is set, the read will be terminated when this expires. 
         So if you are using an <code>eolByte</code>/<code>eomByte</code>, make sure the timeout is sufficiently long,
         otherwise the read will be terminated early.
         </dd>
         <dt><b>Response handling</b></dt>
         <dd>
         If <code>tcp.status.prefix</code> is defined, then the response message is searched for the text following
         that up to the suffix. If any such text is found, it is used to set the response code.
         The response message is then fetched from the properties file (if provided).
         <example title="Usage of pre- and suffix" anchor="tcp-prefix-example">
         For example, if the prefix = "<code>[</code>" and the suffix = "<code>]</code>", then the following response:
         <source>[J28] XI123,23,GBP,CR</source>
         would have the response code <code>J28</code>.
         </example>
         Response codes in the range "<code>400</code>"-"<code>499</code>" and "<code>500</code>"-"<code>599</code>" are currently regarded as failures;
         all others are successful. [This needs to be made configurable!]
         </dd>
         </dl>
 <note>The login name/password are not used by the supplied TCP implementations.</note>
         <br></br>
         Sockets are disconnected at the end of a test run.
 </description>
 <properties>
   <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
   <property name="TCPClient classname" required="No">Name of the TCPClient class. Defaults to the property <code>tcp.handler</code>, failing that <code>TCPClientImpl</code>.</property>
   <property name="ServerName or IP" required="Yes">Name or IP of TCP server</property>
   <property name="Port Number" required="Yes">Port to be used</property>
   <property name="Re-use connection" required="Yes">If selected, the connection is kept open. Otherwise it is closed when the data has been read.</property>
   <property name="Close connection" required="Yes">If selected, the connection will be closed after running the sampler.</property>
   <property name="SO_LINGER" required="No">Enable/disable <code>SO_LINGER</code> with the specified linger time in seconds when a socket is created. If you set "<code>SO_LINGER</code>" value as <code>0</code>, you may prevent large numbers of sockets sitting around with a <code>TIME_WAIT</code> status.</property>
   <property name="End of line(EOL) byte value" required="No">Byte value for end of line, set this to a value outside the range <code>-128</code> to <code>+127</code> to skip <code>eol</code> checking. You may set this in <code>jmeter.properties</code> file as well with <code>eolByte</code> property. If you set this in TCP Sampler Config and in <code>jmeter.properties</code> file at the same time, the setting value in the TCP Sampler Config will be used.</property>
   <property name="Connect Timeout" required="No">Connect Timeout (milliseconds, <code>0</code> disables).</property>
   <property name="Response Timeout" required="No">Response Timeout (milliseconds, <code>0</code> disables).</property>
   <property name="Set NoDelay" required="Yes">See <code>java.net.Socket.setTcpNoDelay()</code>.
   If selected, this will disable Nagle's algorithm, otherwise Nagle's algorithm will be used.</property>
   <property name="Text to Send" required="Yes">Text to be sent</property>
   <property name="Login User" required="No">User Name - not used by default implementation</property>
   <property name="Password" required="No">Password - not used by default implementation (N.B. this is stored unencrypted in the test plan)</property>
 </properties>
 </component>
 
 <component name="JMS Publisher" index="&sect-num;.1.13" width="854" height="796" screenshot="jmspublisher.png">
 <note>BETA CODE - the code is still subject to change</note>
     <description>
         <p>
         JMS Publisher will publish messages to a given destination (topic/queue). For those not
         familiar with JMS, it is the J2EE specification for messaging. There are
         numerous JMS servers on the market and several open source options.
         </p>
         <br></br>
 <note>JMeter does not include any JMS implementation jar; this must be downloaded from the JMS provider and put in the lib directory</note>
     </description>
 <properties>
   <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
   <property name="use JNDI properties file" required="Yes">use <code>jndi.properties</code>. 
   Note that the file must be on the classpath - e.g. by updating the <code>user.classpath</code> JMeter property.
   If this option is not selected, JMeter uses the "<code>JNDI Initial Context Factory</code>" and "<code>Provider URL</code>" fields
   to create the connection.
   </property>
   <property name="JNDI Initial Context Factory" required="No">Name of the context factory</property>
   <property name="Provider URL" required="Yes, unless using jndi.properties">The URL for the jms provider</property>
   <property name="Destination" required="Yes">The message destination (topic or queue name)</property>
   <property name="Setup" required="Yes">The destination setup type. With <code>At startup</code>, the destination name is static (i.e. always same name during the test), with <code>Each sample</code>, the destination name is dynamic and is evaluate at each sample (i.e. the destination name may be a variable)</property>
   <property name="Authentication" required="Yes">Authentication requirement for the JMS provider</property>
   <property name="User" required="No">User Name</property>
   <property name="Password" required="No">Password (N.B. this is stored unencrypted in the test plan)</property>
   <property name="Expiration" required="No">
       The expiration time (in milliseconds) of the message before it becomes obsolete.
       If you do not specify an expiration time, the default value is <code>0</code> (never expires). 
   </property>
   <property name="Priority" required="No">
       The priority level of the message. There are ten priority levels from <code>0</code> (lowest) to <code>9</code> (highest). 
       If you do not specify a priority level, the default level is <code>4</code>. 
   </property>
   <property name="Reconnect on error codes (regex)" required="No">Regular expression for JMSException error codes which force reconnection. If empty no reconnection will be done</property>
   <property name="Number of samples to aggregate" required="Yes">Number of samples to aggregate</property>
   <property name="Message source" required="Yes">Where to obtain the message:
   <dl>
     <dt><code>From File</code></dt><dd>means the referenced file will be read and reused by all samples. If file name changes it is reloaded since JMeter 3.0</dd>
     <dt><code>Random File from folder specified below</code></dt><dd>means a random file will be selected from folder specified below, this folder must contain either files with extension <code>.dat</code> for Bytes Messages, or files with extension <code>.txt</code> or <code>.obj</code> for Object or Text messages</dd>
     <dt><code>Text area</code></dt><dd>The Message to use either for Text or Object message</dd>
   </dl>
   </property>
   <property name="Message type" required="Yes">Text, Map, Object message or Bytes Message</property>
   <property name="Use non-persistent delivery mode?" required="No">
       Whether to set <code>DeliveryMode.NON_PERSISTENT</code> (defaults to <code>false</code>)
   </property>
   <property name="JMS Properties" required="No">
       The JMS Properties are properties specific for the underlying messaging system.
       You can setup the name, the value and the class (type) of value. Default type is <code>String</code>.
       For example: for WebSphere 5.1 web services you will need to set the JMS Property targetService to test
       webservices through JMS.
   </property>
 
 </properties>
 <p>
 For the MapMessage type, JMeter reads the source as lines of text.
 Each line must have 3 fields, delimited by commas.
 The fields are:</p>
 <ul>
 <li>Name of entry</li>
 <li>Object class name, e.g. "<code>String</code>" (assumes <code>java.lang</code> package if not specified)</li>
 <li>Object string value</li>
 </ul>
 For each entry, JMeter adds an Object with the given name.
 The value is derived by creating an instance of the class, and using the <code>valueOf(String)</code> method to convert the value if necessary.
 For example:
 <source>
 name,String,Example
 size,Integer,1234
 </source>
 This is a very simple implementation; it is not intended to support all possible object types.
 <note> 
 The Object message is implemented and works as follow:
 <ul>
 <li>Put the JAR that contains your object and its dependencies in <code>jmeter_home/lib/</code> folder</li>
 <li>Serialize your object as XML using XStream</li>
 <li>Either put result in a file suffixed with <code>.txt</code> or <code>.obj</code> or put XML content directly in Text Area</li>  
 </ul>
 Note that if message is in a file, replacement of properties will not occur while it will if you use Text Area.
 </note>
 
 <p>
 The following table shows some values which may be useful when configuring JMS:
 </p>
 <table>
 <tr>
 <!-- Anakia does not like th cell without any text -->
 <th>Apache <a href="http://activemq.apache.org/">ActiveMQ</a></th>
 <th>Value(s)</th>
 <th>Comment</th>
 </tr>
 <tr><td>Context Factory</td><td><code>org.apache.activemq.jndi.ActiveMQInitialContextFactory</code></td><td>.</td></tr>
 <tr><td>Provider URL</td><td><code>vm://localhost</code></td><td></td></tr>
 <tr><td>Provider URL</td><td><code>vm:(broker:(vm://localhost)?persistent=false)</code></td><td>Disable persistence</td></tr>
 <tr><td>Queue Reference</td><td><code>dynamicQueues/QUEUENAME</code></td>
 <td><a href="http://activemq.apache.org/jndi-support.html#JNDISupport-Dynamicallycreatingdestinations">Dynamically define</a> the QUEUENAME to JNDI</td></tr>
 <tr><td>Topic Reference</td><td><code>dynamicTopics/TOPICNAME</code></td>
 <td><a href="http://activemq.apache.org/jndi-support.html#JNDISupport-Dynamicallycreatingdestinations">Dynamically define</a> the TOPICNAME to JNDI</td></tr>
 </table>
 </component>
 
 <component name="JMS Subscriber" index="&sect-num;.1.14"  width="739" height="607" screenshot="jmssubscriber.png">
 <note>BETA CODE - the code is still subject to change</note>
     <description>
         <p>
         JMS Publisher will subscribe to messages in a given destination (topic or queue). For those not
         familiar with JMS, it is the J2EE specification for messaging. There are
         numerous JMS servers on the market and several open source options.
         </p>
         <br></br>
 <note>JMeter does not include any JMS implementation jar; this must be downloaded from the JMS provider and put in the lib directory</note>
     </description>
 <properties>
   <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
   <property name="use JNDI properties file" required="Yes">use <code>jndi.properties</code>. 
   Note that the file must be on the classpath - e.g. by updating the <code>user.classpath</code> JMeter property.
   If this option is not selected, JMeter uses the "<code>JNDI Initial Context Factory</code>" and "<code>Provider URL</code>" fields
   to create the connection.
   </property>
   <property name="JNDI Initial Context Factory" required="No">Name of the context factory</property>
   <property name="Provider URL" required="No">The URL for the jms provider</property>
   <property name="Destination" required="Yes">the message destination (topic or queue name)</property>
   <property name="Durable Subscription ID" required="No">The ID to use for a durable subscription. On first 
   use the respective queue will automatically be generated by the JMS provider if it does not exist yet.</property>
   <property name="Client ID" required="No">The Client ID to use when you use a durable subscription. 
   Be sure to add a variable like <code>${__threadNum}</code> when you have more than one Thread.</property>
   <property name="JMS Selector" required="No">Message Selector as defined by JMS specification to extract only 
   messages that respect the Selector condition. Syntax uses subpart of SQL 92.</property>
   <property name="Setup" required="Yes">The destination setup type. With <code>At startup</code>, the destination name is static (i.e. always same name during the test), with <code>Each sample</code>, the destination name is dynamic and is evaluate at each sample (i.e. the destination name may be a variable)</property>
   <property name="Authentication" required="Yes">Authentication requirement for the JMS provider</property>
   <property name="User" required="No">User Name</property>
   <property name="Password" required="No">Password (N.B. this is stored unencrypted in the test plan)</property>
   <property name="Number of samples to aggregate" required="Yes">number of samples to aggregate</property>
   <property name="Save response" required="Yes">should the sampler store the response. If not, only the response length is returned.</property>
   <property name="Timeout" required="Yes">Specify the timeout to be applied, in milliseconds. <code>0</code>=none. 
   This is the overall aggregate timeout, not per sample.</property>
   <property name="Client" required="Yes">Which client implementation to use.
   Both of them create connections which can read messages. However they use a different strategy, as described below:
   <dl>
   <dt><code>MessageConsumer.receive()</code></dt><dd>calls <code>receive()</code> for every requested message. 
   Retains the connection between samples, but does not fetch messages unless the sampler is active.
   This is best suited to Queue subscriptions. 
   </dd>
   <dt><code>MessageListener.onMessage()</code></dt><dd>establishes a Listener that stores all incoming messages on a queue. 
   The listener remains active after the sampler completes.
   This is best suited to Topic subscriptions.</dd>
   </dl>
   </property>
   <property name="Stop between samples?" required="Yes">
   If selected, then JMeter calls <code>Connection.stop()</code> at the end of each sample (and calls <code>start()</code> before each sample).
   This may be useful in some cases where multiple samples/threads have connections to the same queue.
   If not selected, JMeter calls <code>Connection.start()</code> at the start of the thread, and does not call <code>stop()</code> until the end of the thread.
   </property>
   <property name="Separator" required="No">
   Separator used to separate messages when there is more than one (related to setting Number of samples to aggregate).
   Note that <code>\n</code>, <code>\r</code>, <code>\t</code> are accepted.
   </property>
   <property name="Reconnect on error codes (regex)" required="No">Regular expression for JMSException error codes which force reconnection. If empty no reconnection will be done</property>
   <property name="Pause between errors (ms)" required="No">Pause in milliseconds that Subscriber will make when an error occurs</property>
 </properties>
 </component>
 
 <component name="JMS Point-to-Point" index="&sect-num;.1.15"  width="882" height="804" screenshot="jms/JMS_Point-to-Point.png">
 <note>BETA CODE - the code is still subject to change</note>
     <description>
         <p>
         This sampler sends and optionally receives JMS Messages through point-to-point connections (queues).
         It is different from pub/sub messages and is generally used for handling transactions.
         </p>
         <p>
         <code>Request Only</code> will typically be used to put load on a JMS System.<br></br>
         <code>Request Response</code> will be used when you want to test response time of a JMS service that processes messages sent to the Request Queue as this mode will wait for the response on the Reply queue sent by this service.<br></br>
         </p>
         <p>
         JMeter use the properties <code>java.naming.security.[principal|credentials]</code> - if present -
         when creating the Queue Connection. If this behaviour is not desired, set the JMeter property
         <code>JMSSampler.useSecurity.properties=false</code>
         </p>
         <br></br>
 <note>JMeter does not include any JMS implementation jar; this must be downloaded from the JMS provider and put in the lib directory</note>
     </description>
 <properties>
   <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
   <property name="QueueConnection Factory" required="Yes">
     The JNDI name of the queue connection factory to use for connecting to the messaging system.
   </property>
   <property name="JNDI Name Request queue" required="Yes">
     This is the JNDI name of the queue to which the messages are sent.
   </property>
   <property name="JNDI Name Reply queue" required="No">
     The JNDI name of the receiving queue. If a value is provided here and the communication style is <code>Request Response</code>
     this queue will be monitored for responses to the requests sent.
   </property>
   <property name="JMS Selector" required="No">
     Message Selector as defined by JMS specification to extract only 
     messages that respect the Selector condition. Syntax uses subpart of SQL 92.
   </property>
   <property name="Communication style" required="Yes">
     The Communication style can be <code>Request Only</code> (also known as Fire and Forget) or <code>Request Response</code>:
     <dl>
     <dt><code>Request Only</code></dt><dd> will only send messages and will not monitor replies. As such it can be used to put load on a system.</dd>
     <dt><code>Request Response</code></dt><dd> will send messages and monitor the replies it receives. Behaviour depends on the value of the JNDI Name Reply Queue.
     If JNDI Name Reply Queue has a value, this queue is used to monitor the results. Matching of request and reply is done with
     the message id of the request and the correlation id of the reply. If the JNDI Name Reply Queue is empty, then
     temporary queues will be used for the communication between the requestor and the server.
     This is very different from the fixed reply queue. With temporary queues the sending thread will block until the reply message has been received.
     With <code>Request Response</code> mode, you need to have a Server that listens to messages sent to Request Queue and sends replies to 
     queue referenced by <code>message.getJMSReplyTo()</code>.</dd>
     </dl>
   </property>
   <property name="Use alternate fields for message correlation" required="Yes">
     These check-boxes select the fields which will be used for matching the response message with the original request.
     <dl>
     <dt><code>Use Request Message Id</code></dt><dd>if selected, the request JMSMessageID will be used, 
     otherwise the request JMSCorrelationID will be used. 
     In the latter case the correlation id must be specified in the request.</dd>
     <dt><code>Use Response Message Id</code></dt><dd>if selected, the response JMSMessageID will be used, 
     otherwise the response JMSCorrelationID will be used.
     </dd>
     </dl>
     There are two frequently used JMS Correlation patterns:
     <dl>
     <dt>JMS Correlation ID Pattern</dt>
     <dd> i.e. match request and response on their correlation Ids
     => deselect both checkboxes, and provide a correlation id.</dd>
     <dt>JMS Message ID Pattern</dt>
     <dd>i.e. match request message id with response correlation id
     => select "Use Request Message Id" only.
     </dd>
     </dl>
     In both cases the JMS application is responsible for populating the correlation ID as necessary.
     <note>if the same queue is used to send and receive messages, 
     then the response message will be the same as the request message.
     In which case, either provide a correlation id and clear both checkboxes;
     or select both checkboxes to use the message Id for correlation.
     This can be useful for checking raw JMS throughput.</note>
   </property>
   <property name="Timeout" required="Yes">
       The timeout in milliseconds for the reply-messages. If a reply has not been received within the specified
       time, the specific testcase fails and the specific reply message received after the timeout is discarded.
       Default value is <code>2000</code> ms.
   </property>
   <property name="Expiration" required="No">
       The expiration time (in milliseconds) of the message before it becomes obsolete.
       If you do not specify an expiration time, the default value is <code>0</code> (never expires). 
   </property>
   <property name="Priority" required="No">
       The priority level of the message. There are ten priority levels from <code>0</code> (lowest) to <code>9</code> (highest). 
       If you do not specify a priority level, the default level is <code>4</code>. 
   </property>
   <property name="Use non-persistent delivery mode?" required="Yes">
       Whether to set <code>DeliveryMode.NON_PERSISTENT</code>.
   </property>
   <property name="Content" required="No">
       The content of the message.
   </property>
   <property name="JMS Properties" required="No">
       The JMS Properties are properties specific for the underlying messaging system.
       You can setup the name, the value and the class (type) of value. Default type is <code>String</code>.
       For example: for WebSphere 5.1 web services you will need to set the JMS Property targetService to test
       webservices through JMS.
   </property>
   <property name="Initial Context Factory" required="No">
     The Initial Context Factory is the factory to be used to look up the JMS Resources.
   </property>
   <property name="JNDI properties" required="No">
      The JNDI Properties are the specific properties for the underlying JNDI implementation.
   </property>
   <property name="Provider URL" required="No">
@@ -2879,2232 +2840,2228 @@ may download images, style-sheets, etc. referenced by the HTML code.
 <tr><td><code>JSON Path Tester</code></td>
 <td>The <i>JSON Path Tester view</i> will let you test your JSON-PATH expressions and see the extracted data from a particular response.
 <br/></td></tr>
 <tr><td><code>Regexp Tester</code></td>
 <td>The <i>Regexp Tester view</i> only works for text responses. It shows the plain text in the upper panel.
 The "<code>Test</code>" button allows the user to apply the Regular Expression to the upper panel and the results
 will be displayed in the lower panel.<br/>
 The regular expression engine is the same as that used in the Regular Expression Extractor.<br/>
 For example, the RE <code>(JMeter\w*).*</code> applied to the current JMeter home page gives the following output:
 <br/>
 <source>
 Match count: 26
 Match[1][0]=JMeter - Apache JMeter&lt;/title&gt;
 Match[1][1]=JMeter
 Match[2][0]=JMeter" title="JMeter" border="0"/&gt;&lt;/a&gt;
 Match[2][1]=JMeter
 Match[3][0]=JMeterCommitters"&gt;Contributors&lt;/a&gt;
 Match[3][1]=JMeterCommitters
 &hellip; and so on &hellip;
 </source>
 <br/>
 The first number in <code>[]</code> is the match number; the second number is the group. 
 Group <code>[0]</code> is whatever matched the whole RE.
 Group <code>[1]</code> is whatever matched the 1<sup>st</sup> group, i.e. <code>(JMeter\w*)</code> in this case.
 See Figure 9b (below).
 <br/></td></tr>
 <tr><td><code>Text</code></td>
 <td>
 The default <i>Text view</i> shows all of the text contained in the response. 
 Note that this will only work if the response <code>content-type</code> is considered to be text.
 If the <code>content-type</code> begins with any of the following, it is considered as binary,
 otherwise it is considered to be text.
 <source>
 image/
 audio/
 video/
 </source>
 <br/></td></tr>
 <tr><td><code>XML</code></td>
 <td>The <i>XML view</i> will show response in tree style. 
 Any DTD nodes or Prolog nodes will not show up in tree; however, response may contain those nodes.
 <br/></td></tr>
 <tr><td><code>XPath Tester</code></td>
 <td>The <i>XPath Tester</i> only works for text responses. It shows the plain text in the upper panel.
 The "<code>Test</code>" button allows the user to apply the XPath query to the upper panel and the results
 will be displayed in the lower panel.<br/>
 </td></tr>
 </table>
 <p><code>Scroll automatically?</code> option permit to have last node display in tree selection</p>
 <p>
 With <code>Search</code> option, most of the views also allow the displayed data to be searched; the result of the search will be high-lighted
 in the display above. For example the Control panel screenshot below shows one result of searching for "<code>Java</code>".
 Note that the search operates on the visible text, so you may get different results when searching
 the Text and HTML views.
 <br/>Note: The regular expression uses the Java engine (not ORO engine like the Regular Expression Extractor or Regexp Tester view).
 </p>
 <p>
 If there is no <code>content-type</code> provided, then the content
 will not be displayed in the any of the Response Data panels.
 You can use <complink name="Save Responses to a file"/> to save the data in this case.
 Note that the response data will still be available in the sample result,
 so can still be accessed using Post-Processors.
 </p>
 <p>If the response data is larger than 200K, then it won't be displayed.
 To change this limit, set the JMeter property <code>view.results.tree.max_size</code>.
 You can also use save the entire response to a file using
 <complink name="Save Responses to a file"/>.
 </p>
 <p>
 Additional renderers can be created.
 The class must implement the interface <code>org.apache.jmeter.visualizers.ResultRenderer</code>
 and/or extend the abstract class <code>org.apache.jmeter.visualizers.SamplerResultTab</code>, and the
 compiled code must be available to JMeter (e.g. by adding it to the <code>lib/ext</code> directory).
 </p>
 </description>
 <p>
     The Control Panel (above) shows an example of an HTML display.<br/>
     Figure 9 (below) shows an example of an XML display.<br/>
     Figure 9a (below) shows an example of a Regexp tester display.<br/>
     Figure 9b (below) shows an example of a Document display.<br/>
 </p>
     <div align="center">
 <figure width="903" height="657" image="view_results_tree_xml.png">Figure 9 Sample XML display</figure>
 <figure width="904" height="653" image="view_results_tree_regex.png">Figure 9a Sample Regexp Test display</figure>
 <figure width="849" height="655" image="view_results_tree_document.png">Figure 9b Sample Document (here PDF) display</figure>
 </div>
 </component>
 
 <component name="Aggregate Report" index="&sect-num;.3.7"  width="1206" height="306" screenshot="aggregate_report.png">
 <description>The aggregate report creates a table row for each differently named request in your
 test.  For each request, it totals the response information and provides request count, min, max,
 average, error rate, approximate throughput (request/second) and Kilobytes per second throughput.
 Once the test is done, the throughput is the actual through for the duration of the entire test.
 <p>
 The throughput is calculated from the point of view of the sampler target 
 (e.g. the remote server in the case of HTTP samples).
 JMeter takes into account the total time over which the requests have been generated.
 If other samplers and timers are in the same thread, these will increase the total time,
 and therefore reduce the throughput value. 
 So two identical samplers with different names will have half the throughput of two samplers with the same name.
 It is important to choose the sampler names correctly to get the best results from
 the Aggregate Report.
 </p>
 <p>
 Calculation of the <a href="glossary.html#Median">Median</a> and 90% Line (90<sup>th</sup> <a href="glossary.html#Percentile">percentile</a>) values requires additional memory.
 JMeter now combines samples with the same elapsed time, so far less memory is used.
 However, for samples that take more than a few seconds, the probability is that fewer samples will have identical times,
 in which case more memory will be needed.
 Note you can use this listener afterwards to reload a CSV or XML results file which is the recommended way to avoid performance impacts.
 See the <complink name="Summary Report"/> for a similar Listener that does not store individual samples and so needs constant memory.
 </p>
 <note>
 Starting with JMeter 2.12, you can configure the 3 percentile values you want to compute, this can be done by setting properties:
 <ul>
     <li><code>aggregate_rpt_pct1</code>: defaults to 90<sup>th</sup> <a href="glossary.html#Percentile">percentile</a></li>
     <li><code>aggregate_rpt_pct2</code>: defaults to 95<sup>th</sup> <a href="glossary.html#Percentile">percentile</a></li>
     <li><code>aggregate_rpt_pct3</code>: defaults to 99<sup>th</sup> <a href="glossary.html#Percentile">percentile</a></li>
 </ul>
 </note>
 <ul>
 <li><code>Label</code> - The label of the sample.
 If "<code>Include group name in label?</code>" is selected, then the name of the thread group is added as a prefix.
 This allows identical labels from different thread groups to be collated separately if required.
 </li>
 <li><code># Samples</code> - The number of samples with the same label</li>
 <li><code>Average</code> - The average time of a set of results</li>
 <li><code>Median</code> - The <a href="glossary.html#Median">median</a> is the time in the middle of a set of results.
 50% of the samples took no more than this time; the remainder took at least as long.</li>
 <li><code>90% Line</code> - 90% of the samples took no more than this time.
 The remaining samples took at least as long as this. (90<sup>th</sup> <a href="glossary.html#Percentile">percentile</a>)</li>
 <li><code>95% Line</code> - 95% of the samples took no more than this time.
 The remaining samples took at least as long as this. (95<sup>th</sup> <a href="glossary.html#Percentile">percentile</a>)</li>
 <li><code>99% Line</code> - 99% of the samples took no more than this time.
 The remaining samples took at least as long as this. (99<sup>th</sup> <a href="glossary.html#Percentile">percentile</a>)</li>
 <li><code>Min</code> - The shortest time for the samples with the same label</li>
 <li>Max - The longest time for the samples with the same label</li>
 <li><code>Error %</code> - Percent of requests with errors</li>
 <li><code>Throughput</code> - the <a href="glossary.html#Throughput">Throughput</a> is measured in requests per second/minute/hour.
 The time unit is chosen so that the displayed rate is at least 1.0.
 When the throughput is saved to a CSV file, it is expressed in requests/second,
 i.e. 30.0 requests/minute is saved as 0.5.
 </li>
 <li><code>Received KB/sec</code> - The throughput measured in received Kilobytes per second</li>
 <li><code>Sent KB/sec</code> - The throughput measured in sent Kilobytes per second</li>
 </ul>
 <p>Times are in milliseconds.</p>
 </description>
 <div align="center">
 <p>
     The figure below shows an example of selecting the "<code>Include group name</code>" checkbox.
 </p>
 <figure width="1207" height="298" image="aggregate_report_grouped.png">Sample "<code>Include group name</code>" display</figure>
 </div>
 </component>
 
 <component name="View Results in Table" index="&sect-num;.3.8"  width="966" height="683" screenshot="table_results.png">
 <description>This visualizer creates a row for every sample result.  
 Like the <complink name="View Results Tree"/>, this visualizer uses a lot of memory.
 <p>
 By default, it only displays the main (parent) samples; it does not display the sub-samples (child samples).
 JMeter has a "<code>Child Samples?</code>" check-box.
 If this is selected, then the sub-samples are displayed instead of the main samples.  
 </p>
 </description>
 </component>
 
 <component name="Simple Data Writer" index="&sect-num;.3.9"  width="741" height="141" screenshot="simpledatawriter.png">
 <description>This listener can record results to a file
 but not to the UI.  It is meant to provide an efficient means of
 recording data by eliminating GUI overhead.
 When running in non-GUI mode, the <code>-l</code> flag can be used to create a data file.
 The fields to save are defined by JMeter properties.
 See the <code>jmeter.properties</code> file for details.
 </description>
 </component>
 
 <component name="Aggregate Graph" index="&sect-num;.3.12"  width="1132" height="872" screenshot="aggregate_graph.png">
 <description>The aggregate graph is similar to the aggregate report. The primary
 difference is the aggregate graph provides an easy way to generate bar graphs and save
 the graph as a PNG file.</description>
 <div align="center">
 <p>
     The figure below shows an example of settings to draw this graph.
 </p>
 <figure width="1147" height="420" image="aggregate_graph_settings.png">Aggregate graph settings</figure>
 </div>
 <note>Please note: All this parameters <em>aren't</em> saved in JMeter jmx script.</note>
 <properties>
         <property name="Column settings" required="Yes">
         <ul>
         <li><code>Columns to display:</code> Choose the column(s) to display in graph.</li>
         <li><code>Rectangles color:</code> Click on right color rectangle open a popup dialog to choose a custom color for column.</li>
         <li><code>Foreground color</code> Allow to change the value text color.</li>
         <li><code>Value font:</code> Allow to define font settings for the text.</li>
         <li><code>Draw outlines bar?</code> To draw or not the border line on bar chart</li>
         <li><code>Show number grouping?</code> Show or not the number grouping in Y Axis labels.</li>
         <li><code>Value labels vertical?</code> Change orientation for value label. (Default is horizontal)</li>
         <li><code>Column label selection:</code> Filter by result label. A regular expression can be used, example: <code>.*Transaction.*</code>
         <br></br>Before display the graph, click on <code>Apply filter</code> button to refresh internal data.</li>
         </ul>
         </property>
         <property name="Title" required="No">Define the graph's title on the head of chart. Empty value is the default value : "<code>Aggregate Graph</code>". 
         The button <code>Synchronize with name</code> define the title with the label of the listener. And define font settings for graph title</property>
         <property name="Graph size" required="No">Compute the graph size by  the width and height depending of the current JMeter's window size.
         Use <code>Width</code> and <code>Height</code> fields to define a custom size. The unit is pixel. </property>
         <property name="X Axis settings" required="No">Define the max length of X Axis label (in pixel).</property>
         <property name="Y Axis settings" required="No">Define a custom maximum value for Y Axis.</property>
         <property name="Legend" required="Yes">Define the placement and font settings for chart legend</property>
 </properties>
 </component>
 
 <component name="Response Time Graph" index="&sect-num;.3.13"  width="921" height="616" screenshot="response_time_graph.png">
 <description>
 The Response Time Graph draws a line chart showing the evolution of response time during the test, for each labelled request. 
 If many samples exist for the same timestamp, the mean value is displayed.
 </description>
 <div align="center">
 <p>
     The figure below shows an example of settings to draw this graph.
 </p>
 <figure width="919" height="481" image="response_time_graph_settings.png">Response time graph settings</figure>
 </div>
 <note>Please note: All this parameters are saved in JMeter <code>.jmx</code> file.</note>
 <properties>
         <property name="Interval (ms)" required="Yes">The time in milli-seconds for X axis interval. Samples are grouped according to this value.
         Before display the graph, click on <code>Apply interval</code> button to refresh internal data.</property>
         <property name="Sampler label selection" required="No">Filter by result label. A regular expression can be used, ex. <code>.*Transaction.*</code>. 
         Before display the graph, click on <code>Apply filter</code> button to refresh internal data.</property>
         <property name="Title" required="No">Define the graph's title on the head of chart. Empty value is the default value : "<code>Response Time Graph</code>". 
         The button <code>Synchronize with name</code> define the title with the label of the listener. And define font settings for graph title</property>
         <property name="Line settings" required="Yes">Define the width of the line. Define the type of each value point. Choose <code>none</code> to have a line without mark</property>
         <property name="Graph size" required="No">Compute the graph size by  the width and height depending of the current JMeter's window size.
         Use <code>Width</code> and <code>Height</code> fields to define a custom size. The unit is pixel. </property>
         <property name="X Axis settings" required="No">Customize the date format of  X axis label.
         The syntax is the Java <a href="http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html">SimpleDateFormat API</a>.</property>
         <property name="Y Axis settings" required="No">Define a custom maximum value for Y Axis in milli-seconds. Define the increment for the scale (in ms) Show or not the number grouping in Y Axis labels.</property>
         <property name="Legend" required="Yes">Define the placement and font settings for chart legend</property>
 </properties>
 </component>
 
 <component name="Mailer Visualizer" index="&sect-num;.3.14"  width="860" height="403" screenshot="mailervisualizer.png">
 <description><p>The mailer visualizer can be set up to send email if a test run receives too many
 failed responses from the server.</p></description>
 <properties>
         <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
         <property name="From" required="Yes">Email address to send messages from.</property>
         <property name="Addressee(s)" required="Yes">Email address to send messages to, comma-separated.</property>
         <property name="Success Subject" required="No">Email subject line for success messages.</property>
         <property name="Success Limit" required="Yes">Once this number of successful responses is exceeded
         <strong>after previously reaching the failure limit</strong>, a success email
         is sent.  The mailer will thus only send out messages in a sequence of failed-succeeded-failed-succeeded, etc.</property>
         <property name="Failure Subject" required="No">Email subject line for fail messages.</property>
         <property name="Failure Limit" required="Yes">Once this number of failed responses is exceeded, a failure
         email is sent - i.e. set the count to <code>0</code> to send an e-mail on the first failure.</property>
 
         <property name="Host" required="No">IP address or host name of SMTP server (email redirector)
         server.</property>
         <property name="Port" required="No">Port of SMTP server (defaults to <code>25</code>).</property>
         <property name="Login" required="No">Login used to authenticate.</property>
         <property name="Password" required="No">Password used to authenticate.</property>
         <property name="Connection security" required="No">Type of encryption for SMTP authentication (SSL, TLS or none).</property>
 
         <property name="Test Mail" required="No">Press this button to send a test mail</property>
         <property name="Failures" required="No">A field that keeps a running total of number
         of failures so far received.</property>
 </properties>
 </component>
 
 <component name="BeanShell Listener"  index="&sect-num;.3.15"  width="844" height="633" screenshot="beanshell_listener.png">
 <description>
 <p>
 The BeanShell Listener allows the use of BeanShell for processing samples for saving etc.
 </p>
 <p>
 <b>For full details on using BeanShell, please see the <a href="http://www.beanshell.org/">BeanShell website.</a></b>
 </p>
 <p>
 The test element supports the <code>ThreadListener</code> and <code>TestListener</code> methods.
 These should be defined in the initialisation file.
 See the file <code>BeanShellListeners.bshrc</code> for example definitions.
 </p>
 </description>
 <properties>
     <property name="Name" required="">Descriptive name for this element that is shown in the tree.
     The name is stored in the script variable Label</property>
     <property name="Reset bsh.Interpreter before each call" required="Yes">
     If this option is selected, then the interpreter will be recreated for each sample.
     This may be necessary for some long running scripts. 
     For further information, see <a href="best-practices#bsh_scripting">Best Practices - BeanShell scripting</a>.
     </property>
     <property name="Parameters" required="No">Parameters to pass to the BeanShell script.
     The parameters are stored in the following variables:
     <dl>
         <dt><code>Parameters</code></dt><dd>string containing the parameters as a single variable</dd>
         <dt><code>bsh.args</code></dt><dd>String array containing parameters, split on white-space</dd>
     </dl></property>
     <property name="Script file" required="No">A file containing the BeanShell script to run.
     The file name is stored in the script variable <code>FileName</code></property>
     <property name="Script" required="Yes (unless script file is provided)">The BeanShell script to run. The return value is ignored.</property>
 </properties>
 <p>Before invoking the script, some variables are set up in the BeanShell interpreter:</p>
 <ul>
 <li><code>log</code> - (<a href="http://excalibur.apache.org/apidocs/org/apache/log/Logger.html">Logger</a>) - can be used to write to the log file</li>
 <li><code>ctx</code> - (<a href="../api/org/apache/jmeter/threads/JMeterContext.html">JMeterContext</a>) - gives access to the context</li>
 <li><code>vars</code> - (<a href="../api/org/apache/jmeter/threads/JMeterVariables.html">JMeterVariables</a>) - gives read/write access to variables: <source>vars.get(key);
 vars.put(key,val);
 vars.putObject("OBJ1",new Object());
 </source></li>
 <li><code>props</code> - (JMeterProperties - class <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html"><code>java.util.Properties</code></a>) - e.g. <code>props.get("START.HMS");</code> <code>props.put("PROP1","1234");</code></li>
 <li><code>sampleResult</code>, <code>prev</code> - (<a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a>) - gives access to the previous <a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a></li>
 <li><code>sampleEvent</code> (<a href="../api/org/apache/jmeter/samplers/SampleEvent.html">SampleEvent</a>) gives access to the current sample event</li>
 </ul>
 <p>For details of all the methods available on each of the above variables, please check the Javadoc</p>
 <p>If the property <code>beanshell.listener.init</code> is defined, this is used to load an initialisation file, which can be used to define methods etc. for use in the BeanShell script.</p>
 </component>
 
 <component name="Summary Report" index="&sect-num;.3.16"  width="1204" height="300" screenshot="summary_report.png">
 <description>The summary report creates a table row for each differently named request in your
 test. This is similar to the <complink name="Aggregate Report"/> , except that it uses less memory.
 <p>
 The throughput is calculated from the point of view of the sampler target 
 (e.g. the remote server in the case of HTTP samples).
 JMeter takes into account the total time over which the requests have been generated.
 If other samplers and timers are in the same thread, these will increase the total time,
 and therefore reduce the throughput value. 
 So two identical samplers with different names will have half the throughput of two samplers with the same name.
 It is important to choose the sampler labels correctly to get the best results from
 the Report.
 </p>
 <ul>
 <li><code>Label</code> - The label of the sample.
 If "<code>Include group name in label?</code>" is selected, then the name of the thread group is added as a prefix.
 This allows identical labels from different thread groups to be collated separately if required.
 </li>
 <li><code># Samples</code> - The number of samples with the same label</li>
 <li><code>Average</code> - The average elapsed time of a set of results</li>
 <li><code>Min</code> - The lowest elapsed time for the samples with the same label</li>
 <li><code>Max</code> - The longest elapsed time for the samples with the same label</li>
 <li><code>Std. Dev.</code> - the <a href="glossary.html#StandardDeviation">Standard Deviation</a> of the sample elapsed time</li>
 <li><code>Error %</code> - Percent of requests with errors</li>
 <li><code>Throughput</code> - the <a href="glossary.html#Throughput">Throughput</a> is measured in requests per second/minute/hour.
 The time unit is chosen so that the displayed rate is at least <code>1.0</code>.
 When the throughput is saved to a CSV file, it is expressed in requests/second,
 i.e. 30.0 requests/minute is saved as <code>0.5</code>.
 </li>
 <li><code>Received KB/sec</code> - The throughput measured in Kilobytes per second</li>
 <li><code>Sent KB/sec</code> - The throughput measured in Kilobytes per second</li>
 <li><code>Avg. Bytes</code> - average size of the sample response in bytes.</li>
 </ul>
 <p>Times are in milliseconds.</p>
 </description>
 <div align="center">
 <p>
     The figure below shows an example of selecting the "<code>Include group name</code>" checkbox.
 </p>
 <figure width="1208" height="302" image="summary_report_grouped.png">Sample "<code>Include group name</code>" display</figure>
 </div>
 </component>
 
 <component name="Save Responses to a file" index="&sect-num;.3.17"  width="488" height="251" screenshot="savetofile.png">
     <description>
         <p>
         This test element can be placed anywhere in the test plan.
         For each sample in its scope, it will create a file of the response Data.
         The primary use for this is in creating functional tests, but it can also
         be useful where the response is too large to be displayed in the 
         <complink name="View Results Tree"/> Listener.
         The file name is created from the specified prefix, plus a number (unless this is disabled, see below).
         The file extension is created from the document type, if known.
         If not known, the file extension is set to '<code>unknown</code>'.
         If numbering is disabled, and adding a suffix is disabled, then the file prefix is
         taken as the entire file name. This allows a fixed file name to be generated if required.
         The generated file name is stored in the sample response, and can be saved
         in the test log output file if required.
         </p>
         <p>
         The current sample is saved first, followed by any sub-samples (child samples).
         If a variable name is provided, then the names of the files are saved in the order
         that the sub-samples appear. See below. 
         </p>
     </description>
  <properties>
  <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
  <property name="Filename Prefix" required="Yes">Prefix for the generated file names; this can include a directory name.
         Relative paths are resolved relative to the current working directory (which defaults to the <code>bin/</code> directory).
         JMeter also supports paths relative to the directory containing the current test plan (JMX file).
         If the path name begins with "<code>~/</code>" (or whatever is in the <code>jmeter.save.saveservice.base_prefix</code> JMeter property),
         then the path is assumed to be relative to the JMX file location. 
  </property>
  <property name="Variable Name" required="No">
  Name of a variable in which to save the generated file name (so it can be used later in the test plan).
  If there are sub-samples then a numeric suffix is added to the variable name.
  E.g. if the variable name is <code>FILENAME</code>, then the parent sample file name is saved in the variable <code>FILENAME</code>, 
  and the filenames for the child samplers are saved in <code>FILENAME1</code>, <code>FILENAME2</code> etc.
  </property>
  <property name="Save Failed Responses only" required="Yes">If selected, then only failed responses are saved</property>
  <property name="Save Successful Responses only" required="Yes">If selected, then only successful responses are saved</property>
  <property name="Don't add number to prefix" required="Yes">If selected, then no number is added to the prefix. If you select this option, make sure that the prefix is unique or the file may be overwritten.</property>
  <property name="Don't add suffix" required="Yes">If selected, then no suffix is added. If you select this option, make sure that the prefix is unique or the file may be overwritten.</property>
  <property name="Minimum Length of sequence number" required="No">If "<code>Don't add number to prefix</code>" is not checked, then numbers added to prefix will be padded by <code>0</code> so that prefix is has size of this value. Defaults to <code>0</code>.</property>
  </properties>
 </component>
 
 <component name="BSF Listener (DEPRECATED)" index="&sect-num;.3.18"  width="847" height="634" screenshot="bsf_listener.png">
 <description>
 <p>
 The BSF Listener allows BSF script code to be applied to sample results.
 </p>
 </description>
 <properties>
     <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
     <property name="Language" required="Yes">The BSF language to be used</property>
     <property name="Parameters" required="No">Parameters to pass to the script.
     The parameters are stored in the following variables:
     <dl>
         <dt><code>Parameters</code></dt><dd>string containing the parameters as a single variable</dd>
         <dt><code>args</code></dt><dd>String array containing parameters, split on white-space</dd>
     </dl></property>
     <property name="Script file" required="No">A file containing the script to run, if a relative file path is used, then it will be relative to directory referenced by "<code>user.dir</code>" System property</property>
     <property name="Script" required="Yes (unless script file is provided)">The script to run.</property>
 </properties>
 <p>
 The script (or file) is processed using the <code>BSFEngine.exec()</code> method, which does not return a value.
 </p>
 <p>
 Before invoking the script, some variables are set up.
 Note that these are BSF variables - i.e. they can be used directly in the script.
 </p>
 <dl>
 <dt><code>log</code></dt><dd>(<a href="http://excalibur.apache.org/apidocs/org/apache/log/Logger.html">Logger</a>) - can be used to write to the log file</dd>
 <dt><code>Label</code></dt><dd>the String Label</dd>
 <dt><code>FileName</code></dt><dd>the script file name (if any)</dd>
 <dt><code>Parameters</code></dt><dd>the parameters (as a String)</dd>
 <dt><code>args</code></dt><dd>the parameters as a String array (split on whitespace)</dd>
 <dt><code>ctx</code></dt><dd>(<a href="../api/org/apache/jmeter/threads/JMeterContext.html">JMeterContext</a>) - gives access to the context</dd>
 <dt><code>vars</code></dt><dd>(<a href="../api/org/apache/jmeter/threads/JMeterVariables.html">JMeterVariables</a>) - gives read/write access to variables: <source>vars.get(key);
 vars.put(key,val);
 vars.putObject("OBJ1",new Object());
 vars.getObject("OBJ2");</source></dd>
 <dt><code>props</code></dt><dd>(JMeterProperties - class <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html"><code>java.util.Properties</code></a>) - e.g. <code>props.get("START.HMS");</code> <code>props.put("PROP1","1234");</code></dd>
 <dt><code>sampleResult</code>, <code>prev</code></dt><dd>(<a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a>) - gives access to the SampleResult</dd>
 <dt><code>sampleEvent</code></dt><dd>(<a href="../api/org/apache/jmeter/samplers/SampleEvent.html">SampleEvent</a>) - gives access to the SampleEvent</dd>
 <dt><code>sampler</code></dt><dd>(<a href="../api/org/apache/jmeter/samplers/Sampler.html">Sampler</a>)- gives access to the last sampler</dd>
 <dt><code>OUT</code></dt><dd><code>System.out</code> - e.g. <code>OUT.println("message")</code></dd>
 </dl>
 <p>For details of all the methods available on each of the above variables, please check the Javadoc</p>
 </component>
 
 <component name="JSR223 Listener" index="&sect-num;.3.18.1">
 <description>
 <p>
 The JSR223 Listener allows JSR223 script code to be applied to sample results.
 </p>
 </description>
 <properties>
     <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
     <property name="Language" required="Yes">The JSR223 language to be used</property>
     <property name="Parameters" required="No">Parameters to pass to the script.
     The parameters are stored in the following variables:
     <dl>
         <dt><code>Parameters</code></dt><dd>string containing the parameters as a single variable</dd>
         <dt><code>args</code></dt><dd>String array containing parameters, split on white-space</dd>
     </dl></property>
     <property name="Script file" required="No">A file containing the script to run, if a relative file path is used, then it will be relative to directory referenced by "<code>user.dir</code>" System property</property>
     <property name="Script compilation caching" required="No">Unique String across Test Plan that JMeter will use to cache result of Script compilation if language used supports <code><a href="https://docs.oracle.com/javase/8/docs/api/javax/script/Compilable.html">Compilable</a></code> interface (Groovy is one of these, java, beanshell and javascript are not).
     <note>See note in JSR223 Sampler Java System property if you're using Groovy without checking this option</note>
     </property>
     <property name="Script" required="Yes (unless script file is provided)">The script to run.</property>
 </properties>
 
 <p>
 Before invoking the script, some variables are set up.
 Note that these are JSR223 variables - i.e. they can be used directly in the script.
 </p>
 <dl>
 <dt><code>log</code></dt><dd>(<a href="http://excalibur.apache.org/apidocs/org/apache/log/Logger.html">Logger</a>) - can be used to write to the log file</dd>
 <dt><code>Label</code></dt><dd>the String Label</dd>
 <dt><code>FileName</code></dt><dd>the script file name (if any)</dd>
 <dt><code>Parameters</code></dt><dd>the parameters (as a String)</dd>
 <dt><code>args</code></dt><dd>the parameters as a String array (split on whitespace)</dd>
 <dt><code>ctx</code></dt><dd>(<a href="../api/org/apache/jmeter/threads/JMeterContext.html">JMeterContext</a>) - gives access to the context</dd>
 <dt><code>vars</code></dt><dd>(<a href="../api/org/apache/jmeter/threads/JMeterVariables.html">JMeterVariables</a>) - gives read/write access to variables: <source>vars.get(key);
 vars.put(key,val);
 vars.putObject("OBJ1",new Object());
 vars.getObject("OBJ2");</source></dd>
 <dt><code>props</code></dt><dd>(JMeterProperties - class <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html"><code>java.util.Properties</code></a>) - e.g. <code>props.get("START.HMS");</code> <code>props.put("PROP1","1234");</code></dd>
 <dt><code>sampleResult</code>, <code>prev</code></dt><dd>(<a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a>) - gives access to the SampleResult</dd>
 <dt><code>sampleEvent</code></dt><dd>(<a href="../api/org/apache/jmeter/samplers/SampleEvent.html">SampleEvent</a>) - gives access to the SampleEvent</dd>
 <dt><code>sampler</code></dt><dd>(<a href="../api/org/apache/jmeter/samplers/Sampler.html">Sampler</a>)- gives access to the last sampler</dd>
 <dt><code>OUT</code></dt><dd><code>System.out</code> - e.g. <code>OUT.println("message")</code></dd>
 </dl>
 <p>For details of all the methods available on each of the above variables, please check the Javadoc</p>
 </component>
 
 <component name="Generate Summary Results" index="&sect-num;.3.19"  width="364" height="76" screenshot="summary.png">
     <description>This test element can be placed anywhere in the test plan.
 Generates a summary of the test run so far to the log file and/or 
 standard output. Both running and differential totals are shown.
 Output is generated every <code>n</code> seconds (default 30 seconds) on the appropriate
 time boundary, so that multiple test runs on the same time will be synchronised.
 See <code>jmeter.properties</code> file for the summariser configuration items:
 <source>
 # Define the following property to automatically start a summariser with that name
 # (applies to non-GUI mode only)
 #summariser.name=summary
 #
 # interval between summaries (in seconds) default 3 minutes
 #summariser.interval=30
 #
 # Write messages to log file
 #summariser.log=true
 #
 # Write messages to System.out
 #summariser.out=true
 </source>
 This element is mainly intended for batch (non-GUI) runs.
 The output looks like the following:
 <source>
 label +     16 in 0:00:12 =    1.3/s Avg:  1608 Min:  1163 Max:  2009 Err:     0 (0.00%) Active: 5 Started: 5 Finished: 0
 label +     82 in 0:00:30 =    2.7/s Avg:  1518 Min:  1003 Max:  2020 Err:     0 (0.00%) Active: 5 Started: 5 Finished: 0
 label =     98 in 0:00:42 =    2.3/s Avg:  1533 Min:  1003 Max:  2020 Err:     0 (0.00%)
 label +     85 in 0:00:30 =    2.8/s Avg:  1505 Min:  1008 Max:  2005 Err:     0 (0.00%) Active: 5 Started: 5 Finished: 0
 label =    183 in 0:01:13 =    2.5/s Avg:  1520 Min:  1003 Max:  2020 Err:     0 (0.00%)
 label +     79 in 0:00:30 =    2.7/s Avg:  1578 Min:  1089 Max:  2012 Err:     0 (0.00%) Active: 5 Started: 5 Finished: 0
 label =    262 in 0:01:43 =    2.6/s Avg:  1538 Min:  1003 Max:  2020 Err:     0 (0.00%)
 label +     80 in 0:00:30 =    2.7/s Avg:  1531 Min:  1013 Max:  2014 Err:     0 (0.00%) Active: 5 Started: 5 Finished: 0
 label =    342 in 0:02:12 =    2.6/s Avg:  1536 Min:  1003 Max:  2020 Err:     0 (0.00%)
 label +     83 in 0:00:31 =    2.7/s Avg:  1512 Min:  1003 Max:  1982 Err:     0 (0.00%) Active: 5 Started: 5 Finished: 0
 label =    425 in 0:02:43 =    2.6/s Avg:  1531 Min:  1003 Max:  2020 Err:     0 (0.00%)
 label +     83 in 0:00:29 =    2.8/s Avg:  1487 Min:  1023 Max:  2013 Err:     0 (0.00%) Active: 5 Started: 5 Finished: 0
 label =    508 in 0:03:12 =    2.6/s Avg:  1524 Min:  1003 Max:  2020 Err:     0 (0.00%)
 label +     78 in 0:00:30 =    2.6/s Avg:  1594 Min:  1013 Max:  2016 Err:     0 (0.00%) Active: 5 Started: 5 Finished: 0
 label =    586 in 0:03:43 =    2.6/s Avg:  1533 Min:  1003 Max:  2020 Err:     0 (0.00%)
 label +     80 in 0:00:30 =    2.7/s Avg:  1516 Min:  1013 Max:  2005 Err:     0 (0.00%) Active: 5 Started: 5 Finished: 0
 label =    666 in 0:04:12 =    2.6/s Avg:  1531 Min:  1003 Max:  2020 Err:     0 (0.00%)
 label +     86 in 0:00:30 =    2.9/s Avg:  1449 Min:  1004 Max:  2017 Err:     0 (0.00%) Active: 5 Started: 5 Finished: 0
 label =    752 in 0:04:43 =    2.7/s Avg:  1522 Min:  1003 Max:  2020 Err:     0 (0.00%)
 label +     65 in 0:00:24 =    2.7/s Avg:  1579 Min:  1007 Max:  2003 Err:     0 (0.00%) Active: 0 Started: 5 Finished: 5
 label =    817 in 0:05:07 =    2.7/s Avg:  1526 Min:  1003 Max:  2020 Err:     0 (0.00%)
 </source>
 The "<code>label</code>" is the name of the element.
 The <code>"+"</code> means that the line is a delta line, i.e. shows the changes since the last output.<br/>
 The <code>"="</code> means that the line is a total line, i.e. it shows the running total.<br/>
 Entries in the JMeter log file also include time-stamps.
 The example "<code>817 in 0:05:07 =    2.7/s</code>" means that there were 817 samples recorded in 5 minutes and 7 seconds,
 and that works out at 2.7 samples per second.<br/>
 The <code>Avg</code> (Average), <code>Min</code> (Minimum) and <code>Max</code> (Maximum) times are in milliseconds.<br/>
 "<code>Err</code>" means number of errors (also shown as percentage).<br/>
 The last two lines will appear at the end of a test.
 They will not be synchronised to the appropriate time boundary.
 Note that the initial and final deltas may be for less than the interval (in the example above this is 30 seconds).
 The first delta will generally be lower, as JMeter synchronizes to the interval boundary.
 The last delta will be lower, as the test will generally not finish on an exact interval boundary.
 <p>
 The label is used to group sample results together. 
 So if you have multiple Thread Groups and want to summarize across them all, then use the same label
  - or add the summariser to the Test Plan (so all thread groups are in scope).
 Different summary groupings can be implemented
 by using suitable labels and adding the summarisers to appropriate parts of the test plan.
 </p>
 <note>
 In Non-GUI mode by default a Generate Summary Results listener named "<code>summariser</code>" is configured, if you have already added one to your Test Plan, ensure you name it differently 
 otherwise results will be accumulated under this label (summary) leading to wrong results (sum of total samples + samples located under the Parent of Generate Summary Results listener).<br/>
 This is not a bug but a design choice allowing to summarize across thread groups.
 </note>
     </description>
  <properties>
  <property name="Name" required="Yes">Descriptive name for this element that is shown in the tree.
  It appears as the "<code>label</code>" in the output. Details for all elements with the same label will be added together.
  </property>
  </properties>
 </component>
 
 <component name="Comparison Assertion Visualizer" index="&sect-num;.3.20"  width="718" height="454" screenshot="comparison_assertion_visualizer.png">
 <description>
 The Comparison Assertion Visualizer shows the results of any <complink name="Compare Assertion"/> elements.
 </description>
  <properties>
  <property name="Name" required="Yes">Descriptive name for this element that is shown in the tree.
  </property>
  </properties>
 </component>
 
 <component name="Backend Listener" index="&sect-num;.3.21"  width="705" height="350" screenshot="backend_listener.png">
 <description>
 The backend listener is an Asynchronous listener that enables you to plug custom implementations of <a href="../api/org/apache/jmeter/visualizers/backend/BackendListenerClient.html">BackendListenerClient</a>.
 By default, a Graphite implementation is provided.
 </description>
  <properties>
  <property name="Name" required="Yes">Descriptive name for this element that is shown in the tree.</property>
  <property name="Backend Listener implementation" required="Yes">Class of the <code>BackendListenerClient</code> implementation.</property>
  <property name="Async Queue size" required="Yes">Size of the queue that holds the SampleResults while they are processed asynchronously.</property>
  <property name="Parameters" required="Yes">Parameters of the <code>BackendListenerClient</code> implementation.</property>
  </properties>
  
  
      <p>The following parameters apply to the <a href="../api/org/apache/jmeter/visualizers/backend/graphite/GraphiteBackendListenerClient.html">GraphiteBackendListenerClient</a> implementation:</p>
 
     <properties>
         <property name="graphiteMetricsSender" required="Yes"><code>org.apache.jmeter.visualizers.backend.graphite.TextGraphiteMetricsSender</code> or <code>org.apache.jmeter.visualizers.backend.graphite.PickleGraphiteMetricsSender</code></property>
         <property name="graphiteHost" required="Yes">Graphite or InfluxDB (with Graphite plugin enabled) server host</property>
         <property name="graphitePort" required="Yes">Graphite or InfluxDB (with Graphite plugin enabled) server port, defaults to <code>2003</code>. Note <code>PickleGraphiteMetricsSender</code> (port <code>2004</code>) can only talk to Graphite server.</property>
         <property name="rootMetricsPrefix" required="Yes">Prefix of metrics sent to backend. Defaults to "<code>jmeter</code>."
         Note that JMeter does not add a separator between the root prefix and the samplerName which is why the trailing dot is currently needed.</property>
         <property name="summaryOnly" required="Yes">Only send a summary with no detail. Defaults to <code>true</code>.</property>
         <property name="samplersList" required="Yes">Defines the names (labels) of sample results to be sent to the back end. 
         If <code>useRegexpForSamplersList=false</code> this is a list of semi-colon separated names.
         If <code>useRegexpForSamplersList=true</code> this is a regular expression which will be matched against the names.</property>
         <property name="useRegexpForSamplersList" required="Yes">Consider samplersList as a regular expression to select the samplers for which you want to report metrics to backend. Defaults to <code>false</code>.</property>
         <property name="percentiles" required="Yes">The percentiles you want to send to the backend.
         A percentile may contain a fractional part, for example <code>12.5</code>.
         (The separator is always ".")
         List must be semicolon separated. Generally 3 or 4 values should be sufficient.</property>
     </properties>
     <p>See also <a href="realtime-results.html" >Real-time results</a> for more details.</p>
     <figure width="1265" height="581" image="grafana_dashboard.png">Grafana dashboard</figure>
     
     
     <p>Since JMeter 3.2, a new implementation (in Alpha state) has been added that allows writing directly in InfluxDB with a custom schema, it is called <code>InfluxdbBackendListenerClient</code> 
       The following parameters apply to the <a href="../api/org/apache/jmeter/visualizers/backend/influxdb/InfluxdbBackendListenerClient.html">InfluxdbBackendListenerClient</a> implementation:</p>
 
     <properties>
         <property name="influxdbMetricsSender" required="Yes"><code>org.apache.jmeter.visualizers.backend.influxdb.HttpMetricsSender</code></property>
         <property name="influxdbUrl" required="Yes">Influx URL (example : http://influxHost:8086/write?db=jmeter)</property>
         <property name="application" required="Yes">Name of tested application</property>
         <property name="measurement" required="Yes">Measurement as per <a href="https://docs.influxdata.com/influxdb/v1.1/write_protocols/line_protocol_reference/">Influx Line Protocol Reference</a>. Defaults to "<code>jmeter</code>."</property>
         <property name="summaryOnly" required="Yes">Only send a summary with no detail. Defaults to <code>true</code>.</property>
         <property name="samplersRegex" required="Yes">Regular expression which will be matched against the names of samples and sent to the back end.</property>
         <property name="testTitle" required="Yes">Test name. Defaults to <code>Test name</code>.</property>
         <property name="percentiles" required="Yes">The percentiles you want to send to the backend.
         A percentile may contain a fractional part, for example <code>12.5</code>.
         (The separator is always ".")
         List must be semicolon separated. Generally 3 or 4 values should be sufficient.</property>
     </properties>
     <p>See also <a href="realtime-results.html" >Real-time results</a> for more details.</p>     
 </component>
 
 <a href="#">^</a>
 
 </section>
 
 <section name="&sect-num;.4 Configuration Elements" anchor="config_elements">
 <description>
     <br></br>
     Configuration elements can be used to set up defaults and variables for later use by samplers.
     Note that these elements are processed at the start of the scope in which they are found, 
     i.e. before any samplers in the same scope.
     <br></br>
 </description>
 
 <component name="CSV Data Set Config" index="&sect-num;.4.1"  width="433" height="281" screenshot="csvdatasetconfig.png">
 <description>
     <p>
     CSV Data Set Config is used to read lines from a file, and split them into variables.
     It is easier to use than the <code>__CSVRead()</code> and <code>_StringFromFile()</code> functions.
     It is well suited to handling large numbers of variables, and is also useful for testing with
     "random" and unique values.</p>
     <p>Generating unique random values at run-time is expensive in terms of CPU and memory, so just create the data
     in advance of the test. If necessary, the "random" data from the file can be used in conjunction with
     a run-time parameter to create different sets of values from each run - e.g. using concatenation - which is
     much cheaper than generating everything at run-time.
     </p>
     <p>
     JMeter allows values to be quoted; this allows the value to contain a delimiter.
     If "<code>allow quoted data</code>" is enabled, a value may be enclosed in double-quotes.
     These are removed. To include double-quotes within a quoted field, use two double-quotes.
     For example:
     </p>
 <source>
 1,"2,3","4""5" =>
 1
 2,3
 4"5
 </source>
     <p>
     JMeter supports CSV files which have a header line defining the column names.
     To enable this, leave the "<code>Variable Names</code>" field empty. The correct delimiter must be provided.
     </p>
     <p>
     JMeter supports CSV files with quoted data that includes new-lines.
     </p>
     <p>
     By default, the file is only opened once, and each thread will use a different line from the file.
     However the order in which lines are passed to threads depends on the order in which they execute,
     which may vary between iterations.
     Lines are read at the start of each test iteration.
     The file name and mode are resolved in the first iteration.
     </p>
     <p>
     See the description of the Share mode below for additional options.
     If you want each thread to have its own set of values, then you will need to create a set of files,
     one for each thread. For example <code>test1.csv</code>, <code>test2.csv</code>, &hellip;, <code>test<em>n</em>.csv</code>. Use the filename 
     <code>test${__threadNum}.csv</code> and set the "<code>Sharing mode</code>" to "<code>Current thread</code>".
     </p>
     <note>CSV Dataset variables are defined at the start of each test iteration.
     As this is after configuration processing is completed,
     they cannot be used for some configuration items - such as JDBC Config - 
     that process their contents at configuration time (see <bugzilla>40394</bugzilla>)
     However the variables do work in the HTTP Auth Manager, as the <code>username</code> etc. are processed at run-time.
     </note>
     <p>
     As a special case, the string "<code>\t</code>" (without quotes) in the delimiter field is treated as a Tab.
     </p>
     <p>
     When the end of file (<code>EOF</code>) is reached, and the recycle option is <code>true</code>, reading starts again with the first line of the file.
     </p>
     <p>
     If the recycle option is <code>false</code>, and stopThread is <code>false</code>, then all the variables are set to <code>&lt;EOF&gt;</code> when the end of file is reached.
     This value can be changed by setting the JMeter property <code>csvdataset.eofstring</code>.
     </p>
     <p>
     If the Recycle option is <code>false</code>, and Stop Thread is <code>true</code>, then reaching <code>EOF</code> will cause the thread to be stopped.
     </p>
 </description>
 <properties>
   <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
   <property name="Filename" required="Yes">Name of the file to be read. 
   <b>Relative file names are resolved with respect to the path of the active test plan.</b>
   <b>For distributed testing, the CSV file must be stored on the server host system in the correct relative directory to where the jmeter server is started.</b>
   Absolute file names are also supported, but note that they are unlikely to work in remote mode, 
   unless the remote server has the same directory structure.
   If the same physical file is referenced in two different ways - e.g. <code>csvdata.txt</code> and <code>./csvdata.txt</code> -
   then these are treated as different files.
   If the OS does not distinguish between upper and lower case, <code>csvData.TXT</code> would also be opened separately. 
   </property>
   <property name="File Encoding" required="No">The encoding to be used to read the file, if not the platform default.</property>
   <property name="Variable Names" required="Yes">List of variable names (comma-delimited).
   JMeter supports CSV header lines:
   if the variable name field empty, then the first line of the file is read and interpreted as the list of column names.
   The names must be separated by the delimiter character. They can be quoted using double-quotes.
   </property>
   <property name="Ignore first line (only used if Variable Names is not empty)" required="No">
   Ignore first line of CSV file, it will only be used used if Variable Names is not empty, 
   if Variable Names is empty the first line must contain the headers.
   </property>
   <property name="Delimiter" required="Yes">Delimiter to be used to split the records in the file.
   If there are fewer values on the line than there are variables the remaining variables are not updated -
   so they will retain their previous value (if any).</property>
   <property name="Allow quoted data?" required="Yes">Should the CSV file allow values to be quoted?
   If enabled, then values can be enclosed in <code>"</code> - double-quote - allowing values to contain a delimiter.
   </property>
   <property name="Recycle on EOF?" required="Yes">Should the file be re-read from the beginning on reaching <code>EOF</code>? (default is <code>true</code>)</property>
   <property name="Stop thread on EOF?" required="Yes">Should the thread be stopped on <code>EOF</code>, if Recycle is false? (default is <code>false</code>)</property>
   <property name="Sharing mode" required="Yes">
   <ul>
   <li><code>All threads</code> - (the default) the file is shared between all the threads.</li>
   <li><code>Current thread group</code> - each file is opened once for each thread group in which the element appears</li>
   <li><code>Current thread</code> - each file is opened separately for each thread</li>
   <li><code>Identifier</code> - all threads sharing the same identifier share the same file.
   So for example if you have 4 thread groups, you could use a common id for two or more of the groups
   to share the file between them.
   Or you could use the thread number to share the file between the same thread numbers in different thread groups.
   </li>
   </ul>
   </property>
 </properties>
 </component>
 
 <component name="FTP Request Defaults" index="&sect-num;.4.2"  width="520" height="202" screenshot="ftp-config/ftp-request-defaults.png">
 <description></description>
 </component>
 
 <component name="DNS Cache Manager" index="&sect-num;.4.3"  width="712" height="387" screenshot="dns-cache-manager.png">
     <note>DNS Cache Manager is designed for using in the root of Thread Group or Test Plan. Do not place it as child element of particular HTTP Sampler
     </note>
     <note>DNS Cache Manager works only with HTTP requests using HTTPClient4 implementation.</note>
     <description><p>The DNS Cache Manager element allows to test applications, which have several servers behind load balancers (CDN, etc.), 
     when user receives content from different IP's. By default JMeter uses JVM DNS cache. That's why
     only one server from the cluster receives load. DNS Cache Manager resolves names for each thread separately each iteration and
     saves results of resolving to its internal DNS Cache, which is independent from both JVM and OS DNS caches.
     </p>
     <p>
     A mapping for static hosts can be used to simulate something like <code>/etc/hosts</code> file.
     These entries will be preferred over the custom resolver.
     </p>
     </description>
     <properties>
     <property name="Name" required="No">Descriptive name for this element that is shown in the tree. </property>
     <property name="Clear cache each Iteration" required="No">If selected, DNS cache of every  Thread is cleared each time new iteration is started.</property>
     <property name="Use system DNS resolver" required="N/A">System DNS resolver will be used. For correct work edit
        <code>$JAVA_HOME/jre/lib/security/java.security</code> and add <code>networkaddress.cache.ttl=0</code> 
     </property>
     <property name="Use custom DNS resolver" required="N/A">Custom DNS resolver (from dnsjava library) will be used.</property>
     <property name="Hostname or IP address" required="No">List of DNS servers to use. If empty, network configuration DNS will used.</property>
     <property name="Add Button" required="N/A">Add an entry to the DNS servers table.</property>
     <property name="Delete Button" required="N/A">Delete the currently selected table entry.</property>
     <property name="Host and Hostname or IP address" required="No">Mapping of hostnames to a static host entry which will be resolved using the custom DNS resolver.</property>
     <property name="Add static host Button" required="N/A">Add an entry to the static hosts table.</property>
     <property name="Delete static host Button" required="N/A">Delete the currently selected static host in the table.</property>
     </properties>
 </component>
 
 <component name="HTTP Authorization Manager" index="&sect-num;.4.4"  width="538" height="340" screenshot="http-config/http-auth-manager.png">
 <note>If there is more than one Authorization Manager in the scope of a Sampler,
 there is currently no way to specify which one is to be used.</note>
 
 <description>
 <p>The Authorization Manager lets you specify one or more user logins for web pages that are
 restricted using server authentication.  You see this type of authentication when you use
 your browser to access a restricted page, and your browser displays a login dialog box.  JMeter
 transmits the login information when it encounters this type of page.</p>
 <p>
 The Authorization headers may not be shown in the Tree View Listener "<code>Request</code>" tab.
 The Java implementation does pre-emptive authentication, but it does not
 return the Authorization header when JMeter fetches the headers.
 The Commons HttpClient (3.1) implementation defaults to pre-emptive and the header will be shown.
 The HttpComponents (HC 4.5.X) implementation does not do pre-emptive auth 
 (it is supported by the library but JMeter does not enable it)
 </p>
 <p>
 The HttpClient3.1 implementation defaults to pre-emptive authentication
 if the setting has not been defined. To disable this, set the values as below, in which case
 authentication will only be performed in response to a challenge.
 </p>
 <p>
 In the file <code>jmeter.properties</code> set <code>httpclient.parameters.file=httpclient.parameters</code>
 and in <code>httpclient.parameters</code> set <code>http.authentication.preemptive$Boolean=false</code>
 </p>
 <note>
 Note: the above settings only apply to the HttpClient sampler.
 </note>
 <note>
 When looking for a match against a URL, JMeter checks each entry in turn, and stops when it finds the first match.
 Thus the most specific URLs should appear first in the list, followed by less specific ones.
 Duplicate URLs will be ignored.
 If you want to use different usernames/passwords for different threads, you can use variables.
 These can be set up using a <complink name="CSV Data Set Config"/> Element (for example).
 </note>
 </description>
 
 <properties>
         <property name="Name" required="No">Descriptive name for this element that is shown in the tree. </property>
         <property name="Clear auth on each iteration?" required="Yes">Used by Kerberos authentication. If checked, authentication will be done on each iteration of Main Thread Group loop even if it has already been done in a previous one.
         This is usually useful if each main thread group iteration represents behaviour of one Virtual User.
         </property>
   <property name="Base URL" required="Yes">A partial or complete URL that matches one or more HTTP Request URLs.  As an example,
 say you specify a Base URL of "<code>http://localhost/restricted/</code>" with a <code>Username</code> of "<code>jmeter</code>" and
 a <code>Password</code> of "<code>jmeter</code>".  If you send an HTTP request to the URL
 "<code>http://localhost/restricted/ant/myPage.html</code>", the Authorization Manager sends the login
 information for the user named, "<code>jmeter</code>".</property>
   <property name="Username" required="Yes">The username to authorize.</property>
   <property name="Password" required="Yes">The password for the user. (N.B. this is stored unencrypted in the test plan)</property>
   <property name="Domain" required="No">The domain to use for NTLM.</property>
   <property name="Realm" required="No">The realm to use for NTLM.</property>
   <property name="Mechanism" required="No">Type of authentication to perform. JMeter can perform different types of authentications based on used Http Samplers:
 <dl>
 <dt>Java</dt><dd><code>BASIC</code></dd>
 <dt>HttpClient 3.1</dt><dd><code>BASIC</code> and <code>DIGEST</code></dd>
 <dt>HttpClient 4</dt><dd><code>BASIC</code>, <code>DIGEST</code> and <code>Kerberos</code></dd>
 </dl>
 </property>
 </properties>
 <note>
 The Realm only applies to the HttpClient sampler.
 </note>
 <br></br>
 <b>Kerberos Configuration:</b>
 <p>To configure Kerberos you need to setup at least two JVM system properties:</p>
 <ul>
     <li><code>-Djava.security.krb5.conf=krb5.conf</code></li>
     <li><code>-Djava.security.auth.login.config=jaas.conf</code></li>
 </ul>
 <p>
 You can also configure those two properties in the file <code>bin/system.properties</code>.
 Look at the two sample configuration files (<code>krb5.conf</code> and <code>jaas.conf</code>) located in the jmeter <code>bin</code> folder
 for references to more documentation, and tweak them to match your Kerberos configuration.
 </p>
 <p>
 When generating a SPN for Kerberos SPNEGO authentication IE and Firefox will omit the port number
 from the URL. Chrome has an option (<code>--enable-auth-negotiate-port</code>) to include the port
 number if it differs from the standard ones (<code>80</code> and <code>443</code>). That behavior
 can be emulated by setting the following jmeter property as below.
 </p>
 <p>
 In <code>jmeter.properties</code> or <code>user.properties</code>, set:
 </p>
 <ul>
 <li><code>kerberos.spnego.strip_port=false</code></li>
 </ul>
 <br></br>
 <b>Controls:</b>
 <ul>
   <li><code>Add</code> Button - Add an entry to the authorization table.</li>
   <li><code>Delete</code> Button - Delete the currently selected table entry.</li>
   <li><code>Load</code> Button - Load a previously saved authorization table and add the entries to the existing
 authorization table entries.</li>
   <li><code>Save As</code> Button - Save the current authorization table to a file.</li>
 </ul>
 
 <note>When you save the Test Plan, JMeter automatically saves all of the authorization
 table entries - including any passwords, which are not encrypted.</note>
 
 <example title="Authorization Example" anchor="authorization_example">
 
 <p><a href="../demos/AuthManagerTestPlan.jmx">Download</a> this example.  In this example, we created a Test Plan on a local server that sends three HTTP requests, two requiring a login and the
 other is open to everyone.  See figure 10 to see the makeup of our Test Plan.  On our server, we have a restricted
 directory named, "<code>secret</code>", which contains two files, "<code>index.html</code>" and "<code>index2.html</code>".  We created a login id named, "<code>kevin</code>",
 which has a password of "<code>spot</code>".  So, in our Authorization Manager, we created an entry for the restricted directory and
 a username and password (see figure 11).  The two HTTP requests named "<code>SecretPage1</code>" and "<code>SecretPage2</code>" make requests
 to "<code>/secret/index.html</code>" and "<code>/secret/index2.html</code>".  The other HTTP request, named "<code>NoSecretPage</code>" makes a request to
 "<code>/index.html</code>".</p>
 
 <figure width="452" height="177" image="http-config/auth-manager-example1a.png">Figure 10 - Test Plan</figure>
 <figure width="641" height="329" image="http-config/auth-manager-example1b.png">Figure 11 - Authorization Manager Control Panel</figure>
 
 <p>When we run the Test Plan, JMeter looks in the Authorization table for the URL it is requesting.  If the Base URL matches
 the URL, then JMeter passes this information along with the request.</p>
 
 <note>You can download the Test Plan, but since it is built as a test for our local server, you will not
 be able to run it.  However, you can use it as a reference in constructing your own Test Plan.</note>
 </example>
 
 </component>
 
 <component name="HTTP Cache Manager" index="&sect-num;.4.5"  width="511" height="196" screenshot="http-config/http-cache-manager.png">
 <description>
 <p>
 The HTTP Cache Manager is used to add caching functionality to HTTP requests within its scope to simulate browser cache feature.
 Each Virtual User thread has its own Cache. By default, Cache Manager will store up to 5000 items in cache per Virtual User thread, using LRU algorithm. 
 Use property "<code>maxSize</code>" to modify this value. Note that the more you increase this value the more HTTP Cache Manager will consume memory, so be sure to adapt the <code>-Xmx</code> jvm option accordingly.
 </p>
 <p>
 If a sample is successful (i.e. has response code <code>2xx</code>) then the <code>Last-Modified</code> and <code>Etag</code> (and <code>Expired</code> if relevant) values are saved for the URL.
 Before executing the next sample, the sampler checks to see if there is an entry in the cache, 
 and if so, the <code>If-Last-Modified</code> and <code>If-None-Match</code> conditional headers are set for the request.
 </p>
 <p>
 Additionally, if the "<code>Use Cache-Control/Expires header</code>" option is selected, then the <code>Cache-Control</code>/<code>Expires</code> value is checked against the current time.
 If the request is a <code>GET</code> request, and the timestamp is in the future, then the sampler returns immediately,
 without requesting the URL from the remote server. This is intended to emulate browser behaviour.
 Note that if <code>Cache-Control</code> header is "<code>no-cache</code>", the response will be stored in cache as pre-expired,
 so will generate a conditional <code>GET</code> request.
 If <code>Cache-Control</code> has any other value, 
 the "<code>max-age</code>" expiry option is processed to compute entry lifetime, if missing then expire header will be used, if also missing entry will be cached 
 as specified in <a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a> section 13.2.4. using <code>Last-Modified</code> time and response Date.
 </p>
 <note>
 If the requested document has not changed since it was cached, then the response body will be empty.
 Likewise if the <code>Expires</code> date is in the future.
 This may cause problems for Assertions.
 </note>
 <note>Responses with a <code>Vary</code> header will not be cached.</note>
 </description>
 <properties>
   <property name="Name" required="No">Descriptive name for this element that is shown in the tree. </property>
   <property name="Clear cache each iteration" required="Yes">
   If selected, then the cache is cleared at the start of the thread.
   </property>
   <property name="Use Cache Control/Expires header when processing GET requests" required="Yes">See description above.</property>
   <property name="Max Number of elements in cache" required="Yes">See description above.</property>
 </properties>
 </component>
 
 <component name="HTTP Cookie Manager" index="&sect-num;.4.6"  width="653" height="373" screenshot="http-config/http-cookie-manager.png">
 
 <note>If there is more than one Cookie Manager in the scope of a Sampler,
 there is currently no way to specify which one is to be used.
 Also, a cookie stored in one cookie manager is not available to any other manager,
 so use multiple Cookie Managers with care.</note>
 
 <description><p>The Cookie Manager element has two functions:<br></br>
 First, it stores and sends cookies just like a web browser. If you have an HTTP Request and
 the response contains a cookie, the Cookie Manager automatically stores that cookie and will
 use it for all future requests to that particular web site.  Each JMeter thread has its own
 "cookie storage area".  So, if you are testing a web site that uses a cookie for storing
 session information, each JMeter thread will have its own session.
 Note that such cookies do not appear on the Cookie Manager display, but they can be seen using
 the <complink name="View Results Tree"/> Listener.
 </p>
 <p>
 JMeter checks that received cookies are valid for the URL.
 This means that cross-domain cookies are not stored.
 If you have bugged behaviour or want Cross-Domain cookies to be used, define the JMeter property "<code>CookieManager.check.cookies=false</code>".
 </p>
 <p>
 Received Cookies can be stored as JMeter thread variables.
 To save cookies as variables, define the property "<code>CookieManager.save.cookies=true</code>".
 Also, cookies names are prefixed with "<code>COOKIE_</code>" before they are stored (this avoids accidental corruption of local variables)
 To revert to the original behaviour, define the property "<code>CookieManager.name.prefix= </code>" (one or more spaces).
 If enabled, the value of a cookie with the name <code>TEST</code> can be referred to as <code>${COOKIE_TEST}</code>.
 </p>
 <p>Second, you can manually add a cookie to the Cookie Manager.  However, if you do this,
 the cookie will be shared by all JMeter threads.</p>
 <p>Note that such Cookies are created with an Expiration time far in the future</p>
 <p>
 Cookies with <code>null</code> values are ignored by default.
 This can be changed by setting the JMeter property: <code>CookieManager.delete_null_cookies=false</code>.
 Note that this also applies to manually defined cookies - any such cookies will be removed from the display when it is updated.
 Note also that the cookie name must be unique - if a second cookie is defined with the same name, it will replace the first.
 </p>
 </description>
 <properties>
   <property name="Name" required="No">Descriptive name for this element that is shown in the tree. </property>
   <property name="Clear Cookies each Iteration" required="Yes">If selected, all server-defined cookies are cleared each time the main Thread Group loop is executed.
   Any cookie defined in the GUI are not cleared.</property>
   <property name="Cookie Policy" required="Yes">The cookie policy that will be used to manage the cookies. 
   "<code>standard</code>" is the default since 3.0, and should work in most cases. 
   See <a href="https://hc.apache.org/httpcomponents-client-ga/tutorial/html/statemgmt.html#d5e515">Cookie specifications</a> and 
   <a href="http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/cookie/CookieSpec.html">CookieSpec implementations</a>
   [Note: "<code>ignoreCookies</code>" is equivalent to omitting the CookieManager.]
-  
-  If you still use HC3CookieHandler (which is DEPRECATED as of 3.0 version, so migration is highly advised), default Cookie Policy is "<code>compatibility</code>", and should work in most cases.
-  See <a href="http://hc.apache.org/httpclient-3.x/cookies.html">http://hc.apache.org/httpclient-3.x/cookies.html</a> and 
-  <a href="http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/cookie/CookiePolicy.html">http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/cookie/CookiePolicy.html</a>
-    </property>
- <property name="Implementation" required="Yes"><code>HC4CookieHandler</code> (HttpClient 4.5.X API) or <code>HC3CookieHandler (deprecated)</code> (HttpClient 3 API). 
+ </property>
+ <property name="Implementation" required="Yes"><code>HC4CookieHandler</code> (HttpClient 4.5.X API). 
   Default is <code>HC4CookieHandler</code> since 3.0.
   <br></br>
   <i>[Note: If you have a website to test with IPv6 address, choose <code>HC4CookieHandler</code> (IPv6 compliant)]</i></property>
   <property name="User-Defined Cookies" required="No (discouraged, unless you know what you're doing)">This
   gives you the opportunity to use hardcoded cookies that will be used by all threads during the test execution.
   <br></br>
   The "<code>domain</code>" is the hostname of the server (without <code>http://</code>); the port is currently ignored.
   </property>
   <property name="Add Button" required="N/A">Add an entry to the cookie table.</property>
   <property name="Delete Button" required="N/A">Delete the currently selected table entry.</property>
   <property name="Load Button" required="N/A">Load a previously saved cookie table and add the entries to the existing
 cookie table entries.</property>
   <property name="Save As Button" required="N/A">
   Save the current cookie table to a file (does not save any cookies extracted from HTTP Responses).
   </property>
 </properties>
 
 </component>
 
 <component name="HTTP Request Defaults" index="&sect-num;.4.7" width="879" height="469" 
          screenshot="http-config/http-request-defaults.png">
 <description><p>This element lets you set default values that your HTTP Request controllers use.  For example, if you are
 creating a Test Plan with 25 HTTP Request controllers and all of the requests are being sent to the same server,
 you could add a single HTTP Request Defaults element with the "<code>Server Name or IP</code>" field filled in.  Then, when
 you add the 25 HTTP Request controllers, leave the "<code>Server Name or IP</code>" field empty.  The controllers will inherit
 this field value from the HTTP Request Defaults element.</p>
 <note>
 All port values are treated equally; a sampler that does not specify a port will use the HTTP Request Defaults port, if one is provided.
 </note>
 </description>
 <figure width="881" height="256" image="http-config/http-request-defaults-advanced-tab.png">HTTP Request Advanced config fields</figure>
 
 <properties>
         <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
         <property name="Server" required="No">Domain name or IP address of the web server. e.g. <code>www.example.com</code>. [Do not include the <code>http://</code> prefix.</property>
         <property name="Port" required="No">Port the web server is listening to.</property>
         <property name="Connect Timeout" required="No">Connection Timeout. Number of milliseconds to wait for a connection to open.</property>
         <property name="Response Timeout" required="No">Response Timeout. Number of milliseconds to wait for a response.</property>
-        <property name="Implementation" required="No"><code>Java</code>, <code>HttpClient3.1 (DEPRECATED SINCE 3.0)</code>, <code>HttpClient4</code>. 
+        <property name="Implementation" required="No"><code>Java</code>, <code>HttpClient4</code>. 
         If not specified the default depends on the value of the JMeter property
         <code>jmeter.httpsampler</code>, failing that, the <code>Java</code> implementation is used.</property>
         <property name="Protocol" required="No"><code>HTTP</code> or <code>HTTPS</code>.</property>
         <property name="Content encoding" required="No">The encoding to be used for the request.</property>
         <property name="Path" required="No">The path to resource (for example, <code>/servlets/myServlet</code>). If the
         resource requires query string parameters, add them below in the "<code>Send Parameters With the Request</code>" section.
         Note that the path is the default for the full path, not a prefix to be applied to paths
         specified on the HTTP Request screens.
         </property>
         <property name="Send Parameters With the Request" required="No">The query string will
         be generated from the list of parameters you provide.  Each parameter has a <i>name</i> and
         <i>value</i>.  The query string will be generated in the correct fashion, depending on
         the choice of "<code>Method</code>" you made (i.e. if you chose <code>GET</code>, the query string will be
         appended to the URL, if <code>POST</code>, then it will be sent separately).  Also, if you are
         sending a file using a multipart form, the query string will be created using the
         multipart form specifications.</property>
         <property name="Server (proxy)" required="No">Hostname or IP address of a proxy server to perform request. [Do not include the <code>http://</code> prefix.]</property>
         <property name="Port" required="No, unless proxy hostname is specified">Port the proxy server is listening to.</property>
         <property name="Username" required="No">(Optional) username for proxy server.</property>
         <property name="Password" required="No">(Optional) password for proxy server. (N.B. this is stored unencrypted in the test plan)</property>
         <property name="Retrieve All Embedded Resources from HTML Files" required="No">Tell JMeter to parse the HTML file
 and send HTTP/HTTPS requests for all images, Java applets, JavaScript files, CSSs, etc. referenced in the file.
         </property>
         <property name="Use concurrent pool" required="No">Use a pool of concurrent connections to get embedded resources.</property>
         <property name="Size" required="No">Pool size for concurrent connections used to get embedded resources.</property>
         <property name="Embedded URLs must match:" required="No">
         If present, this must be a regular expression that is used to match against any embedded URLs found.
         So if you only want to download embedded resources from <code>http://example.com/</code>, use the expression:
         <code>http://example\.com/.*</code>
         </property>
 </properties>
 <note>
 Note: radio buttons only have two states - on or off.
 This makes it impossible to override settings consistently
 - does off mean off, or does it mean use the current default?
 JMeter uses the latter (otherwise defaults would not work at all).
 So if the button is off, then a later element can set it on,
 but if the button is on, a later element cannot set it off.
 </note>
 </component>
 
 <component name="HTTP Header Manager" index="&sect-num;.4.8"  width="767" height="239" screenshot="http-config/http-header-manager.png">
 <description>
 <p>The Header Manager lets you add or override HTTP request headers.</p>
 <p>
 <b>JMeter now supports multiple Header Managers</b>. The header entries are merged to form the list for the sampler.
 If an entry to be merged matches an existing header name, it replaces the previous entry,
 unless the entry value is empty, in which case any existing entry is removed.
 This allows one to set up a default set of headers, and apply adjustments to particular samplers. 
 </p>
 </description>
 
 <properties>
         <property name="Name" required="No">Descriptive name for this element that is shown in the tree. </property>
   <property name="Name (Header)" required="No (You should have at least one, however)">Name of the request header.
         Two common request headers you may want to experiment with
 are "<code>User-Agent</code>" and "<code>Referer</code>".</property>
   <property name="Value" required="No (You should have at least one, however)">Request header value.</property>
   <property name="Add Button" required="N/A">Add an entry to the header table.</property>
   <property name="Delete Button" required="N/A">Delete the currently selected table entry.</property>
   <property name="Load Button" required="N/A">Load a previously saved header table and add the entries to the existing
 header table entries.</property>
   <property name="Save As Button" required="N/A">Save the current header table to a file.</property>
 </properties>
 
 <example title="Header Manager example" anchor="header_manager_example">
 
 <p><a href="../demos/HeaderManagerTestPlan.jmx">Download</a> this example.  In this example, we created a Test Plan
 that tells JMeter to override the default "<code>User-Agent</code>" request header and use a particular Internet Explorer agent string
 instead. (see figures 12 and 13).</p>
 
 <figure width="247" height="121" image="http-config/header-manager-example1a.png">Figure 12 - Test Plan</figure>
 <figure image="http-config/header-manager-example1b.png">Figure 13 - Header Manager Control Panel</figure>
 </example>
 
 </component>
 
 <component name="Java Request Defaults" index="&sect-num;.4.9"  width="685" height="373" screenshot="java_defaults.png">
 <description><p>The Java Request Defaults component lets you set default values for Java testing.  See the <complink name="Java Request" />.</p>
 </description>
 
 </component>
 
 <component name="JDBC Connection Configuration" index="&sect-num;.4.10" 
                  width="474" height="458" screenshot="jdbc-config/jdbc-conn-config.png">
     <description>Creates a database connection (used by <complink name="JDBC Request"/>Sampler)
      from the supplied JDBC Connection settings. The connection may be optionally pooled between threads.
      Otherwise each thread gets its own connection.
      The connection configuration name is used by the JDBC Sampler to select the appropriate
      connection.
      The used pool is DBCP, see <a href="https://commons.apache.org/proper/commons-dbcp/configuration.html" >BasicDataSource Configuration Parameters</a>
     </description>
     <properties>
         <property name="Name" required="No">Descriptive name for the connection configuration that is shown in the tree.</property>
         <property name="Variable Name" required="Yes">The name of the variable the connection is tied to.  
         Multiple connections can be used, each tied to a different variable, allowing JDBC Samplers
         to select the appropriate connection.
         <note>Each name must be different. If there are two configuration elements using the same name,
         only one will be saved. JMeter logs a message if a duplicate name is detected.</note>
         </property>
         <property name="Max Number of Connections" required="Yes">
         Maximum number of connections allowed in the pool.
         In most cases, <b>set this to zero (0)</b>.
         This means that each thread will get its own pool with a single connection in it, i.e.
         the connections are not shared between threads.
         <br />
         If you really want to use shared pooling (why?), then set the max count to the same as the number of threads
         to ensure threads don't wait on each other.
         </property>
         <property name="Max Wait (ms)" required="Yes">Pool throws an error if the timeout period is exceeded in the 
         process of trying to retrieve a connection, see <a href="https://commons.apache.org/proper/commons-dbcp/api-2.1.1/org/apache/commons/dbcp2/BasicDataSource.html#getMaxWaitMillis--" >BasicDataSource.html#getMaxWaitMillis</a></property>
         <property name="Time Between Eviction Runs (ms)" required="Yes">The number of milliseconds to sleep between runs of the idle object evictor thread. When non-positive, no idle object evictor thread will be run. (Defaults to "<code>60000</code>", 1 minute).
         See <a href="https://commons.apache.org/proper/commons-dbcp/api-2.1.1/org/apache/commons/dbcp2/BasicDataSource.html#getTimeBetweenEvictionRunsMillis--" >BasicDataSource.html#getTimeBetweenEvictionRunsMillis</a></property>
         <property name="Auto Commit" required="Yes">Turn auto commit on or off for the connections.</property>
         <property name="Test While Idle" required="Yes">Test idle connections of the pool, see <a href="https://commons.apache.org/proper/commons-dbcp/api-2.1.1/org/apache/commons/dbcp2/BasicDataSource.html#getTestWhileIdle--">BasicDataSource.html#getTestWhileIdle</a>. 
         Validation Query will be used to test it.</property>
         <property name="Soft Min Evictable Idle Time(ms)" required="Yes">Minimum amount of time a connection may sit idle in the pool before it is eligible for eviction by the idle object evictor, with the extra condition that at least <code>minIdle</code> connections remain in the pool.
         See <a href="https://commons.apache.org/proper/commons-dbcp/api-2.1.1/org/apache/commons/dbcp2/BasicDataSource.html#getSoftMinEvictableIdleTimeMillis--">BasicDataSource.html#getSoftMinEvictableIdleTimeMillis</a>.
         Defaults to 5000 (5 seconds)
         </property>
         <property name="Validation Query" required="No">A simple query used to determine if the database is still responding.
         This defaults to the '<code>isValid()</code>' method of the jdbc driver, which is suitable for many databases.
         However some may require a different query; for example Oracle something like '<code>SELECT 1 FROM DUAL</code>' could be used.
         <note>Note this validation query is used on pool creation to validate it even if "<code>Test While Idle</code>" suggests query would only be used on idle connections.
         This is DBCP behaviour.</note>
         </property>
         <property name="Database URL" required="Yes">JDBC Connection string for the database.</property>
         <property name="JDBC Driver class" required="Yes">Fully qualified name of driver class. (Must be in
         JMeter's classpath - easiest to copy <code>.jar</code> file into JMeter's <code>/lib</code> directory).</property>
         <property name="Username" required="No">Name of user to connect as.</property>
         <property name="Password" required="No">Password to connect with. (N.B. this is stored unencrypted in the test plan)</property>
     </properties>
 <p>Different databases and JDBC drivers require different JDBC settings. 
 The Database URL and JDBC Driver class are defined by the provider of the JDBC implementation.</p>
 <p>Some possible settings are shown below. Please check the exact details in the JDBC driver documentation.</p>
 
 <p>
 If JMeter reports <code>No suitable driver</code>, then this could mean either:
 </p>
 <ul>
 <li>The driver class was not found. In this case, there will be a log message such as <code>DataSourceElement: Could not load driver: {classname} java.lang.ClassNotFoundException: {classname}</code></li>
 <li>The driver class was found, but the class does not support the connection string. This could be because of a syntax error in the connection string, or because the wrong classname was used.</li>
 </ul>
 If the database server is not running or is not accessible, then JMeter will report a <code>java.net.ConnectException</code>.
 <table>
 <tr><th>Database</th><th>Driver class</th><th>Database URL</th></tr>
 <tr><td>MySQL</td><td><code>com.mysql.jdbc.Driver</code></td><td><code>jdbc:mysql://host[:port]/dbname</code></td></tr>
 <tr><td>PostgreSQL</td><td><code>org.postgresql.Driver</code></td><td><code>jdbc:postgresql:{dbname}</code></td></tr>
 <tr><td>Oracle</td><td><code>oracle.jdbc.OracleDriver</code></td><td><code>jdbc:oracle:thin:@//host:port/service</code>
 OR<br/><code>jdbc:oracle:thin:@(description=(address=(host={mc-name})(protocol=tcp)(port={port-no}))(connect_data=(sid={sid})))</code></td></tr>
 <tr><td>Ingres (2006)</td><td><code>ingres.jdbc.IngresDriver</code></td><td><code>jdbc:ingres://host:port/db[;attr=value]</code></td></tr>
 <tr><td>SQL Server (MS JDBC driver)</td><td><code>com.microsoft.sqlserver.jdbc.SQLServerDriver</code></td><td><code>jdbc:sqlserver://host:port;DatabaseName=dbname</code></td></tr>
 <tr><td>Apache Derby</td><td><code>org.apache.derby.jdbc.ClientDriver</code></td><td><code>jdbc:derby://server[:port]/databaseName[;URLAttributes=value[;&hellip;]]</code></td></tr>
 </table>
 <note>The above may not be correct - please check the relevant JDBC driver documentation.</note>
 </component>
 
 
 <component name="Keystore Configuration" index="&sect-num;.4.11"  width="441" height="189" screenshot="keystore_config.png">
 <description><p>The Keystore Config Element lets you configure how Keystore will be loaded and which keys it will use.
 This component is typically used in HTTPS scenarios where you don't want to take into account keystore initialization into account in response time.</p>
 <p>To use this element, you need to setup first a Java Key Store with the client certificates you want to test, to do that:
 </p>
 <ol>
 <li>Create your certificates either with Java <code>keytool</code> utility or through your PKI</li>
 <li>If created by PKI, import your keys in Java Key Store by converting them to a format acceptable by JKS</li>
 <li>Then reference the keystore file through the two JVM properties (or add them in <code>system.properties</code>):
     <ul>
         <li><code>-Djavax.net.ssl.keyStore=path_to_keystore</code></li>
         <li><code>-Djavax.net.ssl.keyStorePassword=password_of_keystore</code></li>
     </ul>
 </li>
 </ol>
 </description>
 
 <properties>
   <property name="Name" required="No">Descriptive name for this element that is shown in the tree. </property>
   <property name="Preload" required="Yes">Wether or not to preload Keystore. Setting it to <code>true</code> is usually the best option.</property>
   <property name="Variable name holding certificate alias" required="False">Variable name that will contain the alias to use for authentication by client certificate. Variable value will be filled from CSV Data Set for example. In the screenshot, "<code>certificat_ssl</code>" will also be a variable in CSV Data Set.</property>
   <property name="Alias Start Index" required="Yes">The index of the first key to use in Keystore, 0-based.</property>
   <property name="Alias End Index" required="Yes">The index of the last key to use in Keystore, 0-based. When using "<code>Variable name holding certificate alias</code>" ensure it is large enough so that all keys are loaded at startup.</property>
 </properties>
 <note>
 To make JMeter use more than one certificate you need to ensure that:
 <ul>
 <li><code>https.use.cached.ssl.context=false</code> is set in <code>jmeter.properties</code> or <code>user.properties</code></li>
-<li>You use either HTTPClient 4 (ADVISED) or HTTPClient 3.1 (DEPRECATED SINCE 3.0) implementations for HTTP Request</li>
+<li>You use HTTPClient 4 implementation for HTTP Request</li>
 </ul>
 </note>
 </component>
 
 <component name="Login Config Element" index="&sect-num;.4.12"  width="459" height="126" screenshot="login-config.png">
 <description><p>The Login Config Element lets you add or override username and password settings in samplers that use username and password as part of their setup.</p>
 </description>
 
 <properties>
         <property name="Name" required="No">Descriptive name for this element that is shown in the tree. </property>
   <property name="Username" required="No">The default username to use.</property>
   <property name="Password" required="No">The default password to use. (N.B. this is stored unencrypted in the test plan)</property>
 </properties>
 
 </component>
 
 <component name="LDAP Request Defaults" index="&sect-num;.4.13"  width="689" height="232" screenshot="ldap_defaults.png">
 <description><p>The LDAP Request Defaults component lets you set default values for LDAP testing.  See the <complink name="LDAP Request"/>.</p>
 </description>
 
 </component>
 
 <component name="LDAP Extended Request Defaults" index="&sect-num;.4.14"  width="686" height="184" screenshot="ldapext_defaults.png">
 <description><p>The LDAP Extended Request Defaults component lets you set default values for extended LDAP testing.  See the <complink name="LDAP Extended Request"/>.</p>
 </description>
 
 </component>
 
 <component name="TCP Sampler Config" index="&sect-num;.4.15"  width="826" height="450" screenshot="tcpsamplerconfig.png">
 <description>
         <p>
     The TCP Sampler Config provides default data for the TCP Sampler
     </p>
 </description>
 <properties>
   <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
   <property name="TCPClient classname" required="No">Name of the TCPClient class. Defaults to the property <code>tcp.handler</code>, failing that <code>TCPClientImpl</code>.</property>
   <property name="ServerName or IP" required="">Name or IP of TCP server</property>
   <property name="Port Number" required="">Port to be used</property>
   <property name="Re-use connection" required="Yes">If selected, the connection is kept open. Otherwise it is closed when the data has been read.</property>
   <property name="Close connection" required="Yes">If selected, the connection will be closed after running the sampler.</property>  
   <property name="SO_LINGER" required="No">Enable/disable <code>SO_LINGER</code> with the specified linger time in seconds when a socket is created. If you set "<code>SO_LINGER</code>" value as <code>0</code>, you may prevent large numbers of sockets sitting around with a <code>TIME_WAIT</code> status.</property>
   <property name="End of line(EOL) byte value" required="No">Byte value for end of line, set this to a value outside the range <code>-128</code> to <code>+127</code> to skip eol checking. You may set this in <code>jmeter.properties</code> file as well with the <code>tcp.eolByte</code> property. If you set this in TCP Sampler Config and in <code>jmeter.properties</code> file at the same time, the setting value in the TCP Sampler Config will be used.</property>
   <property name="Connect Timeout" required="No">Connect Timeout (milliseconds, 0 disables).</property>
   <property name="Response Timeout" required="No">Response Timeout (milliseconds, 0 disables).</property>
   <property name="Set Nodelay" required="">Should the nodelay property be set?</property>
   <property name="Text to Send" required="">Text to be sent</property>
 </properties>
 </component>
 
 <component name="User Defined Variables" index="&sect-num;.4.16"  width="741" height="266" screenshot="user_defined_variables.png">
 <description><p>The User Defined Variables element lets you define an <b>initial set of variables</b>, just as in the <complink name="Test Plan" />.
 <note>
 Note that all the UDV elements in a test plan - no matter where they are - are processed at the start.
 </note>
 So you cannot reference variables which are defined as part of a test run, e.g. in a Post-Processor.
 </p>
 <p>
 <b>
 UDVs should not be used with functions that generate different results each time they are called.
 Only the result of the first function call will be saved in the variable. 
 </b>
 However, UDVs can be used with functions such as <code>__P()</code>, for example:
 </p>
 <source>
 HOST      ${__P(host,localhost)} 
 </source>
 <p>
 which would define the variable "<code>HOST</code>" to have the value of the JMeter property "<code>host</code>", defaulting to "<code>localhost</code>" if not defined.
 </p>
 <p>
 For defining variables during a test run, see <complink name="User Parameters"/>.
 UDVs are processed in the order they appear in the Plan, from top to bottom.
 </p>
 <p>
 For simplicity, it is suggested that UDVs are placed only at the start of a Thread Group
 (or perhaps under the Test Plan itself).
 </p>
 <p>
 Once the Test Plan and all UDVs have been processed, the resulting set of variables is
 copied to each thread to provide the initial set of variables.
 </p>
 <p>
 If a runtime element such as a User Parameters Pre-Processor or Regular Expression Extractor defines a variable
 with the same name as one of the UDV variables, then this will replace the initial value, and all other test
 elements in the thread will see the updated value.
 </p>
 </description>
 <note>
 If you have more than one Thread Group, make sure you use different names for different values, as UDVs are shared between Thread Groups.
 Also, the variables are not available for use until after the element has been processed, 
 so you cannot reference variables that are defined in the same element.
 You can reference variables defined in earlier UDVs or on the Test Plan. 
 </note>
 <properties>
   <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
   <property name="User Defined Variables" required="">Variable name/value pairs. The string under the "<code>Name</code>"
       column is what you'll need to place inside the brackets in <code>${&hellip;}</code> constructs to use the variables later on. The
       whole <code>${&hellip;}</code> will then be replaced by the string in the "<code>Value</code>" column.</property>
 </properties>
 </component>
 
 <component name="Random Variable" index="&sect-num;.4.17"  width="495" height="286" screenshot="random_variable.png">
 <description>
 <p>
 The Random Variable Config Element is used to generate random numeric strings and store them in variable for use later.
 It's simpler than using <complink name="User Defined Variables"/> together with the <code>__Random()</code> function.
 </p>
 <p>
 The output variable is constructed by using the random number generator,
 and then the resulting number is formatted using the format string.
 The number is calculated using the formula <code>minimum+Random.nextInt(maximum-minimum+1)</code>.
 <code>Random.nextInt()</code> requires a positive integer.
 This means that <code>maximum-minimum</code> - i.e. the range - must be less than <code>2147483647</code>,
 however the <code>minimum</code> and <code>maximum</code> values can be any <code>long</code> values so long as the range is OK.
 </p>
 </description>
 
 <properties>
   <property name="Name" required="Yes">Descriptive name for this element that is shown in the tree.</property>
   <property name="Variable Name" required="Yes">The name of the variable in which to store the random string.</property>
   <property name="Format String" required="No">The <code>java.text.DecimalFormat</code> format string to be used. 
   For example "<code>000</code>" which will generate numbers with at least 3 digits, 
   or "<code>USER_000</code>" which will generate output of the form <code>USER_nnn</code>. 
   If not specified, the default is to generate the number using <code>Long.toString()</code></property>
   <property name="Minimum Value" required="Yes">The minimum value (<code>long</code>) of the generated random number.</property>
   <property name="Maximum Value" required="Yes">The maximum value (<code>long</code>) of the generated random number.</property>
   <property name="Random Seed" required="No">The seed for the random number generator. Default is the current time in milliseconds. 
   If you use the same seed value with Per Thread set to <code>true</code>, you will get the same value for each Thread as per 
   <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Random.html" >Random</a> class.
   </property>
   <property name="Per Thread(User)?" required="Yes">If <code>False</code>, the generator is shared between all threads in the thread group.
   If <code>True</code>, then each thread has its own random generator.</property>
 </properties>
 
 </component>
 
 <component name="Counter" index="&sect-num;.4.18"  width="404" height="262" screenshot="counter.png">
 <description><p>Allows the user to create a counter that can be referenced anywhere
 in the Thread Group.  The counter config lets the user configure a starting point, a maximum,
 and the increment.  The counter will loop from the start to the max, and then start over
 with the start, continuing on like that until the test is ended.  </p>
 <p>The counter uses a long to store the value, so the range is from <code>-2^63</code> to <code>2^63-1</code>.</p>
 </description>
 <properties>
         <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
         <property name="Start" required="Yes">The starting number for the counter.  The counter will equal this
         number during the first iteration.</property>
         <property name="Increment" required="Yes">How much to increment the counter by after each
         iteration.</property>
         <property name="Maximum" required="No">If the counter exceeds the maximum, then it is reset to the <code>Start</code> value.
         Default is <code>Long.MAX_VALUE</code>
         </property>
         <property name="Format" required="No">Optional format, e.g. <code>000</code> will format as <code>001</code>, <code>002</code>, etc. 
         This is passed to <code>DecimalFormat</code>, so any valid formats can be used.
         If there is a problem interpreting the format, then it is ignored.
     [The default format is generated using <code>Long.toString()</code>]
         </property>
         <property name="Reference Name" required="Yes">This controls how you refer to this value in other elements.  Syntax is
         as in <a href="functions.html">user-defined values</a>: <code>$(reference_name}</code>.</property>
         <property name="Track Counter Independently for each User" required="No">In other words, is this a global counter, or does each user get their
         own counter?  If unchecked, the counter is global (i.e., user #1 will get value "<code>1</code>", and user #2 will get value "<code>2</code>" on
         the first iteration).  If checked, each user has an independent counter.</property>
         <property name="Reset counter on each Thread Group Iteration" required="No">This option is only available when counter is tracked per User, if checked, 
         counter will be reset to <code>Start</code> value on each Thread Group iteration. This can be useful when Counter is inside a Loop Controller.</property>
 </properties>
 </component>
 
 <component name="Simple Config Element" index="&sect-num;.4.19"  width="627" height="282" screenshot="simple_config_element.png">
 <description><p>The Simple Config Element lets you add or override arbitrary values in samplers.  You can choose the name of the value
 and the value itself.  Although some adventurous users might find a use for this element, it's here primarily for developers as a basic
 GUI that they can use while developing new JMeter components.</p>
 </description>
 
 <properties>
         <property name="Name" required="Yes">Descriptive name for this element that is shown in the tree. </property>
   <property name="Parameter Name" required="Yes">The name of each parameter.  These values are internal to JMeter's workings and
   are not generally documented.  Only those familiar with the code will know these values.</property>
   <property name="Parameter Value" required="Yes">The value to apply to that parameter.</property>
 </properties>
 
 </component>
 
 
 <component name="MongoDB Source Config (DEPRECATED)" index="&sect-num;.4.20" 
                  width="1233" height="618" screenshot="mongodb-source-config.png">
     <description>Creates a MongoDB connection (used by <complink name="MongoDB Script"/>Sampler)
      from the supplied Connection settings. Each thread gets its own connection.
      The connection configuration name is used by the JDBC Sampler to select the appropriate
      connection.
      <p>
      You can then access <code>com.mongodb.DB</code> object in Beanshell or JSR223 Test Elements through the element <a href="../api/org/apache/jmeter/protocol/mongodb/config/MongoDBHolder.html">MongoDBHolder</a> 
      using this code</p>
      
     <source>
 import com.mongodb.DB;
 import org.apache.jmeter.protocol.mongodb.config.MongoDBHolder;
 DB db = MongoDBHolder.getDBFromSource("value of property MongoDB Source",
             "value of property Database Name");
 &hellip;
     </source>
     </description>
     <properties>
         <property name="Name" required="No">Descriptive name for the connection configuration that is shown in the tree.</property>
         <property name="Server Address List" required="Yes">Mongo DB Servers</property>
         <property name="MongoDB Source" required="Yes">The name of the variable the connection is tied to.  
         <note>Each name must be different. If there are two configuration elements using the same name, only one will be saved.</note>
         </property>
         
         <property name="Keep Trying" required="No">
             If <code>true</code>, the driver will keep trying to connect to the same server in case that the socket cannot be established.<br/>
             There is maximum amount of time to keep retrying, which is 15s by default.<br/>This can be useful to avoid some exceptions being thrown when a server is down temporarily by blocking the operations.
             <br/>It can also be useful to smooth the transition to a new master (so that a new master is elected within the retry time).<br/>
             <note>Note that when using this flag
               <ul>
                 <li>for a replica set, the driver will try to connect to the old master for that time, instead of failing over to the new one right away </li>
                 <li>this does not prevent exception from being thrown in read/write operations on the socket, which must be handled by application.</li>
               </ul>
               Even if this flag is false, the driver already has mechanisms to automatically recreate broken connections and retry the read operations.
             </note>
             Default is <code>false</code>.
         </property>
         <property name="Maximum connections per host" required="No"></property>
         <property name="Connection timeout" required="No">
             The connection timeout in milliseconds.<br/>It is used solely when establishing a new connection <code>Socket.connect(java.net.SocketAddress, int)</code><br/>Default is <code>0</code> and means no timeout.
         </property>
         <property name="Maximum retry time" required="No">
             The maximum amount of time in milliseconds to spend retrying to open connection to the same server.<br/>Default is <code>0</code>, which means to use the default 15s if <code>autoConnectRetry</code> is on.
         </property>
         <property name="Maximum wait time" required="No">
             The maximum wait time in milliseconds that a thread may wait for a connection to become available.<br/>Default is <code>120,000</code>.
         </property>
         <property name="Socket timeout" required="No">
             The socket timeout in milliseconds It is used for I/O socket read and write operations <code>Socket.setSoTimeout(int)</code><br/>Default is <code>0</code> and means no timeout.
         </property>
         <property name="Socket keep alive" required="No">
             This flag controls the socket keep alive feature that keeps a connection alive through firewalls <code>Socket.setKeepAlive(boolean)</code><br/>
             Default is <code>false</code>.
         </property>
         <property name="ThreadsAllowedToBlockForConnectionMultiplier" required="No">
         This multiplier, multiplied with the connectionsPerHost setting, gives the maximum number of threads that may be waiting for a connection to become available from the pool.<br/>
         All further threads will get an exception right away.<br/>
         For example if <code>connectionsPerHost</code> is <code>10</code> and <code>threadsAllowedToBlockForConnectionMultiplier</code> is <code>5</code>, then up to 50 threads can wait for a connection.<br/>
         Default is <code>5</code>.
         </property>
         <property name="Write Concern : Safe" required="No">
             If <code>true</code> the driver will use a <code>WriteConcern</code> of <code>WriteConcern.SAFE</code> for all operations.<br/>
             If <code>w</code>, <code>wtimeout</code>, <code>fsync</code> or <code>j</code> are specified, this setting is ignored.<br/>
             Default is <code>false</code>.
         </property>
         <property name="Write Concern : Fsync" required="No">
             The <code>fsync</code> value of the global <code>WriteConcern</code>.<br/>
             Default is <code>false</code>.
         </property>
         <property name="Write Concern : Wait for Journal" required="No">
             The <code>j</code> value of the global <code>WriteConcern</code>.<br/>
             Default is <code>false</code>.
         </property>
         <property name="Write Concern : Wait for servers" required="No">
             The <code>w</code> value of the global <code>WriteConcern</code>.<br/>Default is <code>0</code>.
         </property>
         <property name="Write Concern : Wait timeout" required="No">
             The <code>wtimeout</code> value of the global <code>WriteConcern</code>.<br/>Default is <code>0</code>.
         </property>
         <property name="Write Concern : Continue on error" required="No">
             If batch inserts should continue after the first error
         </property>
     </properties>
 </component>
 
 <a href="#">^</a>
 
 </section>
 
 <section name="&sect-num;.5 Assertions" anchor="assertions">
 <description>
     <p>
     Assertions are used to perform additional checks on samplers, and are processed after <b>every sampler</b>
     in the same scope.
     To ensure that an Assertion is applied only to a particular sampler, add it as a child of the sampler.
     </p>
     <note>
     Note: Unless documented otherwise, Assertions are not applied to sub-samples (child samples) -
     only to the parent sample.
     In the case of JSR223 and BeanShell Assertions, the script can retrieve sub-samples using the method
     <code>prev.getSubResults()</code> which returns an array of SampleResults.
     The array will be empty if there are none.
     </note>
     <p>
     Assertions can be applied to either the main sample, the sub-samples or both. 
     The default is to apply the assertion to the main sample only.
     If the Assertion supports this option, then there will be an entry on the GUI which looks like the following:
     </p>
     <figure width="658" height="54" image="assertion/assertionscope.png">Assertion Scope</figure>
     or the following
     <figure width="841" height="55" image="assertion/assertionscopevar.png">Assertion Scope</figure>
     <p>
     If a sub-sampler fails and the main sample is successful,
     then the main sample will be set to failed status and an Assertion Result will be added.
     If the JMeter variable option is used, it is assumed to relate to the main sample, and
     any failure will be applied to the main sample only.
     </p>
     <note>
     The variable <code>JMeterThread.last_sample_ok</code> is updated to
     "<code>true</code>" or "<code>false</code>" after all assertions for a sampler have been run.
      </note>
 </description>
 <component name="Response Assertion" index="&sect-num;.5.1" anchor="basic_assertion"  width="921" height="423" screenshot="assertion/assertion.png">
 
 <description><p>The response assertion control panel lets you add pattern strings to be compared against various
     fields of the response.
     The pattern strings are:
     </p>
     <ul>
     <li><code>Contains</code>, <code>Matches</code>: Perl5-style regular expressions</li>
     <li><code>Equals</code>, <code>Substring</code>: plain text, case-sensitive</li>
     </ul>
     <p>
     A summary of the pattern matching characters can be found at <a href="http://jakarta.apache.org/oro/api/org/apache/oro/text/regex/package-summary.html">ORO Perl5 regular expressions.</a>
     </p>
     <p>You can also choose whether the strings will be expected
 to <b>match</b> the entire response, or if the response is only expected to <b>contain</b> the
 pattern. You can attach multiple assertions to any controller for additional flexibility.</p>
 <p>Note that the pattern string should not include the enclosing delimiters, 
     i.e. use <code>Price: \d+</code> not <code>/Price: \d+/</code>.
     </p>
     <p>
     By default, the pattern is in multi-line mode, which means that the "<code>.</code>" meta-character does not match newline.
     In multi-line mode, "<code>^</code>" and "<code>$</code>" match the start or end of any line anywhere within the string 
     - not just the start and end of the entire string. Note that <code>\s</code> does match new-line.
     Case is also significant. To override these settings, one can use the <i>extended regular expression</i> syntax.
     For example:
 </p>
 <dl>
 <dt><code>(?i)</code></dt><dd>ignore case</dd>
 <dt><code>(?s)</code></dt><dd>treat target as single line, i.e. "<code>.</code>" matches new-line</dd>
 <dt><code>(?is)</code></dt><dd>both the above</dd>
 </dl>
 These can be used anywhere within the expression and remain in effect until overridden. E.g.
 <dl>
 <dt><code>(?i)apple(?-i) Pie</code></dt><dd>matches "<code>ApPLe Pie</code>", but not "<code>ApPLe pIe</code>"</dd>
 <dt><code>(?s)Apple.+?Pie</code></dt><dd>matches <code>Apple</code> followed by <code>Pie</code>, which may be on a subsequent line.</dd>
 <dt><code>Apple(?s).+?Pie</code></dt><dd>same as above, but it's probably clearer to use the <code>(?s)</code> at the start.</dd>
 </dl>
 
 </description>
 <properties>
         <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
         <property name="Apply to:" required="Yes">
         This is for use with samplers that can generate sub-samples, 
         e.g. HTTP Sampler with embedded resources, Mail Reader or samples generated by the Transaction Controller.
         <ul>
         <li><code>Main sample only</code> - assertion only applies to the main sample</li>
         <li><code>Sub-samples only</code> - assertion only applies to the sub-samples</li>
         <li><code>Main sample and sub-samples</code> - assertion applies to both.</li>
         <li><code>JMeter Variable</code> - assertion is to be applied to the contents of the named variable</li>
         </ul>
         </property>
         <property name="Response Field to Test" required="Yes">Instructs JMeter which field of the Response to test.
         <ul>
         <li><code>Text Response</code> - the response text from the server, i.e. the body, excluding any HTTP headers.</li>
         <li><code>Document (text)</code> - the extract text from various type of documents via Apache Tika (see <complink name="View Results Tree"/> Document view section).</li>
         <li><code>URL sampled</code></li>
         <li><code>Response Code</code> - e.g. <code>200</code></li>
         <li><code>Response Message</code> - e.g. <code>OK</code></li>
         <li><code>Response Headers</code>, including Set-Cookie headers (if any)</li>
         </ul>
                 </property>
         <property name="Ignore status" required="Yes">Instructs JMeter to set the status to success initially. 
                 <p>
                 The overall success of the sample is determined by combining the result of the
                 assertion with the existing Response status.
                 When the <code>Ignore Status</code> checkbox is selected, the Response status is forced
                 to successful before evaluating the Assertion.
                 </p>
                 HTTP Responses with statuses in the <code>4xx</code> and <code>5xx</code> ranges are normally
                 regarded as unsuccessful. 
                 The "<code>Ignore status</code>" checkbox can be used to set the status successful before performing further checks.
                 Note that this will have the effect of clearing any previous assertion failures,
                 so make sure that this is only set on the first assertion.
         </property>
         <property name="Pattern Matching Rules" required="Yes">Indicates how the text being tested
         is checked against the pattern.
         <ul>
         <li><code>Contains</code> - true if the text contains the regular expression pattern</li>
         <li><code>Matches</code> - true if the whole text matches the regular expression pattern</li>
         <li><code>Equals</code> - true if the whole text equals the pattern string (case-sensitive)</li>
         <li><code>Substring</code> - true if the text contains the pattern string (case-sensitive)</li>
         </ul>
         <code>Equals</code> and <code>Substring</code> patterns are plain strings, not regular expressions.
         <code>NOT</code> may also be selected to invert the result of the check.</property>
         <property name="Patterns to Test" required="Yes">A list of patterns to
         be tested.  
         Each pattern is tested separately. 
         If a pattern fails, then further patterns are not checked.
         There is no difference between setting up
         one Assertion with multiple patterns and setting up multiple Assertions with one
         pattern each (assuming the other options are the same).
         <note>However, when the <code>Ignore Status</code> checkbox is selected, this has the effect of cancelling any
         previous assertion failures - so make sure that the <code>Ignore Status</code> checkbox is only used on
         the first Assertion.</note>
         </property>
 </properties>
 <p>
     The pattern is a Perl5-style regular expression, but without the enclosing brackets.
 </p>
 <example title="Assertion Examples" anchor="assertion_examples">
 <center>
 <figure image="assertion/example1a.png" width="266" height="117">Figure 14 - Test Plan</figure>
 <figure image="assertion/example1b.png" width="920" height="451">Figure 15 - Assertion Control Panel with Pattern</figure>
 <figure image="assertion/example1c-pass.png" width="801" height="230">Figure 16 - Assertion Listener Results (Pass)</figure>
 <figure image="assertion/example1c-fail.png" width="800" height="233">Figure 17 - Assertion Listener Results (Fail)</figure>
 </center>
 </example>
 
 
 </component>
 
 <component name="Duration Assertion" index="&sect-num;.5.2"  width="606" height="187" screenshot="duration_assertion.png">
 <description><p>The Duration Assertion tests that each response was received within a given amount
 of time.  Any response that takes longer than the given number of milliseconds (specified by the
 user) is marked as a failed response.</p></description>
 
 <properties>
         <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
         <property name="Duration in Milliseconds" required="Yes">The maximum number of milliseconds
         each response is allowed before being marked as failed.</property>
 </properties>
 </component>
 
 <component name="Size Assertion" index="&sect-num;.5.3"  width="732" height="358" screenshot="size_assertion.png">
 <description><p>The Size Assertion tests that each response contains the right number of bytes in it.  You can specify that
 the size be equal to, greater than, less than, or not equal to a given number of bytes.</p>
 <note>An empty response is treated as being 0 bytes rather than reported as an error.</note>
 </description>
 
 <properties>
         <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
         <property name="Apply to:" required="Yes">
         This is for use with samplers that can generate sub-samples, 
         e.g. HTTP Sampler with embedded resources, Mail Reader or samples generated by the Transaction Controller.
         <ul>
         <li><code>Main sample only</code> - assertion only applies to the main sample</li>
         <li><code>Sub-samples only</code> - assertion only applies to the sub-samples</li>
         <li><code>Main sample and sub-samples</code> - assertion applies to both.</li>
         <li><code>JMeter Variable</code> - assertion is to be applied to the contents of the named variable</li>
         </ul>
         </property>
         <property name="Size in bytes" required="Yes">The number of bytes to use in testing the size of the response (or value of the JMeter variable).</property>
         <property name="Type of Comparison" required="Yes">Whether to test that the response is equal to, greater than, less than,
         or not equal to, the number of bytes specified.</property>
 
 </properties>
 </component>
 
 <component name="XML Assertion" index="&sect-num;.5.4"  width="470" height="85" screenshot="xml_assertion.png">
 <description><p>The XML Assertion tests that the response data consists of a formally correct XML document.  It does not
 validate the XML based on a DTD or schema or do any further validation.</p></description>
 
 <properties>
 <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
 
 </properties>
 </component>
 
 <component name="BeanShell Assertion" index="&sect-num;.5.5"  width="849" height="633" screenshot="beanshell_assertion.png">
 <description><p>The BeanShell Assertion allows the user to perform assertion checking using a BeanShell script.
 </p>
 <p>
 <b>For full details on using BeanShell, please see the <a href="http://www.beanshell.org/">BeanShell website.</a></b>
 </p><p>
 Note that a different Interpreter is used for each independent occurrence of the assertion
 in each thread in a test script, but the same Interpreter is used for subsequent invocations.
 This means that variables persist across calls to the assertion.
 </p>
 <p>
 All Assertions are called from the same thread as the sampler.
 </p>
 <p>
 If the property "<code>beanshell.assertion.init</code>" is defined, it is passed to the Interpreter
 as the name of a sourced file. This can be used to define common methods and variables.
 There is a sample init file in the <code>bin</code> directory: <code>BeanShellAssertion.bshrc</code>
 </p>
 <p>
 The test element supports the <code>ThreadListener</code> and <code>TestListener</code> methods.
 These should be defined in the initialisation file.
 See the file <code>BeanShellListeners.bshrc</code> for example definitions.
 </p>
 </description>
 
 <properties>
     <property name="Name" required="">Descriptive name for this element that is shown in the tree.
     The name is stored in the script variable <code>Label</code></property>
     <property name="Reset bsh.Interpreter before each call" required="Yes">
     If this option is selected, then the interpreter will be recreated for each sample.
     This may be necessary for some long running scripts. 
     For further information, see <a href="best-practices#bsh_scripting">Best Practices - BeanShell scripting</a>.
     </property>
     <property name="Parameters" required="No">Parameters to pass to the BeanShell script.
     The parameters are stored in the following variables:
     <ul>
         <li><code>Parameters</code> - string containing the parameters as a single variable</li>
         <li><code>bsh.args</code> - String array containing parameters, split on white-space</li>
     </ul></property>
     <property name="Script file" required="No">A file containing the BeanShell script to run. This overrides the script.
     The file name is stored in the script variable <code>FileName</code></property>
     <property name="Script" required="Yes (unless script file is provided)">The BeanShell script to run. The return value is ignored.</property>
 </properties>
 <p>There's a <a href="../demos/BeanShellAssertion.bsh">sample script</a> you can try.</p>
 <p>
 Before invoking the script, some variables are set up in the BeanShell interpreter.
 These are strings unless otherwise noted:
 </p>
 <ul>
   <li><code>log</code> - the <a href="http://excalibur.apache.org/apidocs/org/apache/log/Logger.html">Logger</a> Object. (e.g.) <code>log.warn("Message"[,Throwable])</code></li>
   <li><code>SampleResult</code> - the <a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a> Object; read-write</li>
   <li><code>Response</code> - the response Object; read-write</li>
   <li><code>Failure</code> - boolean; read-write; used to set the Assertion status</li>
   <li><code>FailureMessage</code> - String; read-write; used to set the Assertion message</li>
   <li><code>ResponseData</code> - the response body (byte [])</li>
   <li><code>ResponseCode</code> - e.g. <code>200</code></li>
   <li><code>ResponseMessage</code> - e.g. <code>OK</code></li>
   <li><code>ResponseHeaders</code> - contains the HTTP headers</li>
   <li><code>RequestHeaders</code> - contains the HTTP headers sent to the server</li>
   <li><code>SampleLabel</code></li>
   <li><code>SamplerData</code> - data that was sent to the server</li>
   <li><code>ctx</code> - <a href="../api/org/apache/jmeter/threads/JMeterContext.html">JMeterContext</a></li>
   <li><code>vars</code> - <a href="../api/org/apache/jmeter/threads/JMeterVariables.html">JMeterVariables</a>  - e.g. 
     <source>vars.get("VAR1");
 vars.put("VAR2","value");
 vars.putObject("OBJ1",new Object());</source></li>
   <li><code>props</code> - JMeterProperties (class <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html"><code>java.util.Properties</code></a>) - e.g.
     <source>props.get("START.HMS");
 props.put("PROP1","1234");</source></li>
 </ul>
 <p>The following methods of the Response object may be useful:</p>
 <ul>
     <li><code>setStopThread(boolean)</code></li>
     <li><code>setStopTest(boolean)</code></li>
     <li><code>String getSampleLabel()</code></li>
     <li><code>setSampleLabel(String)</code></li>
 </ul>
 </component>
 
 <component name="MD5Hex Assertion" index="&sect-num;.5.6" width="398" height="130" screenshot="assertion/MD5HexAssertion.png">
 <description><p>The MD5Hex Assertion allows the user to check the MD5 hash of the response data.</p></description>
 
 <properties>
 <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
 <property name="MD5 sum" required="Yes">32 hex digits representing the MD5 hash (case not significant)</property>
 
 </properties>
 </component>
 
 <component name="HTML Assertion" index="&sect-num;.5.7"  width="505" height="341" screenshot="assertion/HTMLAssertion.png">
 <description><p>The HTML Assertion allows the user to check the HTML syntax of the response data using JTidy.</p></description>
 
 <properties>
 <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
 <property name="doctype" required="Yes"><code>omit</code>, <code>auto</code>, <code>strict</code> or <code>loose</code></property>
 <property name="Format" required="Yes"><code>HTML</code>, <code>XHTML</code> or <code>XML</code></property>
 <property name="Errors only" required="Yes">Only take note of errors?</property>
 <property name="Error threshold" required="Yes">Number of errors allowed before classing the response as failed</property>
 <property name="Warning threshold" required="Yes">Number of warnings allowed before classing the response as failed</property>
 <property name="Filename" required="No">Name of file to which report is written</property>
 
 </properties>
 </component>
 <component name="XPath Assertion" index="&sect-num;.5.8"  width="871" height="615" screenshot="xpath_assertion.png">
 <description><p>The XPath Assertion tests a document for well formedness, has the option
 of validating against a DTD, or putting the document through JTidy and testing for an
 XPath.  If that XPath exists, the Assertion is true.  Using "<code>/</code>" will match any well-formed
 document, and is the default XPath Expression. 
 The assertion also supports boolean expressions, such as "<code>count(//*error)=2</code>".
 See <a href="http://www.w3.org/TR/xpath">http://www.w3.org/TR/xpath</a> for more information
 on XPath.
 </p>
 Some sample expressions:
 <ul>
 <li><code>//title[text()='Text to match']</code> - matches <code>&lt;text&gt;Text to match&lt;/text&gt;</code> anywhere in the response</li>
 <li><code>/title[text()='Text to match']</code> - matches <code>&lt;text&gt;Text to match&lt;/text&gt;</code> at root level in the response</li>
 </ul>
 </description>
 
 <properties>
 <property name="Name"        required="No">Descriptive name for this element that is shown in the tree.</property>
 <property name="Use Tidy (tolerant parser)"    required="Yes">Use Tidy, i.e. be tolerant of XML/HTML errors</property>
 <property name="Quiet"    required="If Tidy is selected">Sets the Tidy Quiet flag</property>
 <property name="Report Errors"    required="If Tidy is selected">If a Tidy error occurs, then set the Assertion accordingly</property>
 <property name="Show warnings"    required="If Tidy is selected">Sets the Tidy showWarnings option</property>
 <property name="Use Namespaces"    required="If Tidy is not selected">Should namespaces be honoured? (see note below on NAMESPACES)</property>
 <property name="Validate XML"    required="If Tidy is not selected">Check the document against its schema.</property>
 <property name="Ignore Whitespace"  required="If Tidy is not selected">Ignore Element Whitespace.</property>
 <property name="Fetch External DTDs"  required="If Tidy is not selected">If selected, external DTDs are fetched.</property>
 <property name="XPath Assertion"    required="Yes">XPath to match in the document.</property>
 <property name="True if nothing matches"    required="No">True if a XPath expression is not matched</property>
 </properties>
 <note>
 The non-tolerant parser can be quite slow, as it may need to download the DTD etc.
 </note>
 <note>
 <b>NAMESPACES</b>
 As a work-round for namespace limitations of the Xalan XPath parser implementation on which JMeter is based,
 you can provide a Properties file which contains mappings for the namespace prefixes: 
 <source>
 prefix1=Full Namespace 1
 prefix2=Full Namespace 2
 &hellip;
 </source>
 
 You reference this file in <code>jmeter.properties</code> file using the property:
     <source>xpath.namespace.config</source>
 </note>
 </component>
 <component name="XML Schema Assertion" index="&sect-num;.5.9"  width="472" height="132" screenshot="assertion/XMLSchemaAssertion.png">
 <description><p>The XML Schema Assertion allows the user to validate a response against an XML Schema.</p></description>
 
 <properties>
 <property name="Name" required="">Descriptive name for this element that is shown in the tree.</property>
 <property name="File Name" required="Yes">Specify XML Schema File Name</property>
 </properties>
 </component>
 
 <component name="BSF Assertion (DEPRECATED)" index="&sect-num;.5.10"  width="847" height="634" screenshot="bsf_assertion.png">
 <description>
 <p>
 The BSF Assertion allows BSF script code to be used to check the status of the previous sample.
 </p>
 </description>
 <properties>
     <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
     <property name="Language" required="Yes">The BSF language to be used</property>
     <property name="Parameters" required="No">Parameters to pass to the script.
     The parameters are stored in the following variables:
     <ul>
         <li><code>Parameters</code> - string containing the parameters as a single variable</li>
         <li><code>args</code> - String array containing parameters, split on white-space</li>
     </ul></property>
     <property name="Script file" required="No">A file containing the script to run, if a relative file path is used, then it will be relative to directory referenced by "<code>user.dir</code>" System property</property>
     <property name="Script" required="Yes (unless script file is provided)">The script to run.</property>
 </properties>
 <p>
 The script (or file) is processed using the <code>BSFEngine.exec()</code> method, which does not return a value.
 </p>
 <p>The following variables are set up for use by the script:</p>
 <ul>
 <li><code>log</code> - (<a href="http://excalibur.apache.org/apidocs/org/apache/log/Logger.html">Logger</a>) - can be used to write to the log file</li>
 <li><code>Label</code> - the String Label</li>
 <li><code>Filename</code> - the script file name (if any)</li>
 <li><code>Parameters</code> - the parameters (as a String)</li>
 <li><code>args</code> - the parameters as a String array (split on whitespace)</li>
 <li><code>ctx</code> - (<a href="../api/org/apache/jmeter/threads/JMeterContext.html">JMeterContext</a>) - gives access to the context</li>
 <li><code>vars</code> - (<a href="../api/org/apache/jmeter/threads/JMeterVariables.html">JMeterVariables</a>) - gives read/write access to variables:
 <source>
 vars.get(key);
 vars.put(key,val);
 vars.putObject("OBJ1",new Object());
 vars.getObject("OBJ2");
 </source></li>
 <li><code>props</code> - (JMeterProperties - class <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html"><code>java.util.Properties</code></a>) - e.g.
 <source>
 props.get("START.HMS");
 props.put("PROP1","1234");
 </source></li>
 <li><code>SampleResult</code>, <code>prev</code> - (<a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a>) - gives access to the previous SampleResult (if any)</li>
 <li><code>sampler</code> - (<a href="../api/org/apache/jmeter/samplers/Sampler.html">Sampler</a>) - gives access to the current sampler</li>
 <li><code>OUT</code> - <code>System.out</code> - e.g. <code>OUT.println("message")</code></li>
 <li><code>AssertionResult</code> - the assertion result</li>
 </ul>
 <p>
 The script can check various aspects of the <a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a>.
 If an error is detected, the script should use <code>AssertionResult.setFailureMessage("message")</code> and <code>AssertionResult.setFailure(true)</code>.
 </p>
 <p>For further details of all the methods available on each of the above variables, please check the Javadoc</p>
 </component>
 
 <component name="JSR223 Assertion" index="&sect-num;.5.11">
 <description>
 <p>
 The JSR223 Assertion allows JSR223 script code to be used to check the status of the previous sample.
 </p>
 </description>
 <properties>
     <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
     <property name="Language" required="Yes">The JSR223 language to be used</property>
     <property name="Parameters" required="No">Parameters to pass to the script.
     The parameters are stored in the following variables:
     <ul>
         <li><code>Parameters</code> - string containing the parameters as a single variable</li>
         <li><code>args</code> - String array containing parameters, split on white-space</li>
     </ul></property>
     <property name="Script file" required="No">A file containing the script to run, if a relative file path is used, then it will be relative to directory referenced by "<code>user.dir</code>" System property</property>
     <property name="Script compilation caching" required="No">Unique String across Test Plan that JMeter will use to cache result of Script compilation if language used supports <code><a href="https://docs.oracle.com/javase/8/docs/api/javax/script/Compilable.html">Compilable</a></code> interface (Groovy is one of these, java, beanshell and javascript are not)
     <note>See note in JSR223 Sampler Java System property if you're using Groovy without checking this option</note>
     </property>
     <property name="Script" required="Yes (unless script file is provided)">The script to run.</property>
 </properties>
 <p>The following variables are set up for use by the script:</p>
 <ul>
 <li><code>log</code> - (<a href="http://excalibur.apache.org/apidocs/org/apache/log/Logger.html">Logger</a>) - can be used to write to the log file</li>
 <li><code>Label</code> - the String Label</li>
 <li><code>Filename</code> - the script file name (if any)</li>
 <li><code>Parameters</code> - the parameters (as a String)</li>
 <li><code>args</code> - the parameters as a String array (split on whitespace)</li>
 <li><code>ctx</code> - (<a href="../api/org/apache/jmeter/threads/JMeterContext.html">JMeterContext</a>) - gives access to the context</li>
 <li><code>vars</code> - (<a href="../api/org/apache/jmeter/threads/JMeterVariables.html">JMeterVariables</a>) - gives read/write access to variables:
 <source>
 vars.get(key);
 vars.put(key,val);
 vars.putObject("OBJ1",new Object());
 vars.getObject("OBJ2");
 </source></li>
 <li><code>props</code> - (JMeterProperties - class <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html"><code>java.util.Properties</code></a>) - e.g.
 <source>
 props.get("START.HMS");
 props.put("PROP1","1234");
 </source></li>
 <li><code>SampleResult</code>, <code>prev</code> - (<a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a>) - gives access to the previous SampleResult (if any)</li>
 <li><code>sampler</code> - (<a href="../api/org/apache/jmeter/samplers/Sampler.html">Sampler</a>) - gives access to the current sampler</li>
 <li><code>OUT</code> - <code>System.out</code> - e.g. <code>OUT.println("message")</code></li>
 <li><code>AssertionResult</code> - the assertion result</li>
 </ul>
 <p>
 The script can check various aspects of the <a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a>.
 If an error is detected, the script should use <code>AssertionResult.setFailureMessage("message")</code> and <code>AssertionResult.setFailure(true)</code>.
 </p>
 <p>For further details of all the methods available on each of the above variables, please check the Javadoc</p>
 </component>
 
 <component name="Compare Assertion" index="&sect-num;.5.12"  width="580" height="302" screenshot="assertion/compare.png">
 <description>
 <note>
 Compare Assertion <b>must not be used</b> during load test as it consumes a lot of resources (memory and CPU). Use it only for either functional testing or 
 during Test Plan debugging and Validation.
 </note>
 
 The Compare Assertion can be used to compare sample results within its scope.
 Either the contents or the elapsed time can be compared, and the contents can be filtered before comparison.
 The assertion comparisons can be seen in the <complink name="Comparison Assertion Visualizer"/>.
 </description>
 <properties>
     <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
     <property name="Compare Content" required="Yes">Whether or not to compare the content (response data)</property>
     <property name="Compare Time" required="Yes">If the value is &ge;0, then check if the response time difference is no greater than the value.
     I.e. if the value is <code>0</code>, then the response times must be exactly equal.</property>
     <property name="Comparison Filters" required="No">Filters can be used to remove strings from the content comparison.
     For example, if the page has a time-stamp, it might be matched with: "<code>Time: \d\d:\d\d:\d\d</code>" and replaced with a dummy fixed time "<code>Time: HH:MM:SS</code>".
     </property>
 </properties>
 </component>
 
 <component name="SMIME Assertion" index="&sect-num;.5.13"  width="471" height="428" screenshot="assertion/smime.png">
 <description>
 The SMIME Assertion can be used to evaluate the sample results from the Mail Reader Sampler.
 This assertion verifies if the body of a mime message is signed or not. The signature can also be verified against a specific signer certificate.
 As this is a functionality that is not necessarily needed by most users, additional jars need to be downloaded and added to <code>JMETER_HOME/lib</code>:<br></br> 
 <ul>
 <li><code>bcmail-xxx.jar</code> (BouncyCastle SMIME/CMS)</li>
 <li><code>bcprov-xxx.jar</code> (BouncyCastle Provider)</li>
 </ul>
 These need to be <a href="http://www.bouncycastle.org/latest_releases.html">downloaded from BouncyCastle.</a>
 <p>
 If using the <complink name="Mail Reader Sampler">Mail Reader Sampler</complink>, 
 please ensure that you select "<code>Store the message using MIME (raw)</code>" otherwise the Assertion won't be able to process the message correctly.
 </p>
 </description>
 <properties>
     <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
     <property name="Verify Signature" required="Yes">If selected, the assertion will verify if it is a valid signature according to the parameters defined in the <code>Signer Certificate</code> box.</property>
     <property name="Message not signed" required="Yes">Whether or not to expect a signature in the message</property>
     <property name="Signer Cerificate" required="Yes">"<code>No Check</code>" means that it will not perform signature verification. "<code>Check values</code>" is used to verify the signature against the inputs provided. And "<code>Certificate file</code>" will perform the verification against a specific certificate file.</property>
     <property name="Message Position" required="Yes">
     The Mail sampler can retrieve multiple messages in a single sample.
     Use this field to specify which message will be checked.
     Messages are numbered from <code>0</code>, so <code>0</code> means the first message.
     Negative numbers count from the LAST message; <code>-1</code> means LAST, <code>-2</code> means penultimate etc.
     </property>
 </properties>
 </component>
 
 <a href="#">^</a>
 
 </section>
 
 <section name="&sect-num;.6 Timers" anchor="timers">
 <description>
     <note>
     Since version 3.1, a new feature (in Beta mode as of JMeter 3.1 and subject to changes) has been implemented which provides the following feature.<br/>
     You can apply a multiplication factor on the sleep delays computed by Random timer by setting property <code>timer.factor=float number</code> where float number is a decimal positive number.<br/>
     JMeter will multiply this factor by the computed sleep delay. This feature can be used by:
     <ul> 
         <li><complink name="Gaussian Random Timer"/></li>
         <li><complink name="Poisson Random Timer"/></li>
         <li><complink name="Uniform Random Timer"/></li>
     </ul> 
     </note>
     <note>
     Note that timers are processed <b>before</b> each sampler in the scope in which they are found;
     if there are several timers in the same scope, <b>all</b> the timers will be processed <b>before
     each</b> sampler.
     <br></br>
     Timers are only processed in conjunction with a sampler.
     A timer which is not in the same scope as a sampler will not be processed at all.
     <br></br>
     To apply a timer to a single sampler, add the timer as a child element of the sampler.
     The timer will be applied before the sampler is executed.
     To apply a timer after a sampler, either add it to the next sampler, or add it as the
     child of a <complink name="Test Action"/> Sampler.
     </note>
 </description>
 <component name="Constant Timer" index="&sect-num;.6.1" anchor="constant" width="372" height="100" screenshot="timers/constant_timer.png">
 <description>
 <p>If you want to have each thread pause for the same amount of time between
 requests, use this timer.</p></description>
 
 <properties>
         <property name="Name" required="No">Descriptive name for this timer that is shown in the tree.</property>
         <property name="Thread Delay" required="Yes">Number of milliseconds to pause.</property>
 </properties>
 </component>
 
 <component name="Gaussian Random Timer" index="&sect-num;.6.2" width="372" height="156" screenshot="timers/gauss_random_timer.png">
 
 <description><p>This timer pauses each thread request for a random amount of time, with most
 of the time intervals occurring near a particular value.  
 The total delay is the sum of the Gaussian distributed value (with mean <code>0.0</code> and standard deviation <code>1.0</code>) times
 the deviation value you specify, and the offset value.
 Another way to explain it, in Gaussian Random Timer, the variation around constant offset has a gaussian curve distribution. 
 
 </p></description>
 
 
 <properties>
         <property name="Name" required="No">Descriptive name for this timer that is shown in the tree</property>
   <property name="Deviation" required="Yes">Deviation in milliseconds.</property>
   <property name="Constant Delay Offset" required="Yes">Number of milliseconds to pause in addition
 to the random delay.</property>
 </properties>
 
 </component>
 
 <component name="Uniform Random Timer" index="&sect-num;.6.3" width="372" height="157" screenshot="timers/uniform_random_timer.png">
 
 <description><p>This timer pauses each thread request for a random amount of time, with
 each time interval having the same probability of occurring. The total delay
 is the sum of the random value and the offset value.</p></description>
 
 <properties>
         <property name="Name" required="No">Descriptive name for this timer that is shown in the tree. </property>
   <property name="Random Delay Maximum" required="Yes">Maximum random number of milliseconds to
 pause.</property>
   <property name="Constant Delay Offset" required="Yes">Number of milliseconds to pause in addition
 to the random delay.</property>
 </properties>
 
 </component>
 
 <component name="Constant Throughput Timer" index="&sect-num;.6.4" width="636" height="146" screenshot="timers/constant_throughput_timer.png">
 
 <description><p>This timer introduces variable pauses, calculated to keep the total throughput (in terms of samples per minute) as close as possible to a give figure. Of course the throughput will be lower if the server is not capable of handling it, or if other timers or time-consuming test elements prevent it.</p>
 <p>
 N.B. although the Timer is called the Constant Throughput timer, the throughput value does not need to be constant.
 It can be defined in terms of a variable or function call, and the value can be changed during a test.
 The value can be changed in various ways:
 </p>
 <ul>
 <li>using a counter variable</li>
 <li>using a JavaScript or BeanShell function to provide a changing value</li>
 <li>using the remote BeanShell server to change a JMeter property</li>
 </ul>
 <p>See <a href="best-practices.html">Best Practices</a> for further details.
 <note>
 Note that the throughput value should not be changed too often during a test
 - it will take a while for the new value to take effect.
 </note>
 </p>
 </description>
 <properties>
   <property name="Name" required="No">Descriptive name for this timer that is shown in the tree. </property>
   <property name="Target Throughput" required="Yes">Throughput we want the timer to try to generate.</property>
   <property name="Calculate Throughput based on" required="Yes">
    <ul>
     <li><code>this thread only</code> - each thread will try to maintain the target throughput. The overall throughput will be proportional to the number of active threads.</li>
     <li><code>all active threads in current thread group</code> - the target throughput is divided amongst all the active threads in the group. 
     Each thread will delay as needed, based on when it last ran.</li>
     <li><code>all active threads</code> - the target throughput is divided amongst all the active threads in all Thread Groups.
     Each thread will delay as needed, based on when it last ran.
     In this case, each other Thread Group will need a Constant Throughput timer with the same settings.</li>
     <li><code>all active threads in current thread group (shared)</code> - as above, but each thread is delayed based on when any thread in the group last ran.</li>
     <li><code>all active threads (shared)</code> - as above; each thread is delayed based on when any thread last ran.</li>
    </ul>
   </property>
   <p>The shared and non-shared algorithms both aim to generate the desired throughput, and will produce similar results.<br/>
   The shared algorithm should generate a more accurate overall transaction rate.<br/>
   The non-shared algorithm should generate a more even spread of transactions across threads.</p>
 </properties>
 </component>
 
 <component name="Synchronizing Timer" index="&sect-num;.6.5" width="410" height="145" screenshot="timers/sync_timer.png">
 
 <description>
 <p>
 The purpose of the SyncTimer is to block threads until X number of threads have been blocked, and
 then they are all released at once.  A SyncTimer can thus create large instant loads at various
 points of the test plan.
 </p>
 </description>
 
 <properties>
   <property name="Name" required="No">Descriptive name for this timer that is shown in the tree. </property>
   <property name="Number of Simultaneous Users to Group by" required="Yes">Number of threads to release at once. Setting it to <code>0</code> is equivalent to setting it to Number of threads in Thread Group.</property>
   <property name="Timeout in milliseconds" required="No">If set to <code>0</code>, Timer will wait for the number of threads to reach the value in "<code>Number of Simultaneous Users to Group</code>". If superior to <code>0</code>, then timer will wait at max "<code>Timeout in milliseconds</code>" for the number of Threads. If after the timeout interval the number of users waiting is not reached, timer will stop waiting. Defaults to <code>0</code></property>
 </properties>
 <note>
 If timeout in milliseconds is set to <code>0</code> and number of threads never reaches "<code>Number of Simultaneous Users to Group by</code>" then Test will pause infinitely.
 Only a forced stop will stop it. Setting Timeout in milliseconds is an option to consider in this case.
 </note>
 <note>
 Synchronizing timer blocks only within one JVM, so if using Distributed testing ensure you never set "<code>Number of Simultaneous Users to Group by</code>" to a value superior to the number of users
 of its containing Thread group considering 1 injector only.
 </note>
 
 </component>
 
 <component name="BeanShell Timer" index="&sect-num;.6.6"  width="846" height="636" screenshot="timers/beanshell_timer.png">
 <description>
 <p>
 The BeanShell Timer can be used to generate a delay.
 </p>
 <p>
 <b>For full details on using BeanShell, please see the <a href="http://www.beanshell.org/">BeanShell website.</a></b>
 </p>
 <p>
 The test element supports the <code>ThreadListener</code> and <code>TestListener</code> methods.
 These should be defined in the initialisation file.
 See the file <code>BeanShellListeners.bshrc</code> for example definitions.
 </p>
 </description>
 <properties>
     <property name="Name" required="No">Descriptive name for this element that is shown in the tree.
     The name is stored in the script variable <code>Label</code></property>
     <property name="Reset bsh.Interpreter before each call" required="Yes">
     If this option is selected, then the interpreter will be recreated for each sample.
     This may be necessary for some long running scripts. 
     For further information, see <a href="best-practices#bsh_scripting">Best Practices - BeanShell scripting</a>.
     </property>
     <property name="Parameters" required="No">Parameters to pass to the BeanShell script.
     The parameters are stored in the following variables:
     <ul>
         <li><code>Parameters</code> - string containing the parameters as a single variable</li>
         <li><code>bsh.args</code> - String array containing parameters, split on white-space</li>
     </ul>
     </property>
     <property name="Script file" required="No">
     A file containing the BeanShell script to run.
     The file name is stored in the script variable <code>FileName</code>
      The return value is used as the number of milliseconds to wait.
      </property>
     <property name="Script" required="Yes (unless script file is provided)">
         The BeanShell script. The return value is used as the number of milliseconds to wait.
     </property>
 </properties>
 <p>Before invoking the script, some variables are set up in the BeanShell interpreter:</p>
 <ul>
 <li><code>log</code> - (<a href="http://excalibur.apache.org/apidocs/org/apache/log/Logger.html">Logger</a>) - can be used to write to the log file</li>
 <li><code>ctx</code> - (<a href="../api/org/apache/jmeter/threads/JMeterContext.html">JMeterContext</a>) - gives access to the context</li>
 <li><code>vars</code> - (<a href="../api/org/apache/jmeter/threads/JMeterVariables.html">JMeterVariables</a>) - gives read/write access to variables: <source>
 vars.get(key);
 vars.put(key,val);
 vars.putObject("OBJ1",new Object());
 </source></li>
 <li><code>props</code> - (JMeterProperties - class java.util.Properties) - e.g. <code>props.get("START.HMS");</code> <code>props.put("PROP1","1234");</code></li>
 <li><code>prev</code> - (<a href="../api/org/apache/jmeter/samplers/SampleResult.html">SampleResult</a>) - gives access to the previous <code>SampleResult</code> (if any)</li>
 </ul>
 <p>For details of all the methods available on each of the above variables, please check the Javadoc</p>
 <p>If the property <code>beanshell.timer.init</code> is defined, this is used to load an initialisation file, which can be used to define methods etc. for use in the BeanShell script.</p>
 </component>
 
 
 <component name="BSF Timer (DEPRECATED)" index="&sect-num;.6.7"  width="844" height="636" screenshot="timers/bsf_timer.png">
 <description>
 <p>
 The BSF Timer can be used to generate a delay using a BSF scripting language.
 </p>
 </description>
 <properties>
     <property name="Name" required="No">Descriptive name for this element that is shown in the tree.</property>
     <property name="ScriptLanguage" required="Yes">
         The scripting language to be used.
     </property>
     <property name="Parameters" required="No">Parameters to pass to the script.
     The parameters are stored in the following variables:
     <ul>
         <li><code>Parameters</code> - string containing the parameters as a single variable</li>
         <li><code>args</code> - String array containing parameters, split on white-space</li>
     </ul>
     </property>
     <property name="Script file" required="No">
     A file containing the script to run, if a relative file path is used, then it will be relative to directory referenced by "<code>user.dir</code>" System property
      The return value is converted to a long integer and used as the number of milliseconds to wait.
diff --git a/xdocs/usermanual/properties_reference.xml b/xdocs/usermanual/properties_reference.xml
index cbc904f9d..9eb044425 100644
--- a/xdocs/usermanual/properties_reference.xml
+++ b/xdocs/usermanual/properties_reference.xml
@@ -1,1483 +1,1471 @@
 <?xml version="1.0"?>
 <!-- 
  * Licensed to the Apache Software Foundation (ASF) under one or more
  * contributor license agreements.  See the NOTICE file distributed with
  * this work for additional information regarding copyright ownership.
  * The ASF licenses this file to You under the Apache License, Version 2.0
  * (the "License"); you may not use this file except in compliance with
  * the License.  You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  * 
  -->
 <!DOCTYPE document
 [
 <!ENTITY sect-num '20'>
 <!ENTITY command  "&#x02318;" >
 <!ENTITY hellip   "&#x02026;" >
 <!ENTITY le       "&#x02264;" >
 <!ENTITY ge       "&#x02265;" >
 ]>
 <document index="yes" index-level-2="yes" index-numbers="no" colbreak="&sect-num;.21"
   next="functions.html"
   prev="component_reference.html"  id="$Id: property_reference.xml 1739440 2016-04-16 11:11:17Z pmouawad $">
 
 <properties>
   <title>User's Manual: Properties Reference</title>
 </properties>
 
 <body>
 
 <!--
     Because this is an XML document, all tags must be properly closed, including ones
     which are passed unchanged into the HTML output, e.g. <br/>, not just <br>.
 
     Unfortunately Java does not currently allow for this - it outputs the trailing > -
     which messes up the Help display. 
     To avoid these artifacts, use the form <br></br>, which Java does seem to handle OK.
 
  -->
 <section name="&sect-num; Introduction" anchor="introduction">
 <description>
 <p>
 This document describes JMeter properties. The properties present in <code>jmeter.properties</code> or <code>reportgenerator.properties</code> should be set in the <code>user.properties</code> file.
 These properties are only taken into account after restarting JMeter as they are usually resolved when the class is loaded.
 </p>
 </description>
 </section>
 <section name="&sect-num;.1 Language" anchor="language">
 <properties>
 <property name="language">
     Preferred GUI language. Comment out to use the JVM default locale's language.<br/>
     Example: <source>language=en</source>
     <note>This property is the only one that must be set in <code>jmeter.properties</code> file</note>
     <note>To fully configure language ensure you set locale, see <a href="http://www.oracle.com/us/technologies/java/locale-140624.html">Internationalization: Understanding Locale in the Java Platform</a>.
     Example for English:
     <source>-Duser.language=en -Duser.region=EN</source>
     </note>
 </property>
 <property name="locales.add">
     Additional locale(s) to add to the displayed list.<br/>
     The current default list is: <code>en</code>, <code>fr</code>,
     <code>de</code>, <code>no</code>, <code>es</code>, <code>tr</code>,
     <code>ja</code>, <code>zh_CN</code>,
     <code>zh_TW</code>, <code>pl</code>, <code>pt_BR</code>.<br/>
     See <code>JMeterMenuBar#makeLanguageMenu()</code><br/>
     The entries are a comma-separated list of language names.<br/>
     Example: <source>locales.add=zu</source>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.2 XML Parser" anchor="xml_parser">
 <properties>
 <property name="xpath.namespace.config">
     Path to a Properties file containing Namespace mapping in the form <code>prefix=Namespace</code>.
     Example: <source>ns=http://biz.aol.com/schema/2006-12-18</source></property>
 </properties>
 </section>
 <section name="&sect-num;.3 SSL configuration" anchor="ssl_config">
 <note>SSL (Java) System properties are now in <code>system.properties</code><br/> 
 JMeter no longer converts <code>javax.<em>xxx</em></code> property entries in this file into System properties.<br/>
 These must now be defined in the <code>system.properties</code> file or on the command-line.<br/>
 The <code>system.properties</code> file gives more flexibility.</note>
 <property name="https.sessioncontext.shared">
     By default, SSL session contexts are now created per-thread, rather than being shared.<br/>
     The old behaviour can be enabled by setting this property to <code>true</code>. Defaults to: <code>false</code>
 </property>
 <property name="https.default.protocol">
     Be aware that https default protocol may vary depending on the version of JVM.
     See <a href="https://blogs.oracle.com/java-platform-group/entry/diagnosing_tls_ssl_and_https" target="_blank">Diagnosing TLS, SSL and HTTPS</a>
     and <bugzilla>58236</bugzilla>.
     Default HTTPS protocol level: <source>https.default.protocol=TLS</source>
     This may need to be changed to: <source>https.default.protocol=SSLv3</source>
 </property>
 <properties>
 <property name="https.socket.protocols">
     List of protocols to enable. You may have to select only a subset if you find issues with target server.<br/>
     This is needed when server does not support Socket version negotiation, this can lead to errors like:
     <code>javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated</code>
     or <code>java.net.SocketException: Connection reset</code>.<br/>
     See <bugzilla>54759</bugzilla>, example: <source>https.socket.protocols=SSLv2Hello SSLv3 TLSv1</source>
 </property>
 <property name="https.use.cached.ssl.context">
     Control if we allow reuse of cached SSL context between iterations.<br/>
     Set the value to <code>false</code> to reset the SSL context each iteration.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="https.keyStoreStartIndex">
     Start index to be used with keystores with many entries.<br/>
     The default is to use entry <code>0</code>, i.e. the first.<br/>
     Defaults to: <code>0</code>
 </property>
 <property name="https.keyStoreEndIndex">
     End index to be used with keystores with many entries.<br/>
     Defaults to: <code>0</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.4 Look and Feel configuration" anchor="laf_config">
 <properties>
 <property name="jmeter.laf.windows_10">
     Classname of the Swing default UI<br/>
     The LAF classnames that are available are now displayed as ToolTip text when hovering over
     the Options/Look and Feel selection list.<br/>
     You can either use a full class name, as shown below, or one of the strings "<code>System</code>"
     or "<code>CrossPlatform</code>" which means JMeter will use the
     corresponding string returned by <code>UIManager.get&lt;name&gt;LookAndFeelClassName()</code>.<br/>
     LAF can be overridden by <code>os.name</code> (lowercased, spaces replaced by '_').<br/>
     <example title="Order of LAF property lookup" anchor="order-laf-lookup">
         Take for example an <code>os.name</code> of <code>Windows 10</code>.<br/>
         JMeter would look first for a property
         <source>jmeter.laf.windows_10=javax.swing.plaf.metal.MetalLookAndFeel</source>
         Failing that, the OS family <code>os.name</code> would be used shortened to the first space. In our example
         JMeter would therefore look for a property
         <source>jmeter.laf.windows=com.sun.java.swing.plaf.windows.WindowsLookAndFeel</source>
     </example>
     <note>
         Mac apparently looks better with the System LAF set through
         <source>jmeter.laf.mac=System</source>
         Failing that, the JMeter default laf can be defined through:
         <source>jmeter.laf=System</source>
         If none of the above <code>jmeter.laf</code> properties are defined, JMeter uses the <code>CrossPlatform</code> LAF.
         This is because the <code>CrossPlatform</code> LAF generally looks better than the <code>System</code> LAF.
         See <bugzilla>52026</bugzilla> for details.
     </note>
  </property>
 <property name="jmeter.loggerpanel.display">
     Display LoggerPanel.<br/>
     Defaults to: <code>false</code></property>
 <property name="jmeter.loggerpanel.enable_when_closed">
     Enable LogViewer Panel to receive log event even when closed.<br/>
     Enabled since 2.12<br/>
     <note>Note this has some impact on performances, but as GUI mode must not be used for Load Test it is acceptable</note>
     Defaults to: <code>true</code></property>
 <property name="jmeter.loggerpanel.maxlength">
      Max lines kept in LoggerPanel, <code>0</code> means no limit.<br/>
      Defaults to: <code>1000</code></property>
 <property name="jmeter.loggerpanel.refresh_period">
     Interval in <code>ms</code> to refresh the log entries in the panel.<br/>
     Defaults to: <code>500</code></property>
 </properties>
 </section>
 <section name="&sect-num;.5 Toolbar display" anchor="toolbar_display">
 <properties>
 <property name="jmeter.toolbar.icons">
     Toolbar icon definitions.<br/>
     Defaults to <code>org/apache/jmeter/images/toolbar/icons-toolbar.properties</code>
 </property>
 <property name="jmeter.toolbar">
     Toolbar list.<br/>
     Defaults to:
     <source>new,open,close,save,save_as_testplan,|,cut,copy,paste,|,expand,collapse,toggle,|,test_start,test_stop,test_shutdown,|,test_start_remote_all,test_stop_remote_all,test_shutdown_remote_all,|,test_clear,test_clear_all,|,search,search_reset,|,function_helper,help</source>
 </property>
 <property name="jmeter.toolbar.icons.size">
     Available sizes are: <code>22x22</code>, <code>32x32</code>, <code>48x48</code>. Suggested value for HiDPI mode is
     <source>jmeter.toolbar.icons.size=48x48</source>
     Defaults to: <code>22x22</code>
 </property>
 <property name="jmeter.icons">
     Icon definitions. Alternate set: 
     <source>jmeter.icons=org/apache/jmeter/images/icon_1.properties</source>
     Historical icon set (deprecated):
     <source>jmeter.icons=org/apache/jmeter/images/icon_old.properties</source>
     Defaults to:<code>org/apache/jmeter/images/icon.properties</code>
 </property>
 <property name="jmeter.tree.icons.size">
     Available sizes are: <code>19x19</code>, <code>24x24</code>, <code>32x32</code>, <code>48x48</code>.
     Useful for HiDPI display (see below).<br/>
     Defaults to: <code>19x19</code><br/>
     Suggested value for HiDPI screen like 3200x1800 is: <code>32x32</code>
 </property>
 <property name="jmeter.hidpi.mode">
     HiDPI mode. Activate a '<em>pseudo</em>'-HiDPI mode. Allows to increase size of some UI
     elements which are not correctly managed by JVM with high resolution screens in Linux or Windows.<br/>
     Defaults to: <code>false</code></property>
 <property name="jmeter.hidpi.scale.factor">
     HiDPI scale factor. Suggested value for HiDPI: <code>2.0</code>.
     Defaults to: <code>1.0</code>
 </property>
 <property name="not_in_menu">
     Components to not display in JMeter GUI (GUI class name or static label).<br/>
     These elements are deprecated and will be removed in next version:
     <source>MongoDB Script, MongoDB Source Config</source>
     Defaults to:
     <source>org.apache.jmeter.protocol.mongodb.sampler.MongoScriptSampler, org.apache.jmeter.protocol.mongodb.config.MongoSourceElement</source>
 </property>
 <property name="undo.history.size">
     Number of items in undo history.<br/>
     Feature is disabled by default (<code>0</code>) due to known and not fixed bugs
     <bugzilla>57043</bugzilla>, <bugzilla>57039</bugzilla> and <bugzilla>57040</bugzilla>.
     Set it to a number greater than zero (<code>25</code> can be a good default).<br/>
     The bigger it is, the more memory will be consumed.
     Defaults to: <code>0</code>
 </property>
 <property name="gui.quick_X">
     Hotkeys to add JMeter components where <code><em>X</em></code> is the shortcut key, for example:
 <source>
 gui.quick_0=ThreadGroupGui
 gui.quick_1=HttpTestSampleGui
 gui.quick_2=RegexExtractorGui
 gui.quick_3=AssertionGui
 gui.quick_4=ConstantTimerGui
 gui.quick_5=TestActionGui
 gui.quick_6=JSR223PostProcessor
 gui.quick_7=JSR223PreProcessor
 gui.quick_8=DebugSampler
 gui.quick_9=ViewResultsFullVisualizer
 </source>
     Above code will add the corresponding elements when you press
     <keycombo><keysym>Ctrl</keysym><keysym>0</keysym></keycombo> &hellip;
     <keycombo><keysym>Ctrl</keysym><keysym>9</keysym></keycombo>
     (<keycombo><keysym>&command;</keysym><keysym>0</keysym></keycombo> &hellip;
     <keycombo><keysym>&command;</keysym><keysym>9</keysym></keycombo> on Mac)
 </property>
 </properties>
 </section>
 <section name="&sect-num;.6 JMX Backup configuration" anchor="backup">
 <properties>
 <property name="jmeter.gui.action.save.backup_on_save">
     Enable auto backups of the <code>.jmx</code> file when a test plan is saved.<br/>
     When enabled, before the <code>.jmx</code> is saved, it will be backed up to the directory
     pointed to by the <code>jmeter.gui.action.save.backup_directory</code> property (see below).
     Backup file names are built after the jmx file being saved. For example,
     saving <code>test-plan.jmx</code> will create a <code>test-plan-000012.jmx</code> in the backup
     directory provided that the last created backup file is <code>test-plan-000011.jmx</code>.<br/>
     Default value is <code>true</code> indicating that auto backups are enabled.<br/> 
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.gui.action.save.backup_directory">
     Set the backup directory path where JMX backups will be created upon save in the GUI.<br/>
     If not set (what it defaults to) then backup files will be created in a sub-directory of
     the JMeter base installation. If set and the directory does not exist, a corresponding directory will be created.<br/>
     Defaults to: <code>${JMETER_HOME}/backups</code>
 </property>
 <property name="jmeter.gui.action.save.keep_backup_max_hours">
     Set the maximum time (in hours) that backup files should be preserved since the save time.<br/>
     By default no expiration time is set which means we keep backups for ever.<br/>
     Defaults to: <code>0</code></property>
 <property name="jmeter.gui.action.save.keep_backup_max_count">
     Set the maximum number of backup files that should be preserved.
     By default ten backups will be preserved.<br/>
     Setting this to zero will cause the backups to not being deleted (unless <code>keep_backup_max_hours</code>
     is set to a non zero value).<br/>
     Defaults to: <code>10</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.7 Remote hosts and RMI configuration" anchor="remote">
 <properties>
 <property name="remote_hosts">
     Remote Hosts - comma delimited, for example
     <source>remote_hosts=localhost:1099,localhost:2010</source>
     Defaults to: <code>127.0.0.1</code></property>
 <property name="server_port">
     RMI port to be used by the server (must start <code>rmiregistry</code> with same port).
     To change the port to (say) <code>1234</code>:<br/>
     On the server(s):
     <ul>
         <ol><code>set server_port=1234</code></ol>
         <ol>start <code>rmiregistry</code> with port <code>1234</code></ol>
     </ul>
     On Windows this can be done by:
     <source>SET SERVER_PORT=1234
 JMETER-SERVER</source>
     On Unix:
     <source>SERVER_PORT=1234 jmeter-server</source>
     On the windows client:
     <source>set remote_hosts=<em>server</em>:1234</source>
     On the unix client:
     <source>export remote_hosts=<em>server</em>:1234</source>
     Defaults to: <code>1099</code>
 </property>
 <property name="client.rmi.localport">
     Parameter that controls the RMI port used by the <code>RemoteSampleListenerImpl</code> (The Controler)<br/>
     Default value is <code>0</code>, which means port is randomly assigned.
     <note>You may need to open a port in the firewall on the Controller machine.</note>
     Defaults to: <code>0</code>
 </property>
 <property name="client.tries">
     When distributed test is starting, there may be several attempts to initialize remote engines.<br/>
     By default, only a single try is made. Increase this property to make it retry additional times.<br/>
     Defaults to: <code>1</code>
 </property>
 <property name="client.retries_delay">
     If initialization is retried, this property sets the delay between those attempts in milliseconds.<br/>
     Defaults to: <code>5000</code>
 </property>
 <property name="client.continue_on_fail">
     When all initialization tries were made, the test will fail, if any remote engines are failed.<br/>
     Set this property to <code>true</code> to ignore failed nodes and proceed with test.<br/>
     Defaults to: <code>false</code>
 </property>
 <property name="server.rmi.port">
     To change the default port (<code>1099</code>) used to access the server.<br/>
     Defaults to: <code>1099</code>
 </property>
 <property name="server.rmi.localport">
     To use a specific port for the JMeter server engine, define this property before starting the server.<br/>
     Defaults to: <code>4000</code>
 </property>
 <property name="server.rmi.create">
     From JMeter version 2.3.1, the jmeter server creates the RMI registry as part of the server process.<br/>
     Set this property to <code>false</code>, to stop the server creating the RMI registry.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="server.exitaftertest">
     From JMeter version 2.3.1, define this property to cause JMeter to exit after the first test.<br/>
     Defaults to: <code>true</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.8 Include Controller" anchor="include_controller">
 <properties>
 <property name="includecontroller.prefix">
     Prefix used by <code>IncludeController</code> when building file names.<br/>
     Defaults to empty value
 </property>
 </properties>
 </section>
 <section name="&sect-num;.9 HTTP Java configuration" anchor="http_java_config">
 <properties>
 <property name="http.java.sampler.retries">
     Number of connection retries performed by HTTP Java sampler before giving up.
     <code>0</code> means no retry since version 3.0.<br/>
     Defaults to: <code>0</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.10 Commons and Apache HttpClient common properties" anchor="httpclient_common_properties">
 <properties>
 <property name="httpclient.timeout">
     Set the socket timeout (or use the parameter <code>http.socket.timeout</code>) for
     AJP Sampler and HttpClient3 implementation.<br/>
     <note>Note for HttpClient3 implementation it is better to use GUI to set timeout or
     use <code>http.socket.timeout</code> in <code>httpclient.parameters</code>.</note>
     Value is in milliseconds, <code>0</code> means no timeout.<br/>
     Defaults to: <code>0</code>
 </property>
 <property name="httpclient.version">
     Set the http version.<br/>
     Defaults to: <code>1.1</code> (or use the parameter <code>http.protocol.version</code>)
 </property>
 <property name="httpclient.socket.http.cps">
     Set characters per second to a value greater then zero to emulate slow connections.<br/>
     Defaults to: <code>0</code>
 </property>
 <property name="httpclient.socket.https.cps">
     Same as before but for https.
     Defaults to: <code>0</code>
 </property>
 <property name="httpclient.loopback">
     Enable loopback protocol.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="httpclient.localaddress">
     Define the local host address to be used for multi-homed hosts,
     example <source>httpclient.localaddress=1.2.3.4</source>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.11 Kerberos properties" anchor="kerberos">
 <properties>
 <property name="kerberos_jaas_application">
     AuthManager Kerberos configuration<br/>
     Name of application module used in <code>jaas.conf</code>.<br/>
     Defaults to: <code>JMeter</code>
 </property>
 <property name="kerberos.spnego.strip_port">
     Should port be stripped from urls before constructing SPNs for SPNEGO authentication.
     Defaults to: <code>true</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.12 Sample logging levels for Commons HttpClient" anchor="log_levels_commons_httpclient">
 <description>
     Commons HttpClient Logging information can be found at <a href="http://hc.apache.org/httpclient-3.x/logging.html" target="_blank" >Logging</a>
     <note>Note that full category names are used, i.e. must include the <code>org.apache</code>.</note>
     Info level produces no output.<br/>
     In log4j2.xml, set debug level:
     <source>&lt;Logger name="org.apache.commons.httpclient" level="debug" /&gt;</source>
     Might be useful:
     <source>&lt;Logger name="org.apache.commons.httpclient.Authenticator" level="trace" /&gt;</source> 
     Show headers only
     <source>&lt;Logger name="org.apache.commons.httpclient.wire.header" level="debug" /&gt;</source>
     Full wire debug produces a lot of output; consider using separate file:
     <source>&lt;Logger name="org.apache.commons.httpclient.wire" level="debug" /&gt;</source>
 </description>
 </section>
 <section name="&sect-num;.13 Apache HttpClient logging examples" anchor="httpclient_logging_examples">
 <description>
     Enable header wire and context logging - Best for Debugging
 	In log4j2.xml, set:
 <source>
 &lt;Logger name="org.apache.http" level="debug" /&gt;
 &lt;Logger name="org.apache.http.wire" level="error" /&gt;
 </source>
     Enable full wire and context logging
 	In log4j2.xml, set:
     <source>&lt;Logger name="org.apache.http" level="debug" /&gt;</source>
     Enable context logging for connection management
     <source>&lt;Logger name="org.apache.http.impl.conn" level="debug" /&gt;</source>
     Enable context logging for connection management / request execution
 <source>
 &lt;Logger name="org.apache.http.impl.conn" level="debug" /&gt;
 &lt;Logger name="org.apache.http.impl.client" level="debug" /&gt;
 &lt;Logger name="org.apache.http.client" level="debug" /&gt;
 </source>
 </description>
 </section>
 <section name="&sect-num;.14 Apache HttpComponents HTTPClient configuration (HTTPClient4)" anchor="httpclient4">
 <properties>
 <property name="hc.parameters.file">
     Define a properties file for overriding Apache HttpClient parameters.<br/>
     Uncomment this line if you put anything in <code>hc.parameters</code> file.<br/>
     Defaults to: <code>hc.parameters</code>
 </property>
 <property name="httpclient4.auth.preemptive">
     Preemptively send Authorization Header when BASIC auth is used
     Defaults to: <code>true</code>
 </property>
 <property name="httpclient4.retrycount">
     Number of retries to attempt.<br/>
     Defaults to: <code>0</code>
 </property>
 <property name="httpclient4.idletimeout">
     Idle connection timeout (in milliseconds) to apply if the server does not send <code>Keep-Alive</code> timeout headers.<br/>
     Defaults to: <code>0</code> (no suggested duration for <code>Keep-Alived</code> connections)
 </property>
 <property name="httpclient4.validate_after_inactivity">
     Check connection if the elapsed time (in milliseconds) since the last use of the connection
     exceeds this value. Ensure this value is always lower by at least 150 ms than <code>httpclient4.time_to_live</code><br/>
     Defaults to: <code>1700</code>
 </property>
 <property name="httpclient4.time_to_live">
     <abbr title="time to live">TTL</abbr> (in milliseconds) represents an absolute value.
     No matter what, the connection will not be re-used beyond its TTL.<br/>
     Defaults to: <code>2000</code>
 </property>
 <property name="httpclient4.max_body_retain_size">
     Max size in bytes of <code>PUT</code> body to retain in result sampler.
     Bigger results will be clipped.<br/>
     Defaults to: <code>327678</code> (bytes)
 </property>
 </properties>
 </section>
-<section name="&sect-num;.15 Apache HttpComponents Commons HTTPClient configuration (HTTPClient 3.1)" anchor="httpclient31">
-<properties>
-<property name="httpclient.parameters.file">
-    Define a properties file for overriding Commons HttpClient parameters.
-    See <a href="http://hc.apache.org/httpclient-3.x/preference-api.html">this</a>.
-    Uncomment this line if you put anything in <code>httpclient.parameters</code> file.
-</property>
-<property name="httpclient3.retrycount">
-    Number of retries to attempt.<br/>
-    Defaults to: <code>0</code>
-</property>
-</properties>
-</section>
+
 <section name="&sect-num;.16 HTTP Cache Manager configuration" anchor="cache_maanger">
 <properties>
 <property name="cacheable_methods">
     Space or comma separated list of methods that can be cached.<br/>
     Defaults to: <code>GET</code>
 </property>
 <property name="cache_manager.cached_resource_mode">
     <note>N.B. This property is currently a temporary solution for <bugzilla>56162</bugzilla>.</note>
     Since version 2.12, JMeter does not create anymore a Sample Result with a response
     code of <code>204</code> for a resource found in cache. This is in line with what browser do.<br/>
     You can choose between three modes:
     <dl>
         <dt><code>RETURN_NO_SAMPLE</code> (default)</dt>
         <dd>this mode returns no Sample Result. It has no additional configuration.</dd>
         <dt><code>RETURN_200_CACHE</code></dt>
         <dd>this mode will return Sample Result with response code to <code>200</code> and
         response message to "<code>(ex cache)</code>".</dd>
         <dt><code>RETURN_CUSTOM_STATUS</code></dt>
         <dd>choosing this mode, response code and message have to be set by specifying
         <code>RETURN_CUSTOM_STATUS.code</code> and <code>RETURN_CUSTOM_STATUS.message</code>.</dd>
     </dl>
     Defaults to: <code>RETURN_NO_SAMPLE</code>
 </property>
 <property name="RETURN_CUSTOM_STATUS.code">
     This lets you select what response code you want to return if mode <code>RETURN_CUSTOM_STATUS</code>
     is selected.<br/>
     Defaults to empty value.
 </property>
 <property name="RETURN_CUSTOM_STATUS.message">
     This lets you select what response message you want to return if mode <code>RETURN_CUSTOM_STATUS</code>
     is selected.<br/>
     Defaults to empty value
 </property>
 </properties>
 </section>
 <section name="&sect-num;.17 Results file configuration" anchor="results_file_config">
 <properties>
 <property name="jmeter.save.saveservice.output_format">
     This section helps determine how result data will be saved.<br/>
     The commented out values are the defaults.<br/>
     Legitimate values: <code>xml</code>, <code>csv</code>, <code>db</code>.<br/>
     Only <code>xml</code> and <code>csv</code> are currently supported.<br/>
     Defaults to: <code>csv</code>
 </property>
 <property name="jmeter.save.saveservice.assertion_results_failure_message">
     <code>true</code> when field should be saved; <code>false</code> otherwise.<br/>
     <code>assertion_results_failure_message</code> only affects CSV output.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.assertion_results">
     Legitimate values: <code>none</code>, <code>first</code>, <code>all</code>.<br/>
     Defaults to: <code>none</code>
 </property>
 <property name="jmeter.save.saveservice.data_type">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.label">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.response_code">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.response_data">
     <note><code>response_data</code> is currently not supported for CSV output</note>
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.response_data.on_error">
     Save ResponseData for failed samples.
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.response_message">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.successful">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.thread_name">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.time">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.subresults">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.assertions">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.latency">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.connect_time">
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.samplerData">
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.responseHeaders">
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.requestHeaders">
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.encoding">
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.bytes">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.url">
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.filename">
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.hostname">
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.thread_counts">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.sample_count">
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.save.saveservice.idle_time">
     Defaults to: <code>true</code>
 </property>
 <property name="jmeter.save.saveservice.timestamp_format">
     Timestamp format - this only affects CSV output files.<br/>
     Legitimate values: <code>none</code>, <code>ms</code>, or a format suitable for <code>SimpleDateFormat</code>.<br/>
     Defaults to: <code>ms</code>
 </property>
 <property name="jmeter.save.saveservice.timestamp_format">
     Defaults to: <code>yyyy/MM/dd HH:mm:ss.SSS</code>
 </property>
 <property name="jmeter.save.saveservice.default_delimiter">
     For use with Comma-separated value (CSV) files or other formats where the fields' values
     are separated by specified delimiters.<br/>
     <note>For TAB, since JMeter version 2.3 one can use <code>\t</code></note>
     Defaults to: <code>,</code>
 </property>
 <property name="jmeter.save.saveservice.print_field_names">
     Only applies to CSV format files:<br/>
     Print field names as first line in CSV<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="sample_variables">
     Optional list of JMeter variable names whose values are to be saved in the result data files.<br/>
     Use commas to separate the names.<br/>
     Defaults to: <code>SESSION_ID,REFERENCE</code>
 </property>
 <property name="jmeter.save.saveservice.xml_pi">
     <note>N.B. The current implementation saves the values in XML as attributes, so the names must be valid XML names.</note>
     Versions of JMeter after 2.3.2 send the variable to all servers to ensure that the correct data is available at the client.<br/>
     Optional xml processing instruction for line two of the file.<br/>
     Defaults to empty value
 </property>
 <property name="jmeter.save.saveservice.base_prefix">
     Prefix used to identify filenames that are relative to the current base.<br/>
     Defaults to: <code>~/</code>
 </property>
 <property name="jmeter.save.saveservice.autoflush">
     AutoFlush on each line written in XML or CSV output.<br/>
     Setting this to <code>true</code> will result in less test results data loss in case of a crash, but
     with impact on performances, particularly for intensive tests (low or no pauses).<br/>
     Since JMeter version 2.10, this is <code>false</code> by default.<br/>
     Defaults to: <code>false</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.18 Settings that affect SampleResults" anchor="sample_results">
 <properties>
 <property name="sampleresult.timestamp.start">
     Save the start time stamp instead of the end.<br/>
     This also affects the timestamp stored in result files.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="sampleresult.useNanoTime">
     Whether to use <code>System.nanoTime()</code> - otherwise only use <code>System.currentTimeMillis()</code>.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="sampleresult.nanoThreadSleep">
     Use a background thread to calculate the nanoTime offset.<br/>
     Set this to a value less than zero to disable the background thread.<br/>
     Defaults to: <code>5000</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.19 Upgrade" anchor="upgrade">
 <properties>
 <property name="upgrade_properties">
     File that holds a record of name changes for backward compatibility issues.<br/>
     Defaults to: <code>/bin/upgrade.properties</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.20 JMeter Test Script recorder configuration" anchor="test_script_recorder">
 <properties>
 <property name="proxy.pause">
     <note>N.B. The element was originally called the Proxy recorder, which is why the properties
     have the prefix "proxy".</note>
     If the recorder detects a gap of at least 5s (default) between HTTP requests, it assumes
     that the user has clicked a new URL. Specified in milliseconds.<br/>
     Defaults to: <code>5000</code>
 </property>
 <property name="proxy.number.requests">
     Add numeric prefix to Sampler names.<br/>
     defaults to: <code>true</code>
 </property>
 <property name="proxy.excludes.suggested">
     List of URL patterns that will be added to URL Patterns to exclude.<br/>
     Separate multiple lines with <code>;</code><br/>
     Defaults to: <code>.*\\.(bmp|css|js|gif|ico|jpe?g|png|swf|woff|woff2)</code>
 </property>
 <property name="jmeter.httpsampler">
     Change the default HTTP Sampler.<br/>
     Can be one of
     <dl>
         <dt><code>HTTPSampler</code> or <code>Java</code></dt>
         <dd>Use the <code>Java</code> Sampler</dd>
         <dt><code>HTTPSampler2</code> or <code>HttpClient3.1</code></dt>
         <dd>Use Apache HTTPClient version 3.1</dd>
         <dt><code>HttpClient4</code></dt>
         <dd>Use Apache HTTPClient version 4</dd>
     </dl>
     Defaults to: <code>HttpClient4</code>
 </property>
 <property name="jmeter.httpclient.strict_rfc2616">
     By default JMeter tries to be more lenient with <a href="http://tools.ietf.org/html/rfc2616">RFC 2616</a>
     redirects and allows relative paths.<br/>
     If you want to test strict conformance, set this value to <code>true</code>.<br/>
     When the property is <code>true</code>, JMeter follows
     <a href="http://tools.ietf.org/html/rfc3986#section-5.2">RFC 3986 section 5.2</a>.<br/>
     Defaults to: <code>false</code>
 </property>
 <property name="proxy.content_type_include">
     Default <code>content-type</code> include filter to use. Specified as a regex.<br/>
     Defaults to: <code>text/html|text/plain|text/xml</code>
 </property>
 <property name="proxy.content_type_exclude">
     Default <code>content-type</code> exclude filter to use. Specified as a regex.<br/>
     Defaults to: <code>image/.*|text/css|application/.*</code>
 </property>
 <property name="proxy.headers.remove">
     Default headers to remove from Header Manager elements. Specified as comma separated list<br/>
     <note>The headers <code>Cookie</code> and <code>Authorization</code> are always removed.</note>
     Defaults to: <code>If-Modified-Since,If-None-Match,Host</code>
 </property>
 <property name="proxy.binary.types">
     Binary <code>content-type</code> handling.<br/>
     These <code>content-types</code> will be handled by saving the request in a file.<br/>
     Defaults to: <code>application/x-amf,application/x-java-serialized-object</code>
 </property>
 <property name="proxy.binary.directory">
     The files will be saved in this directory.<br/>
     Defaults to: <code>user.dir</code>
 </property>
 <property name="proxy.binary.filesuffix">
     The files will be created suffixed with this value.<br/>
     Defaults to: <code>.binary</code>
 </property>
 <property name="proxy.redirect.disabling">
     Whether to attempt disabling of samples that resulted from redirects where the
     generated samples use auto-redirection.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="proxy.ssl.protocol">
     SSL configuration.<br/>
     Defaults to: <code>TLS</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.21 Test Script Recorder certificate configuration" anchor="test_script_recorder_cert">
 <properties>
 <property name="proxy.cert.directory">
     Defaults to: <em>JMeter <code>bin</code> directory</em>
 </property>
 <property name="proxy.cert.file">
     Defaults to: <code>proxyserver.jks</code>
 </property>
 <property name="proxy.cert.type">
     Defaults to: <code>JKS</code>
 </property>
 <property name="proxy.cert.keystorepass">
     Defaults to: <code>password</code>
 </property>
 <property name="proxy.cert.keypassword">
     Defaults to: <code>password</code>
 </property>
 <property name="proxy.cert.factory">
     Defaults to: <code>SunX509</code>
 </property>
 <property name="proxy.cert.alias">
     Define this property if you wish to use a special entry from the keystore.<br/>
     Defaults to empty value
 </property>
 <property name="proxy.cert.validity">
     The default validity (in days) for certificates created by JMeter.<br/>
     Defaults to: <code>7</code>
 </property>
 <property name="proxy.cert.dynamic_keys">
     Use dynamic key generation (if supported by JMeter/JVM).<br/>
     If <code>false</code>, will revert to using a single key with no certificate.<br/>
     Defaults to: <code>true</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.22 JMeter Proxy configuration" anchor="proxy_config">
 <properties>
 <property name="http.proxyDomain">
     Use command-line flags for user-name and password.<br/>
     Defaults to: NTLM domain, if required by HTTPClient sampler
 </property>
 </properties>
 </section>
 <section name="&sect-num;.23 HTML Parser configuration" anchor="parser_config">
 <properties>
 <property name="HTTPResponse.parsers">
     Space-separated list of parser groups.<br/>
     <note>For each parser, there should be a <code><em>parser</em>.types</code> and a <code><em>parser</em>.className</code> property</note>
     Defaults to: <code>htmlParser wmlParser cssParser</code>
 </property>
 <property name="cssParser.className">
     CSS Parser based on ph-css.<br/>
     Defaults to: <code>org.apache.jmeter.protocol.http.parser.CssParser</code>
 </property>
 <property name="cssParser.types">
     Content types handled by cssParser.<br/>
     Defaults to: <code>text/css</code>
 </property>
 <property name="css.parser.cache.size">
     CSS parser LRU cache size. This cache stores the URLs found in a CSS to avoid continuously
     parsing the CSS. By default the cache size is 400. It can be disabled by setting its value to 0.<br/>
     Defaults to: <code>400</code>
 </property>
 <property name="css.parser.ignore_all_css_errors">
     Let the CSS Parser ignore all CSS errors.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="htmlParser.className" required="Yes">
     Define the HTML parser to be used.<br/>
     Do not comment this property.<br/>
     <dl>
         <dt>org.apache.jmeter.protocol.http.parser.LagartoBasedHtmlParser</dt>
         <dd>This new parser (since 2.10) should perform better than all others. See <bugzilla>55632</bugzilla>.</dd>
         <dt><code>org.apache.jmeter.protocol.http.parser.JTidyHTMLParser</code></dt>
         <dd>Default parser before JMeter version 2.10</dd>
         <dt><code>org.apache.jmeter.protocol.http.parser.RegexpHTMLParser</code></dt>
         <dd><note>Note that Regexp extractor may detect references that have been commented out.</note>
          In many cases it will work OK, but you should be aware that it may generate additional references.</dd>
         <dt><code>org.apache.jmeter.protocol.http.parser.JsoupBasedHtmlParser</code></dt>
         <dd>This parser is based on JSoup. It should be the most accurate parser,
         but it is less performant than LagartoBasedHtmlParser</dd>
     </dl>
     Defaults to: <code>org.apache.jmeter.protocol.http.parser.LagartoBasedHtmlParser</code>
 </property>
 <property name="htmlParser.types">
     Used by HTTPSamplerBase to associate htmlParser with content types below.<br/>
     Defaults to: <code>text/html application/xhtml+xml application/xml text/xml</code>
 </property>
 <property name="wmlParser.className">
     Defaults to: <code>org.apache.jmeter.protocol.http.parser.RegexpHTMLParser</code>
 </property>
 <property name="wmlParser.types">
     Used by HTTPSamplerBase to associate wmlParser with content types below.<br/>
     Defaults to: <code>text/vnd.wap.wml</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.24 Remote batching configuration" anchor="remote_batching_config">
     <p>
     Configure how SampleResults are sent from server to client when using distributed testing.
     </p>
     <note>Note that the mode is currently resolved on the client, while other properties
     (e.g. <code>time_threshold</code>) are resolved on the server.</note>
     <p>
     Since JMeter version 2.9, default is <code>StrippedBatch</code>, which returns samples in
     batch mode (every 100 samples or every minute by default).<br/>
     You can set mode by configuring:
     </p>
     <source>mode=<em>one of the possible modes below</em></source>
     <note>StrippedBatch strips response data from SampleResult, so if you need the response data, change to another mode.</note>
     <p>
     Possible modes are:
     </p>
     <dl>
         <dt><code>Standard</code></dt>
         <dd>Sends SampleResult one by one</dd>
         <dt><code>Batch</code></dt>
         <dd>Accumulates SampleResults before sending them. Configured by
         properties <code>num_sample_threshold</code> and <code>time_threshold</code></dd>
         <dt><code>Hold</code></dt>
         <dd>retains samples until end of test (may need lots of memory)
         <note>The related <code>hold_samples</code> was originally defined as a separate property, but is deprecated now.</note>
         </dd>
         <dt><code>Statistical</code></dt>
         <dd>returns sample summary statistics. Configured by
         properties <code>key_on_threadname</code> and <code>time_threshold</code></dd>
         <dt><code>Stripped</code></dt>
         <dd>Similar to <code>Standard</code> mode but strips Response from SampleResult.
         Configured by property <code>sample_sender_strip_also_on_error</code></dd>
         <dt><code>StrippedBatch</code></dt>
         <dd>Same as <code>Batch</code> but strips Response from SampleResult.
         Configured by properties <code>num_sample_threshold</code>, <code>time_threshold</code>
         and <code>sample_sender_strip_also_on_error</code></dd>
         <dt><code>Asynch</code></dt>
         <dd>Asynchronous sender; uses a queue and background worker process to return the samples.
         Configured by propertiy <code>asynch.batch.queue.size</code></dd>
         <dt><code>StrippedAsynch</code></dt>
         <dd>Same as <code>Asynch</code> but strips response data from SampleResult.
         Configured by properties <code>asynch.batch.queue.size</code>
         and <code>sample_sender_strip_also_on_error</code></dd>
         <dt><code>StrippedDiskStore</code></dt>
         <dd>Same as <code>DiskStore</code> but strips response data from SampleResult</dd>
         <dt>Class extending <a href="../api/org/apache/jmeter/samplers/AbstractSampleSender.html"><code>AbstractSampleSender</code></a> (<code>org.example.load.MySampleSender</code> for example)</dt>
         <dd>A custom implementation of your choice</dd>
     </dl>
 <properties>
 <property name="sample_sender_client_configured">
     How is Sample sender implementations configured:<br/>
     <dl>
         <dt><code>true</code></dt><dd>(default) means client configuration will be used</dd>
         <dt><code>false</code></dt><dd>means server configuration will be used</dd>
     </dl>
     Defaults to: <code>true</code>
 </property>
 <property name="sample_sender_strip_also_on_error">
     By default when Stripping modes are used JMeter since version 3.1 will strip
     response even for SampleResults in error. If you want to revert to previous
     behaviour (no stripping of Responses in error) set this property to <code>false</code><br/>
     Defaults to: <code>true</code>
 </property>
 
 <property name="mode">
     Remote batching support.<br/>
     Since JMeter version 2.9, default is <code>StrippedBatch</code>, which returns samples in
     batch mode (every 100 samples or every minute by default).<br/>
     <note>Note also that StrippedBatch strips response data from SampleResult, so if you need
     the response data, change to another mode.</note>
 </property>
 
 <property name="key_on_threadname">
     Set to <code>true</code> to key statistical samples on <code>threadName</code> rather than <code>threadGroup</code>.<br/>
     Defaults to: <code>false</code>
 </property>
 <property name="num_sample_threshold">
     Number of SampleResults to accumulate before sending to client.<br/>
     Defaults to: <code>100</code>
 </property>
 <property name="time_threshold">
     Time to retain SampleResults before sending them to client.
     Value is in milliseconds.<br/>
     Defaults to: <code>60000</code>
 </property>
 <property name="asynch.batch.queue.size">
     Default queue size used by <code>Async</code> mode.<br/>
     Defaults to: <code>100</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.25 JDBC Request configuration" anchor="jdbc_request">
 <properties>
 <property name="jdbcsampler.nullmarker">
     String used to indicate a null value.<br/>
     Defaults to: <code>]NULL[</code>
 </property>
 <property name="jdbcsampler.max_retain_result_size">
     Max bytes to store from a <code>CLOB</code> or <code>BLOB</code> in the sampler.<br/>
     Defaults to: <code>65536</code> (bytes)
 </property>
 </properties>
 </section>
 <section name="&sect-num;.26 OS Process Sampler configuration" anchor="os_sampler">
 <properties>
 <property name="os_sampler.poll_for_timeout">
     Polling to see if process has finished its work, used when a timeout
     is configured on sampler. Specified in milliseconds.<br/>
     Defaults to: <code>100</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.27 TCP Sampler configuration" anchor="tcp_sampler">
 <properties>
 <property name="tcp.handler">
     The default handler class.<br/>
     Defaults to: <code>TCPClientImpl</code>
 </property>
 <property name="tcp.eolByte">
     Set this to a value outside the range <code>-128</code> to <code>+127</code> to skip
     <code><abbr title="end of line">eol</abbr></code> checking.<br/>
     Defaults to byte value for end of line: <code>1000</code>
 </property>
 <property name="tcp.charset">
     TCP Charset, used by <code>org.apache.jmeter.protocol.tcp.sampler.TCPClientImpl</code>.<br/>
     Defaults to platforms default charset as returned by <code>Charset.defaultCharset().name()</code>
 </property>
 <property name="tcp.status.prefix">
     String at the begining of the status response code.<br/>
     Defaults to: <code>Status</code></property>
 <property name="tcp.status.suffix">
     String at the end of the status response code.<br/>
     defaults to: <code>.</code>
 </property>
 <property name="tcp.status.properties">
     Property file to convert codes to messages.<br/>
     Defaults to: <code>mytestfiles/tcpstatus.properties</code>
 </property>
 <property name="tcp.binarylength.prefix.length">
     The length prefix used by <code>LengthPrefixedBinaryTCPClientImpl</code> implementation (in bytes).<br/>
     Defaults to: <code>2</code></property>
 </properties>
 </section>
 <section name="&sect-num;.28 Summariser - Generate Summary Results - configuration (mainly applies to non-GUI mode)" anchor="summariser">
 <properties>
 <property name="summariser.name">
     Comment the following property to disable the default non-GUI summariser.<br/>
     [or change the value to rename it]<br/>
     <note>Applies to non-GUI mode only</note>
     Defaults to: <code>summary</code>
 </property>
 <property name="summariser.interval">
     Interval between summaries (in seconds).<br/>
     Defaults to: <code>30</code>
 </property>
 <property name="summariser.log">
     Write messages to log file.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="summariser.out">
     Write messages to <code>System.out</code>.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="summariser.ignore_transaction_controller_sample_result">
     Ignore SampleResults generated by TransactionControllers.<br/>
     Defaults to: <code>true</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.29 Aggregate Report and Aggregate Graph - configuration" anchor="aggregate_report_graph">
 <properties>
 <property name="aggregate_rpt_pct1">
     Percentiles to display in reports.<br/>
     Given as a float value between <code>0</code> and <code>100</code> (means percent).<br/>
     First percentile to display.<br/>
     Defaults to: <code>90</code>
 </property>
 <property name="aggregate_rpt_pct2">
     Second percentile to display.<br/>
     Given as a float value between <code>0</code> and <code>100</code> (means percent).<br/>
     Defaults to: <code>95</code>
 </property>
 <property name="aggregate_rpt_pct3">
     Second percentile to display.<br/>
     Given as a float value between <code>0</code> and <code>100</code> (means percent).<br/>
     Defaults to: <code>99</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.30 BackendListener - configuration" anchor="backend">
 <properties>
 <property name="backend_graphite.send_interval">
     Send interval in seconds.<br/>
     Defaults to: <code>1</code> second
 </property>
 <property name="backend_influxdb.send_interval">
     Send interval in seconds.<br/>
     Defaults to: <code>5</code> seconds
 </property>
 <property name="backend_influxdb.connection_timeout">
     InfluxDB connection timeout.<br/>
     Defaults to: <code>1000</code> millis
 </property>
 <property name="backend_influxdb.socket_timeout">
     InfluxDB socket read timeout.<br/>
     Defaults to: <code>3000</code> millis
 </property>
 <property name="backend_influxdb.connection_request_timeout">
     InfluxDB timeout to get a connection.<br/>
     Defaults to: <code>100</code> millis
 </property>
 <property name="backend_metrics_window">
     Backend metrics sliding window size for <code>Percentiles</code>, <code>Min</code>
     and <code>Max</code>.<br/>
     Defaults to: <code>100</code>
 </property>
 <property name="backend_metrics_large_window">
     Backend metrics sliding window size  for <code>Percentiles</code>, <code>Min</code> 
     and <code>Max</code>. when <code>backend_metrics_window_mode=timed</code><br/>
     Setting this value too high can lead to OOM Backend metrics sliding window size 
     Defaults to: <code>5000</code>
 </property>
 
 <property name="backend_metrics_window_mode">
     Backend metrics window mode.
     Possible values:
     <ul>
         <li><code>fixed</code> : fixed-size window</li>
         <li><code>timed</code> : time boxed</li>
     </ul>
     Defaults to: <code>fixed</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.31 BeanShell configuration" anchor="beanshell">
 <properties>
 <property name="beanshell.server.port">
     BeanShell Server properties.<br/>
     Define the port number as non-zero to start the http server on that port.<br/>
     The telnet server will be started on the next port.<br/>
     Defaults to: <code>0</code>
 </property>
 <property name="beanshell.server.file">
     Define the server initialisation file.<br/>
     Defaults to: <code>../extras/startup.bsh</code>
 </property>
 <property name="beanshell.init.file">
     Define a file to be processed at startup.<br/>
     This is processed using its own interpreter.<br/>
     Defaults to empty value.
 </property>
 <property name="beanshell.sampler.init">
     Define the intialisation files for BeanShell Sampler, Function and
     other BeanShell elements.<br/>
     <note>N.B. Beanshell test elements do not share interpreters.
     Each element in each thread has its own interpreter.
     This is retained between samples.</note>
     Defaults to empty value.
 </property>
 <property name="beanshell.function.init">
     Defaults to empty value.
 </property>
 <property name="beanshell.assertion.init">
     Defaults to empty value.
 </property>
 <property name="beanshell.listener.init">
     Defaults to empty value.
 </property>
 <property name="beanshell.postprocessor.init">
     Defaults to empty value.
 </property>
 <property name="beanshell.preprocessor.init">
     Defaults to empty value.
 </property>
 <property name="beanshell.timer.init">
     Defaults to empty value.
 </property>
 </properties>
 </section>
 <section name="&sect-num;.32 MailerModel configuration" anchor="mailer">
 <properties>
 <property name="mailer.successlimit">
     The file <code>BeanShellListeners.bshrc</code> contains sample definitions
     of Test and Thread Listeners.<br/>
     Number of successful samples before a message is sent.<br/>
     Defaults to: <code>2</code>
 </property>
 <property name="mailer.failurelimit">
     Number of failed samples before a message is sent.<br/>
     Defaults to: <code>2</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.33 CSVRead configuration" anchor="csv">
 <properties>
 <property name="csvread.delimiter">
     CSVRead delimiter setting (default "<code>,</code>").<br/>
     <note>Make sure that there are no trailing spaces or tabs after the delimiter
     characters, or these will be included in the list of valid delimiters.</note>
     Defaults to: <code>,</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.34 __time() function configuration" anchor="time">
 <properties>
 <property name="time.YMD">
     This and the following properties can be used to redefine the default time formats.<br/>
     Defaults to: <code>yyyyMMdd</code>
 </property>
 <property name="time.HMS">
     Defaults to: <code>HHmmss</code>
 </property>
 <property name="time.YMDHMS">
     Defaults to: <code>yyyyMMdd-HHmmss</code>
 </property>
 <property name="time.USER1">
     Defaults to empty value
 </property>
 <property name="time.USER2">
     Defaults to empty value
 </property>
 </properties>
 </section>
 <section name="&sect-num;.35 CSV DataSet configuration" anchor="csv_dataset">
 <properties>
 <property name="csvdataset.eofstring">
     String to return at <abbr title="end of file"><code>EOF</code></abbr> (if recycle not used).<br/>
     Defaults to: <code>&lt;EOF&gt;</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.36 LDAP Sampler configuration" anchor="ldap">
 <properties>
 <property name="ldapsampler.max_sorted_results">
     Maximum number of search results returned by a search that will be sorted
     to guarantee a stable ordering (if more results then this limit are retruned
     then no sorting is done).<br/>
     Set to zero to turn off all sorting, in which case "Equals" response assertions
     will be very likely to fail against search results.<br/>
     Defaults to: <code>1000</code>
 </property>
 <property name="assertion.equals_section_diff_len">
     Number of characters to log for each of three sections (starting matching section,
     diff section, ending matching section where not all sections will appear for all diffs)
     diff display when an Equals assertion fails. So a value of <code>100</code> means a
     maximum of <code>300</code> characters of diff text will be displayed (plus a number
     of extra characters like "<code>...</code>" and "<code>[[[</code>"/"<code>]]]</code>"
     which are used to decorate it).<br/>
     Defaults to: <code>100</code>
 </property>
 <property name="assertion.equals_diff_delta_start">
     Test written out to log to signify start/end of diff delta.<br/>
     Defaults to: <code>[[[</code>
 </property>
 <property name="assertion.equals_diff_delta_end">
     Defaults to: <code>]]]</code>
 </property>
 </properties>
 </section>
 <section name="&sect-num;.37 Miscellaneous configuration" anchor="miscellaneous">
 <properties>
 <property name="monitor.buffer.size">
     To set the Monitor Health Visualiser buffer size, enter the desired value.<br/>
     Defaults to: <code>800</code>
 </property>
 <property name="mirror.server.port">
     If defined and greater then zero, then start the mirror server on the port.<br/>
     Defaults to: <code>0</code>
 </property>
 <property name="oro.patterncache.size">
     ORO PatternCacheLRU size.<br/>
     Defaults to: <code>1000</code>
 </property>
 <property name="propertyEditorSearchPath">
     TestBeanGui<br/>
     Defaults to: <code>null</code>
 </property>
 <property name="jmeter.expertMode">
     Turn expert mode on/off: expert mode will show expert-mode beans and properties.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="httpsampler.max_bytes_to_store_per_request">
     Max size of bytes stored in memory per <code>SampleResult</code>. Ensure that you
     don't exceed the maximum capacity of a Java Array and remember that the higher you
     set this value, the more memory JMeter will consume.<br/>
     Defaults to: <code>10485760</code> bytes
 </property>
 <property name="httpsampler.max_buffer_size">
     Max size of buffer in bytes used when reading responses.<br/>
     Defaults to: <code>66560</code> bytes
 </property>
 <property name="httpsampler.max_redirects">
     Maximum redirects to follow in a single sequence.<br/>
     Defaults to: <code>20</code>
 </property>
 <property name="httpsampler.max_frame_depth">
     Maximum frame/iframe nesting depth.<br/>
     defaults to: <code>5</code>
 </property>
 <property name="httpsampler.separate.container">
     Revert to <bugzilla>51939</bugzilla> behaviour (no separate container for embedded resources)
     by setting the following <code>false</code>.<br/>
     defaults to: <code>true</code>
 </property>
 <property name="httpsampler.ignore_failed_embedded_resources">
     If embedded resources download fails due to missing resources or other reasons,
     if this property is <code>true</code>, Parent sample will not be marked as failed.<br/>
     Defaults to: <code>false</code>
 </property>
 <property name="httpsampler.parallel_download_thread_keepalive_inseconds">
     Keep-alive time for the parallel download threads (in seconds).<br/>
     Defaults to: <code>60</code>
 </property>
 <property name="httpsampler.embedded_resources_use_md5">
     Don't keep the embedded resources response data; just keep the size and the MD5 sum.<br/>
     Defaults to: <code>false</code>
 </property>
 <property name="httpsampler.user_defined_methods">
     List of extra HTTP methods that should be available in select box.<br/>
     Defaults to:
     <source>VERSION-CONTROL,REPORT,CHECKOUT,CHECKIN,UNCHECKOUT,MKWORKSPACE,UPDATE,LABEL,MERGE,BASELINE-CONTROL,MKACTIVITY</source>
 </property>
 <property name="sampleresult.default.encoding">
     The encoding to be used if none is provided.<br/>
     Defaults to: <code>ISO-8859-1</code>
 </property>
 <property name="sampleresult.getbytes.body_real_size">
     Network response size calculation method<br/>
     Use real size: number of bytes for response body returned by webserver
     (i.e. the network bytes received for response). If set to <code>false</code>,
     the (uncompressed) response data size will used (default before version 2.5).<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="sampleresult.getbytes.headers_size">
     Include headers: add the headers size in real size.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="CookieManager.delete_null_cookies">
     CookieManager behaviour - should cookies with null/empty values be deleted?<br/>
     Use <code>false</code> to revert to original behaviour.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="CookieManager.allow_variable_cookies">
     CookieManager behaviour - should variable cookies be allowed?<br/>
     Use <code>false</code> to revert to original behaviour.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="CookieManager.save.cookies">
     CookieManager behaviour - should Cookies be stored as variables?<br/>
     Default to: <code>false</code>
 </property>
 <property name="CookieManager.name.prefix">
     CookieManager behaviour - prefix to add to cookie name before storing it as a variable.<br/>
     Default is COOKIE_; to remove the prefix, define it as one or more spaces.<br/>
     Defaults to: <code>COOKIE_</code></property>
 <property name="CookieManager.check.cookies">
     CookieManager behaviour - check received cookies are valid before storing them?<br/>
     Use <code>false</code> to revert to previous behaviour.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="cookies">
     Netscape HTTP Cookie file.<br/>
     Defaults to: <code>cookies</code>
 </property>
 <property name="javascript.use_rhino">
     Ability to switch to Rhino as default Javascript Engine used by <code>IfController</code>
     and <code>__javaScript</code> function.<br/>
     <note>JMeter uses Nashorn since 3.2 version.
     If you want to use Rhino, set this value to <code>true</code></note>
     Defaults to: <code>false</code>
 </property>
 <property name="jmeterengine.threadstop.wait">
     Number of milliseconds to wait for a thread to stop.<br/>
     Defaults to: <code>5000</code>
 </property>
 <property name="jmeterengine.remote.system.exit">
     Whether to invoke <code>System.exit(0)</code> in server exit code after
     stopping RMI.<br/>
     Defaults to: <code>false</code>
 </property>
 <property name="jmeterengine.stopfail.system.exit">
     Whether to call <code>System.exit(1)</code> on failure to stop threads in
     non-GUI mode.<br/>
     This only takes effect if the test was explicitly requested to stop.<br/>
     If this is disabled, it may be necessary to kill the JVM externally.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="jmeterengine.force.system.exit">
     Whether to force call <code>System.exit(0)</code> at end of test in non-GUI mode,
     even if there were no failures and the test was not explicitly asked to stop.<br/>
     Without this, the JVM may never exit if there are other threads spawned by
     the test which never exit.<br/>
     Defaults to: <code>false</code>
 </property>
 <property name="jmeter.exit.check.pause">
     How long to pause (in ms) in the daemon thread before reporting that the JVM has
     failed to exit.<br/>
     If the value is less than zero, the JMeter does not start the daemon thread<br/>
     Defaults to: <code>2000</code>
 </property>
 <property name="jmeterengine.nongui.port">
     If running non-GUI, then JMeter listens on the following port for a shutdown message.<br/>
     To disable, set the port to <code>1000</code> or less.<br/>
     Defaults to: <code>4445</code>
 </property>
 <property name="jmeterengine.nongui.maxport">
     If the initial port is busy, keep trying until this port is reached
     (to disable searching, set the value less than or equal to the <code>.port</code> property).<br/>
     Defaults to: <code>4455</code>
 </property>
 <property name="jmeterthread.rampup.granularity">
     How often to check for shutdown during ramp-up (milliseconds).<br/>
     Defaults to: <code>1000</code>
 </property>
 <property name="onload.expandtree">
     Should JMeter expand the tree when loading a test plan?<br/>
     Default value is <code>false</code> since JMeter 2.7<br/>
     Defaults to: <code>false</code>
 </property>
 <property name="jsyntaxtextarea.wrapstyleword">
     JSyntaxTextArea configuration.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="jsyntaxtextarea.linewrap">
     Defaults to: <code>true</code>
 </property>
 <property name="jsyntaxtextarea.codefolding">
     Defaults to: <code>true</code>
 </property>
 <property name="jsyntaxtextarea.maxundos">
     Set to zero to disable undo feature in JSyntaxTextArea.<br/>
     Defaults to: <code>50</code>
 </property>
 <property name="jsyntaxtextarea.font.family">
     Change the font on the (JSyntax) Text Areas. (Useful for HiDPI screens).<br/>
     Defaults to empty value, which means platform default monospaced font
 </property>
 <property name="jsyntaxtextarea.font.size">
     Change the size of the (JSyntax) Text Areas. Will be used only,
     when <code>jsyntaxtextarea.font.family</code> is set.<br/>
     Defaults to: <code>-1</code></property>
 <property name="loggerpanel.usejsyntaxtext">
     Set this to <code>false</code> to disable the use of JSyntaxTextArea
     for the Console Logger panel.<br/>
     Defaults to: <code>true</code>
 </property>
 <property name="view.results.tree.update_period">
     Period after which the results tree should be refreshed<br/>
     Defaults to: <code>500</code> millis
 </property>
 <property name="view.results.tree.max_results">
     Maximum number of main samples, that should be stored and displayed.<br/>
     A value of <code>0</code> will store all results. This might consume a lot of memory.<br/>
     Defaults to: <code>500</code>
 </property>
 <property name="view.results.tree.max_size">
     Maximum size (in bytes) of HTML page that can be displayed.<br/>
     Set to zero to disable the size check and display the whole response.<br/>
     Defaults to: <code>10485760</code>
 </property>
 <property name="view.results.tree.renderers_order">
     Order of Renderers in View Results Tree.<br/>
     <note>Note full class names should be used for non JMeter core renderers</note>
     For JMeter core renderers, class names start with <code>.</code> and are automatically
     prefixed with <code>org.apache.jmeter.visualizers</code><br/>
     Defaults to:
     <source>.RenderAsText,.RenderAsRegexp,.RenderAsCssJQuery,.RenderAsXPath,.RenderAsHTML,.RenderAsHTMLWithEmbedded,.RenderAsDocument,.RenderAsJSON,.RenderAsXML</source>
 </property>
 <property name="view.results.tree.refresh_period">
     Interval in <code>ms</code> after which the results should be updated.<br/>
     Defaults to: <code>500</code></property>
 <property name="document.max_size">
     Maximum size (in bytes) of Document that can be parsed by Tika engine<br/>
     Set to zero to disable the size check.<br/>
     Defaults to: <code>10485760</code>
 </property>
 <property name="JMSSampler.useSecurity.properties">
     JMS options.<br/>
     Enable the following property to stop JMS Point-to-Point Sampler from using
     the properties <code>java.naming.security.[principal|credentials]</code> when
     creating the queue connection.<br/>
     Defaults to: <code>false</code>
 </property>
 <property name="confirm.delete.skip">
     Set the following value to <code>true</code> in order to skip the delete
     confirmation dialogue.<br/>
     Defaults to: <code>false</code>
 </property>
 <property name="jsr223.compiled_scripts_cache_size">
     Used by JSR223 elements.<br/>
     Size of compiled scripts cache.<br/>
     Defaults to: <code>100</code></property>
 </properties>
 </section>
 <section name="&sect-num;.38 Classpath configuration" anchor="classpath">
 <properties>
 <property name="search_paths">
     List of directories (separated by <code>;</code>) to search for additional
     JMeter plugin classes, for example new GUI elements and samplers.<br/>
     Any jar file in such a directory will be automatically included; jar files in sub directories are ignored.<br/>
     The given value is in addition to any jars found in the <code>lib/ext</code> directory.<br/>
     Do not use this for utility or plugin dependency jars.<br/>
     Defaults to empty value.
 </property>
 <property name="user.classpath">
     List of directories that JMeter will search for utility and plugin dependency classes.<br/>
     Use your platform path separator to separate multiple paths.<br/>
     Any jar file in such a directory will be automatically included; jar files in sub directories are ignored.<br/>
     The given value is in addition to any jars found in the <code>lib</code> directory.<br/>
     All entries will be added to the class path of the system class loader and also to the path
     of the JMeter internal loader.<br/>
     Paths with spaces may cause problems for the JVM.<br/>
     Defaults to empty value.
 </property>
 <property name="plugin_dependency_paths">
     List of directories (separated by <code>;</code>) that JMeter will search for utility
     and plugin dependency classes.<br/>
     Any jar file in such a directory will be automatically included; jar files in sub directories are ignored.<br/>
     The given value is in addition to any jars found in the <code>lib</code> directory
     or given by the <code>user.classpath</code> property.<br/>
     All entries will be added to the path of the JMeter internal loader only.<br/>
     For plugin dependencies this property should be used instead of <code>user.classpath</code>.<br/>
     Defaults to empty value.
 </property>
 <property name="classfinder.functions.contain">
     The classpath finder currently needs to load every single JMeter class to find the classes it needs.<br/>
     For non-GUI mode, it's only necessary to scan for Function classes, but all classes are still loaded.<br/>
     All current Function classes include "<code>.function.</code>" in their name, and none include
     "<code>.gui.</code>" in the name, so the number of unwanted classes loaded can be reduced by
     checking for these. However, if a valid function class name does not match these restrictions,
     it will not be loaded. If problems are encountered, then comment or change this or the following property.<br/>
